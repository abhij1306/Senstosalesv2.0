[{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\[id]\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowLeft' is defined but never used.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowLeft"},"fix":{"range":[150,160],"text":""},"desc":"Remove unused variable 'ArrowLeft'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowLeft' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[235,247],"text":""},"desc":"Remove unused variable 'Download'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[259,271],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle2"},"fix":{"range":[271,287],"text":""},"desc":"Remove unused variable 'CheckCircle2'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle2' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Layers' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Layers"},"fix":{"range":[287,297],"text":""},"desc":"Remove unused variable 'Layers'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Layers' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[297,309],"text":""},"desc":"Remove unused variable 'Activity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Activity' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Receipt' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Receipt"},"fix":{"range":[309,320],"text":""},"desc":"Remove unused variable 'Receipt'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Receipt' is defined but never used.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":10},{"ruleId":"no-unused-vars","severity":1,"message":"'Printer' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Printer"},"fix":{"range":[320,331],"text":""},"desc":"Remove unused variable 'Printer'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Printer' is defined but never used.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":10},{"ruleId":"no-unused-vars","severity":1,"message":"'Edit' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Edit"},"fix":{"range":[331,339],"text":""},"desc":"Remove unused variable 'Edit'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Edit' is defined but never used.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[518,524],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":29,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":8},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":199,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":199,"endColumn":65},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":538,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":538,"endColumn":75}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, Suspense, useCallback } from \"react\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport {\n  ArrowLeft,\n  Edit2,\n  Save,\n  X,\n  FileText,\n  Plus,\n  Trash2,\n  Truck,\n  AlertCircle,\n  Download,\n  FileDown,\n  Calendar,\n  CheckCircle2,\n  Layers,\n  Activity,\n  Receipt,\n  Printer,\n  Edit,\n} from \"lucide-react\";\nimport { api, API_BASE_URL } from \"@/lib/api\";\nimport { formatDate } from \"@/lib/utils\";\nimport { DCItemRow as DCItemRowType } from \"@/types\";\nimport {\n  Badge,\n  H3,\n  Body,\n  SmallText,\n  Label,\n  Accounting,\n  Button,\n  Input,\n  Card,\n} from \"@/components/design-system/organisms\";\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport {\n  Tabs,\n  TabsList,\n  TabsTrigger,\n  TabsContent,\n} from \"@/components/design-system/molecules/Tabs\";\nimport { type Column } from \"@/components/design-system/organisms/DataTable\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport dynamic from \"next/dynamic\";\nimport { DetailSkeleton } from \"@/components/design-system/molecules/skeletons/DetailSkeleton\";\n\nconst DataTable = dynamic(\n  () => import(\"@/components/design-system/organisms/DataTable\").then((mod) => mod.DataTable),\n  {\n    loading: () => <div className=\"h-64 w-full bg-[var(--color-sys-bg-tertiary)]/50 rounded-xl animate-pulse\" />,\n    ssr: false,\n  }\n);\n\nconst DocumentJourney = dynamic(\n  () =>\n    import(\"@/components/design-system/molecules/DocumentJourney\").then(\n      (mod) => mod.DocumentJourney\n    ),\n  {\n    loading: () => <div className=\"h-6 w-48 bg-[var(--color-sys-bg-tertiary)] rounded-full animate-pulse\" />,\n    ssr: false,\n  }\n);\n\nfunction DCDetailContent() {\n  const router = useRouter();\n  const params = useParams();\n  const dcId = params.id as string;\n\n  const [loading, setLoading] = useState(true);\n  const [editMode, setEditMode] = useState(false);\n  const [hasInvoice, setHasInvoice] = useState(false);\n  const [invoiceNumber, setInvoiceNumber] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [items, setItems] = useState<DCItemRowType[]>([]);\n  const [notes, setNotes] = useState<string[]>([]);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n\n  const [formData, setFormData] = useState({\n    dc_number: \"\",\n    dc_date: \"\",\n    po_number: \"\",\n    supplier_phone: \"0755 ΓÇô 4247748\",\n    supplier_gstin: \"23AACFS6810L1Z7\",\n    consignee_name: \"The Sr. Manager (CRX)\",\n    consignee_address: \"M/S Bharat Heavy Eletrical Ltd. Bhopal\",\n    department_no: \"\",\n    eway_bill_number: \"\",\n    status: \"\",\n    statusVariant: undefined as any,\n  });\n  const [activeTab, setActiveTab] = useState(\"basic\");\n\n  useEffect(() => {\n    if (!dcId) return;\n    let isMounted = true;\n    const loadDCData = async () => {\n      try {\n        const [data, invoiceData] = await Promise.all([\n          api.getDCDetail(dcId),\n          api.checkDCHasInvoice(dcId),\n        ]);\n\n        if (!isMounted) return;\n\n        if (data.header) {\n          setFormData({\n            dc_number: data.header.dc_number || \"\",\n            dc_date: data.header.dc_date || \"\",\n            po_number: data.header.po_number?.toString() || \"\",\n            supplier_phone: data.header.supplier_phone || \"0755 ΓÇô 4247748\",\n            supplier_gstin: data.header.supplier_gstin || \"23AACFS6810L1Z7\",\n            consignee_name: data.header.consignee_name || \"The Sr. Manager (CRX)\",\n            consignee_address:\n              data.header.consignee_address || \"M/S Bharat Heavy Eletrical Ltd. Bhopal\",\n            department_no: data.header.department_no?.toString() || \"\",\n            eway_bill_number: data.header.eway_bill_no || \"\",\n            status: data.header.status || \"Pending\",\n            statusVariant: undefined as any,\n          });\n          if (data.items) {\n            setItems(\n              data.items.map((item: any, idx: number) => ({\n                id: `item-${idx}`,\n                lot_no: item.lot_no?.toString() || (idx + 1).toString(),\n                material_code: item.material_code || \"\",\n                description: item.material_description || item.description || \"\",\n                ordered_quantity: item.lot_ordered_qty || item.ordered_qty || 0,\n                remaining_post_dc: item.remaining_post_dc || 0,\n                dispatch_quantity: item.dispatched_quantity || item.dispatch_qty || item.dispatch_quantity || 0,\n                received_quantity: item.received_quantity || 0,\n                po_item_id: item.po_item_id,\n              }))\n            );\n          }\n          if (data.header.remarks) setNotes(data.header.remarks.split(\"\\n\\n\"));\n        }\n\n        if (invoiceData?.has_invoice) {\n          setHasInvoice(true);\n          setInvoiceNumber(invoiceData.invoice_number || null);\n        }\n      } catch (err: any) {\n        if (isMounted) setError(err.message || \"Failed to load DC\");\n      } finally {\n        if (isMounted) setLoading(false);\n      }\n    };\n    loadDCData();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [dcId]);\n\n  const handleSave = useCallback(async () => {\n    setLoading(true);\n    try {\n      await api.updateDC(dcId!, formData, items);\n      setEditMode(false);\n    } catch (err: any) {\n      setError(err.message || \"Failed to save\");\n    } finally {\n      setLoading(false);\n    }\n  }, [dcId, formData, items]);\n\n  const handleDelete = async () => {\n    setLoading(true);\n    try {\n      await api.deleteDC(dcId!);\n      router.push(\"/dc\");\n    } catch (err: any) {\n      setError(err.message || \"Failed to delete DC\");\n      setShowDeleteConfirm(false);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const itemColumns: Column<any>[] = [\n    {\n      key: \"material_code\",\n      label: \"Code\",\n      width: \"10%\",\n      render: (v) => <Accounting className=\"font-mono\">{v}</Accounting>,\n    },\n    {\n      key: \"description\",\n      label: \"Description\",\n      width: \"35%\",\n      render: (_v, row) => (\n        <div className=\"space-y-0.5\">\n          <Body className=\"text-[var(--color-sys-text-primary)]\">{row.description}</Body>\n          {row.drg_no && (\n            <SmallText className=\"text-sys-brand\">\n              DRG: {row.drg_no}\n            </SmallText>\n          )}\n        </div>\n      ),\n    },\n    {\n      key: \"ordered_quantity\",\n      label: \"Ord\",\n      align: \"right\",\n      width: \"8%\",\n      render: (v) => <Accounting className=\"text-right\">{v}</Accounting>,\n    },\n    {\n      key: \"dispatch_quantity\",\n      label: \"Dlv\",\n      align: \"right\",\n      width: \"8%\",\n      render: (v, row, idx) => {\n        if (editMode && idx !== undefined) {\n          return (\n            <Input\n              type=\"number\"\n              value={v || \"\"}\n              onChange={(e) => {\n                const newItems = [...items];\n                newItems[idx].dispatch_quantity = parseFloat(e.target.value) || 0;\n                setItems(newItems);\n              }}\n              className=\"text-right max-w-[80px] ml-auto h-8 px-2 font-mono text-sys-brand border-sys-error-subtle focus:border-blue-500\"\n            />\n          );\n        }\n        return (\n          <Accounting className=\"text-sys-brand text-right block font-mono\">\n            {v}\n          </Accounting>\n        );\n      },\n    },\n    {\n      key: \"remaining_post_dc\",\n      label: \"Bal\",\n      align: \"right\",\n      width: \"8%\",\n      render: (v) => <Accounting className=\"text-right block font-mono\">{v}</Accounting>,\n    },\n    {\n      key: \"received_quantity\",\n      label: \"Rec\",\n      align: \"right\",\n      width: \"8%\",\n      render: (v) => (\n        <Accounting className=\"text-sys-success text-right block font-mono\">\n          {v}\n        </Accounting>\n      ),\n    },\n  ];\n\n  const topActions = (\n    <div className=\"flex gap-3\">\n      {!editMode ? (\n        <>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            asChild\n            className=\"text-emerald-700 border-emerald-200 bg-emerald-50 hover:bg-emerald-100 hover:text-emerald-800\"\n          >\n            <a href={`${API_BASE_URL}/api/dc/${dcId}/download`} target=\"_blank\" rel=\"noreferrer\">\n              <FileDown size={16} className=\"mr-2\" />\n              Excel\n            </a>\n          </Button>\n          {hasInvoice && (\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={() => router.push(`/invoice/${encodeURIComponent(invoiceNumber!)}`)}\n            >\n              <FileText size={16} />\n              View Invoice\n            </Button>\n          )}\n          {!hasInvoice && (\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={() => router.push(`/invoice/create?dc=${dcId}`)}\n            >\n              <Plus size={16} />\n              Create Invoice\n            </Button>\n          )}\n          <Button variant=\"default\" size=\"sm\" onClick={() => setEditMode(true)}>\n            <Edit2 size={16} />\n            Edit\n          </Button>\n          {!hasInvoice && (\n            <Button variant=\"destructive\" size=\"sm\" onClick={() => setShowDeleteConfirm(true)}>\n              <Trash2 size={16} />\n              Delete\n            </Button>\n          )}\n        </>\n      ) : (\n        <>\n          <Button variant=\"ghost\" size=\"sm\" onClick={() => setEditMode(false)}>\n            <X size={16} />\n            Cancel\n          </Button>\n          <Button variant=\"default\" size=\"sm\" onClick={handleSave}>\n            <Save size={16} />\n            Save\n          </Button>\n        </>\n      )}\n    </div>\n  );\n\n  if (loading || !formData.dc_number) {\n    return <DetailSkeleton />;\n  }\n\n  return (\n    <DocumentTemplate\n      title={`DC #${formData.dc_number}`}\n      description={`${formData.consignee_name} ΓÇó ${formatDate(formData.dc_date)}`}\n      actions={topActions}\n      onBack={() => router.back()}\n      layoutId={`dc-title-${formData.dc_number}`}\n      icon={<Truck size={20} className=\"text-emerald-700\" />}\n      iconLayoutId={`dc-icon-${formData.dc_number}`}\n      status={formData.status}\n      statusVariant={formData.statusVariant}\n    >\n      <div className=\"space-y-6\">\n        <DocumentJourney currentStage=\"DC\" className=\"mb-2\" />\n\n        {error && (\n          <Card className=\"p-4 bg-sys-error-subtle border-sys-error-subtle\">\n            <div className=\"flex items-center gap-2 text-sys-error\">\n              <AlertCircle size={16} />\n              <SmallText className=\"font-semibold text-sys-error\">{error}</SmallText>\n            </div>\n          </Card>\n        )}\n\n        {/* Delete Confirmation Dialog */}\n        {showDeleteConfirm && (\n          <Card className=\"p-6 bg-red-50 border-sys-error-subtle\">\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"p-2 bg-sys-error-subtle rounded-full\">\n                  <Trash2 size={20} className=\"text-sys-error\" />\n                </div>\n                <div>\n                  <H3 className=\"text-h3 text-slate-950\">\n                    Delete Delivery Challan?\n                  </H3>\n                  <SmallText className=\"text-slate-500 mt-1 block\">\n                    This action cannot be undone. The DC and all its items will be permanently\n                    deleted.\n                  </SmallText>\n                </div>\n              </div>\n              <div className=\"flex gap-3 justify-end\">\n                <Button variant=\"outline\" size=\"sm\" onClick={() => setShowDeleteConfirm(false)}>\n                  Cancel\n                </Button>\n                <Button variant=\"destructive\" size=\"sm\" onClick={handleDelete}>\n                  <Trash2 size={16} />\n                  Delete DC\n                </Button>\n              </div>\n            </div>\n          </Card>\n        )}\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"mb-4 bg-transparent p-0 border-b border-[var(--color-sys-text-tertiary)]/10\">\n            <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\n            <TabsTrigger value=\"supplier\">Supplier</TabsTrigger>\n            <TabsTrigger value=\"consignee\">Consignee</TabsTrigger>\n          </TabsList>\n\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={activeTab}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.15 }}\n            >\n              <Card className=\"p-6 mt-0 border-none shadow-sm bg-[var(--color-sys-bg-surface)]/50 backdrop-blur-sm relative top-[-1px]\">\n                <TabsContent value=\"basic\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label>DC Number</Label>\n                      <Input value={formData.dc_number} readOnly className=\"bg-[var(--color-sys-bg-tertiary)]/50\" />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>DC Date</Label>\n                      <Input\n                        type=\"date\"\n                        value={formData.dc_date}\n                        onChange={(e) => setFormData({ ...formData, dc_date: e.target.value })}\n                        readOnly={!editMode}\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>PO Number</Label>\n                      <Input\n                        value={formData.po_number}\n                        readOnly\n                        className=\"bg-[var(--color-sys-bg-tertiary)]/50 cursor-pointer\"\n                        onClick={() => router.push(`/po/${formData.po_number}`)}\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Department No</Label>\n                      <Input\n                        value={formData.department_no}\n                        onChange={(e) =>\n                          setFormData({\n                            ...formData,\n                            department_no: e.target.value,\n                          })\n                        }\n                        readOnly={!editMode}\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>E-Way Bill Number</Label>\n                      <Input\n                        value={formData.eway_bill_number}\n                        onChange={(e) =>\n                          setFormData({\n                            ...formData,\n                            eway_bill_number: e.target.value,\n                          })\n                        }\n                        readOnly={!editMode}\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"supplier\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label>Supplier Phone</Label>\n                      <Input\n                        value={formData.supplier_phone}\n                        onChange={(e) =>\n                          setFormData({\n                            ...formData,\n                            supplier_phone: e.target.value,\n                          })\n                        }\n                        readOnly={!editMode}\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Supplier GSTIN</Label>\n                      <Input\n                        value={formData.supplier_gstin}\n                        onChange={(e) =>\n                          setFormData({\n                            ...formData,\n                            supplier_gstin: e.target.value,\n                          })\n                        }\n                        readOnly={!editMode}\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"consignee\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label>Consignee Name</Label>\n                      <Input\n                        value={formData.consignee_name}\n                        onChange={(e) =>\n                          setFormData({\n                            ...formData,\n                            consignee_name: e.target.value,\n                          })\n                        }\n                        readOnly={!editMode}\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Consignee Address</Label>\n                      <Input\n                        value={formData.consignee_address}\n                        onChange={(e) =>\n                          setFormData({\n                            ...formData,\n                            consignee_address: e.target.value,\n                          })\n                        }\n                        readOnly={!editMode}\n                        className=\"min-h-[60px]\"\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n              </Card>\n            </motion.div>\n          </AnimatePresence>\n        </Tabs>\n\n        {/* Items Table */}\n        <div className=\"space-y-2\">\n          <H3 className=\"px-1 text-sys-secondary uppercase\">\n            Dispatched Items ({items.length})\n          </H3>\n          <DataTable columns={itemColumns} data={items} keyField=\"id\" density=\"compact\" />\n        </div>\n\n        {/* Notes */}\n        {notes.length > 0 && (\n          <Card className=\"p-6 border-none shadow-sm bg-[var(--color-sys-bg-secondary)]/30\">\n            <H3 className=\"mb-4 text-sys-secondary uppercase\">\n              Notes\n            </H3>\n            <div className=\"space-y-2\">\n              {notes.map((note, idx) => (\n                <div\n                  key={`note-${idx}`}\n                  className=\"p-3 bg-[var(--color-sys-bg-surface)]/50 rounded-lg border border-[var(--color-sys-bg-tertiary)] italic\"\n                >\n                  <Body className=\"text-[var(--color-sys-text-secondary)]\">{note}</Body>\n                </div>\n              ))}\n            </div>\n          </Card>\n        )}\n      </div>\n    </DocumentTemplate>\n  );\n}\n\nexport default function DCDetailPage() {\n  return (\n    <Suspense fallback={<DetailSkeleton />}>\n      <DCDetailContent />\n    </Suspense>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\create\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useCallback' is defined but never used.","line":3,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCallback"},"fix":{"range":[53,66],"text":""},"desc":"Remove unused variable 'useCallback'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useCallback' is defined but never used.","line":3,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":52},{"ruleId":"no-unused-vars","severity":1,"message":"'Tabs' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tabs"},"fix":{"range":[900,905],"text":""},"desc":"Remove unused variable 'Tabs'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tabs' is defined but never used.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'TabsList' is defined but never used.","line":24,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"TabsList"},"fix":{"range":[904,916],"text":""},"desc":"Remove unused variable 'TabsList'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TabsList' is defined but never used.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'TabsTrigger' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"TabsTrigger"},"fix":{"range":[916,931],"text":""},"desc":"Remove unused variable 'TabsTrigger'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TabsTrigger' is defined but never used.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'TabsContent' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"TabsContent"},"fix":{"range":[931,946],"text":""},"desc":"Remove unused variable 'TabsContent'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TabsContent' is defined but never used.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":111,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":111,"endColumn":20,"suggestions":[{"fix":{"range":[4025,4044],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":167,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":167,"endColumn":20,"suggestions":[{"fix":{"range":[5937,5979],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":493,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":493,"endColumn":88}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, Suspense, useCallback } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { Save, Search, AlertCircle, Loader2, Plus, Trash2, Truck, Calendar } from \"lucide-react\";\nimport { api } from \"@/lib/api\";\nimport { cn } from \"@/lib/utils\";\nimport { DCItemRow, POHeader } from \"@/types\";\nimport {\n  H3,\n  Label,\n  SmallText,\n  Body,\n  Accounting,\n} from \"@/components/design-system/organisms\";\nimport { DocumentJourney } from \"@/components/design-system/molecules/DocumentJourney\";\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Badge } from \"@/components/design-system/organisms\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport { Card } from \"@/components/design-system/organisms\";\nimport {\n  Tabs,\n  TabsList,\n  TabsTrigger,\n  TabsContent,\n} from \"@/components/design-system/molecules/Tabs\";\n\nfunction CreateDCPageContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const initialPoNumber = searchParams ? searchParams.get(\"po\") : \"\";\n\n  const [poNumber, setPONumber] = useState(initialPoNumber || \"\");\n  const [items, setItems] = useState<DCItemRow[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [poData, setPOData] = useState<POHeader | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [notes, setNotes] = useState<string[]>([]);\n  const [isChecking, setIsChecking] = useState(false);\n  const [isDuplicate, setIsDuplicate] = useState(false);\n  const [conflictType, setConflictType] = useState<string | null>(null);\n  const [debounceTimer, setDebounceTimer] = useState<NodeJS.Timeout | null>(null);\n\n  const [formData, setFormData] = useState({\n    dc_number: \"\",\n    dc_date: new Date().toISOString().split(\"T\")[0],\n    supplier_phone: \"0755 ΓÇô 4247748\",\n    supplier_gstin: \"23AACFS6810L1Z7\",\n    consignee_name: \"\",\n    consignee_address: \"\",\n  });\n\n  useEffect(() => {\n    if (initialPoNumber) {\n      loadInitialData(initialPoNumber);\n    }\n  }, [initialPoNumber]);\n\n  const loadInitialData = async (po: string) => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const [lots, pod] = await Promise.all([\n        api.getReconciliationLots(parseInt(po)),\n        api.getPODetail(parseInt(po)),\n      ]);\n\n      // Process Lots\n      const lotsData = Array.isArray(lots) ? lots : (lots as any)?.lots || [];\n      const mappedItems: DCItemRow[] = lotsData.map((lot: any) => ({\n        id: `${lot.po_item_id}-${lot.lot_no}`,\n        lot_no: lot.lot_no?.toString() || \"\",\n        description: lot.material_description || \"\",\n        drg_no: lot.drg_no || \"\",\n        ordered_quantity: lot.ordered_qty || 0,\n        remaining_post_dc: lot.remaining_qty || 0,\n        dispatch_quantity: 0,\n        po_item_id: lot.po_item_id,\n      }));\n      setItems(mappedItems);\n      if (mappedItems.length === 0) setError(\"No items available for dispatch\");\n\n      // Process PO Data\n      if (pod?.header) {\n        setPOData(pod.header);\n        setFormData((prev) => ({\n          ...prev,\n          consignee_name: (pod.header as any)?.consignee_name || \"\",\n          consignee_address: (pod.header as any)?.consignee_address || \"\",\n          supplier_phone: pod.header?.supplier_phone || \"0755 ΓÇô 4247748\",\n          supplier_gstin: pod.header?.supplier_gstin || \"23AACFS6810L1Z7\",\n        }));\n      }\n    } catch (err: any) {\n      setError(err.message || \"Failed to load initial data\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const checkNumberDuplicate = async (num: string, date: string) => {\n    if (!num || num.trim() === \"\") return;\n    setIsChecking(true);\n    try {\n      const res = await api.checkDuplicateNumber(\"DC\", num, date);\n      setIsDuplicate(res.exists);\n      setConflictType(res.conflict_type || null);\n    } catch (err) {\n      console.error(err);\n      // If check fails, don't block user (fail open)\n      setIsDuplicate(false);\n      setConflictType(null);\n    } finally {\n      setIsChecking(false);\n    }\n  };\n\n  const handleLoadItems = (po: string) => {\n    if (!po) return;\n    loadInitialData(po);\n  };\n\n  const handleSubmit = async () => {\n    setError(null);\n    setIsSubmitting(true);\n\n    // Final client-side validation for quantities\n    for (const item of items) {\n      if (item.dispatch_quantity && item.dispatch_quantity > (item.remaining_post_dc || 0) + 0.001) {\n        setError(`Item Lot ${item.lot_no}: Dispatch quantity (${item.dispatch_quantity}) exceeds remaining balance (${item.remaining_post_dc})`);\n        setIsSubmitting(false);\n        return;\n      }\n    }\n\n    const itemsToDispatch = items.filter(\n      (item) => item.dispatch_quantity && item.dispatch_quantity > 0\n    );\n    if (itemsToDispatch.length === 0) {\n      setError(\"At least one item must have dispatch quantity\");\n      setIsSubmitting(false);\n      return;\n    }\n    try {\n      const dcPayload = {\n        dc_number: formData.dc_number,\n        dc_date: formData.dc_date,\n        po_number: poNumber ? parseInt(poNumber) : undefined,\n        supplier_phone: formData.supplier_phone,\n        supplier_gstin: formData.supplier_gstin,\n        consignee_name: formData.consignee_name,\n        consignee_address: formData.consignee_address,\n        remarks: notes.join(\"\\n\\n\"),\n      };\n      const itemsPayload = itemsToDispatch.map((item) => ({\n        po_item_id: item.po_item_id,\n        lot_no: item.lot_no ? parseInt(item.lot_no.toString()) : undefined,\n        dispatch_qty: item.dispatch_quantity,\n        hsn_code: null,\n        hsn_rate: null,\n      }));\n      const response = (await api.createDC(dcPayload, itemsPayload)) as any;\n      router.push(`/dc/${response.dc_number || formData.dc_number}`);\n    } catch (err: any) {\n      console.error(\"DC creation failed:\", err);\n      // Handle Pydantic 422 errors specifically to show something readable\n      if (err.status === 422 && Array.isArray(err.data?.detail)) {\n        const details = err.data.detail.map((d: any) => `${d.loc.join(\".\")}: ${d.msg}`).join(\", \");\n        setError(`Validation Error: ${details}`);\n      } else if (err.data?.message) {\n        // Handle structured application errors (AppException)\n        setError(err.data.message);\n      } else {\n        const msg =\n          typeof err.message === \"object\"\n            ? JSON.stringify(err.message)\n            : err.message || \"Failed to create challan\";\n        setError(msg);\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const topActions = (\n    <div className=\"flex items-center gap-2\">\n      <Button variant=\"outline\" size=\"sm\" onClick={() => router.back()} disabled={isSubmitting}>\n        Cancel\n      </Button>\n      <Button\n        color=\"primary\"\n        size=\"sm\"\n        onClick={handleSubmit}\n        disabled={\n          isSubmitting || items.length === 0 || isDuplicate || isChecking || !formData.dc_number\n        }\n      >\n        {isSubmitting ? (\n          <Loader2 size={16} className=\"animate-spin mr-2\" />\n        ) : (\n          <Save size={16} className=\"mr-2\" />\n        )}\n        {isSubmitting ? \"Generating...\" : \"Generate Challan\"}\n      </Button>\n    </div>\n  );\n\n  return (\n    <DocumentTemplate\n      title=\"Create Delivery Challan\"\n      description=\"Generate dispatch documentation from PO\"\n      actions={topActions}\n      icon={<Truck size={20} className=\"text-emerald-700\" />}\n      iconLayoutId=\"create-dc-icon\"\n    >\n      <div className=\"mb-6\">\n        <DocumentJourney currentStage=\"DC\" />\n      </div>\n\n      <div className=\"space-y-6\">\n        {error && (\n          <Card className=\"p-4 bg-red-50 border-red-100\">\n            <div className=\"flex items-center gap-2 text-red-600\">\n              <AlertCircle size={16} />\n              <SmallText className=\"font-medium\">{error}</SmallText>\n            </div>\n          </Card>\n        )}\n\n        {/* PO Selection */}\n        {!initialPoNumber && (\n          <Card className=\"p-6\">\n            <Label className=\"text-h4 uppercase text-sys-secondary mb-2 block\">\n              Purchase Order Reference\n            </Label>\n            <div className=\"flex gap-3 mt-1\">\n              <div className=\"flex-1\">\n                <Input\n                  id=\"search-po-number\"\n                  name=\"search-po-number\"\n                  value={poNumber}\n                  onChange={(e) => setPONumber(e.target.value)}\n                  placeholder=\"Enter PO number\"\n                  className=\"font-medium text-slate-930\"\n                />\n              </div>\n              <Button\n                variant=\"secondary\"\n                onClick={() => handleLoadItems(poNumber)}\n                disabled={!poNumber || isLoading}\n              >\n                {isLoading ? (\n                  <Loader2 size={16} className=\"animate-spin mr-2\" />\n                ) : (\n                  <Search size={16} className=\"mr-2\" />\n                )}\n                {isLoading ? \"Loading...\" : \"Load Items\"}\n              </Button>\n            </div>\n            {poData && (\n              <div className=\"mt-4 p-4 bg-slate-50/50 rounded-xl border border-slate-100 flex items-center justify-between\">\n                <div className=\"flex flex-col\">\n                  <Label className=\"text-h4 uppercase text-sys-tertiary\">\n                    Supplier\n                  </Label>\n                  <Body className=\"text-sys-primary\">{poData.supplier_name}</Body>\n                </div>\n                <Badge\n                  variant=\"outline\"\n                  className=\"bg-white text-sys-secondary border-slate-200\"\n                >\n                  PO #{poData.po_number}\n                </Badge>\n              </div>\n            )}\n          </Card>\n        )}\n\n        {/* Challan Details */}\n        <Card className=\"p-6\">\n          <H3 className=\"mb-6 text-slate-950\">Challan Information</H3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6\">\n            <div className=\"space-y-1.5\">\n              <Label className=\"text-h4 uppercase text-sys-secondary\">\n                DC Number\n              </Label>\n              <Input\n                id=\"dc-number\"\n                name=\"dc-number\"\n                value={formData.dc_number}\n                onChange={(e) => {\n                  const val = e.target.value;\n                  setFormData({ ...formData, dc_number: val });\n\n                  // Clear existing timer\n                  if (debounceTimer) clearTimeout(debounceTimer);\n\n                  // Debounce the duplicate check (500ms delay)\n                  const timer = setTimeout(() => {\n                    checkNumberDuplicate(val, formData.dc_date);\n                  }, 500);\n\n                  setDebounceTimer(timer);\n                }}\n                className={cn(\n                  \"font-medium tabular-nums\",\n                  isDuplicate\n                    ? \"border-red-500 text-red-600 focus:ring-red-500/10\"\n                    : \"text-slate-930\"\n                )}\n                placeholder=\"DC/001/24-25\"\n              />\n              {isChecking && (\n                <SmallText className=\"text-slate-400 animate-pulse\">\n                  Checking uniqueness...\n                </SmallText>\n              )}\n              {isDuplicate && (\n                <SmallText className=\"text-red-500 font-medium\">\n                  {conflictType === \"Invoice\"\n                    ? `ΓÜá∩╕Å Invoice #${formData.dc_number} already exists in this FY`\n                    : `This DC number already exists in this FY`}\n                </SmallText>\n              )}\n\n            </div>\n            <div className=\"space-y-1.5\">\n              <Label className=\"text-h4 uppercase text-sys-secondary\">\n                DC Date\n              </Label>\n              <div className=\"bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm focus-within:ring-2 focus-within:ring-blue-500/10 transition-all flex items-center gap-2\">\n                <Calendar size={14} className=\"text-blue-600\" />\n                <Input\n                  id=\"dc-date\"\n                  name=\"dc-date\"\n                  type=\"date\"\n                  value={formData.dc_date}\n                  onChange={(e) => setFormData({ ...formData, dc_date: e.target.value })}\n                  className=\"font-bold text-slate-800 bg-transparent border-none p-0 focus:ring-0 cursor-pointer text-sm\"\n                />\n              </div>\n            </div>\n            <div className=\"space-y-1.5\">\n              <Label className=\"text-h4 uppercase text-sys-secondary\">\n                Supplier Phone\n              </Label>\n              <Input\n                id=\"supplier-phone\"\n                name=\"supplier-phone\"\n                value={formData.supplier_phone}\n                onChange={(e) => setFormData({ ...formData, supplier_phone: e.target.value })}\n                className=\"font-medium text-slate-930\"\n              />\n            </div>\n            <div className=\"space-y-1.5\">\n              <Label className=\"text-h4 uppercase text-sys-secondary\">\n                Supplier GSTIN\n              </Label>\n              <Input\n                id=\"supplier-gstin\"\n                name=\"supplier-gstin\"\n                value={formData.supplier_gstin}\n                onChange={(e) => setFormData({ ...formData, supplier_gstin: e.target.value })}\n                className=\"font-medium text-sys-primary\"\n              />\n            </div>\n            <div className=\"space-y-1.5\">\n              <Label className=\"text-h4 uppercase text-sys-secondary\">\n                Consignee Name\n              </Label>\n              <Input\n                id=\"consignee-name\"\n                name=\"consignee-name\"\n                value={formData.consignee_name}\n                onChange={(e) => setFormData({ ...formData, consignee_name: e.target.value })}\n                className=\"font-medium text-sys-primary\"\n              />\n            </div>\n            <div className=\"space-y-1.5\">\n              <Label className=\"text-h4 uppercase text-sys-secondary\">\n                Consignee Address\n              </Label>\n              <textarea\n                id=\"consignee-address\"\n                name=\"consignee-address\"\n                value={formData.consignee_address}\n                onChange={(e) =>\n                  setFormData({\n                    ...formData,\n                    consignee_address: e.target.value,\n                  })\n                }\n                className=\"w-full px-3 py-2 text-sys-primary bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-950/10 focus:border-slate-300 resize-none transition-all\"\n                rows={2}\n              />\n            </div>\n          </div>\n        </Card>\n\n        {/* Items Table */}\n        {items.length > 0 && (\n          <Card className=\"p-0 overflow-hidden border-none shadow-sm\">\n            <div className=\"px-6 py-4 bg-slate-50/50 border-b border-slate-100 flex items-center justify-between\">\n              <H3 className=\"font-medium text-slate-950 text-sm\">\n                Dispatch Items ({items.length})\n              </H3>\n            </div>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-slate-100 bg-slate-50/30\">\n                    <th className=\"py-3 px-6 text-left\">\n                      <Label className=\"text-h4 uppercase text-sys-tertiary\">\n                        Lot\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-left\">\n                      <Label className=\"text-h4 uppercase text-sys-tertiary\">\n                        Description\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label className=\"text-h4 uppercase text-sys-tertiary\">\n                        Ord\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label className=\"text-h4 uppercase text-sys-tertiary\">\n                        Bal\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label className=\"text-h4 uppercase text-sys-tertiary\">\n                        Dlv Qty\n                      </Label>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {items.map((item, idx) => (\n                    <tr\n                      key={item.id}\n                      className=\"border-b border-slate-50 hover:bg-slate-50/20 transition-colors\"\n                    >\n                      <td className=\"py-4 px-6\">\n                        <Accounting className=\"text-sys-primary text-center block\">\n                          {item.lot_no}\n                        </Accounting>\n                      </td>\n                      <td className=\"py-4 px-6\">\n                        <div className=\"flex flex-col\">\n                          <Body className=\"text-slate-950 leading-normal\">\n                            {item.description}\n                          </Body>\n                          {item.drg_no && (\n                            <span className=\"text-h4 uppercase text-sys-tertiary mt-0.5\">\n                              DRG: {item.drg_no}\n                            </span>\n                          )}\n                        </div>\n                      </td>\n                      <td className=\"py-4 px-6 text-right\">\n                        <Accounting className=\"text-sys-secondary text-right block\">\n                          {item.ordered_quantity}\n                        </Accounting>\n                      </td>\n                      <td className=\"py-4 px-6 text-right\">\n                        <Accounting className=\"text-sys-secondary text-right block\">\n                          {item.remaining_post_dc}\n                        </Accounting>\n                      </td>\n                      <td className=\"py-4 px-6\">\n                        <div className=\"flex flex-col items-end gap-1\">\n                          <Input\n                            type=\"number\"\n                            value={item.dispatch_quantity || \"\"}\n                            onChange={(e) => {\n                              const newItems = [...items];\n                              newItems[idx].dispatch_quantity = parseFloat(e.target.value) || 0;\n                              setItems(newItems);\n                            }}\n                            className={cn(\n                              \"text-right max-w-[100px] ml-auto font-mono h-9 transition-all\",\n                              (item.dispatch_quantity || 0) > (item.remaining_post_dc || 0) + 0.001\n                                ? \"border-red-500 text-red-600 focus:ring-red-500/10 bg-red-50/30\"\n                                : \"border-slate-200 focus:ring-slate-950/5\"\n                            )}\n                            placeholder=\"0\"\n                          />\n                          {(item.dispatch_quantity || 0) > (item.remaining_post_dc || 0) + 0.001 && (\n                            <SmallText className=\"text-red-500 font-medium text-[10px]\">\n                              Exceeds bal\n                            </SmallText>\n                          )}\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </Card>\n        )}\n\n        {/* Notes */}\n        <Card className=\"p-6\">\n          <Label className=\"text-h4 uppercase text-sys-secondary mb-4 block\">\n            Additional Notes\n          </Label>\n          <div className=\"space-y-3\">\n            {notes.map((note, idx) => (\n              <div key={`lot-${idx}`} className=\"flex gap-2\">\n                <Input\n                  value={note}\n                  onChange={(e) => {\n                    const newNotes = [...notes];\n                    newNotes[idx] = e.target.value;\n                    setNotes(newNotes);\n                  }}\n                  placeholder=\"Enter additional information...\"\n                  className=\"font-medium text-slate-930\"\n                />\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setNotes(notes.filter((_, i) => i !== idx))}\n                  className=\"text-slate-400 hover:text-red-600\"\n                >\n                  <Trash2 size={16} />\n                </Button>\n              </div>\n            ))}\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setNotes([...notes, \"\"])}\n              className=\"border-dashed border-2 hover:border-slate-300\"\n            >\n              <Plus size={16} className=\"mr-2\" />\n              Add Line Note\n            </Button>\n          </div>\n        </Card>\n      </div>\n    </DocumentTemplate>\n  );\n}\n\nexport default function CreateDCPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"p-32 text-center\">\n          <Body className=\"text-slate-400 animate-pulse\">Loading template...</Body>\n        </div>\n      }\n    >\n      <CreateDCPageContent />\n    </Suspense>\n  );\n}\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":6,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[177,184],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":6,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":41},{"ruleId":"no-unused-vars","severity":1,"message":"'Layers' is defined but never used.","line":6,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"Layers"},"fix":{"range":[194,202],"text":""},"desc":"Remove unused variable 'Layers'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Layers' is defined but never used.","line":6,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":59},{"ruleId":"no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[236,275],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'motion' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'Input' is defined but never used.","line":14,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Input"},"fix":{"range":[701,762],"text":""},"desc":"Remove unused variable 'Input'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Input' is defined but never used.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Stack' is defined but never used.","line":20,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"Stack"},"fix":{"range":[1118,1125],"text":""},"desc":"Remove unused variable 'Stack'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used.","line":20,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'Box' is defined but never used.","line":20,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"Box"},"fix":{"range":[1125,1130],"text":""},"desc":"Remove unused variable 'Box'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Box' is defined but never used.","line":20,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":26},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":31,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":31,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":43,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":43,"endColumn":62},{"ruleId":"no-unused-vars","severity":1,"message":"'dc' is defined but never used.","line":53,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":53,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"dc"},"fix":{"range":[1933,1937],"text":""},"desc":"Remove unused variable 'dc'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dc' is defined but never used.","line":53,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":55,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":55,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":78,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":78,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":90,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":90,"endColumn":96},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":149,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":149,"endColumn":22,"suggestions":[{"fix":{"range":[4632,4676],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useMemo } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { Truck, Plus, CheckCircle, Clock, Download, Layers, Activity } from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { api, DCListItem, DCStats } from \"@/lib/api\";\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\nimport { StatusBadge } from \"@/components/design-system/organisms/StatusBadge\";\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\nimport { ListPageTemplate } from \"@/components/design-system/templates/ListPageTemplate\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport { Accounting, Body } from \"@/components/design-system/organisms\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { type Column } from \"@/components/design-system/organisms/DataTable\";\nimport { type SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\nimport { useCallback } from \"react\";\nimport { Flex, Stack, Box } from \"@/components/design-system/organisms\";\n\n// --- OPTIMIZATION: Static Columns Definitions ---\nconst columns: Column<DCListItem>[] = [\n  {\n    key: \"dc_number\",\n    label: \"DC NUMBER\",\n    sortable: true,\n    width: \"15%\",\n    render: (_value, dc) => (\n      <Link href={`/dc/${dc.dc_number}`} className=\"block\">\n        <Body className=\"text-[var(--color-sys-brand-primary)] hover:underline\">\n          {dc.dc_number}\n        </Body>\n      </Link>\n    ),\n  },\n  {\n    key: \"dc_date\",\n    label: \"CHALLAN DATE\",\n    sortable: true,\n    width: \"12%\",\n    render: (v) => (\n      <Body className=\"text-[var(--color-sys-text-tertiary)]\">\n        {formatDate(String(v))}\n      </Body>\n    ),\n  },\n  {\n    key: \"po_number\",\n    label: \"PO REFERENCE\",\n    sortable: true,\n    width: \"12%\",\n    render: (v, dc) => (\n      <Link href={`/po/${v}`} className=\"block\">\n        <Body className=\"text-[var(--color-sys-brand-primary)] hover:underline\">\n          {String(v) || \"N/A\"}\n        </Body>\n      </Link>\n    ),\n  },\n  {\n    key: \"total_ordered_quantity\",\n    label: \"ORD\",\n    align: \"right\",\n    width: \"10%\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"font-semibold text-right block font-mono\">{Number(v) || 0}</Accounting>\n    ),\n  },\n  {\n    key: \"total_dispatched_quantity\",\n    label: \"DLV\",\n    align: \"right\",\n    width: \"10%\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"text-[var(--color-sys-status-success)] text-right block font-mono\">\n        {Number(v) || 0}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_pending_quantity\",\n    label: \"BAL\",\n    align: \"right\",\n    width: \"10%\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"text-[var(--color-sys-status-warning)] text-right block font-mono\">\n        {Number(v) || 0}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_received_quantity\",\n    label: \"RECD\",\n    sortable: true,\n    align: \"right\",\n    width: \"10%\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"font-semibold text-right block font-mono\">{Number(v) || 0}</Accounting>\n    ),\n  },\n  {\n    key: \"status\",\n    label: \"STATUS\",\n    sortable: true,\n    align: \"center\",\n    width: \"11%\",\n    render: (v) => <StatusBadge status={String(v)} />,\n  },\n];\n\nexport default function DCListPage() {\n  const router = useRouter();\n  const [dcs, setDCs] = useState<DCListItem[]>([]);\n  const [stats, setStats] = useState<DCStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const debouncedSearch = useDebouncedValue(searchQuery, 300);\n  const [page, setPage] = useState(1);\n  const [pageSize] = useState(10);\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.ctrlKey || e.metaKey) && e.key === \"k\") {\n        e.preventDefault();\n        document.getElementById(\"dc-search\")?.focus();\n      }\n      if (e.key === \"/\" && document.activeElement?.tagName !== \"INPUT\") {\n        e.preventDefault();\n        document.getElementById(\"dc-search\")?.focus();\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  useEffect(() => {\n    async function fetchDCs() {\n      setLoading(true);\n      try {\n        const [dcsData, statsData] = await Promise.all([api.listDCs(), api.getDCStats()]);\n        setDCs(dcsData);\n        setStats(statsData);\n      } catch (error) {\n        console.error(\"Error fetching DCs:\", error);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchDCs();\n  }, []);\n\n  const filteredDCs = useMemo(() => {\n    const term = debouncedSearch.toLowerCase();\n    return dcs.filter(\n      (dc) =>\n        dc.dc_number.toLowerCase().includes(term) ||\n        (dc.po_number?.toString() || \"\").includes(term) ||\n        (dc.consignee_name && dc.consignee_name.toLowerCase().includes(term))\n    );\n  }, [dcs, debouncedSearch]);\n\n  // --- OPTIMIZATION: Memoized Summary Cards ---\n  const summaryCards = useMemo(\n    (): SummaryCardProps[] => [\n      {\n        title: \"Total Challans\",\n        value: stats?.total_challans || dcs.length,\n        icon: <Truck size={20} />,\n        variant: \"primary\",\n      },\n      {\n        title: \"Delivered\",\n        value: stats?.completed_delivery || 0,\n        icon: <CheckCircle size={20} />,\n        variant: \"success\",\n      },\n      {\n        title: \"Total Value\",\n        value: formatIndianCurrency(stats?.total_value || 0),\n        icon: <Download size={20} />,\n        variant: \"primary\",\n      },\n      {\n        title: \"In Transit\",\n        value: stats?.pending_delivery || 0,\n        icon: <Activity size={20} />,\n        variant: \"warning\",\n      },\n    ],\n    [dcs.length, stats]\n  );\n\n  // Master Reference: Toolbar Construction (Atomic)\n  const handleSearch = useCallback((val: string) => {\n    setSearchQuery(val);\n  }, []);\n\n  const toolbar = (\n    <Flex align=\"center\" gap={3}>\n      <SearchBar\n        value={searchQuery}\n        onChange={handleSearch}\n        placeholder=\"Search DCs...\"\n        className=\"w-64\"\n      />\n\n      <Button\n        variant=\"default\"\n        size=\"sm\"\n        onClick={() => router.push(\"/dc/create\")}\n        className=\"bg-[var(--color-sys-brand-primary)] text-white hover:brightness-110 shadow-md\"\n      >\n        <Flex align=\"center\">\n          <Plus size={16} className=\"mr-2\" />\n          <Body className=\"text-inherit\">New DC</Body>\n        </Flex>\n      </Button>\n    </Flex>\n  );\n\n  return (\n    <ListPageTemplate\n      title=\"DELIVERY CHALLANS\"\n      subtitle=\"Manage and track all delivery documentation\"\n      toolbar={toolbar}\n      summaryCards={summaryCards}\n      columns={columns}\n      data={filteredDCs}\n      keyField=\"dc_number\"\n      page={page}\n      pageSize={pageSize}\n      totalItems={filteredDCs.length}\n      onPageChange={(newPage) => setPage(newPage)}\n      loading={loading}\n      emptyMessage=\"No delivery challans found\"\n      density=\"compact\"\n      className=\"min-h-[500px]\"\n    />\n  );\n}\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\error.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":62},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":18,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":18,"endColumn":18,"suggestions":[{"fix":{"range":[394,440],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect } from \"react\";\nimport { AlertCircle, RefreshCcw, Home } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { Card } from \"@/components/design-system/atoms/Card\";\n\nexport default function Error({\n  error,\n  reset,\n}: {\n  error: Error & { digest?: string };\n  reset: () => void;\n}) {\n  const router = useRouter();\n\n  useEffect(() => {\n    console.error(\"System Runtime Fault:\", error);\n  }, [error]);\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-gradient-to-br from-slate-50 to-indigo-50/30 p-6\">\n      <Card className=\"max-w-md w-full p-10 text-center space-y-8 border-rose-100 shadow-2xl shadow-rose-100/20\">\n        <div className=\"flex justify-center\">\n          <div className=\"p-6 bg-rose-50 rounded-[2.5rem] border-2 border-rose-100/50 text-rose-600 animate-bounce duration-1000\">\n            <AlertCircle className=\"w-12 h-12\" />\n          </div>\n        </div>\n\n        <div className=\"space-y-3\">\n          <h2 className=\"heading-xl text-rose-700 uppercase tracking-tighter\">Runtime Exception</h2>\n          <p className=\"text-xs text-slate-400 uppercase\">\n            {error.digest || \"PROCESS TERMINATED\"}\n          </p>\n        </div>\n\n        <div className=\"p-6 bg-slate-50/50 rounded-2xl border-2 border-dashed border-slate-100 leading-relaxed text-slate-600 italic\">\n          {error.message ||\n            \"The system encountered an unhandled exception during state reconciliation.\"}\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4 pt-4\">\n          <button\n            onClick={() => router.push(\"/\")}\n            className=\"btn-premium btn-ghost border-slate-200\"\n          >\n            <Home className=\"w-4 h-4\" /> REBOOT HUB\n          </button>\n          <button onClick={reset} className=\"btn-premium btn-primary bg-rose-600 shadow-rose-200\">\n            <RefreshCcw className=\"w-4 h-4\" /> RETRY SYNC\n          </button>\n        </div>\n      </Card>\n    </div>\n  );\n}\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\[id]\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useCallback' is defined but never used.","line":3,"column":48,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":59,"suggestions":[{"messageId":"removeVar","data":{"varName":"useCallback"},"fix":{"range":[60,73],"text":""},"desc":"Remove unused variable 'useCallback'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useCallback' is defined but never used.","line":3,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":59},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[164,176],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[176,188],"text":""},"desc":"Remove unused variable 'Download'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[200,212],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":11},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":22,"suggestions":[{"fix":{"range":[2104,2141],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":128,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":128,"endColumn":65},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":130,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":130,"endColumn":73},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":263,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":263,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":278,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":278,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":284,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":284,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":291,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":291,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":295,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":295,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":306,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":306,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":318,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":318,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":324,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":324,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":330,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":330,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":394,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":394,"endColumn":111},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":412,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":412,"endColumn":154}],"suppressedMessages":[],"errorCount":17,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useEffect, useState, Suspense, useCallback } from \"react\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport {\n  Printer,\n  FileText,\n  Download,\n  FileDown,\n  Calendar,\n  Receipt,\n} from \"lucide-react\";\nimport { api, API_BASE_URL } from \"@/lib/api\";\nimport { formatDate, formatIndianCurrency, amountInWords } from \"@/lib/utils\";\nimport {\n  Body,\n  H3,\n  SmallText,\n  Label,\n  Accounting,\n  Button,\n  Badge,\n  Card,\n} from \"@/components/design-system/organisms\";\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport {\n  Tabs,\n  TabsList,\n  TabsTrigger,\n  TabsContent,\n} from \"@/components/design-system/molecules/Tabs\";\nimport { type Column } from \"@/components/design-system/organisms/DataTable\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport dynamic from \"next/dynamic\";\nimport { DetailSkeleton } from \"@/components/design-system/molecules/skeletons/DetailSkeleton\";\n\nconst DataTable = dynamic(\n  () => import(\"@/components/design-system/organisms/DataTable\").then((mod) => mod.DataTable),\n  {\n    loading: () => <div className=\"h-64 w-full bg-[var(--color-sys-bg-tertiary)]/50 rounded-xl animate-pulse\" />,\n    ssr: false,\n  }\n);\n\nconst DocumentJourney = dynamic(\n  () =>\n    import(\"@/components/design-system/molecules/DocumentJourney\").then(\n      (mod) => mod.DocumentJourney\n    ),\n  {\n    loading: () => <div className=\"h-6 w-48 bg-[var(--color-sys-bg-tertiary)] rounded-full animate-pulse\" />,\n    ssr: false,\n  }\n);\n\nfunction InvoiceDetailContent() {\n  const router = useRouter();\n  const params = useParams();\n  const invoiceId = params.id as string;\n  const [data, setData] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n  const [activeTab, setActiveTab] = useState(\"buyer\");\n\n  useEffect(() => {\n    if (!invoiceId) return;\n    let isMounted = true;\n\n    const loadData = async () => {\n      try {\n        const invoiceData = await api.getInvoiceDetail(decodeURIComponent(invoiceId));\n        if (isMounted) setData(invoiceData);\n      } catch (err) {\n        console.error(\"Invoice Error:\", err);\n      } finally {\n        if (isMounted) setLoading(false);\n      }\n    };\n    loadData();\n\n    return () => {\n      isMounted = false;\n    };\n  }, [invoiceId]);\n\n  if (loading || !data || !data.header) {\n    return <DetailSkeleton />;\n  }\n\n  const { header, items = [], linked_dcs = [] } = data;\n\n  const topActions = (\n    <div className=\"flex gap-3\">\n      <Button\n        variant=\"outline\"\n        size=\"sm\"\n        asChild\n        className=\"text-emerald-700 border-emerald-200 bg-emerald-50 hover:bg-emerald-100 hover:text-emerald-800\"\n      >\n        <a\n          href={`${API_BASE_URL}/api/invoice/${encodeURIComponent(header.invoice_number)}/download`}\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <FileDown size={16} className=\"mr-2\" />\n          Excel\n        </a>\n      </Button>\n      <Button variant=\"outline\" size=\"sm\" onClick={() => window.print()}>\n        <Printer size={16} />\n        Print\n      </Button>\n    </div>\n  );\n\n  const itemColumns: Column<any>[] = [\n    {\n      key: \"material_code\",\n      label: \"Code\",\n      width: \"12%\",\n      render: (v) => <Accounting className=\"table-cell-number\">{v}</Accounting>,\n    },\n    {\n      key: \"description\",\n      label: \"Description\",\n      width: \"32%\",\n      render: (_v, row) => (\n        <div className=\"space-y-0.5\">\n          <Body className=\"text-[var(--color-sys-text-primary)]\">{row.material_description || row.description}</Body>\n          {row.drg_no && (\n            <SmallText className=\"text-[var(--color-sys-brand-primary)]\">\n              DRG: {row.drg_no}\n            </SmallText>\n          )}\n        </div>\n      ),\n    },\n    {\n      key: \"ordered_quantity\",\n      label: \"Ord\",\n      align: \"right\",\n      width: \"8%\",\n      isNumeric: true,\n      render: (v: any) => (\n        <Accounting className=\"table-cell-number text-right block\">{v}</Accounting>\n      ),\n    },\n    {\n      key: \"dispatched_quantity\",\n      label: \"Dlv\",\n      align: \"right\",\n      width: \"8%\",\n      isNumeric: true,\n      render: (v: any) => (\n        <Accounting className=\"table-cell-number text-right block\">{v}</Accounting>\n      ),\n    },\n    {\n      key: \"quantity\",\n      label: \"Inv\",\n      align: \"right\",\n      width: \"8%\",\n      isNumeric: true,\n      render: (v) => (\n        <Accounting className=\"table-cell-number text-sys-success text-right block\">\n          {v || 0}\n        </Accounting>\n      ),\n    },\n    {\n      key: \"unit\",\n      label: \"Unit\",\n      width: \"6%\",\n      render: (v) => (\n        <SmallText className=\"text-sys-secondary uppercase font-black tracking-widest\">{v}</SmallText>\n      ),\n    },\n    {\n      key: \"rate\",\n      label: \"Rate\",\n      align: \"right\",\n      width: \"10%\",\n      isCurrency: true,\n      render: (v: any) => (\n        <Accounting className=\"table-cell-number text-right block\">\n          {formatIndianCurrency(v)}\n        </Accounting>\n      ),\n    },\n    {\n      key: \"amount\",\n      label: \"Amount\",\n      align: \"right\",\n      width: \"10%\",\n      isCurrency: true,\n      render: (v: any) => (\n        <Accounting className=\"table-cell-number text-right block\">\n          {formatIndianCurrency(v)}\n        </Accounting>\n      ),\n    },\n  ];\n\n  return (\n    <DocumentTemplate\n      title={`Invoice #${header.invoice_number}`}\n      description={`${header.buyer_name} ΓÇó ${formatDate(header.invoice_date)}`}\n      actions={topActions}\n      onBack={() => router.back()}\n      layoutId={`inv-title-${header.invoice_number}`}\n      icon={<Receipt size={20} className=\"text-blue-700\" />}\n      iconLayoutId={`inv-icon-${header.invoice_number}`}\n      status={header.status}\n    >\n      <div className=\"space-y-6\">\n        <DocumentJourney currentStage=\"Invoice\" className=\"mb-2\" />\n\n        {/* Invoice Info Tabs */}\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"mb-4 bg-transparent p-0 border-b border-sys-tertiary/10\">\n            <TabsTrigger value=\"buyer\">Buyer</TabsTrigger>\n            <TabsTrigger value=\"references\">Order Refs</TabsTrigger>\n            <TabsTrigger value=\"logistics\">Logistics</TabsTrigger>\n          </TabsList>\n\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={activeTab}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.15 }}\n            >\n              <Card className=\"p-6 mt-0 border-none shadow-sm bg-[var(--color-sys-bg-surface)]/50 backdrop-blur-sm relative top-[-1px]\">\n                <TabsContent value=\"buyer\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label>Buyer Name</Label>\n                      <Body className=\"text-sys-primary font-medium\">\n                        {header.buyer_name || \"-\"}\n                      </Body>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Buyer GSTIN</Label>\n                      <Accounting>{header.buyer_gstin || \"-\"}</Accounting>\n                    </div>\n                    <div className=\"space-y-1.5 col-span-2\">\n                      <Label>Buyer Address</Label>\n                      <Body className=\"text-sys-primary font-medium\">\n                        {header.buyer_address || \"-\"}\n                      </Body>\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"references\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label>Buyer's Order No</Label>\n                      <Accounting>{header.buyers_order_no || \"-\"}</Accounting>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Order Date</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">\n                        {header.buyers_order_date ? formatDate(header.buyers_order_date) : \"-\"}\n                      </Body>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Challan Number</Label>\n                      <Accounting\n                        className=\"text-sys-brand cursor-pointer hover:underline\"\n                        onClick={() => router.push(`/dc/${header.dc_number}`)}\n                      >\n                        {header.dc_number || \"-\"}\n                      </Accounting>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>GEMC Number</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">\n                        {header.gemc_number || \"-\"}\n                      </Body>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>GEMC Date</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">\n                        {header.gemc_date ? formatDate(header.gemc_date) : \"-\"}\n                      </Body>\n                    </div>\n                    <div className=\"space-y-1.5\">{/* Spacer or additional field */}</div>\n                    <div className=\"space-y-1.5\">\n                      <Label>SRV Number</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">{header.srv_no || \"-\"}</Body>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>SRV Date</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">\n                        {header.srv_date ? formatDate(header.srv_date) : \"-\"}\n                      </Body>\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"logistics\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label>Dispatch Through</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">\n                        {header.dispatch_through || \"-\"}\n                      </Body>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Destination</Label>\n                      <Body className=\"text-sys-primary font-medium\">\n                        {header.destination || \"-\"}\n                      </Body>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Terms of Delivery</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">\n                        {header.terms_of_delivery || \"-\"}\n                      </Body>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label>Despatch Document No</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">\n                        {header.despatch_doc_no || \"-\"}\n                      </Body>\n                    </div>\n                    <div className=\"space-y-1.5 col-span-2\">\n                      <Label>Payment Terms</Label>\n                      <Body className=\"text-[var(--color-sys-text-primary)] font-medium\">\n                        {header.payment_terms || header.mode_of_payment || \"45 Days\"}\n                      </Body>\n                    </div>\n                  </div>\n                </TabsContent>\n              </Card>\n            </motion.div>\n          </AnimatePresence>\n        </Tabs>\n\n        {/* Items Table */}\n        <div className=\"space-y-2\">\n          <H3 className=\"px-1 font-medium text-sys-secondary uppercase tracking-widest\">\n            Invoice Items ({items.length})\n          </H3>\n          <DataTable\n            columns={itemColumns}\n            data={items.map((item: any, idx: number) => ({\n              ...item,\n              _uniqueKey: `item-${idx}-${item.id || idx}`,\n            }))}\n            keyField=\"_uniqueKey\"\n            density=\"compact\"\n          />\n        </div>\n\n        {/* Totals */}\n        <Card className=\"p-6 bg-[var(--color-sys-bg-secondary)]/50 border-none shadow-sm\">\n          <div className=\"grid grid-cols-2 gap-4 max-w-sm ml-auto\">\n            <Label className=\"uppercase tracking-widest text-sys-secondary flex items-center\">\n              Taxable Value:\n            </Label>\n            <Accounting className=\"text-right\">\n              {formatIndianCurrency(header.total_taxable_value)}\n            </Accounting>\n\n            <Label className=\"uppercase tracking-widest text-sys-secondary flex items-center\">\n              CGST @ 9%:\n            </Label>\n            <Accounting className=\"text-right\">\n              {formatIndianCurrency(header.cgst_total)}\n            </Accounting>\n\n            <Label className=\"uppercase tracking-widest text-sys-secondary flex items-center\">\n              SGST @ 9%:\n            </Label>\n            <Accounting className=\"text-right\">\n              {formatIndianCurrency(header.sgst_total)}\n            </Accounting>\n\n            <div className=\"col-span-2 border-t border-slate-200 my-2\" />\n\n            <Label className=\"text-sys-secondary flex items-center\">\n              Grand Total:\n            </Label>\n            <Accounting className=\"text-right text-sys-primary\">\n              {formatIndianCurrency(header.total_invoice_value)}\n            </Accounting>\n\n            <div className=\"col-span-2 mt-4 space-y-1 bg-[var(--color-sys-bg-surface)]/50 p-3 rounded-lg border border-[var(--color-sys-bg-tertiary)]\">\n              <Label className=\"text-sys-tertiary\">\n                Amount in words\n              </Label>\n              <Body className=\"text-[var(--color-sys-text-secondary)] italic lowercase first-letter:uppercase\">\n                {amountInWords(header.total_invoice_value)} Only\n              </Body>\n            </div>\n          </div>\n        </Card>\n\n        {/* Linked DCs */}\n        {linked_dcs && linked_dcs.length > 0 && (\n          <Card className=\"p-6 border-none shadow-sm bg-[var(--color-sys-bg-secondary)]/30\">\n            <H3 className=\"mb-4 text-sys-secondary\">\n              Linked Delivery Challans\n            </H3>\n            <div className=\"flex gap-2 flex-wrap\">\n              {linked_dcs.map((dc: any) => (\n                <Badge\n                  key={dc.dc_number}\n                  variant=\"outline\"\n                  className=\"cursor-pointer hover:bg-[var(--color-sys-bg-tertiary)] transition-colors font-medium text-[var(--color-sys-text-secondary)]\"\n                  onClick={() => router.push(`/dc/${dc.dc_number}`)}\n                >\n                  {dc.dc_number}\n                </Badge>\n              ))}\n            </div>\n          </Card>\n        )}\n      </div>\n    </DocumentTemplate>\n  );\n}\n\nexport default function InvoiceDetailPage() {\n  return (\n    <Suspense fallback={<DetailSkeleton />}>\n      <InvoiceDetailContent />\n    </Suspense>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\create\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Mono' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Mono"},"fix":{"range":[669,677],"text":""},"desc":"Remove unused variable 'Mono'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Mono' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":24,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[967,1028],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":24,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":72,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":72,"endColumn":20,"suggestions":[{"fix":{"range":[2644,2689],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":20,"suggestions":[{"fix":{"range":[3505,3524],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":235,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":235,"endColumn":20,"suggestions":[{"fix":{"range":[8014,8061],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, Suspense, useCallback } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\nimport { Save, Loader2, AlertCircle, Search, ChevronDown, Check, X, CheckCircle2 } from \"lucide-react\";\nimport { api, type Buyer } from \"@/lib/api\";\nimport type { InvoiceFormData, InvoiceItemUI } from \"@/types/ui\";\nimport { createDefaultInvoiceForm } from \"@/lib/uiAdapters\";\nimport { amountInWords, formatIndianCurrency } from \"@/lib/utils\";\nimport * as Select from \"@radix-ui/react-select\";\nimport { motion } from \"framer-motion\";\nimport {\n  H3,\n  Label,\n  SmallText,\n  Body,\n  Accounting,\n  Mono,\n} from \"@/components/design-system/organisms\";\nimport { DocumentJourney } from \"@/components/design-system/molecules/DocumentJourney\";\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Badge } from \"@/components/design-system/organisms\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport { Card } from \"@/components/design-system/organisms\";\n\nconst TAX_RATES = { cgst: 9.0, sgst: 9.0 };\n\nfunction CreateInvoicePageContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const dcId = searchParams?.get(\"dc\") || \"\";\n\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [invoiceItems, setInvoiceItems] = useState<InvoiceItemUI[]>([]);\n  const [manualDcId, setManualDcId] = useState(dcId);\n  const [formData, setFormData] = useState<InvoiceFormData>(\n    createDefaultInvoiceForm(dcId || undefined)\n  );\n\n  // Multi-Buyer States\n  const [buyers, setBuyers] = useState<Buyer[]>([]);\n  const [selectedBuyerId, setSelectedBuyerId] = useState<string>(\"\");\n\n  const [isDuplicate, setIsDuplicate] = useState(false);\n  const [isChecking, setIsChecking] = useState(false);\n  const [showWarning, setShowWarning] = useState(false);\n\n  useEffect(() => {\n    fetchInitialData();\n  }, [dcId]);\n\n  const fetchInitialData = async () => {\n    try {\n      const buyerList = await api.getBuyers();\n      setBuyers(buyerList);\n\n      const defaultBuyer = buyerList.find((b) => b.is_default);\n      if (defaultBuyer) {\n        setSelectedBuyerId(defaultBuyer.id.toString());\n        applyBuyerToForm(defaultBuyer);\n      } else if (buyerList.length > 0) {\n        setSelectedBuyerId(buyerList[0].id.toString());\n        applyBuyerToForm(buyerList[0]);\n      }\n\n      if (dcId) loadDC(dcId);\n    } catch (err) {\n      console.error(\"Failed to fetch buyers\", err);\n    }\n  };\n\n  const applyBuyerToForm = (buyer: Buyer) => {\n    setFormData((prev) => ({\n      ...prev,\n      buyer_name: buyer.name,\n      buyer_gstin: buyer.gstin,\n      buyer_address: buyer.billing_address,\n      buyer_state: buyer.state || \"\",\n      buyer_state_code: buyer.state_code || \"\",\n      place_of_supply: buyer.place_of_supply,\n    }));\n  };\n\n  const handleBuyerChange = (id: string) => {\n    setSelectedBuyerId(id);\n    const buyer = buyers.find((b) => b.id.toString() === id);\n    if (buyer) applyBuyerToForm(buyer);\n  };\n\n  const checkNumberDuplicate = async (num: string, date: string) => {\n    if (!num || num.length < 3) return;\n    setIsChecking(true);\n    try {\n      const res = await api.checkDuplicateNumber(\"Invoice\", num, date);\n      setIsDuplicate(res.exists);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setIsChecking(false);\n    }\n  };\n\n  const loadDC = useCallback(async (id: string) => {\n    if (!id) return;\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await api.getDCDetail(id);\n\n      if (!data?.header) {\n        setError(\"Challan not found.\");\n        setLoading(false);\n        return;\n      }\n\n      setFormData((prev) => ({\n        ...prev,\n        dc_number: data.header.dc_number || \"\",\n        challan_date: data.header.dc_date || \"\",\n        buyers_order_no: data.header.po_number?.toString() || \"\",\n        buyers_order_date: data.header.po_date || \"\",\n        vehicle_no: data.header.vehicle_no || \"\",\n        lr_no: data.header.lr_no || \"\",\n        transporter: data.header.transporter || \"\",\n        destination: (data.header as any).destination || \"\",\n      }));\n\n      if (data.items?.length > 0) {\n        const items: InvoiceItemUI[] = data.items.map((item: any) => {\n          const qty = item.dispatched_quantity || item.dispatch_qty || 0;\n          const rate = item.po_rate || 0;\n          const taxableValue = qty * rate;\n          const cgstAmount = (taxableValue * TAX_RATES.cgst) / 100;\n          const sgstAmount = (taxableValue * TAX_RATES.sgst) / 100;\n          return {\n            lotNumber: item.lot_no?.toString() || \"\",\n            description: item.description || item.material_description || \"\",\n            hsnCode: item.hsn_code || \"\",\n            quantity: qty,\n            unit: \"NO\",\n            rate: rate,\n            taxableValue,\n            tax: {\n              cgstRate: TAX_RATES.cgst,\n              cgstAmount,\n              sgstRate: TAX_RATES.sgst,\n              sgstAmount,\n              igstRate: 0,\n              igstAmount: 0,\n            },\n            totalAmount: taxableValue + cgstAmount + sgstAmount,\n          };\n        });\n        setInvoiceItems(items);\n        calculateTotals(items);\n      }\n    } catch (err: any) {\n      setError(err.message || \"Failed to load DC\");\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const calculateTotals = (items: InvoiceItemUI[]) => {\n    const taxable = items.reduce((sum, item) => sum + item.taxableValue, 0);\n    const cgst = items.reduce((sum, item) => sum + item.tax.cgstAmount, 0);\n    const sgst = items.reduce((sum, item) => sum + item.tax.sgstAmount, 0);\n    const total = items.reduce((sum, item) => sum + item.totalAmount, 0);\n\n    const validTotal = isNaN(total) ? 0 : total;\n\n    setFormData(\n      (prev) =>\n        ({\n          ...prev,\n          taxable_value: isNaN(taxable) ? 0 : taxable,\n          cgst: isNaN(cgst) ? 0 : cgst,\n          sgst: isNaN(sgst) ? 0 : sgst,\n          total_invoice_value: validTotal,\n          amount_in_words: amountInWords(validTotal),\n        }) as any\n    );\n  };\n\n  const handleSave = async () => {\n    setShowWarning(false);\n    setSaving(true);\n    setError(null);\n    try {\n      const apiItems = invoiceItems.map((item) => ({\n        po_sl_no: item.lotNumber,\n        description: item.description,\n        quantity: item.quantity,\n        unit: item.unit || \"NO\",\n        rate: item.rate,\n        hsn_sac: item.hsnCode,\n        no_of_packets: (item as any).no_of_packets,\n      }));\n\n      const payload = {\n        invoice_number: formData.invoice_number,\n        invoice_date: formData.invoice_date,\n        dc_number: formData.dc_number,\n        buyer_name: formData.buyer_name,\n        buyer_address: (formData as any).buyer_address,\n        buyer_gstin: formData.buyer_gstin,\n        buyer_state: formData.buyer_state,\n        buyer_state_code: (formData as any).buyer_state_code,\n        place_of_supply: formData.place_of_supply,\n        buyers_order_no: formData.buyers_order_no,\n        buyers_order_date: formData.buyers_order_date,\n        vehicle_no: formData.vehicle_no,\n        lr_no: formData.lr_no,\n        transporter: formData.transporter,\n        destination: formData.destination,\n        terms_of_delivery: formData.terms_of_delivery,\n        gemc_number: formData.gemc_number,\n        gemc_date: formData.gemc_date,\n        mode_of_payment: formData.mode_of_payment,\n        payment_terms: formData.payment_terms || \"45 Days\",\n        despatch_doc_no: formData.despatch_doc_no,\n        srv_no: formData.srv_no,\n        srv_date: formData.srv_date,\n        remarks: formData.remarks,\n        items: apiItems,\n      };\n\n      await api.createInvoice(payload);\n      router.push(`/invoice/${formData.invoice_number}`);\n    } catch (err: any) {\n      console.error(\"Invoice creation failed:\", err);\n      if (err.status === 422 && Array.isArray(err.data?.detail)) {\n        const details = err.data.detail.map((d: any) => `${d.loc.join(\".\")}: ${d.msg}`).join(\", \");\n        setError(`Validation Error: ${details}`);\n      } else {\n        const msg = err.message || \"Failed to create invoice\";\n        setError(msg);\n      }\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const topActions = (\n    <div className=\"flex items-center gap-2\">\n      <Button variant=\"outline\" size=\"sm\" onClick={() => router.back()} disabled={saving}>\n        Cancel\n      </Button>\n      <Button\n        variant=\"default\"\n        size=\"sm\"\n        onClick={() => setShowWarning(true)}\n        disabled={\n          saving ||\n          invoiceItems.length === 0 ||\n          isDuplicate ||\n          isChecking ||\n          !formData.invoice_number\n        }\n      >\n        {saving ? (\n          <Loader2 size={16} className=\"animate-spin mr-2\" />\n        ) : (\n          <Save size={16} className=\"mr-2\" />\n        )}\n        {saving ? \"Saving...\" : \"Generate Invoice\"}\n      </Button>\n    </div>\n  );\n\n  return (\n    <DocumentTemplate\n      title=\"Create GST Invoice\"\n      description=\"Generate billing documentation from DC\"\n      actions={topActions}\n    >\n      <div className=\"mb-6\">\n        <DocumentJourney currentStage=\"Invoice\" />\n      </div>\n\n      <div className=\"space-y-6\">\n        {error && (\n          <Card className=\"p-4 bg-red-50 border-red-100\">\n            <div className=\"flex items-center gap-2 text-red-600\">\n              <AlertCircle size={16} />\n              <SmallText className=\"font-medium\">{error}</SmallText>\n            </div>\n          </Card>\n        )}\n\n        {/* DC Selection */}\n        {!dcId && (\n          <Card className=\"p-6\">\n            <Label className=\"text-h4 uppercase text-sys-secondary mb-2 block\">\n              Delivery Challan Reference\n            </Label>\n            <div className=\"flex gap-3 mt-1\">\n              <div className=\"flex-1\">\n                <Input\n                  value={manualDcId}\n                  onChange={(e) => setManualDcId(e.target.value)}\n                  placeholder=\"Enter DC number\"\n                  className=\"font-medium text-sys-primary\"\n                />\n              </div>\n              <Button\n                variant=\"secondary\"\n                onClick={() => loadDC(manualDcId)}\n                disabled={!manualDcId || loading}\n              >\n                {loading ? (\n                  <Loader2 size={16} className=\"animate-spin mr-2\" />\n                ) : (\n                  <Search size={16} className=\"mr-2\" />\n                )}\n                {loading ? \"Loading...\" : \"Load DC\"}\n              </Button>\n            </div>\n          </Card>\n        )}\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* Invoice Details */}\n            <Card className=\"p-6\">\n              <H3 className=\"mb-6 text-slate-950 text-sm\">Invoice Information</H3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6\">\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-h4 uppercase text-sys-secondary\">\n                    Invoice Number\n                  </Label>\n                  <Input\n                    value={formData.invoice_number}\n                    onChange={(e) => {\n                      const val = e.target.value;\n                      setFormData({ ...formData, invoice_number: val });\n                      checkNumberDuplicate(val, formData.invoice_date);\n                    }}\n                    className={cn(\n                      \"font-medium tabular-nums\",\n                      isDuplicate\n                        ? \"border-red-500 text-red-600 focus:ring-red-500/10\"\n                        : \"text-slate-930\"\n                    )}\n                    placeholder=\"INV/001/24-25\"\n                  />\n                  {isChecking && (\n                    <SmallText className=\"text-slate-400 animate-pulse\">\n                      Checking uniqueness...\n                    </SmallText>\n                  )}\n                  {isDuplicate && (\n                    <SmallText className=\"text-red-500\">\n                      This number already exists in this FY\n                    </SmallText>\n                  )}\n                </div>\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-h4 uppercase text-sys-secondary\">\n                    Invoice Date\n                  </Label>\n                  <Input\n                    type=\"date\"\n                    value={formData.invoice_date}\n                    onChange={(e) => setFormData({ ...formData, invoice_date: e.target.value })}\n                    className=\"font-medium text-slate-930\"\n                  />\n                </div>\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-h4 uppercase text-sys-tertiary\">\n                    Linked DC\n                  </Label>\n                  <div className=\"font-medium text-slate-950 tabular-nums px-3 py-2 bg-slate-50/50 rounded-xl border border-dashed border-slate-200\">\n                    {formData.dc_number || \"---\"}\n                  </div>\n                </div>\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-h4 uppercase text-sys-tertiary\">\n                    Order Reference\n                  </Label>\n                  <div className=\"font-medium text-slate-950 px-3 py-2 bg-slate-50/50 rounded-xl border border-dashed border-slate-200\">\n                    {formData.buyers_order_no || \"---\"}\n                  </div>\n                </div>\n              </div>\n            </Card>\n\n            <Card className=\"p-6\">\n              <H3 className=\"mb-6 text-slate-950 text-sm\">Logistics & Payments</H3>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6\">\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-h4 uppercase text-sys-secondary\">\n                    Vehicle No\n                  </Label>\n                  <Input\n                    value={formData.vehicle_no || \"\"}\n                    onChange={(e) => setFormData({ ...formData, vehicle_no: e.target.value })}\n                    className=\"font-medium text-sys-primary\"\n                  />\n                </div>\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-h4 uppercase text-sys-secondary\">\n                    Transporter\n                  </Label>\n                  <Input\n                    value={formData.transporter || \"\"}\n                    onChange={(e) => setFormData({ ...formData, transporter: e.target.value })}\n                    className=\"font-medium text-sys-primary\"\n                  />\n                </div>\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-h4 uppercase text-sys-secondary\">\n                    Payment Terms\n                  </Label>\n                  <Input\n                    value={formData.payment_terms || \"45 Days\"}\n                    onChange={(e) => setFormData({ ...formData, payment_terms: e.target.value })}\n                    className=\"font-medium text-sys-primary\"\n                  />\n                </div>\n                <div className=\"space-y-1.5\">\n                  <Label className=\"text-h4 uppercase text-sys-secondary\">\n                    Mode of Payment\n                  </Label>\n                  <Input\n                    value={formData.mode_of_payment || \"\"}\n                    onChange={(e) => setFormData({ ...formData, mode_of_payment: e.target.value })}\n                    className=\"font-medium text-sys-primary\"\n                  />\n                </div>\n              </div>\n            </Card>\n          </div>\n\n          <div className=\"space-y-6\">\n            {/* Buyer Selection Card */}\n            <Card className=\"p-6 border-blue-50 bg-blue-50/20 ring-1 ring-blue-100\">\n              <Label className=\"text-h4 uppercase text-sys-brand mb-4 block\">\n                Bill To: Entity Selection\n              </Label>\n\n              <Select.Root value={selectedBuyerId} onValueChange={handleBuyerChange}>\n                <Select.Trigger className=\"flex items-center justify-between w-full px-4 py-2 bg-white border border-blue-200 rounded-xl text-sm text-slate-900 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all\">\n                  <Select.Value placeholder=\"Select Buyer\" />\n                  <Select.Icon>\n                    <ChevronDown size={14} className=\"text-blue-400\" />\n                  </Select.Icon>\n                </Select.Trigger>\n                <Select.Portal>\n                  <Select.Content className=\"overflow-hidden bg-white rounded-xl shadow-xl border border-slate-100 z-50\">\n                    <Select.Viewport className=\"p-1\">\n                      {buyers.map((b) => (\n                        <Select.Item\n                          key={b.id}\n                          value={b.id.toString()}\n                          className=\"flex items-center px-8 py-2 text-sm text-slate-700 rounded-lg outline-none hover:bg-blue-50 hover:text-blue-700 cursor-pointer relative data-[highlighted]:bg-blue-50\"\n                        >\n                          <Select.ItemText>{b.name}</Select.ItemText>\n                          <Select.ItemIndicator className=\"absolute left-2\">\n                            <Check size={14} />\n                          </Select.ItemIndicator>\n                        </Select.Item>\n                      ))}\n                    </Select.Viewport>\n                  </Select.Content>\n                </Select.Portal>\n              </Select.Root>\n\n              <div className=\"mt-8 pt-6 border-t border-blue-100 space-y-4\">\n                <div>\n                  <Label>Live Snapshot</Label>\n                  <H3 className=\"text-slate-950 leading-tight\">\n                    {formData.buyer_name || \"---\"}\n                  </H3>\n                </div>\n                <div className=\"space-y-1\">\n                  <Label>GSTIN</Label>\n                  <Accounting className=\"text-h4 text-sys-brand\">\n                    {formData.buyer_gstin || \"---\"}\n                  </Accounting>\n                </div>\n                <div className=\"space-y-1\">\n                  <Label>Billing Address</Label>\n                  <SmallText className=\"text-sys-secondary block leading-relaxed\">\n                    {formData.buyer_address || \"---\"}\n                  </SmallText>\n                </div>\n                <div className=\"flex items-center gap-4\">\n                  <div>\n                    <Label>State</Label>\n                    <SmallText className=\"font-bold text-slate-800\">\n                      {formData.buyer_state || \"---\"}\n                    </SmallText>\n                  </div>\n                  <div>\n                    <Label>POS</Label>\n                    <SmallText className=\"font-bold text-slate-800\">\n                      {formData.place_of_supply || \"---\"}\n                    </SmallText>\n                  </div>\n                </div>\n              </div>\n            </Card>\n          </div>\n        </div>\n\n        {/* Items Table */}\n        {invoiceItems.length > 0 && (\n          <Card className=\"p-0 overflow-hidden border-none shadow-sm\">\n            <div className=\"px-6 py-4 bg-slate-50/50 border-b border-slate-100\">\n              <H3 className=\"font-medium text-slate-950\">\n                Invoice Items ({invoiceItems.length})\n              </H3>\n            </div>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-slate-100 bg-slate-50/30\">\n                    <th className=\"py-3 px-6 text-left\">\n                      <Label>Lot</Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-left\">\n                      <Label>Description</Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-left\">\n                      <Label>HSN</Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label>Qty</Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label>Rate</Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label>Total</Label>\n                    </th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {invoiceItems.map((item, idx) => (\n                    <tr\n                      key={`item-${idx}`}\n                      className=\"border-b border-slate-50 hover:bg-slate-50/10 transition-colors\"\n                    >\n                      <td className=\"py-2 px-6\">\n                        <Accounting className=\"font-medium text-slate-930 font-mono\">\n                          {item.lotNumber}\n                        </Accounting>\n                      </td>\n                      <td className=\"py-2 px-6 text-slate-950\">{item.description}</td>\n                      <td className=\"py-2 px-6 font-mono text-slate-500\">\n                        {item.hsnCode}\n                      </td>\n                      <td className=\"py-2 px-6 text-right\">\n                        <Accounting className=\"text-sys-secondary text-right block\">\n                          {item.quantity}\n                        </Accounting>\n                      </td>\n                      <td className=\"py-2 px-6 text-right text-slate-600 font-mono\">\n                        {formatIndianCurrency(item.rate)}\n                      </td>\n                      <td className=\"py-2 px-6 text-right text-slate-950\">\n                        <Accounting isCurrency className=\"font-mono text-right block\">\n                          {item.totalAmount}\n                        </Accounting>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"bg-slate-50/50 border-t border-slate-100 p-8\">\n              <div className=\"grid grid-cols-2 gap-x-12 gap-y-4 max-w-sm ml-auto\">\n                <Label>Taxable Value</Label>\n                <Accounting isCurrency className=\"text-right text-sys-secondary\">\n                  {formData.taxable_value || 0}\n                </Accounting>\n\n                <Label>CGST @ 9%</Label>\n                <Accounting isCurrency className=\"text-right text-slate-600\">\n                  {formData.cgst || 0}\n                </Accounting>\n\n                <Label>SGST @ 9%</Label>\n                <Accounting isCurrency className=\"text-right text-slate-600\">\n                  {formData.sgst || 0}\n                </Accounting>\n\n                <div className=\"col-span-2 my-2 border-t border-slate-200\"></div>\n\n                <Label className=\"text-small leading-tight text-sys-primary\">\n                  Grand Total\n                </Label>\n                <Accounting isCurrency className=\"text-right text-xl text-sys-primary\">\n                  {formData.total_invoice_value}\n                </Accounting>\n\n                <div className=\"col-span-2 mt-4 text-right\">\n                  <SmallText className=\"italic text-slate-500\">\n                    {(formData as any).amount_in_words || \"---\"} Only\n                  </SmallText>\n                </div>\n              </div>\n            </div>\n          </Card>\n        )}\n      </div>\n\n      {/* Invoice Generation Warning Modal */}\n      {showWarning && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm\"\n          onClick={() => setShowWarning(false)}\n        >\n          <motion.div\n            initial={{ scale: 0.95, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.95, opacity: 0 }}\n            transition={{ type: \"spring\", duration: 0.3 }}\n            onClick={(e: React.MouseEvent) => e.stopPropagation()}\n            className=\"relative w-full max-w-md\"\n          >\n            <Card className=\"p-0 overflow-hidden border-none shadow-2xl bg-white/95 backdrop-blur-xl\">\n              {/* Header with gradient */}\n              <div className=\"relative px-6 pt-6 pb-4 bg-gradient-to-br from-amber-50 to-orange-50 border-b border-amber-100\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center shadow-lg\">\n                    <AlertCircle className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <H3 className=\"text-slate-900 mb-1\">ΓÜá∩╕Å Critical Warning</H3>\n                    <SmallText className=\"text-slate-600\">\n                      Please read carefully before proceeding\n                    </SmallText>\n                  </div>\n                </div>\n              </div>\n\n              {/* Content */}\n              <div className=\"p-6 space-y-4\">\n                <div className=\"p-4 rounded-xl bg-amber-50 border border-amber-200\">\n                  <Body className=\"text-slate-800 leading-relaxed\">\n                    Once this <strong className=\"text-amber-700\">Invoice is generated</strong>, it{\" \"}\n                    <strong className=\"text-red-600\">cannot be modified or deleted</strong>.\n                  </Body>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label className=\"text-slate-700 font-medium flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-slate-400\"></span>\n                    The invoice will be permanently locked\n                  </Label>\n                  <Label className=\"text-slate-700 font-medium flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-slate-400\"></span>\n                    The linked DC will also be locked from editing\n                  </Label>\n                  <Label className=\"text-slate-700 font-medium flex items-center gap-2\">\n                    <span className=\"w-1.5 h-1.5 rounded-full bg-slate-400\"></span>\n                    Ensure all details are correct before proceeding\n                  </Label>\n                </div>\n              </div>\n\n              {/* Footer Actions */}\n              <div className=\"px-6 py-4 bg-slate-50 border-t border-slate-100 flex gap-3\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setShowWarning(false)}\n                  className=\"flex-1 border-slate-300 hover:bg-slate-100\"\n                >\n                  <X size={16} className=\"mr-2\" />\n                  Cancel\n                </Button>\n                <Button\n                  variant=\"default\"\n                  size=\"sm\"\n                  onClick={handleSave}\n                  className=\"flex-1 bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white shadow-lg\"\n                >\n                  <CheckCircle2 size={16} className=\"mr-2\" />\n                  I Understand, Proceed\n                </Button>\n              </div>\n            </Card>\n          </motion.div>\n        </motion.div>\n      )}\n    </DocumentTemplate>\n  );\n}\n\nexport default function CreateInvoicePage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"p-32 text-center\">\n          <Body className=\"text-slate-400 animate-pulse\">Loading template...</Body>\n        </div>\n      }\n    >\n      <CreateInvoicePageContent />\n    </Suspense>\n  );\n}\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":9,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[170,182],"text":""},"desc":"Remove unused variable 'Download'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":9,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"TrendingUp"},"fix":{"range":[182,196],"text":""},"desc":"Remove unused variable 'TrendingUp'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[196,208],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[208,223],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'Layers' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Layers"},"fix":{"range":[223,233],"text":""},"desc":"Remove unused variable 'Layers'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Layers' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":18,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[294,333],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'motion' is defined but never used.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'Input' is defined but never used.","line":25,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Input"},"fix":{"range":[769,830],"text":""},"desc":"Remove unused variable 'Input'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Input' is defined but never used.","line":25,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":28,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[978,1039],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":28,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Stack' is defined but never used.","line":32,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"Stack"},"fix":{"range":[1259,1266],"text":""},"desc":"Remove unused variable 'Stack'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used.","line":32,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":21},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":46,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":46,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":58,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":58,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":79,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":79,"endColumn":215},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":106,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":106,"endColumn":221},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":124,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":124,"endColumn":104},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":136,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":136,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":148,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":148,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":160,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":160,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":172,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":172,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":185,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":185,"endColumn":112},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":236,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":236,"endColumn":22,"suggestions":[{"fix":{"range":[7251,7300],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":19,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useMemo } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport {\n  Receipt,\n  Plus,\n  Download,\n  TrendingUp,\n  FileText,\n  AlertCircle,\n  Layers,\n  Clock,\n  Activity,\n  CheckCircle,\n} from \"lucide-react\";\nimport { motion } from \"framer-motion\";\nimport { api, InvoiceListItem, InvoiceStats } from \"@/lib/api\";\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\nimport { StatusBadge } from \"@/components/design-system/organisms/StatusBadge\";\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\nimport { ListPageTemplate } from \"@/components/design-system/templates/ListPageTemplate\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport { Accounting, Body, SmallText } from \"@/components/design-system/organisms\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Badge } from \"@/components/design-system/organisms\";\nimport { type Column } from \"@/components/design-system/organisms/DataTable\";\nimport { type SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\nimport { useCallback } from \"react\";\nimport { Flex, Stack, Box } from \"@/components/design-system/organisms\";\n\n// --- OPTIMIZATION: Static Columns Definitions ---\nconst columns: Column<InvoiceListItem>[] = [\n  {\n    key: \"invoice_number\",\n    label: \"INVOICE #\",\n    sortable: true,\n    width: \"12%\",\n    render: (_value, inv) => (\n      <Link\n        href={`/invoice/${encodeURIComponent(inv.invoice_number)}`}\n        className=\"block\"\n      >\n        <Body className=\"text-[var(--color-sys-brand-primary)] hover:underline\">\n          {inv.invoice_number}\n        </Body>\n      </Link>\n    ),\n  },\n  {\n    key: \"invoice_date\",\n    label: \"DATE\",\n    sortable: true,\n    width: \"10%\",\n    render: (v) => (\n      <Body className=\"text-[var(--color-sys-text-tertiary)] whitespace-nowrap\">\n        {formatDate(String(v))}\n      </Body>\n    ),\n  },\n  {\n    key: \"linked_dc_numbers\",\n    label: \"Linked DCs\",\n    width: \"14%\",\n    render: (v) => (\n      <Flex wrap gap={1}>\n        {String(v) && String(v) !== \"null\" ? (\n          String(v)\n            .split(\",\")\n            .map((dc: string, i: number) => (\n              <Link\n                key={i}\n                href={`/dc/${dc.trim()}`}\n                className=\"no-underline\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <Box className=\"px-1.5 py-0.5 rounded-full bg-[var(--color-sys-brand-primary)]/10 text-[var(--color-sys-brand-primary)] cursor-pointer hover:bg-[var(--color-sys-brand-primary)]/20 transition-colors\">\n                  <SmallText className=\"text-inherit leading-none\">{dc.trim()}</SmallText>\n                </Box>\n              </Link>\n            ))\n        ) : (\n          <SmallText className=\"italic\">Direct</SmallText>\n        )}\n      </Flex>\n    ),\n  },\n  {\n    key: \"po_numbers\",\n    label: \"Linked POs\",\n    width: \"14%\",\n    render: (v) => (\n      <Flex wrap gap={1}>\n        {String(v) && String(v) !== \"null\" ? (\n          String(v)\n            .split(\",\")\n            .map((po: string, i: number) => (\n              <Link\n                key={i}\n                href={`/po/${po.trim()}`}\n                className=\"no-underline\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <Box className=\"px-1.5 py-0.5 rounded-full bg-[var(--color-sys-bg-tertiary)]/50 text-[var(--color-sys-text-secondary)] border-none cursor-pointer hover:bg-[var(--color-sys-bg-tertiary)] transition-colors\">\n                  <SmallText className=\"text-inherit leading-none\">{po.trim()}</SmallText>\n                </Box>\n              </Link>\n            ))\n        ) : (\n          <SmallText className=\"italic\">Direct</SmallText>\n        )}\n      </Flex>\n    ),\n  },\n  {\n    key: \"total_items\",\n    label: \"ITEMS\",\n    width: \"6%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-text-secondary)] text-right block\">\n        {Number(v) || 0}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_ordered_quantity\",\n    label: \"ORD\",\n    width: \"8%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-text-tertiary)] font-mono text-right block\">\n        {v || \"-\"}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_dispatched_quantity\",\n    label: \"DLV\",\n    width: \"8%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-success)] text-right block font-mono\">\n        {Number(v) || \"-\"}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_pending_quantity\",\n    label: \"BAL\",\n    width: \"8%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-warning)] text-right block font-mono\">\n        {Number(v) || \"-\"}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_received_quantity\",\n    label: \"RECD\",\n    width: \"8%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-brand-primary)] text-right block font-mono\">\n        {Number(v) || \"-\"}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_invoice_value\",\n    label: \"VALUE\",\n    sortable: true,\n    align: \"right\",\n    width: \"12%\",\n    isCurrency: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-text-primary)] text-right block font-mono\">\n        {Number(v)}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"status\",\n    label: \"STATUS\",\n    sortable: true,\n    width: \"10%\",\n    align: \"center\",\n    render: (v) => <StatusBadge status={String(v || \"Pending\")} />,\n  },\n];\n\nexport default function InvoicePage() {\n  const router = useRouter();\n  const [invoices, setInvoices] = useState<InvoiceListItem[]>([]);\n  const [stats, setStats] = useState<InvoiceStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const debouncedSearch = useDebouncedValue(searchQuery, 300);\n  const [page, setPage] = useState(1);\n  const [pageSize] = useState(10);\n\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.ctrlKey || e.metaKey) && e.key === \"k\") {\n        e.preventDefault();\n        document.getElementById(\"invoice-search\")?.focus();\n      }\n      if (e.key === \"/\" && document.activeElement?.tagName !== \"INPUT\") {\n        e.preventDefault();\n        document.getElementById(\"invoice-search\")?.focus();\n      }\n    };\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, []);\n\n  useEffect(() => {\n    async function fetchInvoices() {\n      setLoading(true);\n      try {\n        const [invoicesData, statsData] = await Promise.all([\n          api.listInvoices(),\n          api.getInvoiceStats(),\n        ]);\n        setInvoices(invoicesData);\n        setStats(statsData);\n      } catch (error) {\n        console.error(\"Error fetching invoices:\", error);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchInvoices();\n  }, []);\n\n  const filteredInvoices = useMemo(() => {\n    const term = debouncedSearch.toLowerCase();\n    return invoices.filter(\n      (inv) =>\n        inv.invoice_number.toLowerCase().includes(term) ||\n        (inv.customer_gstin && inv.customer_gstin.toLowerCase().includes(term))\n    );\n  }, [invoices, debouncedSearch]);\n\n  // --- OPTIMIZATION: Memoized Summary Cards ---\n  const summaryCards = useMemo(\n    (): SummaryCardProps[] => [\n      {\n        title: \"Total Invoices\",\n        value: invoices.length,\n        icon: <Receipt size={20} />,\n        variant: \"primary\",\n      },\n      {\n        title: \"Paid Invoices\",\n        value: formatIndianCurrency(stats?.total_invoiced || 0),\n        icon: <CheckCircle size={20} />,\n        variant: \"success\",\n      },\n      {\n        title: \"Pending Payments\",\n        value: formatIndianCurrency(stats?.pending_payments || 0),\n        icon: <Clock size={20} />,\n        variant: \"warning\",\n      },\n      {\n        title: \"Total Invoiced\",\n        value: formatIndianCurrency(stats?.total_invoiced || 0),\n        icon: <Activity size={20} />,\n        variant: \"primary\",\n      },\n    ],\n    [invoices.length, stats]\n  );\n\n  // Toolbar\n  const handleSearch = useCallback((val: string) => {\n    setSearchQuery(val);\n  }, []);\n\n  const toolbar = (\n    <Flex align=\"center\" gap={3}>\n      <SearchBar\n        value={searchQuery}\n        onChange={handleSearch}\n        placeholder=\"Search Invoices...\"\n        className=\"w-64\"\n      />\n\n      <Button\n        variant=\"default\"\n        size=\"sm\"\n        onClick={() => router.push(\"/invoice/create\")}\n        className=\"bg-[var(--color-sys-brand-primary)] text-white hover:brightness-110 shadow-md\"\n      >\n        <Flex align=\"center\">\n          <Plus size={16} className=\"mr-2\" />\n          <Body className=\"text-inherit\">New Invoice</Body>\n        </Flex>\n      </Button>\n    </Flex>\n  );\n\n  return (\n    <ListPageTemplate\n      title=\"GST INVOICES\"\n      subtitle=\"Manage all billing documentation and compliance\"\n      toolbar={toolbar}\n      summaryCards={summaryCards}\n      columns={columns}\n      data={filteredInvoices}\n      keyField=\"invoice_number\"\n      page={page}\n      pageSize={pageSize}\n      totalItems={filteredInvoices.length}\n      onPageChange={(newPage) => setPage(newPage)}\n      loading={loading}\n      emptyMessage=\"No invoices found\"\n      density=\"compact\"\n      className=\"min-h-[600px]\"\n    />\n  );\n}\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\loading.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[42,81],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'motion' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React from \"react\";\nimport { motion } from \"framer-motion\";\n\nexport default function Loading() {\n  return (\n    <div className=\"space-y-8 animate-in fade-in duration-500\">\n      {/* Header Skeleton */}\n      <div className=\"flex flex-col gap-2\">\n        <div className=\"h-8 w-64 bg-[var(--color-sys-bg-tertiary)]/20 rounded-xl animate-pulse\" />\n        <div className=\"h-4 w-96 bg-[var(--color-sys-bg-tertiary)]/10 rounded-lg animate-pulse\" />\n      </div>\n\n      {/* KPI Grid Skeleton */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        {[1, 2, 3].map((i) => (\n          <div\n            key={i}\n            className=\"h-32 rounded-3xl bg-[var(--color-sys-bg-surface)] border border-[var(--color-sys-text-tertiary)]/5 shadow-sm p-6 space-y-4\"\n          >\n            <div className=\"flex justify-between items-start\">\n              <div className=\"h-4 w-24 bg-[var(--color-sys-bg-tertiary)]/20 rounded-md\" />\n              <div className=\"h-10 w-10 rounded-2xl bg-[var(--color-sys-bg-tertiary)]/10\" />\n            </div>\n            <div className=\"h-8 w-32 bg-[var(--color-sys-bg-tertiary)]/30 rounded-lg\" />\n          </div>\n        ))}\n      </div>\n\n      {/* Table Skeleton */}\n      <div className=\"space-y-4\">\n        <div className=\"h-10 w-full bg-[var(--color-sys-bg-tertiary)]/10 rounded-2xl\" />\n        <div className=\"rounded-3xl border border-[var(--color-sys-text-tertiary)]/5 overflow-hidden\">\n          {[1, 2, 3, 4, 5].map((i) => (\n            <div\n              key={i}\n              className=\"h-16 w-full border-b border-[var(--color-sys-text-tertiary)]/5 bg-[var(--color-sys-bg-surface)]/50 p-4 flex items-center gap-4\"\n            >\n              <div className=\"h-4 w-8 bg-[var(--color-sys-bg-tertiary)]/10 rounded-md\" />\n              <div className=\"h-4 w-1/4 bg-[var(--color-sys-bg-tertiary)]/20 rounded-md\" />\n              <div className=\"h-4 w-1/4 bg-[var(--color-sys-bg-tertiary)]/10 rounded-md\" />\n              <div className=\"h-4 w-1/4 bg-[var(--color-sys-bg-tertiary)]/10 rounded-md ml-auto\" />\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":20,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[636,696],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":20,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":14},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Skeleton' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":24,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":24,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":156,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":156,"endColumn":179},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":199,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":199,"endColumn":22,"suggestions":[{"fix":{"range":[6383,6427],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useMemo, useCallback } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport { api, DashboardSummary, ActivityItem } from \"@/lib/api\";\nimport { BriefingCard } from \"@/components/design-system/organisms/BriefingCard\";\nimport {\n  Receipt,\n  Activity,\n  Plus,\n  BarChart3,\n  ArrowRight,\n  Truck,\n  FileText,\n} from \"lucide-react\";\nimport { formatIndianCurrency, cn } from \"@/lib/utils\";\nimport { H1, H3, SmallText, Body, Accounting } from \"@/components/design-system/organisms\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Card } from \"@/components/design-system/organisms\";\nimport { SummaryCards } from \"@/components/design-system/organisms/SummaryCards\";\nimport { DataTable, Column } from \"@/components/design-system/organisms/DataTable\";\nimport { StatusBadge } from \"@/components/design-system/organisms/StatusBadge\";\nimport { SummaryCardSkeleton, TableRowSkeleton } from \"@/components/design-system/atoms/Skeleton\";\nimport { Flex, Stack, Grid, Box } from \"@/components/design-system/organisms\";\n\n// --- OPTIMIZATION: Static Column Definitions ---\n// Moved outside component to prevent re-creation on render.\nimport { AppRouterInstance } from \"next/dist/shared/lib/app-router-context.shared-runtime\";\n\nconst createActivityColumns = (router: AppRouterInstance): Column<ActivityItem>[] => [\n  {\n    key: \"number\",\n    label: \"RECORD\",\n    width: \"40%\",\n    render: (_value, item) => (\n      <Flex\n        align=\"center\"\n        gap={3}\n        className=\"cursor-pointer group py-1\"\n        onClick={() => {\n          const path =\n            item.type === \"PO\"\n              ? `/po/${item.number}`\n              : item.type === \"DC\"\n                ? `/dc/${item.number}`\n                : `/invoice/${item.number}`;\n          router.push(path);\n        }}\n      >\n        <motion.div\n          layoutId={\n            item.type === \"PO\"\n              ? `po-icon-${item.number}`\n              : item.type === \"DC\"\n                ? `dc-icon-${item.number}`\n                : `inv-icon-${item.number}`\n          }\n          className={cn(\n            \"p-2 rounded-lg transition-colors shrink-0\",\n            item.type === \"Invoice\"\n              ? \"bg-[var(--color-sys-brand-primary)]/10 text-[var(--color-sys-brand-primary)]\"\n              : item.type === \"PO\"\n                ? \"bg-[var(--color-sys-bg-tertiary)]/50 text-[var(--color-sys-text-secondary)]\"\n                : \"bg-[var(--color-sys-status-success)]/10 text-[var(--color-sys-status-success)]\"\n          )}\n        >\n          {item.type === \"Invoice\" ? (\n            <Receipt size={16} />\n          ) : item.type === \"PO\" ? (\n            <FileText size={16} />\n          ) : (\n            <Truck size={16} />\n          )}\n        </motion.div>\n        <motion.div\n          layoutId={\n            item.type === \"PO\"\n              ? `po-title-${item.number}`\n              : item.type === \"DC\"\n                ? `dc-title-${item.number}`\n                : `inv-title-${item.number}`\n          }\n          className=\"text-h3 font-semibold text-sys-primary group-hover:text-sys-brand transition-colors whitespace-nowrap\"\n        >\n          {item.number}\n        </motion.div>\n      </Flex>\n    ),\n  },\n  {\n    key: \"amount\",\n    label: \"AMOUNT\",\n    width: \"20%\",\n    align: \"right\",\n    render: (_value, item) => (\n      <Accounting\n        isCurrency\n        className=\"text-sys-primary text-right block\"\n      >\n        {item.amount || 0}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"status\",\n    label: \"STATUS\",\n    width: \"20%\",\n    render: (_value, item) => <StatusBadge status={item.status} className=\"w-24 justify-center\" />,\n  },\n  {\n    key: \"date\",\n    label: \"DATE\",\n    width: \"20%\",\n    align: \"right\",\n    render: (_value, item) => (\n      <SmallText className=\"text-sys-tertiary whitespace-nowrap leading-none\">\n        {item.date}\n      </SmallText>\n    ),\n  },\n];\n\n// ... (Rest of imports remain, remove BriefingCard if unused)\n\n// Quick Action Card Component\nfunction QuickActionCard({\n  title,\n  description,\n  icon,\n  onClick,\n  layoutId,\n}: {\n  title: string;\n  description: string;\n  icon: React.ReactNode;\n  onClick: () => void;\n  layoutId?: string;\n}) {\n  return (\n    <motion.div\n      whileHover={{ scale: 1.02, rotate: 0.5 }}\n      whileTap={{ scale: 0.95 }}\n      transition={{ type: \"spring\", stiffness: 400, damping: 17 }}\n    >\n      <div\n        className={cn(\n          \"p-5 cursor-pointer clay-card clay-press group relative overflow-hidden bg-[var(--color-sys-bg-surface)]\",\n          \"border-2 border-[var(--color-sys-surface-glass_border)]\"\n        )}\n        onClick={onClick}\n      >\n        <Flex align=\"center\" gap={4}>\n          <motion.div\n            layoutId={layoutId}\n            className=\"p-3 rounded-2xl bg-[var(--color-sys-bg-accent)] text-[var(--color-sys-brand-primary)] shadow-inner group-hover:scale-110 transition-transform duration-300\"\n          >\n            {icon}\n          </motion.div>\n\n          <Stack className=\"flex-1 min-w-0\">\n            <Body className=\"text-slate-700 leading-none\">\n              {title}\n            </Body>\n            <SmallText className=\"text-slate-500 mt-1.5\">{description}</SmallText>\n          </Stack>\n\n          <div className=\"w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center shadow-[-2px_-2px_5px_rgba(255,255,255,1),3px_3px_5px_rgba(165,177,198,0.3)]\">\n            <ArrowRight\n              size={14}\n              className=\"text-blue-500 transition-transform group-hover:translate-x-1\"\n            />\n          </div>\n        </Flex>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const [summary, setSummary] = useState<DashboardSummary | null>(null);\n  const [activity, setActivity] = useState<ActivityItem[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  // Memoize columns to prevent re-creation\n  const activityColumns = useMemo(() => createActivityColumns(router), [router]);\n\n  useEffect(() => {\n    const loadDashboard = async () => {\n      try {\n        const [summaryData, activityData] = await Promise.all([\n          api.getDashboardSummary(),\n          api.getRecentActivity(20),\n        ]);\n        setSummary(summaryData);\n        setActivity(activityData);\n      } catch (err) {\n        console.error(\"Dashboard Load Error:\", err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadDashboard();\n  }, []);\n\n  const handleAnalytics = useCallback(() => router.push(\"/reports\"), [router]);\n  const handleNewPO = useCallback(() => router.push(\"/po/create\"), [router]);\n  const handleNewDC = useCallback(() => router.push(\"/dc/create\"), [router]);\n  const handleNewInvoice = useCallback(() => router.push(\"/invoice/create\"), [router]);\n\n  return (\n    <Stack gap={8} className=\"relative z-0\">\n      {/* Header */}\n      <Flex align=\"center\" justify=\"between\">\n        <Stack>\n          <H1 className=\"text-slate-800 drop-shadow-sm\">DASHBOARD</H1>\n          <Body className=\"text-slate-500 mt-1\">Business intelligence overview</Body>\n        </Stack>\n        <Flex align=\"center\" gap={3}>\n          {/* Actions can remain standard or be upgraded too */}\n          <Button variant=\"secondary\" size=\"sm\" onClick={handleAnalytics}>\n            Analytics\n          </Button>\n          <Button variant=\"default\" size=\"sm\" onClick={handleNewPO}>\n            New Purchase Order\n          </Button>\n        </Flex>\n      </Flex>\n\n      {/* Hero Section: 3D Scene + KPI Cards */}\n      <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={8}>\n        {/* Left Column: Morning Briefing (4 cols) */}\n        <Box className=\"lg:col-span-4 h-full clay-card p-1 border border-[var(--color-sys-surface-glass_border)] !bg-[var(--color-sys-bg-surface)]/60 backdrop-blur-md\">\n          <div className=\"h-full rounded-[20px] overflow-hidden\">\n            <BriefingCard\n              pendingApprovals={summary?.pending_pos ?? 0}\n              dcInTransit={summary?.active_challans ?? 0}\n              onAction={handleAnalytics}\n              loading={loading}\n            />\n          </div>\n        </Box>\n\n        {/* Right Column: KPI Cards (8 cols) */}\n        <Box className=\"lg:col-span-8 min-h-[140px]\">\n          {loading ? (\n            <Grid cols=\"1\" className=\"md:grid-cols-2 lg:grid-cols-4\" gap={4}>\n              {/* Skeletons */}\n              <SummaryCardSkeleton />\n              <SummaryCardSkeleton />\n              <SummaryCardSkeleton />\n              <SummaryCardSkeleton />\n            </Grid>\n          ) : (\n            <SummaryCards\n              cards={[\n                {\n                  title: \"Invoiced Sales\",\n                  value: (\n                    <Accounting className=\"font-mono\">\n                      {formatIndianCurrency(summary?.total_sales_month || 0)}\n                    </Accounting>\n                  ),\n                  icon: <Receipt size={24} />,\n                  variant: \"success\",\n                },\n                {\n                  title: \"Purchase Commitment\",\n                  value: (\n                    <Accounting className=\"font-mono\">\n                      {formatIndianCurrency(summary?.total_po_value || 0)}\n                    </Accounting>\n                  ),\n                  icon: <FileText size={24} />,\n                  variant: \"primary\",\n                },\n                {\n                  title: \"Active Orders\",\n                  value: (\n                    <Accounting className=\"font-mono\">{summary?.active_po_count ?? 0}</Accounting>\n                  ),\n                  icon: <Activity size={24} />,\n                  variant: \"warning\",\n                },\n                {\n                  title: \"Efficiency Delta\",\n                  value: (\n                    <Accounting className=\"font-mono\">\n                      {String(summary?.po_value_growth ?? 0)}%\n                    </Accounting>\n                  ),\n                  icon: <BarChart3 size={24} />,\n                  variant: \"primary\",\n                  trend: {\n                    value: summary?.po_value_growth ? `${Number(summary.po_value_growth) > 0 ? \"+\" : \"\"}${summary.po_value_growth}%` : \"Stable\",\n                    direction: Number(summary?.po_value_growth || 0) >= 0 ? \"up\" : \"down\"\n                  },\n                },\n              ]}\n              loading={loading}\n              className=\"lg:grid-cols-2 xl:grid-cols-4\"\n            // Add props if SummaryCards supports container styling for 3D effects\n            />\n          )}\n        </Box>\n      </Grid>\n\n      {/* Two-column layout */}\n      <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={8}>\n        {/* Recent Activity Table - Glassmorphic */}\n        <Stack className=\"lg:col-span-8\" gap={4}>\n          <Flex align=\"center\" justify=\"between\">\n            <H3>Transaction Ledger</H3>\n            <Button variant=\"ghost\" size=\"sm\" onClick={handleAnalytics}>\n              View All\n            </Button>\n          </Flex>\n\n          <Box className=\"min-h-[400px] rounded-3xl shadow-[var(--shadow-3d-floating)] bg-[var(--color-sys-bg-surface)]/60 backdrop-blur-xl border border-[var(--color-sys-surface-glass_border)] overflow-hidden\">\n            {loading ? (\n              <div className=\"p-6 space-y-4\">\n                <TableRowSkeleton columns={4} />\n                <TableRowSkeleton columns={4} />\n              </div>\n            ) : (\n              <div className=\"p-2\">\n                <DataTable\n                  columns={activityColumns}\n                  data={activity}\n                  keyField=\"number\"\n                  pageSize={8}\n                  density=\"compact\"\n                  no_borders // Clean look inside glass\n                  table_surface_solid={false} // Force glass\n                />\n              </div>\n            )}\n          </Box>\n        </Stack>\n\n        {/* Quick Actions (Execution Center) */}\n        <Stack className=\"lg:col-span-4\" gap={4}>\n          <H3>Execution Center</H3>\n          <Stack gap={4}>\n            <QuickActionCard\n              title=\"New Purchase Order\"\n              description=\"Initiate procurement lifecycle\"\n              icon={<Plus size={20} />}\n              onClick={handleNewPO}\n              layoutId=\"create-po-icon\"\n            />\n            <QuickActionCard\n              title=\"Issue Delivery Challan\"\n              description=\"Commit inventory to logistics\"\n              icon={<Truck size={20} />}\n              onClick={handleNewDC}\n              layoutId=\"create-dc-icon\"\n            />\n            <QuickActionCard\n              title=\"Generate Invoice\"\n              description=\"Finalize financial reconciliation\"\n              icon={<Receipt size={20} />}\n              onClick={handleNewInvoice}\n              layoutId=\"create-invoice-icon\"\n            />\n          </Stack>\n        </Stack>\n      </Grid>\n    </Stack>\n  );\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po-notes\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":4,"column":41,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[111,114],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":4,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":42},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":33,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":33,"endColumn":20,"suggestions":[{"fix":{"range":[1411,1459],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":53,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":53,"endColumn":22,"suggestions":[{"fix":{"range":[1950,1997],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":72,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":72,"endColumn":20,"suggestions":[{"fix":{"range":[2464,2513],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":122,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":122,"endColumn":71},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":124,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":124,"endColumn":65},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":139,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":139,"endColumn":74},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":148,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":148,"endColumn":109},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":158,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":158,"endColumn":60},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":173,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":173,"endColumn":62},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":176,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":176,"endColumn":56}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport { Plus, Edit2, Trash2, FileText, X, CheckSquare, Quote } from \"lucide-react\";\nimport { api, PONote } from \"@/lib/api\";\nimport { H3, Body, SmallText, Label } from \"@/components/design-system/organisms\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Card } from \"@/components/design-system/organisms\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport { Badge } from \"@/components/design-system/organisms\";\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport { Dialog } from \"@/components/design-system/molecules/Dialog\";\nimport { Flex, Stack, Grid, Box } from \"@/components/design-system/organisms\";\n\nexport default function PONotesPage() {\n  const [templates, setTemplates] = useState<PONote[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [deleteId, setDeleteId] = useState<number | null>(null);\n  const [formData, setFormData] = useState({ title: \"\", content: \"\" });\n\n  useEffect(() => {\n    loadTemplates();\n  }, []);\n\n  const loadTemplates = useCallback(async () => {\n    try {\n      setLoading(true);\n      const data = await api.getPONotes();\n      setTemplates(data || []);\n    } catch (err) {\n      console.error(\"Failed to load templates:\", err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  const handleSubmit = useCallback(\n    async (e: React.FormEvent) => {\n      e.preventDefault();\n      try {\n        if (editingId) {\n          await api.updatePONote(editingId.toString(), formData);\n        } else {\n          await api.createPONote(formData);\n        }\n        setFormData({ title: \"\", content: \"\" });\n        setEditingId(null);\n        setShowForm(false);\n        loadTemplates();\n      } catch (err) {\n        console.error(\"Failed to save template:\", err);\n      }\n    },\n    [editingId, formData, loadTemplates]\n  );\n\n  const handleEdit = useCallback((template: PONote) => {\n    setFormData({ title: template.title, content: template.content });\n    setEditingId(template.id);\n    setShowForm(true);\n  }, []);\n\n  const handleDelete = useCallback(async () => {\n    if (!deleteId) return;\n    try {\n      await api.deletePONote(deleteId.toString());\n      loadTemplates();\n      setDeleteId(null);\n    } catch (err) {\n      console.error(\"Failed to delete template:\", err);\n    }\n  }, [deleteId, loadTemplates]);\n\n  const actions = (\n    <Button\n      variant=\"default\"\n      onClick={() => {\n        setFormData({ title: \"\", content: \"\" });\n        setEditingId(null);\n        setShowForm(true);\n      }}\n      disabled={loading}\n    >\n      <Plus size={16} />\n      New Template\n    </Button>\n  );\n\n  return (\n    <DocumentTemplate\n      title=\"Document Templates\"\n      description=\"Reusable terms and conditions for purchase orders & challans\"\n      actions={actions}\n      className=\"space-y-6\"\n    >\n      <Stack gap={6}>\n        {/* Content Grid */}\n        <Grid cols=\"1\" className=\"md:grid-cols-2 lg:grid-cols-3\" gap={6}>\n          {loading ? (\n            Array.from({ length: 6 }).map((_, i) => (\n              <Card key={i} className=\"h-64 p-6 flex flex-col gap-4\">\n                <Flex align=\"center\" gap={3}>\n                  <div className=\"w-10 h-10 rounded-lg bg-slate-100 animate-pulse\" />\n                  <div className=\"h-4 w-32 bg-slate-100 rounded animate-pulse\" />\n                </Flex>\n                <div className=\"flex-1 bg-slate-50/50 rounded-lg border border-slate-100 animate-pulse\" />\n              </Card>\n            ))\n          ) : (\n            <>\n              {templates.map((template) => (\n                <Card\n                  key={template.id}\n                  className=\"flex flex-col h-full hover:shadow-lg transition-shadow animate-in fade-in zoom-in-95 duration-300\"\n                >\n                  <div className=\"p-6 flex-1 flex flex-col\">\n                    <Flex justify=\"between\" align=\"start\" className=\"mb-4\">\n                      <Flex align=\"center\" gap={3} className=\"flex-1\">\n                        <div className=\"w-10 h-10 bg-[#1A3D7C]/10 rounded-lg flex items-center justify-center shrink-0\">\n                          <FileText className=\"w-5 h-5 text-[#1A3D7C]\" />\n                        </div>\n                        <H3 className=\"text-[16px] line-clamp-1\">{template.title}</H3>\n                      </Flex>\n                      <Flex gap={1}>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(template)}\n                          title=\"Edit\"\n                        >\n                          <Edit2 size={14} />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => setDeleteId(template.id)}\n                          className=\"text-[#DC2626] hover:text-[#991B1B]\"\n                          title=\"Delete\"\n                        >\n                          <Trash2 size={14} />\n                        </Button>\n                      </Flex>\n                    </Flex>\n\n                    <Box className=\"flex-1 bg-[#F9FAFB] rounded-lg p-4 border border-[#E5E7EB]\">\n                      <SmallText className=\"text-[#6B7280] leading-relaxed whitespace-pre-wrap line-clamp-6\">\n                        {template.content}\n                      </SmallText>\n                    </Box>\n\n                    <Flex\n                      align=\"center\"\n                      justify=\"between\"\n                      className=\"mt-4 pt-4 border-t border-[#E5E7EB]\"\n                    >\n                      <SmallText className=\"text-[#9CA3AF]\">\n                        Ver. {new Date(template.updated_at).getFullYear()}.\n                        {new Date(template.updated_at).getMonth() + 1}\n                      </SmallText>\n                      <Badge variant=\"success\">\n                        <CheckSquare size={12} /> Active\n                      </Badge>\n                    </Flex>\n                  </div>\n                </Card>\n              ))}\n\n              {templates.length === 0 && (\n                <Card className=\"text-center py-24 border-dashed border-[#E5E7EB] col-span-full\">\n                  <div className=\"w-16 h-16 bg-[#F9FAFB] rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <Quote className=\"w-8 h-8 text-[#D1D5DB]\" />\n                  </div>\n                  <H3 className=\"mb-2\">No templates configured</H3>\n                  <Body className=\"text-[#6B7280] mb-6\">\n                    Standardize your document terms for faster processing.\n                  </Body>\n                  <Button onClick={() => setShowForm(true)} variant=\"default\">\n                    <Plus size={16} />\n                    Setup First Template\n                  </Button>\n                </Card>\n              )}\n            </>\n          )}\n        </Grid>\n      </Stack>\n\n      {/* Edit/Create Dialog */}\n      <Dialog\n        isOpen={showForm}\n        onClose={() => setShowForm(false)}\n        title={editingId ? \"Update Template\" : \"New Template\"}\n        maxWidth=\"max-w-xl\"\n        footer={\n          <Button type=\"button\" variant=\"default\" onClick={handleSubmit} className=\"w-full\">\n            {editingId ? \"Save Changes\" : \"Create Template\"}\n          </Button>\n        }\n      >\n        <Stack gap={4} className=\"py-4\">\n          <p className=\"text-sm text-slate-500 -mt-2\">\n            Configure standard terms for purchase orders\n          </p>\n          <Stack gap={2}>\n            <Label>Template Title</Label>\n            <Input\n              value={formData.title}\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              placeholder=\"e.g., Standard Warranty Clause\"\n              required\n              autoFocus\n            />\n          </Stack>\n\n          <Stack gap={2}>\n            <Label>Template Content</Label>\n            <textarea\n              value={formData.content}\n              onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n              rows={10}\n              className=\"w-full px-3 py-2 border border-[#D1D5DB] rounded-md focus:outline-none focus:ring-2 focus:ring-[#1A3D7C] resize-none\"\n              placeholder=\"Enter documentation text...\"\n              required\n            />\n          </Stack>\n        </Stack>\n      </Dialog>\n\n      {/* Delete Confirmation Dialog */}\n      <Dialog\n        isOpen={!!deleteId}\n        onClose={() => setDeleteId(null)}\n        title=\"Delete Template?\"\n        maxWidth=\"max-w-md\"\n        footer={\n          <div className=\"flex gap-3 w-full\">\n            <Button variant=\"ghost\" onClick={() => setDeleteId(null)} className=\"flex-1\">\n              Cancel\n            </Button>\n            <Button variant=\"destructive\" onClick={handleDelete} className=\"flex-1\">\n              Delete Forever\n            </Button>\n          </div>\n        }\n      >\n        <p className=\"mb-4 text-slate-500\">This action cannot be undone.</p>\n        <Body className=\"text-slate-600\">\n          Are you sure you want to permanently delete this template? Any new documents will no\n          longer be able to use this preset.\n        </Body>\n      </Dialog>\n    </DocumentTemplate>\n  );\n}\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowLeft' is defined but never used.","line":6,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowLeft"},"fix":{"range":[157,167],"text":""},"desc":"Remove unused variable 'ArrowLeft'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowLeft' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'ShoppingCart' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"ShoppingCart"},"fix":{"range":[236,252],"text":""},"desc":"Remove unused variable 'ShoppingCart'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ShoppingCart' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Loader2' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Loader2"},"fix":{"range":[272,283],"text":""},"desc":"Remove unused variable 'Loader2'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Loader2' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":10},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[283,298],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'Sparkles' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Sparkles"},"fix":{"range":[298,310],"text":""},"desc":"Remove unused variable 'Sparkles'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sparkles' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Building' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Building"},"fix":{"range":[310,322],"text":""},"desc":"Remove unused variable 'Building'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Building' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[334,346],"text":""},"desc":"Remove unused variable 'Activity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Activity' is defined but never used.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[392,403],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Package' is defined but never used.","line":27,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":10},{"ruleId":"no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Download"},"fix":{"range":[403,415],"text":""},"desc":"Remove unused variable 'Download'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle2"},"fix":{"range":[427,443],"text":""},"desc":"Remove unused variable 'CheckCircle2'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle2' is defined but never used.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":31,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[443,452],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":31,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":32,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"MapPin"},"fix":{"range":[452,462],"text":""},"desc":"Remove unused variable 'MapPin'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'MapPin' is defined but never used.","line":32,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'Phone' is defined but never used.","line":33,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Phone"},"fix":{"range":[462,471],"text":""},"desc":"Remove unused variable 'Phone'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Phone' is defined but never used.","line":33,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":34,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Mail"},"fix":{"range":[471,479],"text":""},"desc":"Remove unused variable 'Mail'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Mail' is defined but never used.","line":34,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"User"},"fix":{"range":[479,487],"text":""},"desc":"Remove unused variable 'User'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'User' is defined but never used.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'H1' is defined but never used.","line":48,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"H1"},"fix":{"range":[860,866],"text":""},"desc":"Remove unused variable 'H1'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H1' is defined but never used.","line":48,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'H3' is defined but never used.","line":49,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"H3"},"fix":{"range":[866,872],"text":""},"desc":"Remove unused variable 'H3'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H3' is defined but never used.","line":49,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'DetailField' is defined but never used.","line":58,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"DetailField"},"fix":{"range":[989,1068],"text":""},"desc":"Remove unused variable 'DetailField'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DetailField' is defined but never used.","line":58,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is assigned a value but never used.","line":91,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"error"},"fix":{"range":[2191,2196],"text":""},"desc":"Remove unused variable 'error'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is assigned a value but never used.","line":91,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":91,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":161,"column":5,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":161,"endColumn":54},{"ruleId":"no-unused-vars","severity":1,"message":"'handleDisableEdit' is assigned a value but never used.","line":213,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":213,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"handleDisableEdit"},"fix":{"range":[6302,6370],"text":""},"desc":"Remove unused variable 'handleDisableEdit'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleDisableEdit' is assigned a value but never used.","line":213,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":213,"endColumn":26},{"ruleId":"no-unused-vars","severity":1,"message":"'topActions' is assigned a value but never used.","line":221,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":221,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"topActions"},"fix":{"range":[6487,8650],"text":""},"desc":"Remove unused variable 'topActions'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'topActions' is assigned a value but never used.","line":221,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":221,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":229,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":229,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":245,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":245,"endColumn":238},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":297,"column":16,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":297,"endColumn":83},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":302,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":302,"endColumn":228},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":338,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":338,"endColumn":140},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":353,"column":11,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":353,"endColumn":115},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":360,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":360,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":385,"column":11,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":385,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":387,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":387,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":401,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":401,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":618,"column":26,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":618,"endColumn":107},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":683,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":683,"endColumn":181},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":699,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":699,"endColumn":181},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":705,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":705,"endColumn":173},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":810,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":810,"endColumn":211},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":814,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":814,"endColumn":155},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":839,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":839,"endColumn":203},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":853,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":853,"endColumn":160},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":860,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":860,"endColumn":246},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":881,"column":47,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":881,"endColumn":129},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":887,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":887,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":900,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":900,"endColumn":155},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":903,"column":55,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":903,"endColumn":152},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":910,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":910,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":926,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":926,"endColumn":197},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":929,"column":49,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":929,"endColumn":131},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":936,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":936,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":939,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":939,"endColumn":133},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":945,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":945,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":948,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":948,"endColumn":143},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":959,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":959,"endColumn":183},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":969,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":969,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":972,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":972,"endColumn":104}],"suppressedMessages":[],"errorCount":55,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport React, { useEffect, useState, Suspense, useCallback } from \"react\";\nimport { useRouter, useParams } from \"next/navigation\";\nimport {\n  ArrowLeft,\n  Edit2,\n  Save,\n  X,\n  ChevronDown,\n  ChevronUp,\n  Plus,\n  FileText,\n  ShoppingCart,\n  Calendar,\n  Info,\n  Loader2,\n  AlertCircle,\n  Sparkles,\n  Building,\n  Landmark,\n  Activity,\n  Layers,\n  Receipt,\n  Trash2,\n  ShieldCheck,\n  Package,\n  Download,\n  FileDown,\n  CheckCircle2,\n  Clock,\n  MapPin,\n  Phone,\n  Mail,\n  User,\n} from \"lucide-react\";\n\nimport { api, API_BASE_URL } from \"@/lib/api\";\nimport { formatDate, formatIndianCurrency, cn } from \"@/lib/utils\";\nimport { PODetail, POItem, PODelivery, SRVListItem } from \"@/types\";\n\n// Atomic Design Components\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport {\n  GlassContainer,\n  Button,\n  Badge,\n  H1,\n  H3,\n  Body,\n  SmallText,\n  Label,\n  Input,\n  Accounting,\n  Flex,\n  Box,\n} from \"@/components/design-system/organisms\";\nimport { DetailField } from \"@/components/design-system/molecules/DetailField\";\nimport {\n  Tabs,\n  TabsList,\n  TabsTrigger,\n  TabsContent,\n} from \"@/components/design-system/molecules/Tabs\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport dynamic from \"next/dynamic\";\nimport { DetailSkeleton } from \"@/components/design-system/molecules/skeletons/DetailSkeleton\";\n\nconst DocumentJourney = dynamic(\n  () =>\n    import(\"@/components/design-system/molecules/DocumentJourney\").then(\n      (mod) => mod.DocumentJourney\n    ),\n  {\n    loading: () => <div className=\"h-6 w-48 bg-[var(--color-sys-bg-tertiary)] rounded-full animate-pulse\" />,\n    ssr: false,\n  }\n);\n\nfunction PODetailContent() {\n  const router = useRouter();\n  const params = useParams();\n  const poId = params.id as string;\n  const [data, setData] = useState<PODetail | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [editMode, setEditMode] = useState(false);\n  const [expandedItems, setExpandedItems] = useState<Set<number>>(new Set());\n  const [hasDC, setHasDC] = useState(false);\n  const [dcId, setDCId] = useState<string | null>(null);\n  const [srvs, setSrvs] = useState<SRVListItem[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  // Restore tab state from v2 blueprint\n  const [activeTab, setActiveTab] = useState(\"basic\");\n\n  useEffect(() => {\n    if (!poId) return;\n    const loadData = async () => {\n      try {\n        const [poData, dcCheck, srvData] = await Promise.all([\n          api.getPODetail(parseInt(poId)),\n          api.checkPOHasDC(parseInt(poId)).catch(() => null),\n          api.listSRVs(parseInt(poId)).catch(() => []),\n        ]);\n\n        setData(poData);\n        if (poData.items)\n          setExpandedItems(new Set(poData.items.map((item: POItem) => item.po_item_no)));\n\n        if (dcCheck?.has_dc) {\n          setHasDC(true);\n          setDCId(dcCheck.dc_id || null);\n        }\n        // Fix: Ensure we handle potential type mismatch if API returns strictly SRVListItem[]\n        // but Types expects extra fields. For now, we cast or map if necessary.\n        setSrvs((srvData || []) as SRVListItem[]);\n      } catch (err: any) {\n        setError(err.message || \"Traceback failure in record retrieval\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, [poId]);\n\n  const handleSave = useCallback(async () => {\n    if (!data || !data.header) return;\n    setLoading(true);\n    try {\n      await api.updatePO(data.header.po_number, data.header, data.items);\n      setEditMode(false);\n      const poData = await api.getPODetail(parseInt(poId!));\n      setData(poData);\n    } catch (err: any) {\n      setError(err.message || \"Failed to sync changes\");\n    } finally {\n      setLoading(false);\n    }\n  }, [data, poId]);\n\n  const addItem = useCallback(() => {\n    if (!data || !data.items) return;\n    const maxItemNo = Math.max(...data.items.map((i: POItem) => i.po_item_no || 0), 0);\n    const newItem = {\n      po_item_no: maxItemNo + 1,\n      material_code: \"\",\n      material_description: \"NEW PROCUREMENT ITEM\",\n      drg_no: \"\",\n      unit: \"NOS\",\n      ordered_quantity: 0,\n      po_rate: 0,\n      item_value: 0,\n      delivered_quantity: 0,\n      deliveries: [],\n    };\n    setData({ ...data, items: [...data.items, newItem] });\n    setExpandedItems(new Set([...Array.from(expandedItems), maxItemNo + 1]));\n  }, [data, expandedItems]);\n\n  const toggleItem = useCallback((itemNo: number) => {\n    const s = new Set(expandedItems);\n    s.has(itemNo) ? s.delete(itemNo) : s.add(itemNo);\n    setExpandedItems(s);\n  }, [expandedItems]);\n\n  const updateHeader = (field: string, value: any) => {\n    if (!data) return;\n    setData({\n      ...data,\n      header: { ...data.header, [field]: value },\n    });\n  };\n\n  const updateItem = (index: number, field: string, value: any) => {\n    if (!data || !data.items) return;\n    const newItems = [...data.items];\n    newItems[index] = { ...newItems[index], [field]: value };\n    if (field === \"po_rate\" || field === \"ordered_quantity\") {\n      newItems[index].item_value =\n        (newItems[index].ordered_quantity || 0) * (newItems[index].po_rate || 0);\n    }\n    setData({ ...data, items: newItems });\n  };\n\n  const addDelivery = (itemIdx: number) => {\n    if (!data || !data.items) return;\n    const newItems = [...data.items];\n    const item = newItems[itemIdx];\n    const maxLotNo = Math.max(...(item.deliveries?.map((d: PODelivery) => d.lot_no || 0) || []), 0);\n    const newLot = {\n      lot_no: maxLotNo + 1,\n      delivered_quantity: 0,\n      dely_date: new Date().toISOString().split(\"T\")[0],\n    };\n    newItems[itemIdx].deliveries = [...(item.deliveries || []), newLot];\n    setData({ ...data, items: newItems });\n  };\n\n  const removeDelivery = (itemIdx: number, deliveryIdx: number) => {\n    if (!data || !data.items) return;\n    const newItems = [...data.items];\n    newItems[itemIdx].deliveries = newItems[itemIdx].deliveries.filter((_, i) => i !== deliveryIdx);\n    setData({ ...data, items: newItems });\n  };\n\n\n  const removeItem = (index: number) => {\n    if (!data || !data.items) return;\n    const newItems = data.items.filter((_, i) => i !== index);\n    setData({ ...data, items: newItems });\n  };\n\n  const handleEnableEdit = useCallback(() => setEditMode(true), []);\n  const handleDisableEdit = useCallback(() => setEditMode(false), []);\n\n  if (loading || !data || !data.header) {\n    return <DetailSkeleton />;\n  }\n\n  const { header, items } = data;\n\n  const topActions = (\n    <div className=\"flex items-center gap-2.5\">\n      {editMode ? (\n        <>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => setEditMode(false)}\n            className=\"text-[var(--color-sys-status-error)] border-[var(--color-sys-status-error)]/20 shadow-sm\"\n          >\n            <X className=\"w-3.5 h-3.5 mr-2\" />\n            Discard\n          </Button>\n          <Button variant=\"default\" size=\"sm\" onClick={handleSave}>\n            <Save className=\"w-3.5 h-3.5 mr-2\" />\n            SAVE CHANGES\n          </Button>\n        </>\n      ) : (\n        <>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            asChild\n            className=\"text-[var(--color-sys-status-success)] border-[var(--color-sys-status-success)]/20 bg-[var(--color-sys-status-success)]/10 hover:bg-[var(--color-sys-status-success)]/20 hover:text-[var(--color-sys-status-success)]\"\n          >\n            <a\n              href={`${api.baseUrl}/api/po/${header.po_number}/download`}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              <FileDown className=\"w-3.5 h-3.5 mr-2\" />\n              EXCEL\n            </a>\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() =>\n              hasDC && dcId\n                ? router.push(`/dc/${dcId}`)\n                : router.push(`/dc/create?po=${header.po_number}`)\n            }\n            className={cn(\n              \"border-[var(--color-sys-text-tertiary)]/20\",\n              hasDC\n                ? \"bg-[var(--color-sys-status-success)]/10 text-[var(--color-sys-status-success)] shadow-sm border-[var(--color-sys-status-success)]/20\"\n                : \"text-[var(--color-sys-text-secondary)]\"\n            )}\n          >\n            <FileText className=\"w-3.5 h-3.5 mr-2\" />\n            {hasDC ? \"VIEW DC\" : \"GENERATE DC\"}\n          </Button>\n          <Button variant=\"default\" size=\"sm\" onClick={handleEnableEdit}>\n            <Edit2 className=\"w-3.5 h-3.5 mr-2\" />\n            MODIFY\n          </Button>\n        </>\n      )}\n    </div>\n  );\n\n  // Using Atomic Components for Fields - Unified for Zero Layout Shift\n  const Field = ({\n    label,\n    value,\n    field,\n    readonly = false,\n  }: {\n    label: string;\n    value: any;\n    field?: string;\n    readonly?: boolean;\n  }) => {\n    return (\n      <div className=\"min-h-[44px] flex flex-col justify-center\">\n        <Label className=\"mb-1.5 font-bold text-[var(--color-sys-text-secondary)]\">{label}</Label>\n        {editMode && field && !readonly ? (\n          <Input\n            value={value ?? \"\"}\n            onChange={(e) => updateHeader(field, e.target.value)}\n            className=\"h-7 text-body px-2 py-1 border-none bg-[var(--color-sys-bg-tertiary)]/50 focus:bg-[var(--color-sys-bg-primary)] transition-all shadow-none focus:shadow-sm font-medium text-[var(--color-sys-text-primary)]\"\n          />\n        ) : (\n          <Body\n            className=\"font-medium text-sys-primary leading-tight py-1 truncate\"\n            title={value?.toString()}\n          >\n            {value || (\n              <span className=\"text-sys-tertiary font-normal italic opacity-60 uppercase tracking-tighter text-label\">\n                Empty\n              </span>\n            )}\n          </Body>\n        )}\n      </div>\n    );\n  };\n\n  // ≡ƒÄ¿ VISUAL UPGRADE: Actions (Moved from fixed bar to standard top actions for compliance)\n  const renderActions = () => {\n    if (editMode) {\n      return (\n        <Flex align=\"center\" gap={3}>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setEditMode(false)}\n            className=\"text-sys-secondary hover:bg-[var(--color-sys-bg-tertiary)]/10 text-small\"\n          >\n            <X className=\"w-4 h-4 mr-2\" />\n            DISCARD\n          </Button>\n          <Button\n            variant=\"default\"\n            size=\"sm\"\n            onClick={handleSave}\n            className=\"bg-[var(--color-sys-brand-primary)] hover:brightness-110 text-[var(--color-sys-text-on-brand)] shadow-sm text-small\"\n          >\n            <Save className=\"w-4 h-4 mr-2\" />\n            SAVE CHANGES\n          </Button>\n        </Flex>\n      );\n    }\n\n    return (\n      <Flex align=\"center\" gap={3}>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          asChild\n          className=\"text-[var(--color-sys-text-secondary)] hover:bg-[var(--color-sys-bg-tertiary)]/10 text-small\"\n        >\n          <a\n            href={`${API_BASE_URL}/api/po/${header.po_number}/download`}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            <FileDown className=\"w-4 h-4 mr-2 text-[var(--color-sys-brand-primary)]\" />\n            EXCEL\n          </a>\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() =>\n            hasDC && dcId\n              ? router.push(`/dc/${dcId}`)\n              : router.push(`/dc/create?po=${header.po_number}`)\n          }\n          className={cn(\n            \"text-[var(--color-sys-text-secondary)] hover:bg-[var(--color-sys-bg-tertiary)]/10 text-small\",\n            hasDC && \"text-[var(--color-sys-status-success)]\"\n          )}\n        >\n          <FileText className=\"w-4 h-4 mr-2\" />\n          {hasDC ? \"VIEW DC\" : \"GENERATE DC\"}\n        </Button>\n        <Box className=\"w-[1px] h-6 bg-[var(--color-sys-text-tertiary)]/10 mx-1\" />\n        <Button\n          variant=\"default\"\n          size=\"sm\"\n          onClick={handleEnableEdit}\n          className=\"bg-[var(--color-sys-brand-primary)] text-[var(--color-sys-text-on-brand)] hover:brightness-110 shadow-lg text-small\"\n        >\n          <Edit2 className=\"w-4 h-4 mr-2 text-[var(--color-sys-text-on-brand)]\" />\n          MODIFY RECORD\n        </Button>\n      </Flex>\n    );\n  };\n\n  return (\n    <DocumentTemplate\n      title={`PO #${header.po_number}`}\n      description={`${header.supplier_name} ΓÇó ${formatDate(header.po_date)}`}\n      actions={renderActions()}\n      onBack={() => router.back()}\n      layoutId={`po-title-${header.po_number}`}\n      icon={<FileText size={20} className=\"text-[var(--color-sys-brand-primary)]\" />}\n      iconLayoutId={`po-icon-${header.po_number}`}\n      status={header.po_status}\n    >\n      <div className=\"space-y-6\">\n        {/* Document Journey */}\n        <DocumentJourney currentStage=\"PO\" className=\"mb-2\" />\n\n        {/* V2 Layout: Comprehensive Tabs */}\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"mb-4 bg-transparent p-0 border-b border-[var(--color-sys-text-tertiary)]/10 w-full justify-start rounded-none gap-6\">\n            <TabsTrigger value=\"basic\">\n              <Info className=\"w-3.5 h-3.5 mr-1.5\" />\n              Basic\n            </TabsTrigger>\n            <TabsTrigger value=\"references\">\n              <FileText className=\"w-3.5 h-3.5 mr-1.5\" />\n              Refs\n            </TabsTrigger>\n            <TabsTrigger value=\"financial\">\n              <Landmark className=\"w-3.5 h-3.5 mr-1.5\" />\n              Finance\n            </TabsTrigger>\n            <TabsTrigger value=\"issuer\">\n              <ShieldCheck className=\"w-3.5 h-3.5 mr-1.5\" />\n              Issuer\n            </TabsTrigger>\n            <TabsTrigger value=\"srvs\">\n              <Receipt className=\"w-3.5 h-3.5 mr-1.5\" />\n              SRVs ({srvs.length})\n            </TabsTrigger>\n          </TabsList>\n\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={activeTab}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.15 }}\n            >\n              <GlassContainer className=\"p-6 min-h-[180px] border-none shadow-sm mt-0 relative top-[-1px]\">\n                <TabsContent value=\"basic\" className=\"m-0\">\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\n                    <Field label=\"PO Number\" value={header.po_number} field=\"po_number\" readonly />\n                    <Field\n                      label=\"PO Date\"\n                      value={formatDate(header.po_date)}\n                      field=\"po_date\"\n                      readonly\n                    />\n                    <Field\n                      label=\"Supplier Name\"\n                      value={header.supplier_name}\n                      field=\"supplier_name\"\n                    />\n                    <Field\n                      label=\"Supplier Code\"\n                      value={header.supplier_code}\n                      field=\"supplier_code\"\n                    />\n                    <Field label=\"Phone\" value={header.supplier_phone} field=\"supplier_phone\" />\n                    <Field label=\"Fax\" value={header.supplier_fax} field=\"supplier_fax\" />\n                    <Field label=\"Email\" value={header.supplier_email} field=\"supplier_email\" />\n                    <Field\n                      label=\"Dept No (DVN)\"\n                      value={header.department_no}\n                      field=\"department_no\"\n                    />\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"references\" className=\"m-0\">\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\n                    <Field label=\"Enquiry No\" value={header.enquiry_no} field=\"enquiry_no\" />\n                    <Field\n                      label=\"Enquiry Date\"\n                      value={formatDate(header.enquiry_date)}\n                      field=\"enquiry_date\"\n                    />\n                    <Field\n                      label=\"Quotation Ref\"\n                      value={header.quotation_ref}\n                      field=\"quotation_ref\"\n                    />\n                    <Field\n                      label=\"Quotation Date\"\n                      value={formatDate(header.quotation_date)}\n                      field=\"quotation_date\"\n                    />\n                    <Field label=\"RC No\" value={header.rc_no} field=\"rc_no\" />\n                    <Field label=\"Order Type\" value={header.order_type} field=\"order_type\" />\n                    <Field label=\"PO Status\" value={header.po_status} field=\"po_status\" />\n                    <Field label=\"Amd No\" value={header.amend_no} field=\"amend_no\" />\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"financial\" className=\"m-0\">\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\n                    <Field\n                      label=\"PO Value\"\n                      value={formatIndianCurrency(header.po_value)}\n                      field=\"po_value\"\n                    />\n                    <Field\n                      label=\"FOB Value\"\n                      value={formatIndianCurrency(header.fob_value)}\n                      field=\"fob_value\"\n                    />\n                    <Field\n                      label=\"Net Value\"\n                      value={formatIndianCurrency(header.net_po_value)}\n                      field=\"net_po_value\"\n                    />\n                    <Field label=\"TIN No\" value={header.tin_no} field=\"tin_no\" />\n                    <Field label=\"ECC No\" value={header.ecc_no} field=\"ecc_no\" />\n                    <Field label=\"MPCT No\" value={header.mpct_no} field=\"mpct_no\" />\n                    <Field label=\"Currency\" value={header.currency} field=\"currency\" />\n                    <Field label=\"Ex Rate\" value={header.ex_rate} field=\"ex_rate\" />\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"issuer\" className=\"m-0\">\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\n                    <Field\n                      label=\"Inspection By\"\n                      value={header.inspection_by}\n                      field=\"inspection_by\"\n                    />\n                    <Field label=\"Issuer Name\" value={header.issuer_name} field=\"issuer_name\" />\n                    <Field\n                      label=\"Designation\"\n                      value={header.issuer_designation}\n                      field=\"issuer_designation\"\n                    />\n                    <Field label=\"Issuer Phone\" value={header.issuer_phone} field=\"issuer_phone\" />\n                    {/* Truncated Remarks Section to Save a Row */}\n                    <div className=\"col-span-2 md:col-span-4 mt-2\">\n                      <div className=\"flex flex-col\">\n                        <Label className=\"mb-1 font-bold text-sys-secondary\">\n                          Remarks\n                        </Label>\n                        {editMode ? (\n                          <input\n                            value={header.remarks || \"\"}\n                            onChange={(e) => updateHeader(\"remarks\", e.target.value)}\n                            className=\"w-full h-8 px-2 text-body border-none bg-[var(--color-sys-bg-tertiary)]/50 rounded focus:bg-[var(--color-sys-bg-primary)] transition-all shadow-none font-medium text-sys-primary\"\n                            placeholder=\"Enter remarks...\"\n                          />\n                        ) : (\n                          <div\n                            className=\"text-body text-sys-primary font-normal line-clamp-1 italic px-0.5 opacity-90\"\n                            title={header.remarks || \"\"}\n                          >\n                            {header.remarks || \"No remarks provided.\"}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"srvs\" className=\"m-0\">\n                  {srvs.length > 0 ? (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                      {srvs.map((srv) => (\n                        <div\n                          key={srv.srv_number}\n                          className=\"p-4 rounded-xl shadow-sm bg-[var(--color-sys-bg-tertiary)]/10 hover:bg-[var(--color-sys-brand-primary)]/[0.03] hover:shadow-md transition-all duration-300 group cursor-pointer border border-[var(--color-sys-text-tertiary)]/10\"\n                          onClick={() => router.push(`/srv/${srv.srv_number}`)}\n                        >\n                          <div className=\"flex justify-between items-start mb-3\">\n                            <div className=\"space-y-0.5\">\n                              <Label className=\"font-bold text-sys-primary group-hover:text-sys-brand cursor-pointer\">\n                                SRV-{srv.srv_number}\n                              </Label>\n                              <SmallText className=\"font-medium text-sys-tertiary flex items-center gap-1 uppercase tracking-tighter\">\n                                <Calendar className=\"w-2.5 h-2.5\" />\n                                {formatDate(srv.srv_date)}\n                              </SmallText>\n                            </div>\n                            <div className=\"flex flex-col items-end gap-1.5\">\n                              <div className=\"w-6 h-6 rounded-lg bg-[var(--color-sys-brand-primary)]/10 flex items-center justify-center text-sys-brand shadow-sm border border-[var(--color-sys-brand-primary)]/20\">\n                                <Receipt className=\"w-3 h-3\" />\n                              </div>\n                              {srv.invoice_numbers && (\n                                <Badge\n                                  variant=\"default\"\n                                  className=\"text-h4 py-0 px-1.5 h-5 font-bold\"\n                                >\n                                  INV: {srv.invoice_numbers.split(\",\")[0]}\n                                </Badge>\n                              )}\n                            </div>\n                          </div>\n                          <div className=\"grid grid-cols-2 pt-2 border-t border-[var(--color-sys-text-tertiary)]/10 gap-2\">\n                            <div>\n                              <div className=\"text-h4 font-bold text-sys-success uppercase tracking-widest leading-tight\">\n                                Accepted\n                              </div>\n                              <div className=\"text-small font-bold text-sys-primary\">\n                                <Accounting>{srv.total_accepted_qty || 0}</Accounting>\n                              </div>\n                            </div>\n                            <div className=\"text-right\">\n                              <div className=\"text-h4 font-bold text-sys-error uppercase tracking-widest leading-tight\">\n                                Rejected\n                              </div>\n                              <div className=\"text-small font-bold text-sys-primary\">\n                                <Accounting>{srv.total_rejected_qty || 0}</Accounting>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-6 text-[var(--color-sys-text-tertiary)] text-xs italic\">\n                      No linked SRVs found.\n                    </div>\n                  )}\n                </TabsContent>\n              </GlassContainer>\n            </motion.div>\n          </AnimatePresence>\n        </Tabs>\n\n        {/* Items & Deliveries - Custom Table matching Atomic Vibe + V2 Layout */}\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Label className=\"m-0 text-body font-black text-sys-secondary\">\n                Bill of Materials\n              </Label>\n            </div>\n            {editMode && (\n              <Button\n                size=\"sm\"\n                onClick={addItem}\n                variant=\"ghost\"\n                className=\"h-8 text-small bg-[var(--color-sys-bg-tertiary)] text-sys-primary hover:bg-[var(--color-sys-bg-secondary)] font-bold\"\n              >\n                <Plus className=\"w-3.5 h-3.5 mr-1.5\" />\n                ADD ITEM\n              </Button>\n            )}\n          </div>\n\n          <div className=\"overflow-hidden rounded-2xl bg-[var(--color-sys-bg-primary)] shadow-xl shadow-[var(--color-sys-brand-primary)]/5 border-none\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-left\">\n                <thead className=\"bg-[var(--color-sys-bg-tertiary)]/50\">\n                  <tr>\n                    <th className=\"py-2.5 px-4 table-header-text text-center w-12\">#</th>\n                    <th className=\"py-2.5 px-4 table-header-text text-left w-32\">Code</th>\n                    <th className=\"py-2.5 px-4 table-header-text text-left\">Description</th>\n                    <th className=\"py-2.5 px-4 table-header-text text-left w-20\">Unit</th>\n                    <th className=\"py-2.5 px-4 table-header-text text-right w-28\">Rate</th>\n                    <th className=\"py-2.5 px-2 table-header-text text-right w-32\">Ord</th>\n                    <th className=\"py-2.5 px-2 table-header-text text-right w-32\">Dlv</th>\n                    <th className=\"py-2.5 px-2 table-header-text text-right w-32\">Bal</th>\n                    <th className=\"py-2.5 px-2 table-header-text text-right w-32\">Rec</th>\n                    <th className=\"py-2.5 px-4 w-12\"></th>\n                  </tr>\n                </thead>\n                <tbody className=\"min-h-[200px]\">\n                  {items.map((item, idx) => (\n                    <React.Fragment key={item.po_item_no}>\n                      <tr\n                        className={cn(\n                          \"hover:bg-[var(--color-sys-bg-secondary)] transition-colors group\",\n                          expandedItems.has(item.po_item_no) ? \"bg-[var(--color-sys-bg-secondary)]/50\" : \"\"\n                        )}\n                      >\n                        <td className=\"py-2 px-4 text-center align-top pt-3.5 italic table-cell-text\">\n                          {idx + 1}\n                        </td>\n                        <td className=\"py-2 px-4 align-top pt-2.5\">\n                          {editMode ? (\n                            <Input\n                              value={item.material_code}\n                              onChange={(e) => updateItem(idx, \"material_code\", e.target.value)}\n                              className=\"h-7 w-full px-1.5 py-1 border-none bg-[var(--color-sys-bg-tertiary)]/50 font-medium text-[var(--color-sys-text-primary)] table-cell-number\"\n                            />\n                          ) : (\n                            <Accounting className=\"tracking-tighter table-cell-number\">\n                              {item.material_code}\n                            </Accounting>\n                          )}\n                        </td>\n                        <td className=\"py-2 px-4 align-top pt-2.5\">\n                          {editMode ? (\n                            <div className=\"space-y-1\">\n                              <Input\n                                value={item.material_description}\n                                onChange={(e) =>\n                                  updateItem(idx, \"material_description\", e.target.value)\n                                }\n                                className=\"h-7 w-full px-1.5 py-1 border-none bg-[var(--color-sys-bg-tertiary)]/50 font-medium text-[var(--color-sys-text-primary)] table-cell-text\"\n                              />\n                              <Input\n                                value={item.drg_no}\n                                onChange={(e) => updateItem(idx, \"drg_no\", e.target.value)}\n                                placeholder=\"Drawing\"\n                                className=\"h-6 text-small w-32 px-1.5 py-0.5 border-none bg-[var(--color-sys-bg-tertiary)] font-medium text-[var(--color-sys-text-primary)]\"\n                              />\n                            </div>\n                          ) : (\n                            <div className=\"space-y-0.5\">\n                              <div\n                                className=\"font-medium leading-tight truncate max-w-[400px] table-cell-text\"\n                                title={item.material_description}\n                              >\n                                {item.material_description}\n                              </div>\n                              {item.drg_no && (\n                                <div className=\"text-h4 font-medium text-sys-brand uppercase tracking-tight\">\n                                  DRG: {item.drg_no}\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"py-2 px-4 align-top pt-2.5\">\n                          {editMode ? (\n                            <Input\n                              value={item.unit}\n                              onChange={(e) => updateItem(idx, \"unit\", e.target.value)}\n                              className=\"h-7 text-body w-14 px-1 py-1 border-none bg-[var(--color-sys-bg-tertiary)]/50 font-medium text-sys-primary\"\n                            />\n                          ) : (\n                            <SmallText className=\"text-sys-secondary uppercase font-bold\">\n                              {item.unit}\n                            </SmallText>\n                          )}\n                        </td>\n                        <td className=\"py-2 px-4 text-right align-top pt-3\">\n                          {editMode ? (\n                            <Input\n                              type=\"number\"\n                              variant=\"ghost\"\n                              value={item.po_rate}\n                              onChange={(e) =>\n                                updateItem(idx, \"po_rate\", parseFloat(e.target.value))\n                              }\n                              className=\"h-7 text-body text-right w-full px-1.5 py-1 font-medium text-sys-primary focus:bg-[var(--color-sys-bg-tertiary)] transition-colors\"\n                            />\n                          ) : (\n                            <div className=\"h-7 px-1.5 py-1 flex items-center justify-end\">\n                              <Accounting className=\"tracking-tighter table-cell-number font-mono text-right block\">\n                                {formatIndianCurrency(item.po_rate)}\n                              </Accounting>\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"py-2 px-2 text-right align-top pt-3\">\n                          {editMode ? (\n                            <Input\n                              type=\"number\"\n                              variant=\"ghost\"\n                              value={item.ordered_quantity}\n                              onChange={(e) =>\n                                updateItem(idx, \"ordered_quantity\", parseFloat(e.target.value))\n                              }\n                              className=\"h-7 text-body text-right w-full px-1 py-1 font-medium text-sys-primary focus:bg-[var(--color-sys-bg-tertiary)] transition-colors\"\n                            />\n                          ) : (\n                            <div className=\"h-7 px-1 py-1 flex items-center justify-end\">\n                              <Accounting className=\"tracking-tighter table-cell-number text-right block font-mono\">\n                                {item.ordered_quantity}\n                              </Accounting>\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"py-2 px-2 text-right align-top pt-3\">\n                          {editMode ? (\n                            <Input\n                              type=\"number\"\n                              variant=\"ghost\"\n                              value={item.delivered_quantity}\n                              onChange={(e) =>\n                                updateItem(idx, \"delivered_quantity\", parseFloat(e.target.value))\n                              }\n                              className=\"h-7 text-body text-right w-full px-1 py-1 font-mono font-medium text-sys-brand focus:bg-[var(--color-sys-brand-primary)]/10 transition-colors\"\n                            />\n                          ) : (\n                            <div className=\"h-7 px-1 py-1 flex items-center justify-end\">\n                              <Accounting className=\"text-sys-brand tracking-tighter table-cell-number text-right block font-mono\">\n                                {item.delivered_quantity}\n                              </Accounting>\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"py-2 px-2 text-right align-top pt-3\">\n                          <div className=\"h-7 px-1 py-1 flex items-center justify-end\">\n                            <Accounting className=\"tracking-tighter table-cell-number text-right block font-mono\">\n                              {(item.ordered_quantity || 0) - (item.received_quantity || 0)}\n                            </Accounting>\n                          </div>\n                        </td>\n                        <td className=\"py-2 px-2 text-right align-top pt-3\">\n                          {editMode ? (\n                            <Input\n                              type=\"number\"\n                              variant=\"ghost\"\n                              value={item.received_quantity}\n                              onChange={(e) =>\n                                updateItem(idx, \"received_quantity\", parseFloat(e.target.value))\n                              }\n                              className=\"h-7 text-[13px] text-right w-full px-1 py-1 font-mono font-medium text-[var(--color-sys-status-success)] focus:bg-[var(--color-sys-status-success)]/10 transition-colors\"\n                            />\n                          ) : (\n                            <div className=\"h-7 px-1 py-1 flex items-center justify-end\">\n                              <Accounting className=\"text-[var(--color-sys-status-success)] tracking-tighter table-cell-number text-right block font-mono\">\n                                {item.received_quantity}\n                              </Accounting>\n                            </div>\n                          )}\n                        </td>\n                        <td className=\"py-2 px-4 align-top pt-2\">\n                          <div className=\"flex flex-col gap-1 items-center\">\n                            <button\n                              onClick={() => toggleItem(item.po_item_no)}\n                              className={cn(\n                                \"p-1.5 rounded-md transition-all text-[var(--color-sys-text-tertiary)] hover:text-[var(--color-sys-text-primary)]\",\n                                expandedItems.has(item.po_item_no) &&\n                                \"text-[var(--color-sys-brand-primary)] bg-[var(--color-sys-brand-primary)]/10\"\n                              )}\n                            >\n                              {expandedItems.has(item.po_item_no) ? (\n                                <ChevronUp className=\"w-4 h-4\" />\n                              ) : (\n                                <ChevronDown className=\"w-4 h-4\" />\n                              )}\n                            </button>\n                            {editMode && (\n                              <button\n                                onClick={() => removeItem(idx)}\n                                className=\"p-1.5 rounded-md text-[var(--color-sys-status-error)]/60 hover:text-[var(--color-sys-status-error)] hover:bg-[var(--color-sys-status-error)]/10 transition-all\"\n                              >\n                                <Trash2 className=\"w-4 h-4\" />\n                              </button>\n                            )}\n                          </div>\n                        </td>\n                      </tr>\n                      {expandedItems.has(item.po_item_no) && (\n                        <tr className=\"bg-[var(--color-sys-bg-tertiary)]/5\">\n                          <td colSpan={10} className=\"p-0\">\n                            <div className=\"pb-6 pt-2 pl-12 relative\">\n                              <div className=\"absolute left-[34px] top-0 bottom-6 w-px bg-[var(--color-sys-text-tertiary)]/20\" />\n                              <div className=\"flex items-center justify-between mb-3 border-none pb-2\">\n                                <h4 className=\"text-[10px] font-bold text-[var(--color-sys-text-secondary)] uppercase tracking-[0.2em] flex items-center gap-2\">\n                                  <Layers size={12} />\n                                  Delivery Lots & Schedules\n                                </h4>\n                                {editMode && (\n                                  <button\n                                    onClick={() => addDelivery(idx)}\n                                    className=\"text-[10px] font-bold text-[var(--color-sys-brand-primary)] hover:brightness-110 transition-all uppercase tracking-tight flex items-center bg-[var(--color-sys-brand-primary)]/5 px-2 py-1 rounded-md\"\n                                  >\n                                    <Plus className=\"w-3 h-3 mr-1\" />\n                                    Add Lot\n                                  </button>\n                                )}\n                              </div>\n\n                              <div className=\"space-y-1 relative ml-2\">\n                                {/* Vertical Guide Line */}\n                                <div className=\"absolute left-[-14px] top-0 bottom-4 w-px bg-[var(--color-sys-text-tertiary)]/20\" />\n                                {item.deliveries && item.deliveries.length > 0 ? (\n                                  item.deliveries.map((d, dIdx) => (\n                                    <div\n                                      key={dIdx}\n                                      className=\"flex items-center gap-8 py-2 px-4 rounded-lg hover:bg-[var(--color-sys-bg-tertiary)]/10 transition-colors group/lot relative\"\n                                    >\n                                      {/* Horizontal Connector */}\n                                      <div className=\"absolute left-[-14px] top-1/2 w-3 h-px bg-[var(--color-sys-text-tertiary)]/20\" />\n\n                                      <div className=\"flex items-center gap-3 min-w-[60px]\">\n                                        <span className=\"text-[11px] font-black text-[var(--color-sys-brand-primary)] font-mono\">\n                                          L{d.lot_no}\n                                        </span>\n                                      </div>\n\n                                      <div className=\"flex items-center gap-2 min-w-[120px] justify-end\">\n                                        <Label className=\"mb-0 text-[9px] text-[var(--color-sys-text-tertiary)] uppercase font-medium\">\n                                          Qty\n                                        </Label>\n                                        {editMode ? (\n                                          <Input\n                                            type=\"number\"\n                                            value={d.delivered_quantity}\n                                            onChange={(e) => {\n                                              const n = [...items];\n                                              n[idx].deliveries[dIdx].delivered_quantity =\n                                                parseFloat(e.target.value);\n                                              setData({ ...data, items: n });\n                                            }}\n                                            className=\"h-7 w-20 text-right bg-[var(--color-sys-bg-secondary)] border-none text-[11px] font-bold font-mono\"\n                                          />\n                                        ) : (\n                                          <Accounting className=\"text-[11px] font-bold text-[var(--color-sys-text-primary)] font-mono text-right block\">\n                                            {d.delivered_quantity}\n                                          </Accounting>\n                                        )}\n                                      </div>\n\n                                      <div className=\"flex items-center gap-2 min-w-[150px]\">\n                                        <Label className=\"mb-0 text-[9px] text-[var(--color-sys-text-tertiary)] uppercase font-medium\">\n                                          Date\n                                        </Label>\n                                        {editMode ? (\n                                          <input\n                                            type=\"date\"\n                                            value={\n                                              d.dely_date\n                                                ? new Date(d.dely_date).toISOString().split(\"T\")[0]\n                                                : \"\"\n                                            }\n                                            onChange={(e) => {\n                                              const n = [...items];\n                                              n[idx].deliveries[dIdx].dely_date = e.target.value;\n                                              setData({ ...data, items: n });\n                                            }}\n                                            className=\"h-7 w-28 text-[11px] bg-[var(--color-sys-bg-secondary)] rounded px-2 border-none outline-none text-[var(--color-sys-text-primary)] font-bold\"\n                                          />\n                                        ) : (\n                                          <Body className=\"text-[11px] font-bold text-[var(--color-sys-text-secondary)] font-mono\">\n                                            {formatDate(d.dely_date)}\n                                          </Body>\n                                        )}\n                                      </div>\n\n                                      <div className=\"flex items-center gap-2 min-w-[150px]\">\n                                        <Label className=\"mb-0 text-[9px] text-[var(--color-sys-text-tertiary)] uppercase font-medium\">\n                                          Entry By\n                                        </Label>\n                                        <SmallText className=\"text-[10px] font-bold text-[var(--color-sys-text-tertiary)] font-mono\">\n                                          {formatDate(d.entry_allow_date)}\n                                        </SmallText>\n                                      </div>\n\n                                      <div className=\"flex items-center gap-2 min-w-[80px]\">\n                                        <Label className=\"mb-0 text-[9px] text-[var(--color-sys-text-tertiary)] uppercase font-medium\">\n                                          Dest\n                                        </Label>\n                                        <SmallText className=\"text-[10px] font-bold text-[var(--color-sys-text-tertiary)] font-mono uppercase\">\n                                          {d.dest_code || \"-\"}\n                                        </SmallText>\n                                      </div>\n\n                                      {editMode && (\n                                        <div className=\"ml-auto\">\n                                          <Button\n                                            variant=\"ghost\"\n                                            size=\"sm\"\n                                            onClick={() => removeDelivery(idx, dIdx)}\n                                            className=\"text-[var(--color-sys-status-error)]/40 hover:text-[var(--color-sys-status-error)] hover:bg-[var(--color-sys-status-error)]/10\"\n                                          >\n                                            <Trash2 className=\"w-3.5 h-3.5\" />\n                                          </Button>\n                                        </div>\n                                      )}\n                                    </div>\n                                  ))\n                                ) : (\n                                  <div className=\"flex items-center gap-3 py-4 pl-12\">\n                                    <SmallText className=\"text-[var(--color-sys-text-tertiary)]\">\n                                      Γöö\n                                    </SmallText>\n                                    <SmallText className=\"italic text-[var(--color-sys-text-tertiary)]\">\n                                      No delivery lots defined for this item\n                                    </SmallText>\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          </td>\n                        </tr>\n                      )}\n                    </React.Fragment>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n      {/* Removed fixed floating actions bar for compliance with \"no fixed components\" rule */}\n    </DocumentTemplate>\n  );\n}\n\nexport default function PODetailPage() {\n  return (\n    <Suspense fallback={<DetailSkeleton />}>\n      <PODetailContent />\n    </Suspense>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\create\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":3,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"useMemo"},"fix":{"range":[32,41],"text":""},"desc":"Remove unused variable 'useMemo'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useMemo' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'SmallText' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"SmallText"},"fix":{"range":[284,297],"text":""},"desc":"Remove unused variable 'SmallText'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SmallText' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":17,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[609,670],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":17,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'formatIndianCurrency' is defined but never used.","line":26,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"formatIndianCurrency"},"fix":{"range":[914,935],"text":""},"desc":"Remove unused variable 'formatIndianCurrency'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatIndianCurrency' is defined but never used.","line":26,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'formatDate' is defined but never used.","line":26,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"formatDate"},"fix":{"range":[934,946],"text":""},"desc":"Remove unused variable 'formatDate'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatDate' is defined but never used.","line":26,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":42},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":129,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":129,"endColumn":20,"suggestions":[{"fix":{"range":[3793,3827],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":175,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":175,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":206,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":206,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":215,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":215,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":219,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":219,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":223,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":223,"endColumn":94},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":230,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":230,"endColumn":152},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":235,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":235,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":241,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":241,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":250,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":250,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":258,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":258,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":262,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":262,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":270,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":270,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":274,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":274,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":280,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":280,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":284,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":284,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":300,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":300,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":306,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":306,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":310,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":310,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":316,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":316,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":320,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":320,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":335,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":335,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":341,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":341,"endColumn":95},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":345,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":345,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":351,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":351,"endColumn":95},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":355,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":355,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":370,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":370,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":380,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":380,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":386,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":386,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":390,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":390,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":409,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":409,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":419,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":419,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":439,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":439,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":454,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":454,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":459,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":459,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":464,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":464,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":469,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":469,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":474,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":474,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":489,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":489,"endColumn":127},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":500,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":500,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":504,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":504,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":511,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":511,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":515,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":515,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":522,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":522,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":555,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":555,"endColumn":115},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":564,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":564,"endColumn":121},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":575,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":575,"endColumn":116},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":576,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":576,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":589,"column":26,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":589,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":594,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":594,"endColumn":88}],"suppressedMessages":[],"errorCount":54,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useMemo, useCallback } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { Save, Plus, Trash2, Package, Loader2, FileText, Calendar } from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  H3,\n  Label,\n  SmallText,\n  Body,\n  Accounting,\n} from \"@/components/design-system/organisms\";\nimport { DocumentJourney } from \"@/components/design-system/molecules/DocumentJourney\";\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Badge } from \"@/components/design-system/organisms\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport { Card } from \"@/components/design-system/organisms\";\nimport {\n  Tabs,\n  TabsList,\n  TabsTrigger,\n  TabsContent,\n} from \"@/components/design-system/molecules/Tabs\";\nimport { formatIndianCurrency, formatDate } from \"@/lib/utils\";\nimport { api } from \"@/lib/api\";\n\nexport default function CreatePOPage() {\n  const router = useRouter();\n\n  const initialData = {\n    header: {\n      po_number: \"\",\n      po_date: new Date().toISOString().split(\"T\")[0],\n      supplier_name: \"\",\n      supplier_code: \"\",\n      supplier_phone: \"\",\n      supplier_fax: \"\",\n      supplier_email: \"\",\n      department_no: \"\",\n      enquiry_no: \"\",\n      enquiry_date: \"\",\n      quotation_ref: \"\",\n      quotation_date: \"\",\n      rc_no: \"\",\n      order_type: \"\",\n      po_status: \"New\",\n      amend_no: 0,\n      po_value: 0,\n      fob_value: 0,\n      net_po_value: 0,\n      tin_no: \"\",\n      ecc_no: \"\",\n      mpct_no: \"\",\n      inspection_by: \"\",\n      inspection_at: \"BHEL Works, Bhopal\",\n      consignee_name: \"BHEL BHOPAL\",\n      consignee_address: \"PIPLANI, BHOPAL, MADHYA PRADESH, 462022\",\n      issuer_name: \"\",\n      issuer_designation: \"\",\n      issuer_phone: \"\",\n      remarks: \"\",\n    },\n    items: [],\n  };\n\n  const [data, setData] = useState<any>(initialData);\n  const [activeTab, setActiveTab] = useState(\"basic\");\n  const [saving, setSaving] = useState(false);\n\n  const addItem = useCallback(() => {\n    setData((prev: any) => {\n      const maxItemNo =\n        prev.items.length > 0 ? Math.max(...prev.items.map((i: any) => i.po_item_no || 0)) : 0;\n      const newItem = {\n        po_item_no: maxItemNo + 1,\n        material_code: \"\",\n        material_description: \"\",\n        drg_no: \"\",\n        unit: \"NOS\",\n        ord_qty: 0,\n        po_rate: 0,\n        item_value: 0,\n        deliveries: [],\n      };\n      return { ...prev, items: [...prev.items, newItem] };\n    });\n  }, []);\n\n  const removeItem = useCallback((itemNo: number) => {\n    setData((prev: any) => ({\n      ...prev,\n      items: prev.items.filter((i: any) => i.po_item_no !== itemNo),\n    }));\n  }, []);\n\n  const handleSave = useCallback(async () => {\n    if (!data.header.po_number) {\n      alert(\"PO Number is required\");\n      return;\n    }\n\n    setSaving(true);\n    try {\n      // Map frontend data to backend PODetail schema\n      const payload = {\n        header: {\n          ...data.header,\n          po_number: parseInt(data.header.po_number),\n          po_date: data.header.po_date,\n        },\n        items: data.items.map((item: any) => ({\n          po_item_no: item.po_item_no,\n          material_code: item.material_code,\n          material_description: item.material_description,\n          drg_no: item.drg_no,\n          unit: item.unit,\n          po_rate: item.po_rate,\n          ordered_quantity: item.ord_qty,\n          item_value: item.item_value,\n          deliveries: [], // Simple manual PO creation defaults to one delivery in backend\n        })),\n      };\n\n      await api.createPO(payload);\n      router.push(`/po/${data.header.po_number}`);\n    } catch (err: any) {\n      console.error(\"Save Error:\", err);\n      alert(err.message || \"Failed to save Purchase Order\");\n    } finally {\n      setSaving(false);\n    }\n  }, [data, router]);\n\n  const { header, items } = data;\n\n  const updateHeader = useCallback((field: string, value: any) => {\n    setData({\n      ...data,\n      header: { ...data.header, [field]: value },\n    });\n  }, [data]);\n\n  const updateItem = (index: number, field: string, value: any) => {\n    const newItems = [...data.items];\n    newItems[index] = { ...newItems[index], [field]: value };\n    if (field === \"ord_qty\" || field === \"po_rate\") {\n      newItems[index].item_value = (newItems[index].ord_qty || 0) * (newItems[index].po_rate || 0);\n    }\n    setData({ ...data, items: newItems });\n  };\n\n  const topActions = (\n    <div className=\"flex items-center gap-2\">\n      <Button variant=\"outline\" size=\"sm\" onClick={() => router.back()} disabled={saving}>\n        Cancel\n      </Button>\n      <Button variant=\"default\" size=\"sm\" onClick={handleSave} disabled={saving}>\n        {saving ? (\n          <Loader2 size={16} className=\"animate-spin mr-2\" />\n        ) : (\n          <Save size={16} className=\"mr-2\" />\n        )}\n        {saving ? \"Saving...\" : \"Save PO\"}\n      </Button>\n    </div>\n  );\n\n  return (\n    <DocumentTemplate\n      title=\"Create Purchase Order\"\n      description=\"Enter procurement contract details manually\"\n      actions={topActions}\n      icon={<FileText size={20} className=\"text-[var(--color-sys-brand-primary)]\" />}\n      iconLayoutId=\"create-po-icon\"\n    >\n      <div className=\"mb-6\">\n        <DocumentJourney currentStage=\"PO\" />\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* Tabs for Header Info */}\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"mb-4 bg-[var(--color-sys-bg-tertiary)]/30 p-1 rounded-xl\">\n            <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\n            <TabsTrigger value=\"supplier\">Supplier</TabsTrigger>\n            <TabsTrigger value=\"references\">References</TabsTrigger>\n            <TabsTrigger value=\"financial\">Financial</TabsTrigger>\n            <TabsTrigger value=\"issuer\">Issuer</TabsTrigger>\n            <TabsTrigger value=\"consignee\">Consignee</TabsTrigger>\n          </TabsList>\n\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={activeTab}\n              initial={{ opacity: 0, y: 4 }}\n              animate={{ opacity: 1, y: 0 }}\n              exit={{ opacity: 0, y: -4 }}\n              transition={{ duration: 0.15, ease: \"easeOut\" }}\n            >\n              <Card className=\"p-6\">\n                <TabsContent value=\"basic\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        PO Number\n                      </Label>\n                      <Input\n                        id=\"po-number\"\n                        name=\"po-number\"\n                        value={header.po_number}\n                        onChange={(e) => updateHeader(\"po_number\", e.target.value)}\n                        placeholder=\"e.g. 4500012345\"\n                        className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        PO Date\n                      </Label>\n                      <div className=\"bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/50 shadow-sm focus-within:ring-2 focus-within:ring-[var(--color-sys-brand-primary)]/10 transition-all flex items-center gap-2\">\n                        <Calendar size={14} className=\"text-[var(--color-sys-brand-primary)]\" />\n                        <Input\n                          id=\"po-date\"\n                          name=\"po-date\"\n                          type=\"date\"\n                          value={header.po_date}\n                          onChange={(e) => updateHeader(\"po_date\", e.target.value)}\n                          className=\"font-bold text-[var(--color-sys-text-primary)] bg-transparent border-none p-0 focus:ring-0 cursor-pointer text-sm\"\n                        />\n                      </div>\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Department No\n                      </Label>\n                      <Input\n                        value={header.department_no}\n                        onChange={(e) => updateHeader(\"department_no\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"supplier\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Supplier Name\n                      </Label>\n                      <Input\n                        id=\"supplier-name\"\n                        name=\"supplier-name\"\n                        value={header.supplier_name}\n                        onChange={(e) => updateHeader(\"supplier_name\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Supplier Code\n                      </Label>\n                      <Input\n                        id=\"supplier-code\"\n                        name=\"supplier-code\"\n                        value={header.supplier_code}\n                        onChange={(e) => updateHeader(\"supplier_code\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Phone\n                      </Label>\n                      <Input\n                        value={header.supplier_phone}\n                        onChange={(e) => updateHeader(\"supplier_phone\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Email\n                      </Label>\n                      <Input\n                        type=\"email\"\n                        value={header.supplier_email}\n                        onChange={(e) => updateHeader(\"supplier_email\", e.target.value)}\n                        className=\"font-medium text-slate-930\"\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"references\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Enquiry No\n                      </Label>\n                      <Input\n                        value={header.enquiry_no}\n                        onChange={(e) => updateHeader(\"enquiry_no\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        RC Number\n                      </Label>\n                      <Input\n                        value={header.rc_no}\n                        onChange={(e) => updateHeader(\"rc_no\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Order Type\n                      </Label>\n                      <Input\n                        value={header.order_type}\n                        onChange={(e) => updateHeader(\"order_type\", e.target.value)}\n                        className=\"font-medium text-slate-930\"\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"financial\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        TIN Number\n                      </Label>\n                      <Input\n                        value={header.tin_no}\n                        onChange={(e) => updateHeader(\"tin_no\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)] font-mono\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        ECC Number\n                      </Label>\n                      <Input\n                        value={header.ecc_no}\n                        onChange={(e) => updateHeader(\"ecc_no\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)] font-mono\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        MPCT Number\n                      </Label>\n                      <Input\n                        value={header.mpct_no}\n                        onChange={(e) => updateHeader(\"mpct_no\", e.target.value)}\n                        className=\"font-medium text-slate-930 font-mono\"\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"issuer\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Issuer Name\n                      </Label>\n                      <Input\n                        value={header.issuer_name}\n                        onChange={(e) => updateHeader(\"issuer_name\", e.target.value)}\n                        className=\"font-medium text-slate-930\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Designation\n                      </Label>\n                      <Input\n                        value={header.issuer_designation}\n                        onChange={(e) => updateHeader(\"issuer_designation\", e.target.value)}\n                        className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                      />\n                    </div>\n                    <div className=\"col-span-full space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Remarks\n                      </Label>\n                      <textarea\n                        id=\"remarks\"\n                        name=\"remarks\"\n                        value={header.remarks}\n                        onChange={(e) => updateHeader(\"remarks\", e.target.value)}\n                        className=\"w-full px-3 py-2 text-slate-930 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-950/10 focus:border-slate-300 resize-none transition-all\"\n                        rows={3}\n                        placeholder=\"Additional project information...\"\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n\n                <TabsContent value=\"consignee\" className=\"mt-0\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Consignee Name\n                      </Label>\n                      <Input\n                        value={header.consignee_name}\n                        onChange={(e) => updateHeader(\"consignee_name\", e.target.value)}\n                        className=\"font-medium text-slate-930\"\n                      />\n                    </div>\n                    <div className=\"space-y-1.5\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-secondary)]\">\n                        Consignee Address\n                      </Label>\n                      <textarea\n                        value={header.consignee_address}\n                        onChange={(e) => updateHeader(\"consignee_address\", e.target.value)}\n                        className=\"w-full px-3 py-2 text-slate-930 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-slate-950/10 focus:border-slate-300 resize-none transition-all\"\n                        rows={3}\n                      />\n                    </div>\n                  </div>\n                </TabsContent>\n              </Card>\n            </motion.div>\n          </AnimatePresence>\n        </Tabs>\n\n        {/* Items Section */}\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-between px-1\">\n            <H3 className=\"font-medium text-[var(--color-sys-text-primary)] text-sm\">\n              Material Items ({items.length})\n            </H3>\n            <Button color=\"secondary\" size=\"sm\" onClick={addItem}>\n              <Plus size={16} className=\"mr-2\" />\n              Add Item\n            </Button>\n          </div>\n\n          <Card className=\"p-0 overflow-hidden border-none shadow-sm\">\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-[var(--color-sys-text-tertiary)]/10 bg-[var(--color-sys-bg-tertiary)]/30\">\n                    <th className=\"py-3 px-6 text-left\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-tertiary)]\">\n                        #\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-left\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-tertiary)]\">\n                        Material Details\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-tertiary)]\">\n                        Qty\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-tertiary)]\">\n                        Rate\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 text-right\">\n                      <Label className=\"uppercase text-[var(--color-sys-text-tertiary)]\">\n                        Value\n                      </Label>\n                    </th>\n                    <th className=\"py-3 px-6 w-16\"></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {items.length > 0 ? (\n                    items.map((item: any, idx: number) => (\n                      <tr\n                        key={`item-${idx}`}\n                        className=\"border-b border-[var(--color-sys-text-tertiary)]/5 hover:bg-[var(--color-sys-bg-tertiary)]/5 transition-colors\"\n                      >\n                        <td className=\"py-4 px-6\">\n                          <Accounting className=\"font-medium text-[var(--color-sys-text-primary)] font-mono text-center block\">\n                            {item.po_item_no}\n                          </Accounting>\n                        </td>\n                        <td className=\"py-4 px-6 space-y-3 min-w-[300px]\">\n                          <Input\n                            value={item.material_description}\n                            onChange={(e) =>\n                              updateItem(idx, \"material_description\", e.target.value)\n                            }\n                            placeholder=\"Material Description\"\n                            className=\"font-medium text-[var(--color-sys-text-primary)]\"\n                          />\n                          <div className=\"grid grid-cols-3 gap-2\">\n                            <div>\n                              <Label className=\"uppercase text-[var(--color-sys-text-tertiary)] ml-1\">\n                                Code\n                              </Label>\n                              <Input\n                                value={item.material_code}\n                                onChange={(e) => updateItem(idx, \"material_code\", e.target.value)}\n                                placeholder=\"Code\"\n                                className=\"font-medium text-[var(--color-sys-text-primary)] h-8\"\n                              />\n                            </div>\n                            <div>\n                              <Label className=\"uppercase text-[var(--color-sys-text-tertiary)] ml-1\">\n                                Drawing\n                              </Label>\n                              <Input\n                                value={item.drg_no}\n                                onChange={(e) => updateItem(idx, \"drg_no\", e.target.value)}\n                                placeholder=\"DRG\"\n                                className=\"font-medium text-[var(--color-sys-text-primary)] h-8\"\n                              />\n                            </div>\n                            <div>\n                              <Label className=\"uppercase text-slate-400 ml-1\">\n                                Unit\n                              </Label>\n                              <Input\n                                value={item.unit}\n                                onChange={(e) => updateItem(idx, \"unit\", e.target.value)}\n                                placeholder=\"Unit\"\n                                className=\"font-medium text-slate-930 h-8 uppercase\"\n                              />\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"py-4 px-6\">\n                          <Input\n                            type=\"number\"\n                            value={item.ord_qty}\n                            onChange={(e) => updateItem(idx, \"ord_qty\", parseFloat(e.target.value))}\n                            className=\"text-right font-mono\"\n                          />\n                        </td>\n                        <td className=\"py-4 px-6\">\n                          <Input\n                            type=\"number\"\n                            value={item.po_rate}\n                            onChange={(e) => updateItem(idx, \"po_rate\", parseFloat(e.target.value))}\n                            className=\"text-right font-mono\"\n                          />\n                        </td>\n                        <td className=\"py-4 px-6 text-right\">\n                          <Accounting className=\"font-medium text-[var(--color-sys-text-primary)] font-mono block\">\n                            {item.item_value}\n                          </Accounting>\n                        </td>\n                        <td className=\"py-4 px-6 text-center\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => removeItem(item.po_item_no)}\n                            className=\"text-[var(--color-sys-text-tertiary)] hover:text-[var(--color-sys-status-error)]\"\n                          >\n                            <Trash2 size={16} />\n                          </Button>\n                        </td>\n                      </tr>\n                    ))\n                  ) : (\n                    <tr>\n                      <td colSpan={6} className=\"py-24 text-center\">\n                        <div className=\"flex flex-col items-center justify-center opacity-40\">\n                          <Package className=\"w-12 h-12 text-[var(--color-sys-text-tertiary)]/30 mb-3 stroke-[1.5]\" />\n                          <Body className=\"text-[var(--color-sys-text-tertiary)]/60\">\n                            No material items defined yet\n                          </Body>\n                        </div>\n                      </td>\n                    </tr>\n                  )}\n                </tbody>\n              </table>\n            </div>\n            {items.length > 0 && (\n              <div className=\"bg-[var(--color-sys-bg-tertiary)]/30 border-t border-[var(--color-sys-text-tertiary)]/10 p-8 flex justify-end\">\n                <div className=\"text-right flex items-center gap-8\">\n                  <Label className=\"text-small uppercase tracking-[0.2em] text-[var(--color-sys-text-secondary)]\">\n                    Estimated Total Value\n                  </Label>\n                  <Accounting\n                    isCurrency\n                    className=\"text-2xl text-[var(--color-sys-text-primary)] font-mono\"\n                  >\n                    {items.reduce((acc: number, cur: any) => acc + (cur.item_value || 0), 0)}\n                  </Accounting>\n                </div>\n              </div>\n            )}\n          </Card>\n        </div>\n      </div>\n    </DocumentTemplate>\n  );\n}\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[161,168],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'motion' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":6,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"AnimatePresence"},"fix":{"range":[167,184],"text":""},"desc":"Remove unused variable 'AnimatePresence'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AnimatePresence' is defined but never used.","line":6,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[387,392],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":4},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[408,423],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[423,438],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":20,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":46,"suggestions":[{"messageId":"removeVar","data":{"varName":"cn"},"fix":{"range":[504,508],"text":""},"desc":"Remove unused variable 'cn'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cn' is defined but never used.","line":20,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":46},{"ruleId":"no-unused-vars","severity":1,"message":"'H1' is defined but never used.","line":25,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"H1"},"fix":{"range":[621,627],"text":""},"desc":"Remove unused variable 'H1'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H1' is defined but never used.","line":25,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'H3' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"H3"},"fix":{"range":[627,633],"text":""},"desc":"Remove unused variable 'H3'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H3' is defined but never used.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'Label' is defined but never used.","line":27,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Label"},"fix":{"range":[633,642],"text":""},"desc":"Remove unused variable 'Label'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Label' is defined but never used.","line":27,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'SmallText' is defined but never used.","line":28,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"SmallText"},"fix":{"range":[642,655],"text":""},"desc":"Remove unused variable 'SmallText'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SmallText' is defined but never used.","line":28,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":31,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Badge"},"fix":{"range":[767,828],"text":""},"desc":"Remove unused variable 'Badge'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used.","line":31,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Input' is defined but never used.","line":32,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Input"},"fix":{"range":[829,890],"text":""},"desc":"Remove unused variable 'Input'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Input' is defined but never used.","line":32,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Stack' is defined but never used.","line":39,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"Stack"},"fix":{"range":[1356,1363],"text":""},"desc":"Remove unused variable 'Stack'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used.","line":39,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'Box' is defined but never used.","line":39,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"Box"},"fix":{"range":[1363,1368],"text":""},"desc":"Remove unused variable 'Box'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Box' is defined but never used.","line":39,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":26},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":49,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":49,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":60,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":60,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":94,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":94,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":106,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":106,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":118,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":118,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":130,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":130,"endColumn":113},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":176,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":176,"endColumn":22,"suggestions":[{"fix":{"range":[5011,5055],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":20,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useMemo, useRef } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { api, POListItem, POStats } from \"@/lib/api\";\nimport { useUpload } from \"@/components/providers/UploadContext\";\nimport {\n  FileText,\n  Activity,\n  Clock,\n  Plus,\n  Upload,\n  X,\n  ShoppingCart,\n  CheckCircle,\n  AlertCircle,\n} from \"lucide-react\";\nimport { formatDate, formatIndianCurrency, cn } from \"@/lib/utils\";\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\nimport {\n  Accounting,\n  Body,\n  H1,\n  H3,\n  Label,\n  SmallText,\n} from \"@/components/design-system/organisms\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Badge } from \"@/components/design-system/organisms\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport { StatusBadge } from \"@/components/design-system/organisms/StatusBadge\";\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\nimport { ListPageTemplate } from \"@/components/design-system/templates/ListPageTemplate\";\nimport { type Column } from \"@/components/design-system/organisms/DataTable\";\nimport { type SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\nimport { useCallback } from \"react\";\nimport { Flex, Stack, Box } from \"@/components/design-system/organisms\";\n\n// --- OPTIMIZATION: Static Columns Definitions ---\nconst columns: Column<POListItem>[] = [\n  {\n    key: \"po_number\",\n    label: \"NUMBER\",\n    width: \"10%\",\n    render: (_value, po) => (\n      <Link href={`/po/${po.po_number}`} className=\"block\">\n        <Body className=\"table-cell-text text-[var(--color-sys-brand-primary)] hover:underline\">\n          {po.po_number}\n        </Body>\n      </Link>\n    ),\n  },\n  {\n    key: \"po_date\",\n    label: \"DATE\",\n    width: \"12%\",\n    render: (v) => (\n      <Body className=\"table-cell-date text-[var(--color-sys-text-secondary)] whitespace-nowrap\">\n        {formatDate(String(v))}\n      </Body>\n    ),\n  },\n  {\n    key: \"po_value\",\n    label: \"VALUE\",\n    width: \"13%\",\n    align: \"right\",\n    isCurrency: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number font-semibold text-right block font-mono\">\n        {formatIndianCurrency(Number(v))}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_items_count\",\n    label: \"ITM\",\n    width: \"7%\",\n    align: \"center\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-center block font-mono\">{Number(v)}</Accounting>\n    ),\n  },\n  {\n    key: \"total_ordered_quantity\",\n    label: \"ORD\",\n    width: \"9%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-text-tertiary)] text-right block font-mono\">\n        {Number(v)}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_dispatched_quantity\",\n    label: \"DLV\",\n    width: \"10%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-success)] text-right block font-mono\">\n        {Number(v)}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_pending_quantity\",\n    label: \"BAL\",\n    width: \"9%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-warning)] text-right block font-mono\">\n        {Number(v)}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_received_quantity\",\n    label: \"RECD\",\n    width: \"10%\",\n    align: \"right\",\n    isNumeric: true,\n    render: (v) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-brand-primary)] text-right block font-mono\">\n        {Number(v)}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"po_status\",\n    label: \"Status\",\n    width: \"12%\",\n    render: (v) => <StatusBadge status={String(v)} />,\n  },\n];\n\nexport default function POListPage() {\n  const router = useRouter();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const debouncedSearch = useDebouncedValue(searchQuery, 300);\n  const [page, setPage] = useState(1);\n  const [pageSize] = useState(10);\n  const [pos, setPOs] = useState<POListItem[]>([]);\n  const [stats, setStats] = useState<POStats>({\n    total_pos: 0,\n    active_count: 0,\n    total_value: 0,\n    pending_pos: 0,\n    completed_pos: 0,\n    total_value_ytd: 0,\n    open_orders_count: 0,\n    pending_approval_count: 0,\n    total_value_change: 0,\n  });\n  const [loading, setLoading] = useState(true);\n  // Global Upload Context\n  const { startUpload, isUploading } = useUpload();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Fetch POs and stats on mount\n  useEffect(() => {\n    async function fetchPOs() {\n      setLoading(true);\n      try {\n        const [posData, statsData] = await Promise.all([api.listPOs(), api.getPOStats()]);\n\n        setPOs(posData || []);\n        setStats(statsData);\n      } catch (error) {\n        console.error(\"Error fetching POs:\", error);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchPOs();\n  }, []);\n\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      await startUpload(Array.from(e.target.files), \"PO\");\n      // Clear input\n      if (fileInputRef.current) fileInputRef.current.value = \"\";\n    }\n  };\n\n  const filteredPOs = useMemo(() => {\n    return pos.filter(\n      (po) =>\n        po.po_number.toString().toLowerCase().includes(debouncedSearch.toLowerCase()) ||\n        po.supplier_name?.toLowerCase().includes(debouncedSearch.toLowerCase())\n    );\n  }, [pos, debouncedSearch]);\n\n  // --- OPTIMIZATION: Memoized Summary Cards ---\n  const summaryCards = useMemo(\n    (): SummaryCardProps[] => [\n      {\n        title: \"Total Orders\",\n        value: pos.length,\n        icon: <FileText size={20} />,\n        variant: \"primary\",\n      },\n      {\n        title: \"Open Orders\",\n        value: stats?.open_orders_count || 0,\n        icon: <Activity size={20} />,\n        variant: \"success\",\n      },\n      {\n        title: \"Pending Approval\",\n        value: stats?.pending_approval_count || 0,\n        icon: <Clock size={20} />,\n        variant: \"warning\",\n      },\n      {\n        title: \"Total Value\",\n        value: formatIndianCurrency(stats?.total_value_ytd || 0),\n        icon: <ShoppingCart size={20} />,\n        variant: \"primary\",\n      },\n    ],\n    [pos.length, stats]\n  );\n\n  // Master Reference: Toolbar Construction (Atomic)\n  const handleSearch = useCallback((val: string) => {\n    setSearchQuery(val);\n  }, []);\n\n  const toolbar = (\n    <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\n      <SearchBar\n        value={searchQuery}\n        onChange={handleSearch}\n        placeholder=\"Search POs...\"\n        className=\"w-64\"\n      />\n      <Flex align=\"center\" gap={3}>\n        {/* Upload Section - Inline Dropdown */}\n        <div className=\"relative\">\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            multiple\n            accept=\".pdf,.html\"\n            onChange={handleFileSelect}\n            className=\"hidden\"\n          />\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => fileInputRef.current?.click()}\n            className=\"border-[var(--color-sys-text-tertiary)]/20\"\n            disabled={isUploading}\n          >\n            {isUploading ? <Activity className=\"mr-2 animate-spin\" size={16} /> : <Upload size={16} className=\"mr-2\" />}\n            {isUploading ? \"Uploading...\" : \"Upload POs\"}\n          </Button>\n        </div>\n\n        <Button\n          variant=\"default\"\n          size=\"sm\"\n          onClick={() => router.push(\"/po/create\")}\n          className=\"bg-[var(--color-sys-brand-primary)] text-white hover:brightness-110 shadow-md\"\n        >\n          <Flex align=\"center\">\n            <Plus size={16} className=\"mr-2\" />\n            <Body className=\"text-inherit\">New PO</Body>\n          </Flex>\n        </Button>\n      </Flex>\n    </Flex>\n  );\n\n  return (\n    <>\n      <ListPageTemplate\n        title=\"PURCHASE ORDERS\"\n        subtitle=\"Track procurement contracts and delivery schedules\"\n        toolbar={toolbar}\n        summaryCards={summaryCards}\n        columns={columns}\n        data={loading ? [] : filteredPOs}\n        keyField=\"po_number\"\n        page={page}\n        pageSize={pageSize}\n        totalItems={loading ? 0 : filteredPOs.length}\n        onPageChange={(newPage) => setPage(newPage)}\n        loading={loading}\n        emptyMessage=\"No purchase orders found\"\n        density=\"compact\" // Use condensed 40px rows for high-volume scanning\n        className=\"min-h-[600px]\" // Min-height wrapper for CLS control\n      />\n    </>\n  );\n}\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[175,185],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Search' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'Label' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Label"},"fix":{"range":[937,946],"text":""},"desc":"Remove unused variable 'Label'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Label' is defined but never used.","line":36,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'Tabs' is defined but never used.","line":40,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"Tabs"},"fix":{"range":[1173,1178],"text":""},"desc":"Remove unused variable 'Tabs'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Tabs' is defined but never used.","line":40,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'TabsList' is defined but never used.","line":40,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"TabsList"},"fix":{"range":[1177,1187],"text":""},"desc":"Remove unused variable 'TabsList'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TabsList' is defined but never used.","line":40,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'TabsTrigger' is defined but never used.","line":40,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":37,"suggestions":[{"messageId":"removeVar","data":{"varName":"TabsTrigger"},"fix":{"range":[1187,1200],"text":""},"desc":"Remove unused variable 'TabsTrigger'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TabsTrigger' is defined but never used.","line":40,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":37},{"ruleId":"no-unused-vars","severity":1,"message":"'GlassContainer' is defined but never used.","line":42,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"GlassContainer"},"fix":{"range":[1337,1407],"text":""},"desc":"Remove unused variable 'GlassContainer'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'GlassContainer' is defined but never used.","line":42,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'Stack' is defined but never used.","line":43,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"Stack"},"fix":{"range":[1421,1428],"text":""},"desc":"Remove unused variable 'Stack'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used.","line":43,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'Grid' is defined but never used.","line":43,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"Grid"},"fix":{"range":[1433,1439],"text":""},"desc":"Remove unused variable 'Grid'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Grid' is defined but never used.","line":43,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":32},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":55,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":55,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":73,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":73,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":98,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":98,"endColumn":62},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":105,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":105,"endColumn":63},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":114,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":114,"endColumn":63},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":139,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":139,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":169,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":169,"endColumn":112},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":182,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":182,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":210,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":210,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":221,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":221,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":234,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":234,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":273,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":273,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":284,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":284,"endColumn":112},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":362,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":362,"endColumn":20,"suggestions":[{"fix":{"range":[10450,10485],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":521,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":521,"endColumn":105},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":527,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":527,"endColumn":112},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":540,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":540,"endColumn":112}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport {\n  FileText,\n  Download,\n  Truck,\n  Receipt,\n  Search,\n  TrendingUp,\n  PieChart as PieChartIcon,\n  Calendar,\n  AlertTriangle,\n  Activity,\n} from \"lucide-react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport dynamic from \"next/dynamic\";\n\nconst ReportsCharts = dynamic(() => import(\"@/components/design-system/organisms/ReportsCharts\"), {\n  loading: () => (\n    <div className=\"h-[400px] w-full bg-[var(--color-sys-bg-tertiary)]/20 animate-pulse rounded-2xl\" />\n  ),\n  ssr: false,\n});\nimport { api } from \"@/lib/api\";\nimport { formatDate, formatIndianCurrency, cn } from \"@/lib/utils\";\n\n// --- FIX 1: Direct Imports (No Barrel Files) ---\nimport { ReportsPageTemplate } from \"@/components/design-system/templates/ReportsPageTemplate\";\nimport {\n  Accounting,\n  Body,\n  TableText,\n  SmallText,\n  Label,\n} from \"@/components/design-system/organisms\";\nimport type { SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\nimport type { Column } from \"@/components/design-system/organisms/DataTable\";\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/design-system/molecules/Tabs\";\nimport { ReportNavGrid } from \"@/components/design-system/organisms/ReportNavGrid\";\nimport { GlassContainer } from \"@/components/design-system/organisms\";\nimport { Flex, Stack, Box, Grid } from \"@/components/design-system/organisms\";\n\ntype ReportType = \"sales\" | \"dc_register\" | \"invoice_register\" | \"pending\" | \"reconciliation\";\n\n// --- FIX 2: Static Column Definitions (Moved Outside Component) ---\n// This prevents the Table from re-rendering on every keystroke.\n\nconst salesColumns: Column<any>[] = [\n  {\n    key: \"month\",\n    label: \"MONTH\",\n    render: (_v, row) => (\n      <Body className=\"table-cell-text font-medium text-[var(--color-sys-brand-primary)]\">{row.month}</Body>\n    ),\n  },\n  {\n    key: \"ordered_value\",\n    label: \"ORDERED VALUE\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\n        {formatIndianCurrency(row.ordered_value)}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"delivered_value\",\n    label: \"DELIVERED VALUE\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-success)] font-mono text-right block\">\n        {formatIndianCurrency(row.delivered_value)}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"variance\",\n    label: \"VARIANCE\",\n    align: \"right\",\n    render: (_v, row) => {\n      const diff = (row.ordered_value || 0) - (row.delivered_value || 0);\n      return (\n        <Accounting className={cn(\"table-cell-number font-mono text-right block\", diff > 0 ? \"text-[var(--color-sys-status-warning)]\" : \"text-[var(--color-sys-text-tertiary)]\")}>\n          {formatIndianCurrency(diff)}\n        </Accounting>\n      )\n    },\n  },\n];\n\nconst dcColumns: Column<any>[] = [\n  {\n    key: \"dc_number\",\n    label: \"DC NUMBER\",\n    render: (_v, row) => (\n      <Body className=\"text-[var(--color-sys-brand-primary)]\">DC-{row.dc_number}</Body>\n    ),\n  },\n  {\n    key: \"dc_date\",\n    label: \"DATE\",\n    render: (_v, row) => (\n      <Body className=\"text-[var(--color-sys-text-secondary)]\">\n        {formatDate(row.dc_date)}\n      </Body>\n    ),\n  },\n  {\n    key: \"po_number\",\n    label: \"PO REF\",\n    render: (_v, row) => (\n      <Body className=\"text-[var(--color-sys-text-secondary)]\">{row.po_number}</Body>\n    ),\n  },\n  {\n    key: \"consignee_name\",\n    label: \"CONSIGNEE\",\n    render: (_v, row) => (\n      <Body className=\"max-w-[200px] truncate\">{row.consignee_name}</Body>\n    ),\n  },\n  {\n    key: \"total_qty\",\n    label: \"QTY\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"font-medium font-mono text-right block\">{row.total_qty}</Accounting>\n    ),\n  },\n];\n\nconst invoiceColumns: Column<any>[] = [\n  {\n    key: \"invoice_number\",\n    label: \"INVOICE NO\",\n    render: (_v, row) => (\n      <Body className=\"table-cell-text text-[var(--color-sys-brand-primary)]\">{row.invoice_number}</Body>\n    ),\n  },\n  {\n    key: \"invoice_date\",\n    label: \"DATE\",\n    render: (_v, row) => <Body className=\"font-medium\">{formatDate(row.invoice_date)}</Body>,\n  },\n  {\n    key: \"customer_gstin\",\n    label: \"CUSTOMER GST\",\n    render: (_v, row) => (\n      <Body className=\"font-mono block\">{row.customer_gstin}</Body>\n    ),\n  },\n  {\n    key: \"taxable_value\",\n    label: \"TAXABLE\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\n        {formatIndianCurrency(row.taxable_value)}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_invoice_value\",\n    label: \"TOTAL\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-text-primary)] font-mono text-right block\">\n        {formatIndianCurrency(row.total_invoice_value)}\n      </Accounting>\n    ),\n  },\n];\n\nconst pendingColumns: Column<any>[] = [\n  {\n    key: \"po_number\",\n    label: \"PO NUMBER\",\n    width: \"15%\",\n    render: (_v, row) => (\n      <Body className=\"table-cell-text text-[var(--color-sys-brand-primary)]\">{row.po_number}</Body>\n    ),\n  },\n  {\n    key: \"material_description\",\n    label: \"MATERIAL\",\n    width: \"30%\",\n    render: (_v, row) => (\n      <Box className=\"w-[180px] lg:w-[280px] truncate\" title={row.material_description}>\n        <TableText className=\"table-cell-text truncate block\">{row.material_description}</TableText>\n      </Box>\n    ),\n  },\n  {\n    key: \"ord_qty\",\n    label: \"ORD\",\n    width: \"10%\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">{row.ord_qty}</Accounting>\n    ),\n  },\n  {\n    key: \"delivered_qty\",\n    label: \"DELIVERED\",\n    width: \"20%\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-success)] font-mono text-right block\">\n        {row.delivered_qty}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"pending_qty\",\n    label: \"PENDING\",\n    width: \"20%\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-warning)] font-mono text-right block\">\n        {row.pending_qty}\n      </Accounting>\n    ),\n  },\n];\n\nconst reconciliationColumns: Column<any>[] = [\n  {\n    key: \"po_number\",\n    label: \"PO NUMBER\",\n    width: \"15%\",\n    render: (_v, row) => (\n      <Body className=\"table-cell-text text-[var(--color-sys-brand-primary)]\">{row.po_number}</Body>\n    ),\n  },\n  {\n    key: \"item_description\",\n    label: \"ITEM\",\n    width: \"35%\",\n    render: (_v, row) => (\n      <Box className=\"w-[200px] lg:w-[320px] truncate\" title={row.item_description}>\n        <TableText className=\"table-cell-text truncate block\">{row.item_description}</TableText>\n      </Box>\n    ),\n  },\n  {\n    key: \"ordered_qty\",\n    label: \"ORD\",\n    width: \"10%\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">{row.ordered_qty}</Accounting>\n    ),\n  },\n  {\n    key: \"total_dispatched\",\n    label: \"DISP\",\n    width: \"10%\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\n        {row.total_dispatched}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_accepted\",\n    label: \"ACC\",\n    width: \"15%\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-success)] font-mono text-right block\">\n        {row.total_accepted}\n      </Accounting>\n    ),\n  },\n  {\n    key: \"total_rejected\",\n    label: \"REJ\",\n    width: \"15%\",\n    align: \"right\",\n    render: (_v, row) => (\n      <Accounting className=\"table-cell-number text-[var(--color-sys-status-error)] font-mono text-right block\">\n        {row.total_rejected}\n      </Accounting>\n    ),\n  },\n];\n\nexport default function ReportsPage() {\n  const [activeTab, setActiveTab] = useState<ReportType>(\"sales\");\n  const [data, setData] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [pageSize] = useState(10);\n  const [startDate, setStartDate] = useState<string>(\"2020-01-01\");\n  const [endDate, setEndDate] = useState<string>(new Date().toISOString().split(\"T\")[0]);\n  const [headerPortal, setHeaderPortal] = useState<HTMLElement | null>(null);\n\n  // --- CHART DATA GENERATION ---\n  const chartData = useMemo(() => {\n    if (!data || data.length === 0) return [];\n\n    if (activeTab === \"sales\") {\n      return [...data].reverse().map((item) => ({\n        name: item.month,\n        ordered_value: item.ordered_value,\n        delivered_value: item.delivered_value,\n      }));\n    }\n\n    if (activeTab === \"reconciliation\") {\n      return [\n        {\n          name: \"Accepted\",\n          value: data.reduce((s, r) => s + (r.total_accepted || 0), 0),\n          color: \"var(--color-sys-status-success)\",\n        },\n        {\n          name: \"Rejected\",\n          value: data.reduce((s, r) => s + (r.total_rejected || 0), 0),\n          color: \"var(--color-sys-status-error)\",\n        },\n        {\n          name: \"Pending\",\n          value: data.reduce(\n            (s, r) =>\n              s +\n              Math.max(0, (r.ordered_qty || 0) - (r.total_accepted || 0) - (r.total_rejected || 0)),\n            0\n          ),\n          color: \"var(--color-sys-status-warning)\",\n        },\n      ].filter((d) => d.value > 0);\n    }\n\n    return [];\n  }, [data, activeTab]);\n\n  useEffect(() => {\n    setHeaderPortal(document.getElementById(\"header-action-portal\"));\n  }, []);\n\n  const loadReport = useCallback(async () => {\n    setLoading(true);\n    setData([]);\n    try {\n      const dateParams = `start_date=${startDate}&end_date=${endDate}`;\n      // Use centralized API for type-safe fetch\n      const result = await api.getReports(activeTab, dateParams);\n\n      const finalData = Array.isArray(result)\n        ? result.map((item: any, index: number) => ({\n          ...item,\n          unique_id: `${activeTab}-${index}-${item.id || item.number || item.po_number || item.dc_number || item.invoice_number || \"\"}`,\n        }))\n        : [];\n\n      setData(finalData);\n    } catch (err) {\n      console.error(\"Fetch Error:\", err);\n    } finally {\n      setLoading(false);\n    }\n  }, [activeTab, startDate, endDate]);\n\n  useEffect(() => {\n    setPage(1);\n    loadReport();\n  }, [loadReport]);\n\n  const handleExport = useCallback(() => {\n    const dateParams = `start_date=${startDate}&end_date=${endDate}`;\n    api.exportReport(activeTab, dateParams);\n  }, [activeTab, startDate, endDate]);\n\n  // --- FIX 3: Memoize KPIs for premium feel ---\n  const kpiCards = useMemo((): SummaryCardProps[] => {\n    if (!data || data.length === 0) return [];\n\n    // Calculate total value for percentage bars\n    const totalOrdered = data.reduce((s, r) => s + (r.ordered_qty || r.ord_qty || 0), 0);\n    const totalRec = data.reduce((s, r) => s + (r.total_accepted || r.delivered_qty || 0), 0);\n\n    switch (activeTab) {\n      case \"sales\":\n        return [\n          {\n            title: \"Projected Revenue\",\n            value: (\n              <Accounting className=\"font-bold block\">\n                {data.reduce((s, r) => s + (r.total_value || 0), 0)}\n              </Accounting>\n            ),\n            icon: <TrendingUp size={20} />,\n            variant: \"primary\",\n            trend: { value: \"12.5%\", direction: \"up\" },\n          },\n          {\n            title: \"Tax Contribution\",\n            value: (\n              <Accounting className=\"font-bold block\">\n                {data.reduce((s, r) => s + (r.total_cgst || 0) + (r.total_sgst || 0), 0)}\n              </Accounting>\n            ),\n            icon: <Receipt size={20} />,\n            variant: \"secondary\",\n          },\n          {\n            title: \"Global Volatility\",\n            value: (\n              <div className=\"flex items-baseline gap-1\">\n                <Accounting className=\"font-bold\">+14.2</Accounting>\n                <SmallText className=\"opacity-80\">%</SmallText>\n              </div>\n            ),\n            icon: <Activity size={20} />,\n            variant: \"success\",\n            trend: { value: \"Stable\", direction: \"neutral\" },\n          },\n        ];\n      case \"pending\":\n        return [\n          {\n            title: \"Active Shortages\",\n            value: <Accounting className=\"font-black tracking-tighter block\">{data.length}</Accounting>,\n            icon: <AlertTriangle size={24} className=\"opacity-90\" />,\n            variant: \"warning\",\n          },\n          {\n            title: \"Fill Rate\",\n            value: (\n              <div className=\"flex items-baseline gap-1\">\n                <Accounting className=\"font-black tracking-tighter\">\n                  {totalOrdered > 0 ? Number(((totalRec / totalOrdered) * 100).toFixed(1)) : 0}\n                </Accounting>\n                <SmallText className=\"opacity-80\">%</SmallText>\n              </div>\n            ),\n            icon: <Activity size={24} className=\"opacity-90\" />,\n            variant: \"primary\",\n          },\n        ];\n      case \"reconciliation\":\n        return [\n          {\n            title: \"Audit Score\",\n            value: (\n              <div className=\"flex items-baseline gap-1\">\n                <Accounting className=\"font-black tracking-tighter\">\n                  {data.length > 0 ? 98.4 : 0}\n                </Accounting>\n                <SmallText className=\"opacity-80\">PTS</SmallText>\n              </div>\n            ),\n            icon: <PieChartIcon size={24} className=\"opacity-90\" />,\n            variant: \"success\",\n          },\n          {\n            title: \"Defect Ratio\",\n            value: (\n              <div className=\"flex items-baseline gap-1\">\n                <Accounting className=\"font-black tracking-tighter\">\n                  {data.reduce((s, r) => s + (r.total_rejected || 0), 0)}\n                </Accounting>\n                <SmallText className=\"opacity-80\">UNIT</SmallText>\n              </div>\n            ),\n            icon: <AlertTriangle size={24} className=\"opacity-90\" />,\n            variant: \"warning\",\n          },\n        ];\n      default:\n        return [\n          {\n            title: \"Total Records\",\n            value: <Accounting className=\"font-black tracking-tighter block\">{data.length}</Accounting>,\n            icon: <FileText size={24} className=\"opacity-80\" />,\n            variant: \"primary\",\n          },\n        ];\n    }\n  }, [data, activeTab]);\n\n  const activeColumns = useMemo(() => {\n    switch (activeTab) {\n      case \"sales\":\n        return salesColumns;\n      case \"dc_register\":\n        return dcColumns;\n      case \"invoice_register\":\n        return invoiceColumns;\n      case \"pending\":\n        return pendingColumns;\n      case \"reconciliation\":\n        return reconciliationColumns;\n      default:\n        return [];\n    }\n  }, [activeTab]);\n\n  const handlePageChange = useCallback((newPage: number) => {\n    setPage(newPage);\n  }, []);\n\n  // --- OPTIMIZATION: Toolbar Portal Content ---\n  const toolbarContent = (\n    <Flex align=\"center\" gap={3}>\n      <Flex\n        align=\"center\"\n        className=\"bg-[var(--color-sys-bg-tertiary)]/40 backdrop-blur-xl border-none rounded-2xl overflow-hidden shadow-[0_4px_12px_rgba(0,0,0,0.03)] p-1\"\n      >\n        <Flex\n          align=\"center\"\n          gap={3}\n          className=\"px-4 py-2 hover:bg-[var(--color-sys-bg-surface)]/40 transition-colors rounded-xl group\"\n        >\n          <Calendar\n            size={16}\n            className=\"text-[var(--color-sys-brand-primary)] group-hover:scale-110 transition-transform\"\n          />\n          <input\n            type=\"date\"\n            value={startDate}\n            onChange={(e) => setStartDate(e.target.value)}\n            className=\"text-small uppercase outline-none bg-transparent text-[var(--color-sys-text-secondary)]\"\n          />\n        </Flex>\n        <Box className=\"w-[1px] h-6 bg-[var(--color-sys-text-tertiary)]/10 mx-1\" />\n        <Flex\n          align=\"center\"\n          gap={3}\n          className=\"px-4 py-2 hover:bg-[var(--color-sys-bg-surface)]/40 transition-colors rounded-xl group\"\n        >\n          <input\n            type=\"date\"\n            value={endDate}\n            onChange={(e) => setEndDate(e.target.value)}\n            className=\"text-small uppercase outline-none bg-transparent text-[var(--color-sys-text-secondary)]\"\n          />\n        </Flex>\n      </Flex>\n      <button\n        onClick={handleExport}\n        className=\"group flex items-center gap-3 px-6 py-3 bg-[var(--color-sys-brand-primary)] text-white rounded-2xl hover:brightness-110 shadow-[0_8px_24px_rgba(0,0,0,0.1)] transition-all active:scale-95 uppercase tracking-[0.1em]\"\n      >\n        <Download size={16} className=\"group-hover:translate-y-0.5 transition-transform\" />\n        Export\n      </button>\n    </Flex>\n  );\n\n  return (\n    <>\n      {headerPortal && createPortal(toolbarContent, headerPortal)}\n\n      <div className=\"space-y-6\">\n        <ReportNavGrid\n          items={[\n            {\n              id: \"sales\",\n              title: \"Growth\",\n              description: \"Revenue and tax velocity trends\",\n              icon: <TrendingUp />,\n            },\n            {\n              id: \"dc_register\",\n              title: \"DC Register\",\n              description: \"Dispatch and logistics tracking\",\n              icon: <Truck />,\n            },\n            {\n              id: \"invoice_register\",\n              title: \"Invoices\",\n              description: \"Billing and payment ledger\",\n              icon: <Receipt />,\n            },\n            {\n              id: \"pending\",\n              title: \"Shortages\",\n              description: \"Active pending supply gaps\",\n              icon: <AlertTriangle />,\n            },\n            {\n              id: \"reconciliation\",\n              title: \"Ledger Audit\",\n              description: \"Physical vs System inventory audit\",\n              icon: <Activity />,\n            },\n          ]}\n          activeId={activeTab}\n          onSelect={(id) => {\n            setLoading(true);\n            setData([]);\n            setActiveTab(id as ReportType);\n          }}\n          className=\"w-full\"\n        />\n\n        {/* --- DYNAMIC CHART SECTION --- */}\n        {/* --- DYNAMIC CHART SECTION --- */}\n        <AnimatePresence mode=\"wait\">\n          {data.length > 0 && (activeTab === \"sales\" || activeTab === \"reconciliation\") && (\n            <ReportsCharts activeTab={activeTab} chartData={chartData} />\n          )}\n        </AnimatePresence>\n\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={activeTab}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            transition={{ duration: 0.2 }}\n            className=\"w-full\"\n          >\n            <ReportsPageTemplate\n              key={activeTab}\n              title={\n                activeTab === \"dc_register\"\n                  ? \"Distribution Flow\"\n                  : activeTab === \"invoice_register\"\n                    ? \"Revenue Ledger\"\n                    : activeTab === \"sales\"\n                      ? \"Growth Momentum\"\n                      : activeTab === \"pending\"\n                        ? \"Active Shortages\"\n                        : \"Quality Audit\"\n              }\n              subtitle=\"Real-time multi-dimensional intelligence\"\n              toolbar={{ loading }}\n              kpiCards={kpiCards}\n              columns={activeColumns}\n              data={data}\n              loading={loading}\n              keyField=\"unique_id\"\n              page={page}\n              pageSize={pageSize}\n              totalItems={data.length}\n              onPageChange={handlePageChange}\n              className={cn(\n                \"transition-all duration-700\",\n                loading ? \"opacity-40 grayscale blur-sm\" : \"opacity-100\"\n              )}\n            />\n          </motion.div>\n        </AnimatePresence>\n      </div>\n    </>\n  );\n}\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\settings\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\settings\\my-details\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\settings\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[233,248],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'SettingsType' is defined but never used.","line":24,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"SettingsType"},"fix":{"range":[400,431],"text":""},"desc":"Remove unused variable 'SettingsType'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SettingsType' is defined but never used.","line":24,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":56},{"ruleId":"no-unused-vars","severity":1,"message":"'H1' is defined but never used.","line":29,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"H1"},"fix":{"range":[649,652],"text":""},"desc":"Remove unused variable 'H1'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H1' is defined but never used.","line":29,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'Mono' is defined but never used.","line":35,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Mono"},"fix":{"range":[693,701],"text":""},"desc":"Remove unused variable 'Mono'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Mono' is defined but never used.","line":35,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":35,"endColumn":7},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/SpotlightCard' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":39,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":39,"endColumn":80},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":87,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":87,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":87,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":87,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":104,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":104,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":104,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":141,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":141,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":141,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":141,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":153,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":153,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":153,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":153,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":169,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":169,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":169,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":169,"endColumn":17},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":179,"column":12,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":179,"endColumn":109},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":201,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":201,"endColumn":86},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":222,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":222,"endColumn":179},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":355,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":355,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":418,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":418,"endColumn":184},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":425,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":425,"endColumn":104},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":428,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":428,"endColumn":94},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":431,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":431,"endColumn":106},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":437,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":437,"endColumn":104},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":438,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":438,"endColumn":121},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":443,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":443,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":444,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":444,"endColumn":105},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":449,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":449,"endColumn":95},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":450,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":450,"endColumn":105},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":459,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":459,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":460,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":460,"endColumn":98},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":502,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":502,"endColumn":137},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":628,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":628,"endColumn":133},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":632,"column":56,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":632,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":637,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":637,"endColumn":98},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":645,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":645,"endColumn":188},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":653,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":653,"endColumn":186},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":665,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":665,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":669,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":669,"endColumn":94},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":693,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":693,"endColumn":196},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":786,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":786,"endColumn":160},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":809,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":809,"endColumn":180},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":813,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":813,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":816,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":816,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":832,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":832,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":835,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":835,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":843,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":843,"endColumn":81},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":846,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":846,"endColumn":110},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":862,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":862,"endColumn":193},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":876,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":876,"endColumn":183},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":923,"column":16,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":923,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":927,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":927,"endColumn":89}],"suppressedMessages":[],"errorCount":47,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  Building2,\n  Users,\n  Settings as SettingsIcon,\n  Save,\n  Loader2,\n  Check,\n  Plus,\n  Trash2,\n  AlertCircle,\n  MapPin,\n  Phone,\n  Mail,\n  RefreshCw,\n  Edit2,\n  X,\n  ShieldAlert,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { api, type Buyer, type Settings as SettingsType } from \"@/lib/api\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Card } from \"@/components/design-system/organisms\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport {\n  H1,\n  H2,\n  H3,\n  Label,\n  Body,\n  SmallText,\n  Mono,\n  Accounting,\n} from \"@/components/design-system/organisms\";\nimport { Badge } from \"@/components/design-system/organisms\";\nimport { SpotlightCard } from \"@/components/design-system/atoms/SpotlightCard\";\nimport { Stack, Grid, Flex, Box } from \"@/components/design-system/organisms\";\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport { GlassContainer } from \"@/components/design-system/organisms\";\nimport {\n  Tabs,\n  TabsList,\n  TabsTrigger,\n  TabsContent,\n} from \"@/components/design-system/molecules/Tabs\";\n\nexport default function SettingsPage() {\n  const [activeTab, setActiveTab] = useState(\"supplier\");\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // --- States ---\n  const [settings, setSettings] = useState<any>({});\n  const [buyers, setBuyers] = useState<Buyer[]>([]);\n  const [isAddingBuyer, setIsAddingBuyer] = useState(false);\n  const [editingBuyerId, setEditingBuyerId] = useState<number | null>(null);\n\n  // Buyer Form State\n  const [buyerForm, setBuyerForm] = useState<Partial<Buyer>>({\n    name: \"\",\n    gstin: \"\",\n    billing_address: \"\",\n    place_of_supply: \"\",\n    state: \"\",\n    state_code: \"\",\n  });\n\n  // System Reset States\n  const [showResetConfirm, setShowResetConfirm] = useState(false);\n  const [isResetting, setIsResetting] = useState(false);\n\n  // --- Init ---\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  const loadData = async () => {\n    setLoading(true);\n    try {\n      const [settingsData, buyersData] = await Promise.all([api.getSettings(), api.getBuyers()]);\n      setSettings(settingsData);\n      setBuyers(buyersData);\n    } catch (err: any) {\n      setError(\"Failed to load settings data.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- Handlers ---\n  const handleSaveSettings = useCallback(async (keys: string[]) => {\n    setSaving(true);\n    setError(null);\n    try {\n      const batch = keys.map((key) => ({\n        key,\n        value: settings[key]?.toString() || \"\",\n      }));\n      await api.updateSettingsBatch(batch);\n    } catch (err: any) {\n      setError(\"Failed to save settings.\");\n    } finally {\n      setSaving(false);\n    }\n  }, [settings]);\n\n  const handleStartEditBuyer = useCallback((buyer: Buyer) => {\n    setEditingBuyerId(buyer.id);\n    setBuyerForm(buyer);\n    setIsAddingBuyer(false);\n  }, []);\n\n  const handleCancelBuyerForm = useCallback(() => {\n    setEditingBuyerId(null);\n    setIsAddingBuyer(false);\n    setBuyerForm({\n      name: \"\",\n      gstin: \"\",\n      billing_address: \"\",\n      place_of_supply: \"\",\n      state: \"\",\n      state_code: \"\",\n    });\n  }, []);\n\n  const handleSaveBuyer = async () => {\n    if (!buyerForm.name || !buyerForm.gstin) return;\n    setSaving(true);\n    try {\n      if (editingBuyerId) {\n        await api.updateBuyer(editingBuyerId, { ...buyerForm });\n      } else {\n        await api.createBuyer({ ...buyerForm, is_active: true });\n      }\n      await loadData();\n      handleCancelBuyerForm();\n    } catch (err: any) {\n      setError(\"Failed to save buyer.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDeleteBuyer = async (id: number) => {\n    if (!confirm(\"Are you sure you want to delete this buyer?\")) return;\n    try {\n      await api.deleteBuyer(id);\n      await loadData();\n    } catch (err) {\n      setError(\"Failed to delete buyer.\");\n    }\n  };\n\n  const handleSystemReset = async () => {\n    setIsResetting(true);\n    try {\n      const response = await fetch(`${api.baseUrl}/api/system/reset-db`, {\n        method: \"POST\",\n      });\n      if (response.ok) {\n        window.location.href = \"/\";\n      } else {\n        setError(\"System reset failed.\");\n      }\n    } catch (err) {\n      setError(\"Network error during reset.\");\n    } finally {\n      setIsResetting(false);\n      setShowResetConfirm(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex flex-col items-center justify-center p-20 text-[var(--color-sys-content-subtle)]\">\n        <Loader2 className=\"animate-spin mb-4\" size={32} />\n        <Body>Loading System Configuration...</Body>\n      </div>\n    );\n  }\n\n  const topActions = (\n    <div className=\"flex gap-3\">\n      <Button variant=\"outline\" size=\"sm\" onClick={loadData}>\n        <RefreshCw size={14} className={cn(loading && \"animate-spin\", \"mr-2\")} />\n        Sync\n      </Button>\n    </div>\n  );\n\n  return (\n    <DocumentTemplate\n      title=\"SETTINGS\"\n      description=\"Enterprise orchestration and entity lifecycle management\"\n      actions={topActions}\n      layoutId=\"settings-title\"\n      icon={<SettingsIcon size={20} className=\"text-[var(--color-sys-brand-primary)]\" />}\n      iconLayoutId=\"settings-icon\"\n    >\n      <div className=\"space-y-6\">\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"mb-4 bg-transparent p-0 border-b border-[var(--color-sys-text-tertiary)]/10 w-full justify-start rounded-none gap-6\">\n            <TabsTrigger value=\"supplier\">\n              <Building2 size={14} className=\"mr-2\" />\n              Supplier Identity\n            </TabsTrigger>\n            <TabsTrigger value=\"buyer\">\n              <Users size={14} className=\"mr-2\" />\n              Market Entities\n            </TabsTrigger>\n            <TabsTrigger value=\"system\">\n              <SettingsIcon size={14} className=\"mr-2\" />\n              System Governance\n            </TabsTrigger>\n          </TabsList>\n\n          {error && (\n            <Card className=\"p-4 border-[var(--color-sys-status-error)]/20 bg-[var(--color-sys-status-error)]/5 text-[var(--color-sys-status-error)] flex items-center gap-2 mb-4\">\n              <ShieldAlert size={16} />\n              <SmallText className=\"font-semibold\">{error}</SmallText>\n            </Card>\n          )}\n\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={activeTab}\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              transition={{ duration: 0.15 }}\n            >\n              {/* --- Tab: Supplier --- */}\n              <TabsContent value=\"supplier\" className=\"mt-0\">\n                <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={6}>\n                  <div className=\"lg:col-span-8\">\n                    <GlassContainer className=\"p-8 border-none shadow-sm relative overflow-hidden group\">\n                      {/* Ambient Blobs (Morning Briefing Style) */}\n                      <Box className=\"absolute top-0 right-0 w-64 h-64 bg-[var(--color-sys-brand-primary)]/5 rounded-full -mr-20 -mt-20 blur-3xl group-hover:bg-[var(--color-sys-brand-primary)]/10 transition-all duration-700\" />\n\n                      <div className=\"relative z-10\">\n                        <Stack gap={10}>\n                          <section>\n                            <Flex align=\"center\" justify=\"between\" className=\"mb-8\">\n                              <H3>Business Profile</H3>\n                              <Button\n                                variant=\"default\"\n                                size=\"sm\"\n                                onClick={() =>\n                                  handleSaveSettings([\n                                    \"supplier_name\",\n                                    \"supplier_address\",\n                                    \"supplier_gstin\",\n                                    \"supplier_contact\",\n                                    \"supplier_email\",\n                                    \"supplier_state\",\n                                    \"supplier_state_code\",\n                                  ])\n                                }\n                                disabled={saving}\n                              >\n                                {saving ? (\n                                  <Loader2 className=\"animate-spin mr-2\" size={14} />\n                                ) : (\n                                  <Save className=\"mr-2\" size={14} />\n                                )}\n                                Confirm Profile\n                              </Button>\n                            </Flex>\n\n                            <Grid cols={2} gap={6}>\n                              <FormGroup label=\"Business Name\">\n                                <Input\n                                  value={settings.supplier_name || \"\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      supplier_name: e.target.value,\n                                    })\n                                  }\n                                  className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                                />\n                              </FormGroup>\n                              <FormGroup label=\"GSTIN\">\n                                <Input\n                                  className=\"font-mono uppercase bg-[var(--color-sys-bg-tertiary)]/30\"\n                                  value={settings.supplier_gstin || \"\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      supplier_gstin: e.target.value.toUpperCase(),\n                                    })\n                                  }\n                                />\n                              </FormGroup>\n                              <Box className=\"col-span-2\">\n                                <FormGroup label=\"Registered Office Address\">\n                                  <Input\n                                    value={settings.supplier_address || \"\"}\n                                    onChange={(e) =>\n                                      setSettings({\n                                        ...settings,\n                                        supplier_address: e.target.value,\n                                      })\n                                    }\n                                    className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                                  />\n                                </FormGroup>\n                              </Box>\n                              <FormGroup label=\"Contact Phone\">\n                                <Input\n                                  value={settings.supplier_contact || \"\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      supplier_contact: e.target.value,\n                                    })\n                                  }\n                                  className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                                />\n                              </FormGroup>\n                              <FormGroup label=\"Email ID\">\n                                <Input\n                                  value={settings.supplier_email || \"\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      supplier_email: e.target.value,\n                                    })\n                                  }\n                                  className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                                />\n                              </FormGroup>\n                            </Grid>\n                          </section>\n\n                          <section className=\"pt-10 border-t border-[var(--color-sys-bg-tertiary)]\">\n                            <Flex align=\"center\" justify=\"between\" className=\"mb-8\">\n                              <H3>Banking & Settlement</H3>\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={() =>\n                                  handleSaveSettings([\n                                    \"bank_name\",\n                                    \"bank_account\",\n                                    \"bank_ifsc\",\n                                    \"bank_branch\",\n                                  ])\n                                }\n                                disabled={saving}\n                                className=\"text-[var(--color-sys-brand-primary)]\"\n                              >\n                                <Save size={14} className=\"mr-2\" />\n                                Save Settlement Details\n                              </Button>\n                            </Flex>\n                            <Grid cols={2} gap={6}>\n                              <FormGroup label=\"Settlement Bank\">\n                                <Input\n                                  value={settings.bank_name || \"\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      bank_name: e.target.value,\n                                    })\n                                  }\n                                  className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                                />\n                              </FormGroup>\n                              <FormGroup label=\"Account Number\">\n                                <Input\n                                  className=\"font-mono bg-[var(--color-sys-bg-tertiary)]/30\"\n                                  value={settings.bank_account || \"\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      bank_account: e.target.value,\n                                    })\n                                  }\n                                />\n                              </FormGroup>\n                              <FormGroup label=\"IFSC Code\">\n                                <Input\n                                  className=\"font-mono uppercase bg-[var(--color-sys-bg-tertiary)]/30\"\n                                  value={settings.bank_ifsc || \"\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      bank_ifsc: e.target.value.toUpperCase(),\n                                    })\n                                  }\n                                />\n                              </FormGroup>\n                              <FormGroup label=\"Branch Reference\">\n                                <Input\n                                  value={settings.bank_branch || \"\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      bank_branch: e.target.value,\n                                    })\n                                  }\n                                  className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                                />\n                              </FormGroup>\n                            </Grid>\n                          </section>\n                        </Stack>\n                      </div>\n                    </GlassContainer>\n                  </div>\n\n                  <div className=\"lg:col-span-4 space-y-6\">\n                    <GlassContainer className=\"p-6 bg-[var(--color-sys-brand-primary)] text-[var(--color-sys-text-on-brand)] border-none shadow-premium relative overflow-hidden group\">\n                      <motion.div\n                        className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:rotate-12 transition-transform duration-500\"\n                        whileHover={{ scale: 1.2 }}\n                      >\n                        <Building2 size={120} />\n                      </motion.div>\n                      <Label className=\"text-[var(--color-sys-text-on-brand)]/60 mb-6 tracking-[0.2em]\">\n                        IDENTITY PREVIEW\n                      </Label>\n                      <H2 className=\"mb-2 text-[var(--color-sys-text-on-brand)] line-clamp-2\">\n                        {settings.supplier_name || \"Enterprise Identity\"}\n                      </H2>\n                      <Accounting className=\"text-[var(--color-sys-text-on-brand)]/80 text-sm mb-8 block\">\n                        {settings.supplier_gstin || \"GSTIN NOT SET\"}\n                      </Accounting>\n\n                      <Stack gap={4} className=\"pt-6 border-t border-white/20\">\n                        <Flex align=\"start\" gap={3}>\n                          <MapPin size={14} className=\"mt-0.5 text-[var(--color-sys-text-on-brand)]/60\" />\n                          <Body className=\"text-xs text-[var(--color-sys-text-on-brand)]/80 leading-relaxed font-normal\">\n                            {settings.supplier_address || \"Awaiting address...\"}\n                          </Body>\n                        </Flex>\n                        <Flex align=\"center\" gap={3}>\n                          <Phone size={14} className=\"text-[var(--color-sys-text-on-brand)]/60\" />\n                          <Body className=\"text-xs text-[var(--color-sys-text-on-brand)]/80 font-normal\">\n                            {settings.supplier_contact || \"Awaiting contact...\"}\n                          </Body>\n                        </Flex>\n                        <Flex align=\"center\" gap={3}>\n                          <Mail size={14} className=\"text-[var(--color-sys-text-on-brand)]/60\" />\n                          <Body className=\"text-xs text-[var(--color-sys-text-on-brand)]/80 font-normal\">\n                            {settings.supplier_email || \"Awaiting communication...\"}\n                          </Body>\n                        </Flex>\n                      </Stack>\n                    </GlassContainer>\n\n                    <Card className=\"p-4 bg-[var(--color-sys-bg-tertiary)]/30 border-none\">\n                      <Flex align=\"center\" gap={3}>\n                        <ShieldAlert size={16} className=\"text-[var(--color-sys-brand-primary)]\" />\n                        <SmallText className=\"font-medium text-[var(--color-sys-text-secondary)]\">\n                          Profile changes affect all future documentation.\n                        </SmallText>\n                      </Flex>\n                    </Card>\n                  </div>\n                </Grid>\n              </TabsContent>\n\n              {/* --- Tab: Buyer --- */}\n              <TabsContent value=\"buyer\" className=\"space-y-6 mt-0\">\n                <Flex align=\"center\" justify=\"between\" className=\"mb-4\">\n                  <Stack gap={1}>\n                    <H3>Counterparty Registry</H3>\n                    <SmallText>Management of external entities for transaction mapping.</SmallText>\n                  </Stack>\n                  <Button\n                    onClick={() => {\n                      handleCancelBuyerForm();\n                      setIsAddingBuyer(true);\n                    }}\n                    disabled={isAddingBuyer || !!editingBuyerId}\n                  >\n                    <Plus size={16} className=\"mr-2\" /> Registered Entity\n                  </Button>\n                </Flex>\n\n                <AnimatePresence mode=\"wait\">\n                  {(isAddingBuyer || editingBuyerId) && (\n                    <motion.div\n                      initial={{ opacity: 0, y: -10 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      exit={{ opacity: 0, y: -10 }}\n                      className=\"mb-8\"\n                    >\n                      <Card className=\"p-8 border-none bg-[var(--color-sys-bg-surface)] shadow-lg ring-1 ring-[var(--color-sys-brand-primary)]/10\">\n                        <Flex\n                          align=\"center\"\n                          justify=\"between\"\n                          className=\"mb-8 pb-4 border-b border-[var(--color-sys-bg-tertiary)]\"\n                        >\n                          <Flex align=\"center\" gap={2}>\n                            <div className=\"p-2 rounded-lg bg-[var(--color-sys-brand-primary)]/10 text-[var(--color-sys-brand-primary)]\">\n                              {editingBuyerId ? <Edit2 size={16} /> : <Plus size={16} />}\n                            </div>\n                            <H3 className=\"text-sm\">\n                              {editingBuyerId ? \"Modify Market Entity\" : \"New Market Entity\"}\n                            </H3>\n                          </Flex>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            onClick={handleCancelBuyerForm}\n                            className=\"rounded-full\"\n                          >\n                            <X size={16} />\n                          </Button>\n                        </Flex>\n\n                        <Grid cols={1} className=\"md:grid-cols-2 lg:grid-cols-3\" gap={8}>\n                          <FormGroup label=\"Legal Entity Name\">\n                            <Input\n                              placeholder=\"e.g. Bharat Electronics Ltd\"\n                              value={buyerForm.name}\n                              onChange={(e) => setBuyerForm({ ...buyerForm, name: e.target.value })}\n                              className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                            />\n                          </FormGroup>\n                          <FormGroup label=\"GSTIN\">\n                            <Input\n                              placeholder=\"Valid 15-char GSTIN\"\n                              className=\"font-mono uppercase bg-[var(--color-sys-bg-tertiary)]/30\"\n                              value={buyerForm.gstin}\n                              onChange={(e) =>\n                                setBuyerForm({\n                                  ...buyerForm,\n                                  gstin: e.target.value.toUpperCase(),\n                                })\n                              }\n                            />\n                          </FormGroup>\n                          <FormGroup label=\"Operating Region\">\n                            <Input\n                              placeholder=\"e.g. Bengaluru\"\n                              value={buyerForm.place_of_supply}\n                              onChange={(e) =>\n                                setBuyerForm({\n                                  ...buyerForm,\n                                  place_of_supply: e.target.value,\n                                })\n                              }\n                              className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                            />\n                          </FormGroup>\n                          <Box className=\"md:col-span-2\">\n                            <FormGroup label=\"Consignee Address\">\n                              <Input\n                                placeholder=\"Complete registered billing address\"\n                                value={buyerForm.billing_address}\n                                onChange={(e) =>\n                                  setBuyerForm({\n                                    ...buyerForm,\n                                    billing_address: e.target.value,\n                                  })\n                                }\n                                className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                              />\n                            </FormGroup>\n                          </Box>\n                          <FormGroup label=\"State / Jurisdiction\">\n                            <Flex gap={2}>\n                              <Input\n                                placeholder=\"Karnataka\"\n                                value={buyerForm.state}\n                                onChange={(e) =>\n                                  setBuyerForm({\n                                    ...buyerForm,\n                                    state: e.target.value,\n                                  })\n                                }\n                                className=\"flex-1 bg-[var(--color-sys-bg-tertiary)]/30\"\n                              />\n                              <Input\n                                placeholder=\"29\"\n                                className=\"w-16 font-mono text-center bg-[var(--color-sys-bg-tertiary)]/30\"\n                                value={buyerForm.state_code}\n                                onChange={(e) =>\n                                  setBuyerForm({\n                                    ...buyerForm,\n                                    state_code: e.target.value,\n                                  })\n                                }\n                              />\n                            </Flex>\n                          </FormGroup>\n                        </Grid>\n\n                        <Flex\n                          justify=\"end\"\n                          gap={3}\n                          className=\"mt-10 pt-6 border-t border-[var(--color-sys-bg-tertiary)]\"\n                        >\n                          <Button variant=\"ghost\" onClick={handleCancelBuyerForm}>\n                            Cancel\n                          </Button>\n                          <Button onClick={handleSaveBuyer} disabled={saving} className=\"px-10\">\n                            {saving ? (\n                              <Loader2 className=\"animate-spin mr-2\" size={14} />\n                            ) : (\n                              <Check className=\"mr-2\" size={14} />\n                            )}\n                            Commit Record\n                          </Button>\n                        </Flex>\n                      </Card>\n                    </motion.div>\n                  )}\n                </AnimatePresence>\n\n                <Grid cols={1} className=\"md:grid-cols-2 lg:grid-cols-3\" gap={6}>\n                  {buyers.map((buyer) => (\n                    <SpotlightCard\n                      key={buyer.id}\n                      className=\"p-6 h-full flex flex-col group border-none shadow-sm hover:shadow-md\"\n                    >\n                      <Flex justify=\"between\" align=\"start\" className=\"mb-6\">\n                        <Stack gap={1} className=\"flex-1 min-w-0\">\n                          <Flex align=\"center\" gap={2}>\n                            <Body className=\"font-bold truncate group-hover:text-[var(--color-sys-brand-primary)] transition-colors\">\n                              {buyer.name}\n                            </Body>\n                            {buyer.is_default && (\n                              <Badge variant=\"success\" className=\"text-[8px] h-4\">\n                                Default\n                              </Badge>\n                            )}\n                          </Flex>\n                          <Accounting className=\"text-[var(--color-sys-text-tertiary)] uppercase\">\n                            {buyer.gstin}\n                          </Accounting>\n                        </Stack>\n                        <Flex gap={1} className=\"shrink-0\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"h-8 w-8 rounded-full hover:bg-[var(--color-sys-brand-primary)]/10 text-[var(--color-sys-text-tertiary)] hover:text-[var(--color-sys-brand-primary)]\"\n                            onClick={() => handleStartEditBuyer(buyer)}\n                          >\n                            <Edit2 size={12} />\n                          </Button>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"h-8 w-8 rounded-full hover:bg-[var(--color-sys-status-error)]/10 text-[var(--color-sys-text-tertiary)] hover:text-[var(--color-sys-status-error)]\"\n                            onClick={() => handleDeleteBuyer(buyer.id)}\n                          >\n                            <Trash2 size={12} />\n                          </Button>\n                        </Flex>\n                      </Flex>\n\n                      <Stack gap={4} className=\"flex-1\">\n                        <Flex\n                          align=\"start\"\n                          gap={3}\n                          className=\"text-[var(--color-sys-text-secondary)] h-10\"\n                        >\n                          <MapPin\n                            size={14}\n                            className=\"mt-0.5 text-[var(--color-sys-text-tertiary)] shrink-0\"\n                          />\n                          <span className=\"line-clamp-2 leading-relaxed\">\n                            {buyer.billing_address}\n                          </span>\n                        </Flex>\n\n                        <div className=\"grid grid-cols-2 gap-2 pt-4 border-t border-[var(--color-sys-bg-tertiary)]/50\">\n                          <Stack gap={0.5}>\n                            <Label className=\"mb-0 opacity-60\">REGIONAL ZONE</Label>\n                            <Body className=\"font-semibold\">{buyer.state || \"N/A\"}</Body>\n                          </Stack>\n                          <Stack gap={0.5}>\n                            <Label className=\"mb-0 opacity-60\">SUPPLY CODE</Label>\n                            <Accounting className=\"font-bold text-left\">\n                              {buyer.state_code || \"00\"}\n                            </Accounting>\n                          </Stack>\n                        </div>\n                      </Stack>\n\n                      {!buyer.is_default && (\n                        <button\n                          onClick={() => api.setBuyerDefault(buyer.id).then(loadData)}\n                          className=\"mt-6 uppercase text-[var(--color-sys-text-tertiary)] hover:text-[var(--color-sys-brand-primary)] transition-colors opacity-0 group-hover:opacity-100 self-end\"\n                        >\n                          Set as Primary\n                        </button>\n                      )}\n                    </SpotlightCard>\n                  ))}\n                </Grid>\n              </TabsContent>\n\n              {/* --- Tab: System & Governance --- */}\n              <TabsContent value=\"system\" className=\"mt-0\">\n                <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={6}>\n                  <div className=\"lg:col-span-8\">\n                    <GlassContainer className=\"p-8 border-none shadow-sm relative overflow-hidden\">\n                      <Box className=\"absolute bottom-0 left-0 w-40 h-40 bg-[var(--color-sys-status-error)]/5 rounded-full -ml-10 -mb-10 blur-2xl transition-all duration-700\" />\n                      <div className=\"relative z-10\">\n                        <Stack gap={8}>\n                          <Flex align=\"center\" justify=\"between\">\n                            <Stack gap={1}>\n                              <H3>Ecosystem Rules</H3>\n                              <SmallText>\n                                Global logic for sequence generators and automated reconciliation.\n                              </SmallText>\n                            </Stack>\n                            <Button\n                              onClick={() =>\n                                handleSaveSettings([\n                                  \"invoice_prefix\",\n                                  \"dc_prefix\",\n                                  \"default_tax_rate\",\n                                  \"srv_auto_reconcile\",\n                                ])\n                              }\n                              disabled={saving}\n                            >\n                              {saving && <Loader2 className=\"animate-spin mr-2\" size={14} />}\n                              Update Rules\n                            </Button>\n                          </Flex>\n\n                          <Grid cols={2} gap={8}>\n                            <FormGroup\n                              label=\"Invoice Sequence Prefix\"\n                              help=\"Applied to all new invoices\"\n                            >\n                              <Input\n                                value={settings.invoice_prefix || \"\"}\n                                onChange={(e) =>\n                                  setSettings({\n                                    ...settings,\n                                    invoice_prefix: e.target.value,\n                                  })\n                                }\n                                className=\"bg-[var(--color-sys-bg-tertiary)]/30 font-mono\"\n                              />\n                            </FormGroup>\n                            <FormGroup\n                              label=\"DC Sequence Prefix\"\n                              help=\"Applied to all delivery challans\"\n                            >\n                              <Input\n                                value={settings.dc_prefix || \"\"}\n                                onChange={(e) =>\n                                  setSettings({\n                                    ...settings,\n                                    dc_prefix: e.target.value,\n                                  })\n                                }\n                                className=\"bg-[var(--color-sys-bg-tertiary)]/30 font-mono\"\n                              />\n                            </FormGroup>\n                            <FormGroup label=\"Standard GST Rate (%)\">\n                              <Input\n                                type=\"number\"\n                                value={settings.default_tax_rate || 0}\n                                onChange={(e) =>\n                                  setSettings({\n                                    ...settings,\n                                    default_tax_rate: parseFloat(e.target.value),\n                                  })\n                                }\n                                className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\n                              />\n                            </FormGroup>\n                            <FormGroup label=\"Auto-Reconciliation\">\n                              <Flex\n                                align=\"center\"\n                                gap={3}\n                                className=\"h-10 px-4 rounded-lg bg-[var(--color-sys-bg-tertiary)]/20 border-none\"\n                              >\n                                <input\n                                  type=\"checkbox\"\n                                  className=\"w-4 h-4 rounded border-gray-300 text-[var(--color-sys-brand-primary)] focus:ring-[var(--color-sys-brand-primary)]\"\n                                  checked={settings.srv_auto_reconcile === \"true\"}\n                                  onChange={(e) =>\n                                    setSettings({\n                                      ...settings,\n                                      srv_auto_reconcile: e.target.checked ? \"true\" : \"false\",\n                                    })\n                                  }\n                                />\n                                <Body className=\"text-sm\">\n                                  Enable Automatic PO Balance Tally\n                                </Body>\n                              </Flex>\n                            </FormGroup>\n                          </Grid>\n\n                          <Box className=\"mt-4\">\n                            <Label className=\"mb-4\">Operational Invariants</Label>\n                            <Flex\n                              align=\"center\"\n                              gap={4}\n                              className=\"p-5 bg-[var(--color-sys-brand-primary)]/5 rounded-2xl border border-[var(--color-sys-brand-primary)]/10\"\n                            >\n                              <div className=\"h-10 w-10 rounded-full bg-[var(--color-sys-brand-primary)]/10 flex items-center justify-center text-[var(--color-sys-brand-primary)]\">\n                                <ShieldAlert size={20} />\n                              </div>\n                              <Stack gap={0.5}>\n                                <Body className=\"text-sm text-[var(--color-sys-brand-primary)]\">\n                                  Mandatory SRV Ingestion\n                                </Body>\n                                <SmallText className=\"text-[var(--color-sys-brand-primary)]/70\">\n                                  PO balances are strictly coupled with Stores Receipt Vouchers.\n                                </SmallText>\n                              </Stack>\n                            </Flex>\n                          </Box>\n                        </Stack>\n                      </div>\n                    </GlassContainer>\n                  </div>\n\n                  <div className=\"lg:col-span-4\">\n                    <Stack gap={4}>\n                      <Flex\n                        align=\"center\"\n                        gap={2}\n                        className=\"px-1 text-[var(--color-sys-status-error)]\"\n                      >\n                        <ShieldAlert size={14} />\n                        <Label className=\"text-[var(--color-sys-status-error)] mb-0\">\n                          CRITICAL DESTRUCTION\n                        </Label>\n                      </Flex>\n\n                      <Card className=\"p-8 border-none bg-[var(--color-sys-status-error)]/5 ring-1 ring-[var(--color-sys-status-error)]/10 backdrop-blur-sm\">\n                        <Stack gap={6}>\n                          <Stack gap={2}>\n                            <H3 className=\"text-[var(--color-sys-status-error)]\">\n                              Nuclear System Reset\n                            </H3>\n                            <Body className=\"text-[var(--color-sys-status-error)]/80 text-xs leading-relaxed\">\n                              Permanently purge all POs, Invoices, and DC history. Identity records\n                              are preserved.\n                            </Body>\n                          </Stack>\n\n                          <AnimatePresence mode=\"wait\">\n                            {!showResetConfirm ? (\n                              <motion.div\n                                initial={{ opacity: 0 }}\n                                animate={{ opacity: 1 }}\n                                exit={{ opacity: 0 }}\n                              >\n                                <Button\n                                  variant=\"default\"\n                                  onClick={() => setShowResetConfirm(true)}\n                                  className=\"w-full bg-[var(--color-sys-status-error)] hover:bg-[var(--color-sys-status-error)]/90 text-[var(--color-sys-text-on-brand)] rounded-full uppercase\"\n                                >\n                                  Initiate Purge\n                                </Button>\n                              </motion.div>\n                            ) : (\n                              <motion.div\n                                initial={{ opacity: 0, scale: 0.95 }}\n                                animate={{ opacity: 1, scale: 1 }}\n                                className=\"flex gap-2\"\n                              >\n                                <Button\n                                  onClick={handleSystemReset}\n                                  disabled={isResetting}\n                                  className=\"flex-1 bg-[var(--color-sys-status-error)] hover:bg-[var(--color-sys-status-error)]/90 text-[var(--color-sys-text-on-brand)] rounded-full\"\n                                >\n                                  {isResetting && (\n                                    <Loader2 className=\"animate-spin mr-2\" size={12} />\n                                  )}\n                                  EXECUTE\n                                </Button>\n                                <Button\n                                  variant=\"outline\"\n                                  onClick={() => setShowResetConfirm(false)}\n                                  className=\"flex-1 rounded-full\"\n                                >\n                                  ABORT\n                                </Button>\n                              </motion.div>\n                            )}\n                          </AnimatePresence>\n                        </Stack>\n                      </Card>\n                    </Stack>\n                  </div>\n                </Grid>\n              </TabsContent>\n            </motion.div>\n          </AnimatePresence>\n        </Tabs>\n      </div >\n    </DocumentTemplate >\n  );\n}\n\n// --- Subcomponents ---\n\n// TabTrigger removed as we use TabsTrigger from DS directly\n\nfunction FormGroup({\n  label,\n  help,\n  children,\n}: {\n  label: string;\n  help?: string;\n  children: React.ReactNode;\n}) {\n  return (\n    <div className=\"flex flex-col justify-center min-h-[44px]\">\n      <div className=\"flex items-center justify-between mb-1.5\">\n        <Label className=\"font-bold text-[var(--color-sys-text-secondary)] leading-none\">\n          {label}\n        </Label>\n        {help && (\n          <SmallText className=\"text-[var(--color-sys-text-tertiary)] opacity-50 italic\">\n            {help}\n          </SmallText>\n        )}\n      </div>\n      {children}\n    </div>\n  );\n}\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\[id]\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowLeft' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowLeft"},"fix":{"range":[169,179],"text":""},"desc":"Remove unused variable 'ArrowLeft'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowLeft' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[178,190],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[230,245],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[245,257],"text":""},"desc":"Remove unused variable 'Activity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Activity' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'H1' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"H1"},"fix":{"range":[353,356],"text":""},"desc":"Remove unused variable 'H1'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H1' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'Label' is defined but never used.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Label"},"fix":{"range":[396,405],"text":""},"desc":"Remove unused variable 'Label'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Label' is defined but never used.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":26,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Card"},"fix":{"range":[424,432],"text":""},"desc":"Remove unused variable 'Card'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used.","line":26,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'Grid' is defined but never used.","line":30,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":30,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Grid"},"fix":{"range":[456,464],"text":""},"desc":"Remove unused variable 'Grid'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Grid' is defined but never used.","line":30,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":7},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":65,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":65,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":68,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":68,"endColumn":87},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":81,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":81,"endColumn":92},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":84,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":84,"endColumn":87},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":97,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":97,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":105,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":105,"endColumn":87},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":117,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":117,"endColumn":92},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":120,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":120,"endColumn":87},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":147,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":147,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":158,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":158,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":169,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":169,"endColumn":88},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":184,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":184,"endColumn":22,"suggestions":[{"fix":{"range":[5253,5286],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":225,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":225,"endColumn":81},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":261,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":261,"endColumn":77},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":280,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":280,"endColumn":93}],"suppressedMessages":[],"errorCount":22,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState, useMemo } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport { api } from \"@/lib/api\";\nimport {\n  ArrowLeft,\n  Calendar,\n  FileText,\n  Package,\n  AlertTriangle,\n  CheckCircle,\n  Activity,\n  ClipboardCheck,\n} from \"lucide-react\";\nimport { formatDate } from \"@/lib/utils\";\nimport {\n  H1,\n  H3,\n  SmallText,\n  Body,\n  Accounting,\n  Label,\n  Button,\n  Badge,\n  Card,\n  Flex,\n  Stack,\n  Box,\n  Grid,\n  type Column,\n  DataTable,\n  SummaryCards,\n} from \"@/components/design-system/organisms\";\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport dynamic from \"next/dynamic\";\n\nconst DocumentJourney = dynamic(\n  () =>\n    import(\"@/components/design-system/molecules/DocumentJourney\").then(\n      (mod) => mod.DocumentJourney\n    ),\n  {\n    ssr: false,\n    loading: () => <div className=\"h-6 w-48 bg-slate-100 rounded-full animate-pulse\" />,\n  }\n);\n\nexport default function SRVDetailPage() {\n  const params = useParams();\n  const router = useRouter();\n  const [srv, setSrv] = useState<any>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Columns definition moved to top to prevent Hook order violation\n  const itemColumns = useMemo<Column<any>[]>(\n    () => [\n      { key: \"div_code\", label: \"DIV\", align: \"center\", width: \"5%\" },\n      {\n        key: \"po_item_no\",\n        label: \"Item\",\n        width: \"10%\",\n        render: (_v: any, row: any) => (\n          <Stack align=\"center\">\n            <Body className=\"text-[var(--color-sys-text-primary)] leading-none\">\n              ITEM-{row.po_item_no}\n            </Body>\n            <SmallText className=\"text-[var(--color-sys-text-secondary)] leading-none\">\n              Lot {row.lot_no}\n            </SmallText>\n          </Stack>\n        ),\n      },\n      { key: \"pmir_no\", label: \"PMIR\", width: \"8%\" },\n      {\n        key: \"challan_no\",\n        label: \"Challan\",\n        width: \"12%\",\n        render: (_v: any, row: any) => (\n          <Stack>\n            <Body className=\"font-medium text-[var(--color-sys-text-primary)] leading-none\">\n              {row.challan_no || \"-\"}\n            </Body>\n            <SmallText className=\"text-[var(--color-sys-text-secondary)] leading-none\">\n              {row.challan_date ? formatDate(row.challan_date) : \"-\"}\n            </SmallText>\n          </Stack>\n        ),\n      },\n      {\n        key: \"invoice_no\",\n        label: \"Invoice\",\n        width: \"12%\",\n        render: (_v: any, row: any) => (\n          <Stack>\n            <Body\n              className=\"text-[var(--color-sys-brand-primary)] cursor-pointer hover:underline leading-none\"\n              onClick={() =>\n                row.invoice_no &&\n                router.push(`/invoice/${encodeURIComponent(row.invoice_no.toString().trim())}`)\n              }\n            >\n              {row.invoice_no || \"-\"}\n            </Body>\n            <SmallText className=\"text-[var(--color-sys-text-secondary)] leading-none\">\n              {row.invoice_date ? formatDate(row.invoice_date) : \"-\"}\n            </SmallText>\n          </Stack>\n        ),\n      },\n      {\n        key: \"cnote_no\",\n        label: \"CNOTE\",\n        width: \"12%\",\n        render: (_v: any, row: any) => (\n          <Stack>\n            <Body className=\"font-medium text-[var(--color-sys-text-primary)] leading-none\">\n              {row.cnote_no || \"-\"}\n            </Body>\n            <SmallText className=\"text-[var(--color-sys-text-secondary)] leading-none\">\n              {row.cnote_date ? formatDate(row.cnote_date) : \"-\"}\n            </SmallText>\n          </Stack>\n        ),\n      },\n      { key: \"unit\", label: \"UNIT\", align: \"center\", width: \"6%\" },\n      {\n        key: \"order_qty\",\n        label: \"ORDERED\",\n        align: \"right\",\n        width: \"8%\",\n        render: (v: any) => <Accounting className=\"text-right block\">{v}</Accounting>,\n      },\n      {\n        key: \"challan_qty\",\n        label: \"CHALLAN\",\n        align: \"right\",\n        width: \"8%\",\n        render: (v: any) => <Accounting className=\"text-right block font-mono\">{v}</Accounting>,\n      },\n      {\n        key: \"received_qty\",\n        label: \"RECD\",\n        align: \"right\",\n        width: \"8%\",\n        render: (_v: any, row: any) => (\n          <Accounting className=\"text-[var(--color-sys-brand-primary)] text-right block\">\n            {row.received_qty}\n          </Accounting>\n        ),\n      },\n      {\n        key: \"accepted_qty\",\n        label: \"ACCEPTED\",\n        align: \"right\",\n        width: \"8%\",\n        render: (_v: any, row: any) => (\n          <Accounting className=\"text-[var(--color-sys-status-success)] text-right block\">\n            {row.accepted_qty}\n          </Accounting>\n        ),\n      },\n      {\n        key: \"rejected_qty\",\n        label: \"REJECTED\",\n        align: \"right\",\n        width: \"8%\",\n        render: (_v: any, row: any) => (\n          <Accounting className=\"text-[var(--color-sys-status-error)] text-right block\">\n            {row.rejected_qty}\n          </Accounting>\n        ),\n      },\n    ],\n    [router]\n  );\n\n  const loadSRV = useMemo(\n    () => async (id: string) => {\n      try {\n        const data = await api.getSRV(id);\n        setSrv(data);\n      } catch (err) {\n        console.error(\"SRV Error:\", err);\n      } finally {\n        setLoading(false);\n      }\n    },\n    []\n  );\n\n  useEffect(() => {\n    if (params.id) {\n      loadSRV(params.id as string);\n    }\n  }, [params.id, loadSRV]);\n\n  if (loading || !srv || !srv.header) {\n    return (\n      <DocumentTemplate\n        title={loading ? \"Synchronizing...\" : \"SRV Not Found\"}\n        description={\n          loading ? \"Retrieving record data from ledger\" : \"Traceback failure in record retrieval\"\n        }\n        onBack={() => router.push(\"/srv\")}\n      >\n        <Stack gap={6}>\n          <Box className=\"h-8 w-64 bg-slate-100 rounded-full animate-pulse\" />\n          <Box className=\"h-[200px] w-full bg-slate-50 rounded-xl border border-slate-100 animate-pulse\" />\n        </Stack>\n      </DocumentTemplate>\n    );\n  }\n\n  const { header, items = [] } = srv;\n\n  const totalReceived = items.reduce((acc: number, item: any) => acc + (item.received_qty || 0), 0);\n  const totalRejected = items.reduce((acc: number, item: any) => acc + (item.rejected_qty || 0), 0);\n\n  return (\n    <DocumentTemplate\n      title={`SRV-${header.srv_number}`}\n      description={`Certified ${formatDate(header.srv_date)} ΓÇó Contract: ${header.po_number}`}\n      onBack={() => router.back()}\n      icon={<Package size={20} className=\"text-[var(--color-sys-brand-primary)]\" />}\n      actions={\n        <Flex gap={3}>\n          <Button variant=\"secondary\" size=\"sm\" onClick={() => window.print()}>\n            <FileText size={16} />\n            Export Report\n          </Button>\n        </Flex>\n      }\n    >\n      <Stack gap={6}>\n        <Flex align=\"center\" gap={3}>\n          <Badge variant=\"default\">INSPECTED</Badge>\n          <Badge\n            variant=\"outline\"\n            className=\"cursor-pointer hover:bg-[var(--color-sys-brand-primary)]/10 transition-colors\"\n            onClick={() => router.push(`/po/${header.po_number}`)}\n          >\n            Ref: {header.po_number}\n          </Badge>\n        </Flex>\n\n        <DocumentJourney currentStage=\"SRV\" className=\"mb-2\" />\n\n        {/* Summary Cards */}\n        <SummaryCards\n          cards={[\n            {\n              title: \"Receipt Volume\",\n              value: <Accounting>{totalReceived}</Accounting>,\n              icon: <Package size={20} />,\n              variant: \"primary\",\n            },\n            {\n              title: \"Quality Deficiency\",\n              value: (\n                <Accounting className=\"text-[var(--color-sys-status-error)]\">\n                  {totalRejected}\n                </Accounting>\n              ),\n              icon: <AlertTriangle size={20} />,\n              variant: \"error\",\n            },\n            {\n              title: \"Verification Node\",\n              value: items[0]?.invoice_no || \"PENDING AUDIT\",\n              icon: <ClipboardCheck size={20} />,\n              variant: \"secondary\",\n            },\n          ]}\n        />\n\n        {/* Items Table */}\n        <Stack gap={4}>\n          <Flex align=\"center\" justify=\"between\">\n            <H3 className=\"text-[var(--color-sys-text-secondary)] uppercase tracking-widest\">\n              Inspection Manifest\n            </H3>\n            <Badge variant=\"default\">\n              {items.length} Quality Nodes\n            </Badge>\n          </Flex>\n          <DataTable columns={itemColumns} data={items} keyField=\"id\" density=\"compact\" />\n        </Stack>\n      </Stack>\n    </DocumentTemplate>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\page.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Upload' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Upload"},"fix":{"range":[233,240],"text":""},"desc":"Remove unused variable 'Upload'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Upload' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'Receipt' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"Receipt"},"fix":{"range":[287,298],"text":""},"desc":"Remove unused variable 'Receipt'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Receipt' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":10},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[308,317],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[317,329],"text":""},"desc":"Remove unused variable 'Activity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Activity' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[329,341],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Search"},"fix":{"range":[364,374],"text":""},"desc":"Remove unused variable 'Search'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Search' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":21,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[374,379],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":21,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":4},{"ruleId":"no-unused-vars","severity":1,"message":"'ExternalLink' is defined but never used.","line":22,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"ExternalLink"},"fix":{"range":[379,395],"text":""},"desc":"Remove unused variable 'ExternalLink'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ExternalLink' is defined but never used.","line":22,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'API_BASE_URL' is defined but never used.","line":26,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"API_BASE_URL"},"fix":{"range":[449,463],"text":""},"desc":"Remove unused variable 'API_BASE_URL'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'API_BASE_URL' is defined but never used.","line":26,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'DocumentTemplate' is defined but never used.","line":31,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"DocumentTemplate"},"fix":{"range":[648,737],"text":""},"desc":"Remove unused variable 'DocumentTemplate'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DocumentTemplate' is defined but never used.","line":31,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":26},{"ruleId":"no-unused-vars","severity":1,"message":"'GlassContainer' is defined but never used.","line":33,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":33,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"GlassContainer"},"fix":{"range":[828,898],"text":""},"desc":"Remove unused variable 'GlassContainer'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'GlassContainer' is defined but never used.","line":33,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'H1' is defined but never used.","line":36,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"H1"},"fix":{"range":[920,926],"text":""},"desc":"Remove unused variable 'H1'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H1' is defined but never used.","line":36,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'H3' is defined but never used.","line":37,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":5,"suggestions":[{"messageId":"removeVar","data":{"varName":"H3"},"fix":{"range":[926,932],"text":""},"desc":"Remove unused variable 'H3'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H3' is defined but never used.","line":37,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'Label' is defined but never used.","line":38,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Label"},"fix":{"range":[932,941],"text":""},"desc":"Remove unused variable 'Label'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Label' is defined but never used.","line":38,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'Input' is defined but never used.","line":43,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"Input"},"fix":{"range":[1074,1135],"text":""},"desc":"Remove unused variable 'Input'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Input' is defined but never used.","line":43,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'Dialog' is defined but never used.","line":45,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":45,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Dialog"},"fix":{"range":[1147,1154],"text":""},"desc":"Remove unused variable 'Dialog'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Dialog' is defined but never used.","line":45,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogContent' is defined but never used.","line":46,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":46,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogContent"},"fix":{"range":[1153,1170],"text":""},"desc":"Remove unused variable 'DialogContent'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DialogContent' is defined but never used.","line":46,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogHeader' is defined but never used.","line":47,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogHeader"},"fix":{"range":[1170,1186],"text":""},"desc":"Remove unused variable 'DialogHeader'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DialogHeader' is defined but never used.","line":47,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'DialogTitle' is defined but never used.","line":48,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"DialogTitle"},"fix":{"range":[1186,1201],"text":""},"desc":"Remove unused variable 'DialogTitle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DialogTitle' is defined but never used.","line":48,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'StatusBadge' is defined but never used.","line":50,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":50,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"StatusBadge"},"fix":{"range":[1257,1336],"text":""},"desc":"Remove unused variable 'StatusBadge'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'StatusBadge' is defined but never used.","line":50,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'Stack' is defined but never used.","line":54,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"Stack"},"fix":{"range":[1595,1602],"text":""},"desc":"Remove unused variable 'Stack'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used.","line":54,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'Box' is defined but never used.","line":54,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"Box"},"fix":{"range":[1602,1607],"text":""},"desc":"Remove unused variable 'Box'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Box' is defined but never used.","line":54,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":54,"endColumn":26},{"ruleId":"no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":57,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":57,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"router"},"fix":{"range":[1698,1725],"text":""},"desc":"Remove unused variable 'router'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'router' is assigned a value but never used.","line":57,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":57,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'setPageSize' is assigned a value but never used.","line":62,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":62,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"setPageSize"},"fix":{"range":[1946,1959],"text":""},"desc":"Remove unused variable 'setPageSize'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setPageSize' is assigned a value but never used.","line":62,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":31},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":78,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":78,"endColumn":20,"suggestions":[{"fix":{"range":[2460,2479],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":104,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":104,"endColumn":22,"suggestions":[{"fix":{"range":[3301,3320],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":118,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":118,"endColumn":104},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":123,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":123,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":133,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":133,"endColumn":67},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":144,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":144,"endColumn":219},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":151,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":151,"endColumn":86},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":163,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":163,"endColumn":118},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":196,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":196,"endColumn":105},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":267,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":267,"endColumn":106},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":286,"column":11,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":286,"endColumn":185}],"suppressedMessages":[],"errorCount":33,"fatalErrorCount":0,"warningCount":26,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport {\n  Upload,\n  CheckCircle2,\n  XCircle,\n  Loader2,\n  Trash2,\n  Receipt,\n  Layers,\n  Clock,\n  Activity,\n  FileText,\n  AlertCircle,\n  Plus,\n  Search,\n  X,\n  ExternalLink,\n  ChevronRight,\n} from \"lucide-react\";\n\nimport { api, API_BASE_URL, SRVListItem, SRVStats } from \"@/lib/api\";\nimport { formatDate, cn } from \"@/lib/utils\";\nimport { useUpload } from \"@/components/providers/UploadContext\";\n\n// Atomic Design Components\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\nimport { ListPageTemplate } from \"@/components/design-system/templates/ListPageTemplate\";\nimport { GlassContainer } from \"@/components/design-system/organisms\";\nimport {\n  Accounting,\n  H1,\n  H3,\n  Label,\n  Body,\n  SmallText,\n} from \"@/components/design-system/organisms\";\nimport { Button } from \"@/components/design-system/organisms\";\nimport { Input } from \"@/components/design-system/organisms\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/design-system/molecules/Dialog\";\nimport { StatusBadge } from \"@/components/design-system/organisms/StatusBadge\";\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\nimport { type Column } from \"@/components/design-system/organisms/DataTable\";\nimport { type SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\nimport { Flex, Stack, Box } from \"@/components/design-system/organisms\";\n\nexport default function SRVListPage() {\n  const router = useRouter();\n  const [srvs, setSrvs] = useState<SRVListItem[]>([]);\n  const [stats, setStats] = useState<SRVStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [pageSize, setPageSize] = useState(10);\n  const [totalItems, setTotalItems] = useState(0);\n\n  // Global Upload Context\n  const { startUpload, isUploading } = useUpload();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n\n  const loadData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const [srvData, statsData] = await Promise.all([api.listSRVs(), api.getSRVStats()]);\n\n      setSrvs(srvData);\n      setStats(statsData);\n      setTotalItems(statsData?.total_srvs || 0);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadData();\n  }, [loadData, searchQuery, page, pageSize]);\n\n  const handleFileSelect = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      await startUpload(Array.from(e.target.files), \"SRV\");\n    }\n  }, [startUpload]);\n\n  // Removed local handleUpload, use global hook trigger immediately on file select or could add a confirm step. \n  // For consistency with PO page, triggering immediately on file select for now.\n\n  const handleDelete = useCallback(\n    async (srvNumber: string) => {\n      if (!confirm(`Permanently delete SRV #${srvNumber}?`)) return;\n      try {\n        await api.deleteSRV(srvNumber);\n        await loadData();\n      } catch (err) {\n        console.error(err);\n      }\n    },\n    [loadData]\n  );\n\n  const columns: Column<SRVListItem>[] = useMemo(\n    () => [\n      {\n        key: \"srv_number\",\n        label: \"SRV VOUCHER\",\n        width: \"15%\",\n        render: (v) => (\n          <Link href={`/srv/${v}`} className=\"group flex items-center gap-1\">\n            <Body className=\"font-semibold text-[var(--color-sys-brand-primary)] group-hover:underline\">\n              {String(v)}\n            </Body>\n            <ChevronRight\n              size={12}\n              className=\"text-[var(--color-sys-brand-primary)]/50 group-hover:text-[var(--color-sys-brand-primary)] transition-colors\"\n            />\n          </Link>\n        ),\n      },\n      {\n        key: \"srv_date\",\n        label: \"DATE\",\n        width: \"12%\",\n        render: (v) => (\n          <Body className=\"text-[var(--color-sys-text-secondary)]\">{formatDate(v as string)}</Body>\n        ),\n      },\n      {\n        key: \"po_number\",\n        label: \"PO REFERENCE\",\n        width: \"12%\",\n        render: (v, row) => (\n          <Flex align=\"center\" gap={2}>\n            <Link\n              href={`/po/${v}`}\n              className=\"px-2 py-1 rounded-lg bg-[var(--color-sys-bg-tertiary)]/50 text-[var(--color-sys-text-secondary)] hover:bg-[var(--color-sys-bg-tertiary)] transition-colors border-none flex items-center gap-1.5\"\n            >\n              <SmallText className=\"font-extrabold leading-none\">\n                #{String(v)}\n              </SmallText>\n            </Link>\n            {!row.po_found && (\n              <AlertCircle size={14} className=\"text-[var(--color-sys-status-error)]\" />\n            )}\n          </Flex>\n        ),\n      },\n      {\n        key: \"total_accepted_qty\",\n        label: \"ACCEPTED\",\n        align: \"right\",\n        width: \"12%\",\n        isNumeric: true,\n        render: (v) => (\n          <Accounting className=\"table-cell-number text-[var(--color-sys-status-success)] text-right block font-mono\">\n            {v}\n          </Accounting>\n        ),\n      },\n      {\n        key: \"total_rejected_qty\",\n        label: \"REJECTED\",\n        align: \"right\",\n        width: \"12%\",\n        isNumeric: true,\n        render: (v) => (\n          <Accounting\n            className={cn(\n              \"table-cell-number text-right block font-mono\",\n              Number(v) > 0\n                ? \"text-[var(--color-sys-status-error)]\"\n                : \"text-[var(--color-sys-text-tertiary)]\"\n            )}\n          >\n            {v}\n          </Accounting>\n        ),\n      },\n      {\n        key: \"actions\",\n        label: \"\",\n        width: \"5%\",\n        render: (_, row) => (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => handleDelete(row.srv_number)}\n            className=\"text-[var(--color-sys-text-tertiary)] hover:text-[var(--color-sys-status-error)]\"\n          >\n            <Trash2 size={14} />\n          </Button>\n        ),\n      },\n    ],\n    [handleDelete]\n  );\n\n  const summaryCards: SummaryCardProps[] = useMemo(\n    () => [\n      {\n        title: \"Active Vouchers\",\n        value: stats?.total_srvs || 0,\n        icon: <Layers size={20} />,\n        variant: \"primary\",\n      },\n      {\n        title: \"Accepted Volume\",\n        value: stats?.total_received_qty || 0,\n        icon: <CheckCircle2 size={20} />,\n        variant: \"success\",\n      },\n      {\n        title: \"Rejection Rate\",\n        value: `${stats?.rejection_rate || 0}%`,\n        icon: <XCircle size={20} />,\n        variant: \"error\",\n      },\n    ],\n    [stats]\n  );\n\n  const filteredData = useMemo(() => {\n    if (!searchQuery) return srvs;\n    const q = searchQuery.toLowerCase();\n    return srvs.filter(\n      (s) => s.srv_number?.toLowerCase().includes(q) || s.po_number?.toString().includes(q)\n    );\n  }, [srvs, searchQuery]);\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleUploadClick = useCallback(() => {\n    fileInputRef.current?.click();\n  }, []);\n\n  // Master Reference: Toolbar Construction (Atomic)\n  const handleSearch = useCallback((val: string) => {\n    setSearchQuery(val);\n  }, []);\n\n  const toolbar = (\n    <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\n      <SearchBar\n        value={searchQuery}\n        onChange={handleSearch}\n        placeholder=\"Filter by SRV or PO...\"\n        className=\"w-80\"\n      />\n      <Flex align=\"center\" gap={3}>\n        <AnimatePresence>\n          {isUploading && (\n            <motion.div\n              initial={{ opacity: 0, x: 20 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: 20 }}\n            >\n              <Button\n                variant=\"ghost\"\n                className=\"text-[var(--color-sys-brand-primary)] h-10 px-6 uppercase pointer-events-none\"\n              >\n                <Loader2 size={14} className=\"mr-2 animate-spin\" />\n                Processing Background...\n              </Button>\n            </motion.div>\n          )}\n        </AnimatePresence>\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          multiple\n          accept=\".html\"\n          onChange={handleFileSelect}\n          className=\"hidden\"\n        />\n        <Button\n          variant=\"secondary\"\n          size=\"default\"\n          className=\"h-10 border-none bg-[var(--color-sys-bg-tertiary)]/50 text-[var(--color-sys-text-secondary)] hover:bg-[var(--color-sys-bg-tertiary)] px-6 uppercase cursor-pointer\"\n          onClick={handleUploadClick}\n        >\n          <Plus size={16} className=\"mr-2\" />\n          Add Documents\n        </Button>\n      </Flex>\n    </Flex>\n  );\n\n  return (\n    <>\n      <ListPageTemplate\n        title=\"MATERIAL RECEIPTS\"\n        subtitle=\"Comprehensive audit trail for Stores Receipt Vouchers (SRV)\"\n        columns={columns}\n        data={filteredData}\n        loading={loading}\n        keyField=\"srv_number\"\n        summaryCards={summaryCards}\n        toolbar={toolbar}\n        page={page}\n        pageSize={pageSize}\n        totalItems={totalItems}\n        onPageChange={(newPage) => setPage(newPage)}\n        emptyMessage=\"No SRVs found\"\n        density=\"compact\"\n        no_borders={true}\n        table_surface_solid={true}\n        className=\"min-h-[600px]\"\n      />\n\n      {/* Removed local Modal, using global BarchUploadCard via context */}\n    </>\n  );\n}\n\n\n\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\DownloadButton.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":43,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":43,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":59,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":59,"endColumn":20,"suggestions":[{"fix":{"range":[1672,1712],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { Download } from \"lucide-react\";\r\n\r\ninterface DownloadButtonProps {\r\n  url: string;\r\n  filename: string;\r\n  label?: string;\r\n  className?: string;\r\n  variant?: \"primary\" | \"secondary\" | \"outline\" | \"ghost\";\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n}\r\n\r\nexport default function DownloadButton({\r\n  url,\r\n  filename,\r\n  label = \"Download Excel\",\r\n  className = \"\",\r\n  variant = \"outline\",\r\n  size = \"md\",\r\n}: DownloadButtonProps) {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleDownload = async (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: \"GET\",\r\n      });\r\n\r\n      if (!response.ok) {\r\n        let errorMessage = \"Download failed\";\r\n        try {\r\n          const errorData = await response.json();\r\n          // Handle both standard FastAPI detail and our structured AppException\r\n          errorMessage =\r\n            errorData.message ||\r\n            errorData.detail?.message ||\r\n            errorData.detail ||\r\n            errorMessage;\r\n        } catch (e) {\r\n          // Not JSON or other parsing error\r\n        }\r\n        throw new Error(errorMessage);\r\n      }\r\n\r\n      const blob = await response.blob();\r\n      const downloadUrl = window.URL.createObjectURL(blob);\r\n      const link = document.createElement(\"a\");\r\n      link.href = downloadUrl;\r\n      link.download = filename;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(downloadUrl);\r\n    } catch (error: any) {\r\n      console.error(\"Download Error:\", error);\r\n      alert(`Failed: ${error.message}`);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const sizeStyles = {\r\n    sm: \"px-2.5 py-1 text-xs\",\r\n    md: \"px-3 py-1.5 text-sm\",\r\n    lg: \"px-4 py-2 text-base\",\r\n  };\r\n\r\n  const baseStyles =\r\n    \"inline-flex items-center gap-2 font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\";\r\n\r\n  const variants = {\r\n    primary: \"bg-blue-600 text-white hover:bg-blue-700\",\r\n    secondary: \"bg-gray-100 text-gray-700 hover:bg-gray-200\",\r\n    outline:\r\n      \"border border-gray-300 text-text-primary bg-white hover:bg-gray-50\",\r\n    ghost: \"text-gray-600 hover:text-gray-900 hover:bg-gray-100\",\r\n  };\r\n\r\n  // Icon sizes\r\n  const iconSize =\r\n    size === \"sm\" ? \"w-3 h-3\" : size === \"lg\" ? \"w-5 h-5\" : \"w-4 h-4\";\r\n\r\n  return (\r\n    <button\r\n      onClick={handleDownload}\r\n      disabled={isLoading}\r\n      className={`${baseStyles} ${sizeStyles[size]} ${variants[variant]} ${className} ${isLoading ? \"opacity-70 cursor-wait\" : \"\"}`}\r\n    >\r\n      {isLoading ? (\r\n        <svg\r\n          className={`animate-spin -ml-1 mr-2 ${iconSize} text-current`}\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          fill=\"none\"\r\n          viewBox=\"0 0 24 24\"\r\n        >\r\n          <circle\r\n            className=\"opacity-25\"\r\n            cx=\"12\"\r\n            cy=\"12\"\r\n            r=\"10\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"4\"\r\n          ></circle>\r\n          <path\r\n            className=\"opacity-75\"\r\n            fill=\"currentColor\"\r\n            d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n          ></path>\r\n        </svg>\r\n      ) : (\r\n        <Download className={iconSize} />\r\n      )}\r\n      {label}\r\n    </button>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\ErrorBoundary.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":34,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":34,"endColumn":18,"suggestions":[{"fix":{"range":[770,831],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { Component, ReactNode } from \"react\";\r\nimport { AlertTriangle } from \"lucide-react\";\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error?: Error;\r\n  errorInfo?: React.ErrorInfo;\r\n}\r\n\r\n/**\r\n * Error Boundary Component\r\n * Catches React errors and displays a fallback UI\r\n * Logs errors for debugging\r\n */\r\nexport class ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\r\n    // Log error to console\r\n    console.error(\"Error caught by boundary:\", error, errorInfo);\r\n\r\n    // Store error info in state\r\n    this.setState({ errorInfo });\r\n\r\n    // TODO: Send to error tracking service (e.g., Sentry)\r\n    // sendErrorToService(error, errorInfo);\r\n  }\r\n\r\n  handleReset = () => {\r\n    this.setState({ hasError: false, error: undefined, errorInfo: undefined });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // Use custom fallback if provided\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      // Default error UI\r\n      return (\r\n        <div className=\"flex items-center justify-center min-h-screen bg-gray-50\">\r\n          <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-8\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <AlertTriangle className=\"w-8 h-8 text-red-500\" />\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">\r\n                Something went wrong\r\n              </h1>\r\n            </div>\r\n\r\n            <p className=\"text-gray-600 mb-4\">\r\n              We encountered an unexpected error. Please try again.\r\n            </p>\r\n\r\n            {this.state.error && (\r\n              <div className=\"bg-red-50 border border-red-200 rounded p-3 mb-4\">\r\n                <p className=\"text-sm font-mono text-red-800\">\r\n                  {this.state.error.message}\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {process.env.NODE_ENV === \"development\" && this.state.errorInfo && (\r\n              <details className=\"mb-4\">\r\n                <summary className=\"text-sm text-gray-600 cursor-pointer hover:text-gray-900\">\r\n                  Error Details (Development Only)\r\n                </summary>\r\n                <pre className=\"mt-2 text-xs bg-gray-100 p-3 rounded overflow-auto max-h-48\">\r\n                  {this.state.errorInfo.componentStack}\r\n                </pre>\r\n              </details>\r\n            )}\r\n\r\n            <div className=\"flex gap-3\">\r\n              <button\r\n                onClick={this.handleReset}\r\n                className=\"flex-1 px-4 py-2 bg-primary text-white rounded hover:bg-primary/90 transition-colors\"\r\n              >\r\n                Try again\r\n              </button>\r\n              <button\r\n                onClick={() => (window.location.href = \"/\")}\r\n                className=\"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors\"\r\n              >\r\n                Go home\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\NavRail.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":63,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":63,"endColumn":103},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":75,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":75,"endColumn":118},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":116,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":116,"endColumn":71}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport { memo } from \"react\";\r\nimport {\r\n  LayoutDashboard,\r\n  FileText,\r\n  Truck,\r\n  Receipt,\r\n  BarChart3,\r\n  StickyNote,\r\n  Package,\r\n  FileCheck,\r\n  UserCircle,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { H3, Label, SmallText, Body } from \"@/components/design-system/organisms\";\r\n\r\nfunction NavRailComponent() {\r\n  const pathname = usePathname();\r\n\r\n  const sections = [\r\n    {\r\n      title: \"\",\r\n      items: [{ href: \"/\", icon: LayoutDashboard, label: \"Dashboard\" }],\r\n    },\r\n    {\r\n      title: \"Operations\",\r\n      items: [\r\n        { href: \"/po\", icon: FileText, label: \"Purchase Orders\" },\r\n        { href: \"/dc\", icon: Truck, label: \"Delivery Challans\" },\r\n        { href: \"/invoice\", icon: Receipt, label: \"Sales Invoices\" },\r\n        { href: \"/srv\", icon: FileCheck, label: \"SRV Receipts\" },\r\n      ],\r\n    },\r\n    {\r\n      title: \"Analysis\",\r\n      items: [\r\n        {\r\n          href: \"/reports\",\r\n          icon: BarChart3,\r\n          label: \"Reports\",\r\n        },\r\n        { href: \"/po-notes\", icon: StickyNote, label: \"Templates\" },\r\n        { href: \"/settings\", icon: UserCircle, label: \"Settings\" },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"nav-rail\">\r\n      {/* Logo Section */}\r\n      <div className=\"nav-header\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"nav-logo\">\r\n            <Package className=\"w-5 h-5\" />\r\n          </div>\r\n          <div>\r\n            <H3 className=\"text-sm font-bold text-slate-800 leading-tight tracking-tight\">\r\n              SenstoSales\r\n            </H3>\r\n            <Label className=\"text-slate-500 font-semibold uppercase tracking-widest text-[10px] mb-0\">\r\n              Manager\r\n            </Label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <nav className=\"nav-scrollable py-6 px-3 space-y-6\">\r\n        {sections.map((section, idx) => (\r\n          <div key={`nav-${idx}`}>\r\n            {section.title && (\r\n              <Label className=\"nav-section-title mb-2 text-[10px] uppercase font-bold text-slate-400 tracking-wider\">\r\n                {section.title}\r\n              </Label>\r\n            )}\r\n            <ul className=\"space-y-0.5\">\r\n              {section.items.map((item: any) => {\r\n                const isActive =\r\n                  pathname === item.href ||\r\n                  (item.href !== \"/\" && pathname.startsWith(`${item.href}/`));\r\n                const Icon = item.icon;\r\n\r\n                return (\r\n                  <li key={item.href}>\r\n                    <Link\r\n                      href={item.href}\r\n                      className={cn(\"nav-link\", isActive && \"nav-link-active\")}\r\n                    >\r\n                      <Icon\r\n                        className={cn(\r\n                          \"w-4 h-4\",\r\n                          isActive ? \"text-blue-600\" : \"text-slate-400\",\r\n                        )}\r\n                      />\r\n                      <span>{item.label}</span>\r\n                    </Link>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        ))}\r\n      </nav>\r\n\r\n      {/* Profile Footer */}\r\n      <div className=\"nav-footer\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"nav-avatar\">JD</div>\r\n          <div className=\"flex-1 min-w-0\">\r\n            <Body className=\"text-xs font-bold text-slate-700 truncate\">\r\n              John Doe\r\n            </Body>\r\n            <SmallText className=\"text-slate-500 truncate text-[10px]\">Administrator</SmallText>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Memoize to prevent re-renders on route changes\r\nconst NavRail = memo(NavRailComponent);\r\nNavRail.displayName = \"NavRail\";\r\n\r\nexport default NavRail;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\PageTransition.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\Pagination.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'page' is defined but never used.","line":10,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"page"},"fix":{"range":[281,293],"text":""},"desc":"Remove unused variable 'page'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":67,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":67,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":69,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":69,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":71,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":71,"endColumn":80}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { Body, SmallText, Accounting } from \"@/components/design-system/organisms\";\r\n\r\ninterface PaginationProps {\r\n  currentPage: number;\r\n  totalItems: number;\r\n  itemsPerPage: number;\r\n  onPageChange: (page: number) => void;\r\n}\r\n\r\nexport default function Pagination({\r\n  currentPage,\r\n  totalItems,\r\n  itemsPerPage,\r\n  onPageChange,\r\n}: PaginationProps) {\r\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\r\n\r\n  if (totalItems === 0 || totalPages <= 1) return null;\r\n\r\n  const startItem = (currentPage - 1) * itemsPerPage + 1;\r\n  const endItem = Math.min(currentPage * itemsPerPage, totalItems);\r\n\r\n  const handlePrevious = () => {\r\n    if (currentPage > 1) onPageChange(currentPage - 1);\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (currentPage < totalPages) onPageChange(currentPage + 1);\r\n  };\r\n\r\n  // Calculate page range to show\r\n  const getPageNumbers = () => {\r\n    const pages = [];\r\n    if (totalPages <= 7) {\r\n      for (let i = 1; i <= totalPages; i++) pages.push(i);\r\n    } else {\r\n      if (currentPage <= 4) {\r\n        for (let i = 1; i <= 5; i++) pages.push(i);\r\n        pages.push(\"...\");\r\n        pages.push(totalPages);\r\n      } else if (currentPage >= totalPages - 3) {\r\n        pages.push(1);\r\n        pages.push(\"...\");\r\n        for (let i = totalPages - 4; i <= totalPages; i++) pages.push(i);\r\n      } else {\r\n        pages.push(1);\r\n        pages.push(\"...\");\r\n        pages.push(currentPage - 1);\r\n        pages.push(currentPage);\r\n        pages.push(currentPage + 1);\r\n        pages.push(\"...\");\r\n        pages.push(totalPages);\r\n      }\r\n    }\r\n    return pages;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between px-2 py-4 border-t border-border mt-4\">\r\n      <div className=\"hidden sm:flex flex-1 items-center justify-between\">\r\n        <div>\r\n          <Body className=\"text-text-secondary\">\r\n            Showing{\" \"}\r\n            <Accounting className=\"font-semibold text-text-primary text-[13px]\">{startItem}</Accounting>{\" \"}\r\n            to{\" \"}\r\n            <Accounting className=\"font-semibold text-text-primary text-[13px]\">{endItem}</Accounting>{\" \"}\r\n            of{\" \"}\r\n            <Accounting className=\"font-semibold text-text-primary text-[13px]\">\r\n              {totalItems}\r\n            </Accounting>{\" \"}\r\n            entries\r\n          </Body>\r\n        </div>\r\n        <div className=\"flex items-center gap-1\">\r\n          <button\r\n            onClick={handlePrevious}\r\n            disabled={currentPage === 1}\r\n            className=\"px-3 py-1.5 flex items-center gap-1 rounded-md border border-border bg-white text-text-secondary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors\"\r\n          >\r\n            <ChevronLeft className=\"w-3.5 h-3.5\" />\r\n            <SmallText className=\"font-medium\">Previous</SmallText>\r\n          </button>\r\n\r\n          <div className=\"flex items-center gap-1 mx-2\">\r\n            {getPageNumbers().map((page, idx) =>\r\n              typeof page === \"number\" ? (\r\n                <button\r\n                  key={page}\r\n                  onClick={() => onPageChange(page)}\r\n                  className={`w-8 h-8 flex items-center justify-center rounded-md font-medium transition-colors ${currentPage === page\r\n                    ? \"bg-primary text-white\"\r\n                    : \"bg-white border border-border text-text-secondary hover:bg-gray-50\"\r\n                    }`}\r\n                >\r\n                  <Accounting className={currentPage === page ? \"text-white\" : \"text-text-secondary\"}>{page}</Accounting>\r\n                </button>\r\n              ) : (\r\n                <span\r\n                  key={`ellipsis-${idx}`}\r\n                  className=\"w-8 h-8 flex items-center justify-center text-xs text-text-secondary\"\r\n                >\r\n                  ...\r\n                </span>\r\n              ),\r\n            )}\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleNext}\r\n            disabled={currentPage === totalPages}\r\n            className=\"px-3 py-1.5 flex items-center gap-1 rounded-md border border-border bg-white text-text-secondary disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors\"\r\n          >\r\n            <SmallText className=\"font-medium\">Next</SmallText>\r\n            <ChevronRight className=\"w-3.5 h-3.5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      {/* Mobile View */}\r\n      <div className=\"flex sm:hidden justify-between w-full\">\r\n        <button\r\n          onClick={handlePrevious}\r\n          disabled={currentPage === 1}\r\n          className=\"px-3 py-1.5 flex items-center gap-1 rounded-md border border-border bg-white text-text-secondary disabled:opacity-50 hover:bg-gray-50\"\r\n        >\r\n          <ChevronLeft className=\"w-4 h-4\" /> Previous\r\n        </button>\r\n        <button\r\n          onClick={handleNext}\r\n          disabled={currentPage === totalPages}\r\n          className=\"px-3 py-1.5 flex items-center gap-1 rounded-md border border-border bg-white text-text-secondary disabled:opacity-50 hover:bg-gray-50\"\r\n        >\r\n          Next <ChevronRight className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\ReadinessStrip.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":38,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":38,"endColumn":71}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { CheckCircle2, Circle, AlertCircle, Clock } from \"lucide-react\";\r\nimport { SmallText, Label } from \"@/components/design-system/organisms\";\r\n\r\ninterface ReadinessStep {\r\n  label: string;\r\n  status: \"completed\" | \"current\" | \"pending\" | \"error\" | \"warning\";\r\n  date?: string;\r\n}\r\n\r\ninterface ReadinessStripProps {\r\n  steps: ReadinessStep[];\r\n  className?: string;\r\n}\r\n\r\nexport function ReadinessStrip({ steps, className }: ReadinessStripProps) {\r\n  return (\r\n    <div\r\n      className={cn(\"w-full bg-surface-1 border-b border-border\", className)}\r\n    >\r\n      <div className=\"max-w-[1200px] mx-auto px-6 py-3\">\r\n        <div className=\"flex items-center justify-between text-sm\">\r\n          {steps.map((step, idx) => (\r\n            <React.Fragment key={`section-${idx}`}>\r\n              <div\r\n                className={cn(\r\n                  \"flex items-center gap-2 transition-colors duration-200\",\r\n                  getStatusColor(step.status),\r\n                )}\r\n              >\r\n                <StatusIcon status={step.status} />\r\n                <div className=\"flex flex-col leading-none\">\r\n                  <Label className=\"uppercase tracking-wider\">\r\n                    {step.label}\r\n                  </Label>\r\n                  {step.date && (\r\n                    <SmallText className=\"text-[10px] opacity-80 mt-1\">\r\n                      {step.date}\r\n                    </SmallText>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Connector Line (except for last item) */}\r\n              {idx < steps.length - 1 && (\r\n                <div className=\"flex-1 h-[2px] mx-4 bg-border/60 relative\">\r\n                  <div\r\n                    className={cn(\r\n                      \"absolute inset-0 transition-all duration-500\",\r\n                      step.status === \"completed\"\r\n                        ? \"bg-success/40\"\r\n                        : \"bg-transparent\",\r\n                    )}\r\n                  />\r\n                </div>\r\n              )}\r\n            </React.Fragment>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction StatusIcon({ status }: { status: ReadinessStep[\"status\"] }) {\r\n  switch (status) {\r\n    case \"completed\":\r\n      return <CheckCircle2 className=\"w-5 h-5\" />;\r\n    case \"error\":\r\n      return <AlertCircle className=\"w-5 h-5\" />;\r\n    case \"warning\":\r\n      return <Clock className=\"w-5 h-5\" />;\r\n    case \"current\":\r\n      return (\r\n        <div className=\"w-5 h-5 rounded-full border-2 border-current flex items-center justify-center\">\r\n          <div className=\"w-2 h-2 rounded-full bg-current animate-pulse\" />\r\n        </div>\r\n      );\r\n    default:\r\n      return <Circle className=\"w-5 h-5 text-text-muted/30\" />;\r\n  }\r\n}\r\n\r\nfunction getStatusColor(status: ReadinessStep[\"status\"]) {\r\n  switch (status) {\r\n    case \"completed\":\r\n      return \"text-success\";\r\n    case \"current\":\r\n      return \"text-primary\";\r\n    case \"error\":\r\n      return \"text-danger\";\r\n    case \"warning\":\r\n      return \"text-warning\";\r\n    default:\r\n      return \"text-text-muted/40\";\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\ResetDatabase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Checkbox.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":41,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":41,"endColumn":112}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * Checkbox Atom - Atomic Design System v1.0\r\n * Spec: 18px size, 4px radius, #1A3D7C selected\r\n */\r\n\r\nexport interface CheckboxProps extends Omit<\r\n  React.InputHTMLAttributes<HTMLInputElement>,\r\n  \"type\"\r\n> {\r\n  label?: string;\r\n}\r\n\r\nconst CheckboxInternal = React.forwardRef<HTMLInputElement, CheckboxProps>(\r\n  ({ className, label, id, ...props }, ref) => {\r\n    const uniqueId = React.useId();\r\n    const checkboxId = id || `checkbox-${uniqueId}`;\r\n\r\n    return (\r\n      <div className=\"flex items-center gap-2\">\r\n        <input\r\n          type=\"checkbox\"\r\n          id={checkboxId}\r\n          ref={ref}\r\n          className={cn(\r\n            \"h-[18px] w-[18px] rounded border-[var(--color-sys-text-tertiary)]/50 text-[var(--color-sys-brand-primary)]\",\r\n            \"focus:ring-2 focus:ring-[var(--color-sys-brand-primary)]/40 focus:ring-offset-0\",\r\n            \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n            \"cursor-pointer\",\r\n            className,\r\n          )}\r\n          {...props}\r\n        />\r\n        {label && (\r\n          <label\r\n            htmlFor={checkboxId}\r\n            className=\"text-[14px] font-medium text-[var(--color-sys-text-primary)] cursor-pointer select-none\"\r\n          >\r\n            {label}\r\n          </label>\r\n        )}\r\n      </div>\r\n    );\r\n  },\r\n);\r\nCheckboxInternal.displayName = \"Checkbox\";\r\n\r\nexport const Checkbox = React.memo(CheckboxInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\GlassContainer.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'intensity' is assigned a value but never used.","line":11,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"intensity"},"fix":{"range":[357,379],"text":""},"desc":"Remove unused variable 'intensity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'intensity' is assigned a value but never used.","line":11,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":36},{"ruleId":"no-unused-vars","severity":1,"message":"'intensityMap' is assigned a value but never used.","line":12,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"intensityMap"},"fix":{"range":[429,595],"text":""},"desc":"Remove unused variable 'intensityMap'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'intensityMap' is assigned a value but never used.","line":12,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface GlassContainerProps extends React.HTMLAttributes<HTMLDivElement> {\r\n  children: React.ReactNode;\r\n  intensity?: \"low\" | \"medium\" | \"high\";\r\n  interactive?: boolean;\r\n}\r\n\r\nconst GlassContainerInternal = React.forwardRef<HTMLDivElement, GlassContainerProps>(\r\n  ({ children, className, intensity = \"medium\", interactive = false, ...props }, ref) => {\r\n    const intensityMap = {\r\n      low: \"bg-white/10 backdrop-blur-sm\",\r\n      medium: \"bg-white/30 backdrop-blur-md\",\r\n      high: \"bg-white/50 backdrop-blur-xl\",\r\n    };\r\n\r\n    return (\r\n      <div\r\n        ref={ref}\r\n        className={cn(\r\n          \"glass-premium\", // Enforce system class\r\n          \"rounded-2xl shadow-sm\", // Standard neutral shadow (shadow-sm defined in globals)\r\n          interactive &&\r\n          \"hover:bg-[var(--color-sys-bg-surface)]/80 transition-all duration-300 cursor-pointer hover:shadow-md hover:-translate-y-0.5\",\r\n          className,\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  },\r\n);\r\nGlassContainerInternal.displayName = \"GlassContainer\";\r\n\r\nexport const GlassContainer = React.memo(GlassContainerInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Icon.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":34,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":34,"endColumn":17,"suggestions":[{"fix":{"range":[688,745],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport * as LucideIcons from \"lucide-react\";\r\n\r\n/**\r\n * Icon Atom - Atomic Design System v1.0\r\n * Wrapper for lucide-react icons with consistent sizing\r\n * Default: 20px, Stroke: 2px\r\n */\r\n\r\nexport interface IconProps extends React.SVGAttributes<SVGElement> {\r\n  name: keyof typeof LucideIcons;\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n}\r\n\r\nconst sizeMap = {\r\n  sm: 16,\r\n  md: 20, // Default from spec\r\n  lg: 24,\r\n};\r\n\r\nconst IconInternal: React.FC<IconProps> = ({\r\n  name,\r\n  size = \"md\",\r\n  className,\r\n  ...props\r\n}) => {\r\n  const LucideIcon = LucideIcons[\r\n    name\r\n  ] as React.ComponentType<LucideIcons.LucideProps>;\r\n\r\n  if (!LucideIcon) {\r\n    console.warn(`Icon \"${name}\" not found in lucide-react`);\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <LucideIcon\r\n      size={sizeMap[size]}\r\n      strokeWidth={2}\r\n      className={className}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport const Icon = React.memo(IconInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Input.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":24,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":24,"endColumn":203},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":51,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":51,"endColumn":137},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":57,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":57,"endColumn":83}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * Input Atom - Atomic Design System v1.0\r\n * Spec: 38px height, 6px radius, 12px padding\r\n * Border: #D1D5DB, Focus: #1A3D7C\r\n */\r\n\r\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  icon?: React.ReactNode;\r\n  error?: string;\r\n  variant?: \"default\" | \"glass\" | \"ghost\";\r\n}\r\n\r\nconst InputInternal = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, icon, error, required, variant = \"default\", ...props }, ref) => {\r\n    return (\r\n      <div className=\"w-full\">\r\n        <div className=\"relative group\">\r\n          {icon && (\r\n            <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-[var(--color-sys-text-tertiary)] group-focus-within:text-[var(--color-sys-brand-primary)] transition-colors pointer-events-none\">\r\n              {icon}\r\n            </div>\r\n          )}\r\n          <input\r\n            type={type}\r\n            className={cn(\r\n              // v5.0 Neomorphic & High Density\r\n              \"flex h-[34px] w-full rounded-lg px-3 py-1.5\",\r\n              \"text-[13px] font-medium text-[var(--color-sys-text-primary)] placeholder:text-[var(--color-sys-text-tertiary)]\",\r\n              \"transition-all duration-300\",\r\n              // Variant styles\r\n              variant === \"default\" && \"bg-[var(--color-sys-bg-secondary)] border-none neo-extrusion focus:shadow-inner\",\r\n              variant === \"glass\" && \"bg-white/40 border border-white/50 backdrop-blur-md shadow-sm\",\r\n              variant === \"ghost\" && \"bg-transparent border-none shadow-none focus:bg-[var(--color-sys-bg-secondary)] focus:shadow-sm p-0 h-auto rounded-md\",\r\n              // Error state\r\n              error && \"ring-1 ring-[var(--color-sys-status-error)]/50\",\r\n              icon && \"pl-10\",\r\n              className,\r\n            )}\r\n            ref={ref}\r\n            required={required}\r\n            {...props}\r\n            value={props.value ?? \"\"}\r\n          />\r\n          {/* Required indicator */}\r\n          {required && !props.value && (\r\n            <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-[var(--color-sys-status-error)] text-sm pointer-events-none\">\r\n              *\r\n            </span>\r\n          )}\r\n        </div>\r\n        {/* Error message */}\r\n        {error && <p className=\"mt-1 text-xs text-[var(--color-sys-status-error)]\">{error}</p>}\r\n      </div>\r\n    );\r\n  },\r\n);\r\nInputInternal.displayName = \"Input\";\r\n\r\nexport const Input = React.memo(InputInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\SpotlightCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Typography.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\ActionButtonGroup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\DetailField.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":73},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":23,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":23,"endColumn":97}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { SmallText } from \"@/components/design-system/atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface DetailFieldProps {\r\n  label: string;\r\n  value: string | number | null | undefined;\r\n  icon?: React.ReactNode;\r\n  className?: string;\r\n}\r\n\r\nexport const DetailField = ({\r\n  label,\r\n  value,\r\n  icon,\r\n  className,\r\n}: DetailFieldProps) => (\r\n  <div className={cn(\"space-y-1 group transition-all duration-300\", className)}>\r\n    <div className=\"flex items-center gap-2 opacity-50 group-hover:opacity-100 transition-opacity\">\r\n      {icon && <div className=\"text-primary\">{icon}</div>}\r\n      <SmallText className=\"text-[9px] font-semibold uppercase tracking-widest m-0 leading-none\">\r\n        {label}\r\n      </SmallText>\r\n    </div>\r\n    <div className=\"text-xs font-medium text-slate-900 tracking-tight leading-snug break-words\">\r\n      {value || (\r\n        <span className=\"text-slate-300 font-normal italic uppercase tracking-tighter opacity-50\">\r\n          Empty\r\n        </span>\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\DocumentJourney.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'STAGE_LABELS' is assigned a value but never used.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'STAGE_LABELS' is assigned a value but never used.","line":15,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\";\r\n\r\nexport type DocumentStage = \"PO\" | \"DC\" | \"Invoice\" | \"SRV\";\r\n\r\ninterface DocumentJourneyProps {\r\n  currentStage: DocumentStage;\r\n  stages?: DocumentStage[];\r\n  className?: string;\r\n}\r\n\r\nconst STAGE_LABELS: Record<DocumentStage, string> = {\r\n  PO: \"Purchase Order\",\r\n  DC: \"Delivery Challan\",\r\n  Invoice: \"Tax Invoice\",\r\n  SRV: \"Service Receipt\",\r\n};\r\n\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst DocumentJourneyInternal = ({\r\n  currentStage,\r\n  stages = [\"PO\", \"DC\", \"Invoice\", \"SRV\"],\r\n  className,\r\n}: DocumentJourneyProps) => {\r\n  const currentIndex = stages.indexOf(currentStage);\r\n\r\n  return (\r\n    <div className={cn(\"flex items-center gap-1 px-1\", className)}>\r\n      {stages.map((stage, index) => {\r\n        const isCompleted = index < currentIndex;\r\n        const isActive = index === currentIndex;\r\n\r\n        return (\r\n          <div key={stage} className=\"relative z-0\">\r\n            {isActive && (\r\n              <motion.div\r\n                layoutId=\"journey-active-pill\"\r\n                className=\"absolute inset-0 bg-[var(--color-sys-brand-primary)]/10 rounded-full shadow-sm -z-10\"\r\n                initial={false}\r\n                transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\r\n              />\r\n            )}\r\n            <div\r\n              className={cn(\r\n                \"flex items-center gap-2 px-3 py-1.5 rounded-full transition-colors duration-200 relative z-10\",\r\n                isActive\r\n                  ? \"text-[var(--color-sys-brand-primary)]\"\r\n                  : isCompleted\r\n                    ? \"bg-emerald-50 text-emerald-700\"\r\n                    : \"bg-slate-50 text-slate-400\",\r\n              )}\r\n            >\r\n              {isCompleted ? (\r\n                <Check size={12} className=\"text-emerald-500\" />\r\n              ) : isActive ? (\r\n                <div className=\"w-1.5 h-1.5 rounded-full bg-[var(--color-sys-brand-primary)] animate-pulse\" />\r\n              ) : (\r\n                <Circle size={10} className=\"text-slate-300\" />\r\n              )}\r\n              <span\r\n                className={cn(\r\n                  \"text-[10px] font-medium uppercase tracking-[0.1em]\",\r\n                  isActive\r\n                    ? \"text-[var(--color-sys-brand-primary)] font-bold\"\r\n                    : isCompleted\r\n                      ? \"text-emerald-700\"\r\n                      : \"text-slate-400\",\r\n                )}\r\n              >\r\n                {stage}\r\n              </span>\r\n            </div>\r\n            {index < stages.length - 1 && (\r\n              <div className=\"absolute top-1/2 -right-2 transform -translate-y-1/2 -translate-x-1/2 z-0\">\r\n                <ChevronRight size={12} className=\"text-slate-300\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const DocumentJourney = React.memo(DocumentJourneyInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\FormField.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":51,"column":16,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":51,"endColumn":64},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":62,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":62,"endColumn":63},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":69,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":69,"endColumn":52}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Input, InputProps } from \"../atoms/Input\";\r\nimport { Label } from \"../atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * FormField Molecule - Atomic Design System v1.0\r\n * Composition: Label (16px) + Input + Error Message\r\n */\r\n\r\nexport interface FormFieldProps extends InputProps {\r\n  label?: string;\r\n  error?: string;\r\n  helperText?: string;\r\n  required?: boolean;\r\n  floating?: boolean;\r\n}\r\n\r\nexport const FormField = React.forwardRef<HTMLInputElement, FormFieldProps>(\r\n  ({ label, error, helperText, required, floating, className, ...inputProps }, ref) => {\r\n    if (floating) {\r\n      return (\r\n        <div className={cn(\"relative space-y-0\", className)}>\r\n          <Input\r\n            ref={ref}\r\n            error={error}\r\n            required={required}\r\n            className={cn(\r\n              \"peer pt-6 pb-2 h-14 bg-white/50 border-slate-200/60 focus:bg-white placeholder:text-transparent\",\r\n              error && \"border-red-500\",\r\n            )}\r\n            placeholder=\" \" // Required for peer-placeholder-shown\r\n            {...inputProps}\r\n          />\r\n          {label && (\r\n            <Label\r\n              htmlFor={inputProps.id}\r\n              className={cn(\r\n                \"absolute left-3 top-4 z-10 origin-[0] -translate-y-2.5 scale-75 transform text-slate-500 duration-200\",\r\n                \"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:text-slate-500 peer-focus:-translate-y-2.5 peer-focus:scale-75 peer-focus:text-blue-600\",\r\n                error && \"text-red-500 peer-focus:text-red-500\"\r\n              )}\r\n            >\r\n              {label}\r\n              {required && <span className=\"ml-1 text-red-500\">*</span>}\r\n            </Label>\r\n          )}\r\n          {helperText && !error && (\r\n            <p className=\"mt-1 text-[11px] text-slate-400 pl-1\">{helperText}</p>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className={cn(\"space-y-1.5\", className)}>\r\n        {label && (\r\n          <Label htmlFor={inputProps.id} className=\"block\">\r\n            {label}\r\n            {required && <span className=\"text-[#DC2626] ml-1\">*</span>}\r\n          </Label>\r\n        )}\r\n\r\n        <Input ref={ref} error={error} required={required} {...inputProps} />\r\n\r\n        {helperText && !error && (\r\n          <p className=\"text-[12px] text-[#6B7280]\">{helperText}</p>\r\n        )}\r\n      </div>\r\n    );\r\n  },\r\n);\r\nFormField.displayName = \"FormField\";\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\FormFields.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":9,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[177,190],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":27,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":27,"endColumn":107},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":48,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":48,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[1278,1291],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":107},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":94,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":94,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[2481,2494],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":112,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":112,"endColumn":107},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":133,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":133,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[3582,3595],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":151,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":151,"endColumn":107},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":192,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":192,"endColumn":107}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Shared Form Components\r\n * Used in DC and Invoice pages for consistent form styling\r\n */\r\n\r\ninterface TextFieldProps {\r\n  label: string;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  placeholder?: string;\r\n  required?: boolean;\r\n  disabled?: boolean;\r\n  type?: \"text\" | \"email\" | \"tel\" | \"date\";\r\n}\r\n\r\nexport const TextField = ({\r\n  label,\r\n  value,\r\n  onChange,\r\n  placeholder = \"\",\r\n  required = false,\r\n  disabled = false,\r\n  type = \"text\",\r\n}: TextFieldProps) => {\r\n  return (\r\n    <div>\r\n      <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\">\r\n        {label} {required && <span className=\"text-danger\">*</span>}\r\n      </label>\r\n      <input\r\n        type={type}\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        placeholder={placeholder}\r\n        disabled={disabled}\r\n        required={required}\r\n        className={`w-full px-3 py-2 text-sm border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary bg-white ${\r\n          disabled ? \"bg-gray-50 text-text-secondary cursor-not-allowed\" : \"\"\r\n        }`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface NumberFieldProps {\r\n  label: string;\r\n  value: number;\r\n  onChange: (value: number) => void;\r\n  min?: number;\r\n  max?: number;\r\n  step?: number;\r\n  required?: boolean;\r\n  disabled?: boolean;\r\n  placeholder?: string;\r\n}\r\n\r\nexport const NumberField = ({\r\n  label,\r\n  value,\r\n  onChange,\r\n  min,\r\n  max,\r\n  step = 1,\r\n  required = false,\r\n  disabled = false,\r\n  placeholder = \"\",\r\n}: NumberFieldProps) => {\r\n  return (\r\n    <div>\r\n      <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\">\r\n        {label} {required && <span className=\"text-danger\">*</span>}\r\n      </label>\r\n      <input\r\n        type=\"number\"\r\n        value={value}\r\n        onChange={(e) => onChange(parseFloat(e.target.value) || 0)}\r\n        min={min}\r\n        max={max}\r\n        step={step}\r\n        disabled={disabled}\r\n        required={required}\r\n        placeholder={placeholder}\r\n        className={`w-full px-3 py-2 text-sm border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary bg-white ${\r\n          disabled ? \"bg-gray-50 text-text-secondary cursor-not-allowed\" : \"\"\r\n        }`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface TextAreaFieldProps {\r\n  label: string;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  placeholder?: string;\r\n  required?: boolean;\r\n  disabled?: boolean;\r\n  rows?: number;\r\n}\r\n\r\nexport const TextAreaField = ({\r\n  label,\r\n  value,\r\n  onChange,\r\n  placeholder = \"\",\r\n  required = false,\r\n  disabled = false,\r\n  rows = 3,\r\n}: TextAreaFieldProps) => {\r\n  return (\r\n    <div>\r\n      <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\">\r\n        {label} {required && <span className=\"text-danger\">*</span>}\r\n      </label>\r\n      <textarea\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        placeholder={placeholder}\r\n        disabled={disabled}\r\n        required={required}\r\n        rows={rows}\r\n        className={`w-full px-3 py-2 text-sm border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary bg-white resize-none ${\r\n          disabled ? \"bg-gray-50 text-text-secondary cursor-not-allowed\" : \"\"\r\n        }`}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface SelectFieldProps {\r\n  label: string;\r\n  value: string | number;\r\n  onChange: (value: string) => void;\r\n  options: { value: string | number; label: string }[];\r\n  required?: boolean;\r\n  disabled?: boolean;\r\n  placeholder?: string;\r\n}\r\n\r\nexport const SelectField = ({\r\n  label,\r\n  value,\r\n  onChange,\r\n  options,\r\n  required = false,\r\n  disabled = false,\r\n  placeholder = \"Select...\",\r\n}: SelectFieldProps) => {\r\n  return (\r\n    <div>\r\n      <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\">\r\n        {label} {required && <span className=\"text-danger\">*</span>}\r\n      </label>\r\n      <select\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        disabled={disabled}\r\n        required={required}\r\n        className={`w-full px-3 py-2 text-sm border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary bg-white ${\r\n          disabled ? \"bg-gray-50 text-text-secondary cursor-not-allowed\" : \"\"\r\n        }`}\r\n      >\r\n        {placeholder && <option value=\"\">{placeholder}</option>}\r\n        {options.map((option) => (\r\n          <option key={option.value} value={option.value}>\r\n            {option.label}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface ReadOnlyFieldProps {\r\n  label: string;\r\n  value: string | number;\r\n  isCurrency?: boolean;\r\n}\r\n\r\nexport const ReadOnlyField = ({\r\n  label,\r\n  value,\r\n  isCurrency = false,\r\n}: ReadOnlyFieldProps) => {\r\n  const displayValue =\r\n    isCurrency && typeof value === \"number\"\r\n      ? `Γé╣${value.toLocaleString(\"en-IN\", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`\r\n      : value;\r\n\r\n  return (\r\n    <div>\r\n      <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\">\r\n        {label}\r\n      </label>\r\n      <div className=\"px-3 py-2 text-sm bg-gray-50 border border-border rounded-lg text-text-primary\">\r\n        {displayValue || \"-\"}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\NavigationCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Pagination.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'page' is defined but never used.","line":13,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"page"},"fix":{"range":[246,258],"text":""},"desc":"Remove unused variable 'page'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'size' is defined but never used.","line":14,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"size"},"fix":{"range":[291,303],"text":""},"desc":"Remove unused variable 'size'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport {\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  ChevronsLeft,\r\n  ChevronsRight,\r\n} from \"lucide-react\";\r\n\r\ninterface PaginationProps {\r\n  currentPage: number;\r\n  totalItems: number;\r\n  pageSize: number;\r\n  onPageChange: (page: number) => void;\r\n  onPageSizeChange: (size: number) => void;\r\n  pageSizeOptions?: number[];\r\n}\r\n\r\nexport function Pagination({\r\n  currentPage,\r\n  totalItems,\r\n  pageSize,\r\n  onPageChange,\r\n  onPageSizeChange,\r\n  pageSizeOptions = [10, 25, 50, 100],\r\n}: PaginationProps) {\r\n  const totalPages = Math.ceil(totalItems / pageSize);\r\n  const startItem = Math.min((currentPage - 1) * pageSize + 1, totalItems);\r\n  const endItem = Math.min(currentPage * pageSize, totalItems);\r\n\r\n  if (totalItems === 0) return null;\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between px-2 py-4 border-t border-slate-200\">\r\n      {/* Mobile: Simple Prev/Next */}\r\n      <div className=\"flex flex-1 justify-between sm:hidden\">\r\n        <button\r\n          onClick={() => onPageChange(Math.max(1, currentPage - 1))}\r\n          disabled={currentPage === 1}\r\n          className=\"relative inline-flex items-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          Previous\r\n        </button>\r\n        <button\r\n          onClick={() => onPageChange(Math.min(totalPages, currentPage + 1))}\r\n          disabled={currentPage === totalPages}\r\n          className=\"ml-3 relative inline-flex items-center px-4 py-2 border border-slate-300 text-sm font-medium rounded-md text-slate-700 bg-white hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          Next\r\n        </button>\r\n      </div>\r\n\r\n      {/* Desktop: Full Controls */}\r\n      <div className=\"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between\">\r\n        <div>\r\n          <p className=\"text-sm text-slate-700\">\r\n            Showing <span className=\"font-medium\">{startItem}</span> to{\" \"}\r\n            <span className=\"font-medium\">{endItem}</span> of{\" \"}\r\n            <span className=\"font-medium\">{totalItems}</span> results\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-sm text-slate-600 whitespace-nowrap\">\r\n              Rows per page:\r\n            </span>\r\n            <select\r\n              value={pageSize}\r\n              onChange={(e) => {\r\n                onPageSizeChange(Number(e.target.value));\r\n                onPageChange(1); // Reset to first page on size change\r\n              }}\r\n              className=\"block w-full pl-3 pr-8 py-1 text-sm border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md\"\r\n            >\r\n              {pageSizeOptions.map((option) => (\r\n                <option key={option} value={option}>\r\n                  {option}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <nav\r\n            className=\"relative z-0 inline-flex rounded-md shadow-sm -space-x-px\"\r\n            aria-label=\"Pagination\"\r\n          >\r\n            <button\r\n              onClick={() => onPageChange(1)}\r\n              disabled={currentPage === 1}\r\n              className=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-slate-300 bg-white text-sm font-medium text-slate-500 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              title=\"First Page\"\r\n            >\r\n              <span className=\"sr-only\">First</span>\r\n              <ChevronsLeft className=\"h-4 w-4\" />\r\n            </button>\r\n            <button\r\n              onClick={() => onPageChange(Math.max(1, currentPage - 1))}\r\n              disabled={currentPage === 1}\r\n              className=\"relative inline-flex items-center px-2 py-2 border border-slate-300 bg-white text-sm font-medium text-slate-500 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              title=\"Previous Page\"\r\n            >\r\n              <span className=\"sr-only\">Previous</span>\r\n              <ChevronLeft className=\"h-4 w-4\" />\r\n            </button>\r\n\r\n            <div className=\"relative inline-flex items-center px-4 py-2 border border-slate-300 bg-white text-sm font-medium text-slate-700\">\r\n              Page {currentPage} of {totalPages}\r\n            </div>\r\n\r\n            <button\r\n              onClick={() =>\r\n                onPageChange(Math.min(totalPages, currentPage + 1))\r\n              }\r\n              disabled={currentPage === totalPages}\r\n              className=\"relative inline-flex items-center px-2 py-2 border border-slate-300 bg-white text-sm font-medium text-slate-500 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              title=\"Next Page\"\r\n            >\r\n              <span className=\"sr-only\">Next</span>\r\n              <ChevronRight className=\"h-4 w-4\" />\r\n            </button>\r\n            <button\r\n              onClick={() => onPageChange(totalPages)}\r\n              disabled={currentPage === totalPages}\r\n              className=\"relative inline-flex items-center px-2 py-2 rounded-r-md border border-slate-300 bg-white text-sm font-medium text-slate-500 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              title=\"Last Page\"\r\n            >\r\n              <span className=\"sr-only\">_Last</span>\r\n              <ChevronsRight className=\"h-4 w-4\" />\r\n            </button>\r\n          </nav>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\PaginationControls.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'page' is defined but never used.","line":6,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"page"},"fix":{"range":[162,174],"text":""},"desc":"Remove unused variable 'page'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'itemName' is assigned a value but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"itemName"},"fix":{"range":[304,327],"text":""},"desc":"Remove unused variable 'itemName'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'itemName' is assigned a value but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":11}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\ninterface PaginationControlsProps {\r\n  currentPage: number;\r\n  totalPages: number;\r\n  onPageChange: (page: number) => void;\r\n  itemName?: string;\r\n}\r\n\r\nexport default function PaginationControls({\r\n  currentPage,\r\n  totalPages,\r\n  onPageChange,\r\n  itemName = \"Items\",\r\n}: PaginationControlsProps) {\r\n  if (totalPages <= 1) return null;\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-between px-4 py-3 border-t border-border bg-gray-50/50\">\r\n      <div className=\"text-xs text-text-secondary\">\r\n        Page{\" \"}\r\n        <span className=\"font-medium text-text-primary\">{currentPage}</span> of{\" \"}\r\n        <span className=\"font-medium text-text-primary\">{totalPages}</span>\r\n      </div>\r\n      <div className=\"flex items-center gap-2\">\r\n        <button\r\n          onClick={() => onPageChange(currentPage - 1)}\r\n          disabled={currentPage === 1}\r\n          className=\"p-1 rounded-md hover:bg-white hover:shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all text-text-secondary hover:text-text-primary border border-transparent hover:border-gray-200\"\r\n        >\r\n          <ChevronLeft className=\"w-4 h-4\" />\r\n        </button>\r\n        <button\r\n          onClick={() => onPageChange(currentPage + 1)}\r\n          disabled={currentPage >= totalPages}\r\n          className=\"p-1 rounded-md hover:bg-white hover:shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all text-text-secondary hover:text-text-primary border border-transparent hover:border-gray-200\"\r\n        >\r\n          <ChevronRight className=\"w-4 h-4\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\SearchBar.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"Button"},"fix":{"range":[111,152],"text":""},"desc":"Remove unused variable 'Button'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":20,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[585,598],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":85,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":85,"endColumn":125},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":94,"column":16,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":94,"endColumn":210}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Input } from \"../atoms/Input\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { Search, X } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useDebounce } from \"@/hooks/useDebounce\";\r\n\r\n/**\r\n * SearchBar Molecule - Atomic Design System v1.0\r\n * Composition: Input + Search Icon + Clear Button + Keyboard Shortcut\r\n * Performance: 300ms debounce to prevent excessive re-renders\r\n */\r\n\r\nexport interface SearchBarProps {\r\n  id?: string;\r\n  name?: string;\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  onSearch?: () => void;\r\n  placeholder?: string;\r\n  shortcut?: string;\r\n  className?: string;\r\n}\r\n\r\nconst SearchBarInternal = React.forwardRef<HTMLInputElement, SearchBarProps>(\r\n  ({\r\n    id,\r\n    name,\r\n    value,\r\n    onChange,\r\n    onSearch,\r\n    placeholder = \"Search...\",\r\n    shortcut,\r\n    className,\r\n  }, ref) => {\r\n    const [localValue, setLocalValue] = useState(value);\r\n    const debouncedValue = useDebounce(localValue, 300);\r\n\r\n    // Sync debounced value to parent\r\n    useEffect(() => {\r\n      if (debouncedValue !== value) {\r\n        onChange(debouncedValue);\r\n      }\r\n    }, [debouncedValue, onChange, value]);\r\n\r\n    // Sync external value changes back to local state\r\n    // Important: Only sync if it's different to avoid loops\r\n    useEffect(() => {\r\n      if (value !== localValue) {\r\n        setLocalValue(value);\r\n      }\r\n    }, [value]);\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n      if (e.key === \"Enter\" && onSearch) {\r\n        onSearch();\r\n      }\r\n    };\r\n\r\n    const handleClear = () => {\r\n      setLocalValue(\"\");\r\n      onChange(\"\"); // Immediate clear\r\n    };\r\n\r\n    return (\r\n      <div className={cn(\"relative\", className)}>\r\n        <Input\r\n          ref={ref}\r\n          id={id}\r\n          name={name}\r\n          value={localValue}\r\n          onChange={(e) => setLocalValue(e.target.value)}\r\n          onKeyDown={handleKeyDown}\r\n          placeholder={placeholder}\r\n          icon={<Search size={16} />}\r\n          className=\"pr-20 h-10 rounded-full shadow-[var(--shadow-3d-floating)] bg-white border-transparent hover:shadow-[var(--shadow-3d-hover)] focus:shadow-[var(--shadow-3d-lifted)] focus:scale-[1.01] transition-all duration-300\"\r\n        />\r\n\r\n        {/* Clear button */}\r\n        {localValue && (\r\n          <button\r\n            onClick={handleClear}\r\n            className=\"absolute right-12 top-1/2 -translate-y-1/2 text-[#6B7280] hover:text-[#111827] transition-colors p-1\"\r\n            aria-label=\"Clear search\"\r\n          >\r\n            <X size={16} />\r\n          </button>\r\n        )}\r\n\r\n        {/* Keyboard shortcut hint */}\r\n        {shortcut && !localValue && (\r\n          <kbd className=\"absolute right-3 top-1/2 -translate-y-1/2 px-1.5 py-0.5 text-[9px] font-black text-slate-500 bg-slate-50 border border-slate-200 rounded pointer-events-none tracking-widest uppercase\">\r\n            {shortcut}\r\n          </kbd>\r\n        )}\r\n      </div>\r\n    );\r\n  },\r\n);\r\nSearchBarInternal.displayName = \"SearchBar\";\r\n\r\nexport const SearchBar = React.memo(SearchBarInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\StatBlock.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":20,"suggestions":[{"messageId":"removeVar","data":{"varName":"TrendingUp"},"fix":{"range":[72,83],"text":""},"desc":"Remove unused variable 'TrendingUp'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'TrendingDown' is defined but never used.","line":3,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":34,"suggestions":[{"messageId":"removeVar","data":{"varName":"TrendingDown"},"fix":{"range":[82,96],"text":""},"desc":"Remove unused variable 'TrendingDown'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingDown' is defined but never used.","line":3,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":34},{"ruleId":"no-unused-vars","severity":1,"message":"'Minus' is defined but never used.","line":3,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"Minus"},"fix":{"range":[96,103],"text":""},"desc":"Remove unused variable 'Minus'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Minus' is defined but never used.","line":3,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":41},{"ruleId":"no-unused-vars","severity":1,"message":"'delta' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"delta"},"fix":{"range":[436,446],"text":""},"desc":"Remove unused variable 'delta'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'delta' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":8}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { TrendingUp, TrendingDown, Minus } from \"lucide-react\";\r\n\r\ninterface StatBlockProps {\r\n  label: string;\r\n  value: string | number;\r\n  delta?: {\r\n    value: string;\r\n    trend: \"up\" | \"down\" | \"neutral\";\r\n  };\r\n  icon?: React.ReactNode;\r\n  className?: string;\r\n  variant?: \"default\" | \"primary\" | \"teal\" | \"navy\";\r\n}\r\n\r\nexport const StatBlock = ({\r\n  label,\r\n  value,\r\n  delta,\r\n  icon,\r\n  className,\r\n  variant = \"default\",\r\n}: StatBlockProps) => {\r\n  const variantStyles = {\r\n    default: \"bg-white shadow-sm\",\r\n    primary: \"bg-gradient-to-br from-blue-500 to-blue-600 text-white\",\r\n    teal: \"bg-gradient-to-br from-cyan-500 via-teal-500 to-green-500 text-white\",\r\n    navy: \"bg-gradient-to-br from-[#2d4a6e] via-[#1E3A5F] to-[#152841] text-white\",\r\n  };\r\n\r\n  const isColored = variant !== \"default\";\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"rounded-2xl p-5 flex items-center gap-4 transition-all duration-300 hover:shadow-lg backdrop-blur-md border border-white/20\",\r\n        variantStyles[variant],\r\n        className,\r\n      )}\r\n    >\r\n      {/* Icon */}\r\n      {icon && (\r\n        <div\r\n          className={cn(\r\n            \"p-3 rounded-full shrink-0\",\r\n            isColored ? \"bg-white/20\" : \"bg-primary/10\",\r\n          )}\r\n        >\r\n          <div className={isColored ? \"text-white\" : \"text-primary\"}>\r\n            {icon}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1\">\r\n        <div\r\n          className={cn(\r\n            \"text-2xl font-semibold tabular-nums leading-none mb-1\",\r\n            isColored ? \"text-white\" : \"text-slate-900\",\r\n          )}\r\n        >\r\n          {value}\r\n        </div>\r\n        <div\r\n          className={cn(\r\n            \"text-[11px] font-medium\",\r\n            isColored ? \"text-white/70\" : \"text-slate-500\",\r\n          )}\r\n        >\r\n          {label}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\StatusTag.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\TableCells.tsx","messages":[{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":4,"column":1,"severity":1,"nodeType":null,"fix":{"range":[65,127],"text":" "}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport const TableHeaderCell = ({\r\n  children,\r\n  className,\r\n  numeric,\r\n  ...props\r\n}: {\r\n  children?: React.ReactNode;\r\n  className?: string;\r\n  numeric?: boolean;\r\n} & React.ThHTMLAttributes<HTMLTableCellElement>) => (\r\n  <th\r\n    className={cn(\r\n      \"h-8 px-3 text-left align-middle font-semibold text-[9px] uppercase tracking-[0.15em] text-muted-foreground/60 bg-background/40 neo-flat backdrop-blur-sm sticky top-0 z-10 border-b border-border/10\",\r\n      numeric && \"text-right\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n  </th>\r\n);\r\n\r\nexport const TableRowCell = ({\r\n  children,\r\n  className,\r\n  numeric,\r\n  ...props\r\n}: {\r\n  children?: React.ReactNode;\r\n  className?: string;\r\n  numeric?: boolean;\r\n} & React.TdHTMLAttributes<HTMLTableCellElement>) => (\r\n  <td\r\n    className={cn(\r\n      \"py-1.5 px-3 align-middle border-b border-border/5 transition-colors group-hover:bg-primary/5 text-[10px] font-extrabold tracking-tight\",\r\n      numeric && \"font-mono tabular-nums text-right text-primary/80\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n  </td>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\TableHeaderCell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Toast.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'title' is defined but never used.","line":23,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[445,459],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used.","line":23,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[458,476],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'type' is defined but never used.","line":23,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":60,"suggestions":[{"messageId":"removeVar","data":{"varName":"type"},"fix":{"range":[476,494],"text":""},"desc":"Remove unused variable 'type'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is defined but never used.","line":24,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[518,532],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used.","line":24,"column":28,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[531,549],"text":""},"desc":"Remove unused variable 'message'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is defined but never used.","line":25,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"title"},"fix":{"range":[571,585],"text":""},"desc":"Remove unused variable 'title'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'message' is defined but never used.","line":25,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"message"},"fix":{"range":[584,602],"text":""},"desc":"Remove unused variable 'message'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useCallback,\r\n  ReactNode,\r\n} from \"react\";\r\nimport { X, CheckCircle, AlertCircle, Info } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport type ToastType = \"success\" | \"error\" | \"info\" | \"warning\";\r\n\r\ninterface ToastMessage {\r\n  id: string;\r\n  type: ToastType;\r\n  title: string;\r\n  message?: string;\r\n}\r\n\r\ninterface ToastContextType {\r\n  toast: (title: string, message?: string, type?: ToastType) => void;\r\n  success: (title: string, message?: string) => void;\r\n  error: (title: string, message?: string) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nexport function useToast() {\r\n  const context = useContext(ToastContext);\r\n  if (!context) {\r\n    throw new Error(\"useToast must be used within a ToastProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\nexport function ToastProvider({ children }: { children: ReactNode }) {\r\n  const [toasts, setToasts] = useState<ToastMessage[]>([]);\r\n\r\n  const addToast = useCallback(\r\n    (title: string, message?: string, type: ToastType = \"info\") => {\r\n      const id = Math.random().toString(36).substring(2, 9);\r\n      setToasts((prev) => [...prev, { id, title, message, type }]);\r\n\r\n      // Auto dismiss after 4 seconds\r\n      setTimeout(() => {\r\n        setToasts((prev) => prev.filter((t) => t.id !== id));\r\n      }, 4000);\r\n    },\r\n    [],\r\n  );\r\n\r\n  // Listen for global API errors\r\n  React.useEffect(() => {\r\n    const handleApiError = (event: Event) => {\r\n      const customEvent = event as CustomEvent;\r\n      const detail = customEvent.detail || {};\r\n      addToast(\r\n        detail.title || \"Error\",\r\n        detail.message || \"Something went wrong\",\r\n        detail.type || \"error\",\r\n      );\r\n    };\r\n\r\n    window.addEventListener(\"api-error\", handleApiError);\r\n    return () => window.removeEventListener(\"api-error\", handleApiError);\r\n  }, [addToast]);\r\n\r\n  const removeToast = useCallback((id: string) => {\r\n    setToasts((prev) => prev.filter((t) => t.id !== id));\r\n  }, []);\r\n\r\n  const helpers = {\r\n    toast: (title: string, message?: string, type: ToastType = \"info\") =>\r\n      addToast(title, message, type),\r\n    success: (title: string, message?: string) =>\r\n      addToast(title, message, \"success\"),\r\n    error: (title: string, message?: string) =>\r\n      addToast(title, message, \"error\"),\r\n  };\r\n\r\n  return (\r\n    <ToastContext.Provider value={helpers}>\r\n      {children}\r\n\r\n      {/* Toast Container */}\r\n      <div className=\"fixed bottom-6 right-6 z-[100] flex flex-col gap-3 pointer-events-none\">\r\n        {toasts.map((t) => (\r\n          <div\r\n            key={t.id}\r\n            className={cn(\r\n              \"pointer-events-auto min-w-[300px] max-w-sm rounded-lg shadow-lg border p-4 flex gap-3 transform transition-all duration-300 animate-in slide-in-from-right-12 fade-in\",\r\n              t.type === \"success\" &&\r\n                \"bg-emerald-50 border-emerald-100 text-emerald-900\",\r\n              t.type === \"error\" && \"bg-red-50 border-red-100 text-red-900\",\r\n              t.type === \"warning\" &&\r\n                \"bg-amber-50 border-amber-100 text-amber-900\",\r\n              t.type === \"info\" && \"bg-blue-50 border-blue-100 text-blue-900\",\r\n            )}\r\n          >\r\n            <div className=\"shrink-0 mt-0.5\">\r\n              {t.type === \"success\" && (\r\n                <CheckCircle className=\"w-5 h-5 text-emerald-600\" />\r\n              )}\r\n              {t.type === \"error\" && (\r\n                <AlertCircle className=\"w-5 h-5 text-red-600\" />\r\n              )}\r\n              {t.type === \"warning\" && (\r\n                <AlertCircle className=\"w-5 h-5 text-amber-600\" />\r\n              )}\r\n              {t.type === \"info\" && <Info className=\"w-5 h-5 text-blue-600\" />}\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <h4 className=\"font-semibold text-sm\">{t.title}</h4>\r\n              {t.message && (\r\n                <p className=\"text-xs opacity-90 mt-0.5\">{t.message}</p>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={() => removeToast(t.id)}\r\n              className=\"shrink-0 text-slate-400 hover:text-slate-600 transition-colors\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </ToastContext.Provider>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\WarningModal.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":86,"column":11,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":86,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":94,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":94,"endColumn":62},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":101,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":101,"endColumn":46}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { H2, Body } from \"../atoms/Typography\";\r\nimport { AlertTriangle, X } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * WarningModal Molecule - Atomic Design System v1.0\r\n * Critical for destructive actions (e.g., DB reset)\r\n * Must block user interaction until decision made\r\n */\r\n\r\nexport interface WarningModalProps {\r\n  open: boolean;\r\n  title: string;\r\n  message: string;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n  confirmLabel?: string;\r\n  cancelLabel?: string;\r\n  confirmVariant?: \"default\" | \"destructive\";\r\n}\r\n\r\nexport const WarningModal: React.FC<WarningModalProps> = ({\r\n  open,\r\n  title,\r\n  message,\r\n  onConfirm,\r\n  onCancel,\r\n  confirmLabel = \"Confirm\",\r\n  cancelLabel = \"Cancel\",\r\n  confirmVariant = \"destructive\",\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(open);\r\n\r\n  useEffect(() => {\r\n    setIsVisible(open);\r\n\r\n    // Lock body scroll when modal is open\r\n    if (open) {\r\n      document.body.style.overflow = \"hidden\";\r\n    } else {\r\n      document.body.style.overflow = \"unset\";\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = \"unset\";\r\n    };\r\n  }, [open]);\r\n\r\n  // Handle Escape key\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === \"Escape\" && open) {\r\n        onCancel();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleEscape);\r\n    return () => window.removeEventListener(\"keydown\", handleEscape);\r\n  }, [open, onCancel]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\"\r\n      onClick={onCancel}\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      aria-labelledby=\"warning-modal-title\"\r\n    >\r\n      <div\r\n        className={cn(\r\n          \"relative bg-white rounded-lg shadow-lg\",\r\n          \"w-full max-w-md mx-4 p-6\",\r\n          \"animate-in fade-in zoom-in-95 duration-200\",\r\n        )}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Close button */}\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"absolute top-4 right-4 text-[#6B7280] hover:text-[#111827] transition-colors\"\r\n          aria-label=\"Close modal\"\r\n        >\r\n          <X size={20} />\r\n        </button>\r\n\r\n        {/* Icon */}\r\n        <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-[#DC2626]/10 mb-4\">\r\n          <AlertTriangle size={24} className=\"text-[#DC2626]\" />\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <H2 id=\"warning-modal-title\" className=\"mb-2\">\r\n          {title}\r\n        </H2>\r\n        <Body className=\"text-[#6B7280] mb-6\">{message}</Body>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex items-center gap-3 justify-end\">\r\n          <Button variant=\"secondary\" onClick={onCancel}>\r\n            {cancelLabel}\r\n          </Button>\r\n          <Button\r\n            variant={confirmVariant}\r\n            onClick={() => {\r\n              onConfirm();\r\n              setIsVisible(false);\r\n            }}\r\n          >\r\n            {confirmLabel}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\skeletons\\DetailSkeleton.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":2,"endColumn":62}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { Card } from \"@/components/design-system/atoms/Card\";\r\n\r\nexport const DetailSkeleton = () => {\r\n    return (\r\n        <div className=\"mx-auto max-w-[1400px] w-full space-y-6 animate-pulse\">\r\n            {/* Header Section: Title + Actions */}\r\n            <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\r\n                <div className=\"space-y-2\">\r\n                    {/* Breadcrumb/Back */}\r\n                    <div className=\"h-4 w-24 bg-slate-200 rounded\" />\r\n                    {/* Title + Subtitle */}\r\n                    <div className=\"h-8 w-64 bg-slate-200 rounded-lg\" />\r\n                    <div className=\"h-4 w-48 bg-slate-100 rounded\" />\r\n                </div>\r\n                {/* Actions */}\r\n                <div className=\"flex gap-3\">\r\n                    <div className=\"h-9 w-24 bg-slate-200 rounded-md\" />\r\n                    <div className=\"h-9 w-24 bg-slate-200 rounded-md\" />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Document Journey Bar */}\r\n            <div className=\"w-full h-16 bg-slate-50/50 border border-slate-100/50 rounded-xl\" />\r\n\r\n            {/* Tabs List */}\r\n            <div className=\"flex gap-2 border-b border-slate-200/50 pb-px\">\r\n                <div className=\"h-9 w-24 bg-slate-100 rounded-t-lg\" />\r\n                <div className=\"h-9 w-24 bg-slate-50 rounded-t-lg\" />\r\n                <div className=\"h-9 w-24 bg-slate-50 rounded-t-lg\" />\r\n            </div>\r\n\r\n            {/* Main Content Card (Form Fields) */}\r\n            <Card className=\"p-6 border-none shadow-sm bg-white/50 space-y-6\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    {/* Simulate 6 inputs */}\r\n                    {Array.from({ length: 6 }).map((_, i) => (\r\n                        <div key={i} className=\"space-y-2\">\r\n                            <div className=\"h-3 w-20 bg-slate-200 rounded\" />\r\n                            <div className=\"h-10 w-full bg-slate-100 rounded-md\" />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </Card>\r\n\r\n            {/* Items Table Header */}\r\n            <div className=\"space-y-4\">\r\n                <div className=\"h-5 w-32 bg-slate-200 rounded\" />\r\n                {/* Table Rows */}\r\n                <div className=\"border border-slate-200 rounded-lg overflow-hidden\">\r\n                    {/* Header Row */}\r\n                    <div className=\"h-10 bg-slate-50 border-b border-slate-200\" />\r\n                    {/* Body Rows */}\r\n                    {Array.from({ length: 3 }).map((_, i) => (\r\n                        <div\r\n                            key={i}\r\n                            className=\"h-14 bg-white border-b border-slate-100 last:border-0\"\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\AlertsPanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'unreadCount' is assigned a value but never used.","line":21,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"unreadCount"},"fix":{"range":[535,546],"text":""},"desc":"Remove unused variable 'unreadCount'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'unreadCount' is assigned a value but never used.","line":21,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'panelRef' is assigned a value but never used.","line":23,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"panelRef"},"fix":{"range":[671,717],"text":""},"desc":"Remove unused variable 'panelRef'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'panelRef' is assigned a value but never used.","line":23,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":20,"suggestions":[{"fix":{"range":[1009,1057],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":50,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":50,"endColumn":20,"suggestions":[{"fix":{"range":[1570,1623],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { Bell, CheckCircle, AlertTriangle, Info, X } from \"lucide-react\";\r\nimport { api } from \"@/lib/api\";\r\n\r\ninterface Alert {\r\n  id: string;\r\n  alert_type: string;\r\n  entity_type: string;\r\n  entity_id: string;\r\n  message: string;\r\n  severity: string;\r\n  is_acknowledged: boolean;\r\n  created_at: string;\r\n}\r\n\r\nexport default function AlertsPanel() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [alerts, setAlerts] = useState<Alert[]>([]);\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n  const [loading, setLoading] = useState(true); // Keep loading state for initial fetch\r\n  const panelRef = useRef<HTMLDivElement>(null);\r\n\r\n  const fetchAlerts = async () => {\r\n    try {\r\n      setLoading(true); // Set loading true before fetch\r\n      const data = await api.getAlerts(false); // Assuming getAlerts fetches unacknowledged\r\n      setAlerts(data);\r\n      setUnreadCount(data.length);\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch alerts:\", error);\r\n      setAlerts([]); // Clear alerts on error\r\n    } finally {\r\n      setLoading(false); // Set loading false after fetch\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAlerts();\r\n    const interval = setInterval(fetchAlerts, 60000); // Poll every minute\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleAcknowledge = async (alertId: string) => {\r\n    try {\r\n      await api.acknowledgeAlert(alertId);\r\n      fetchAlerts(); // Refresh list after acknowledging\r\n    } catch (error) {\r\n      console.error(\"Failed to acknowledge alert:\", error);\r\n    }\r\n  };\r\n\r\n  const getSeverityIcon = (severity: string) => {\r\n    switch (severity) {\r\n      case \"error\":\r\n        return <AlertTriangle className=\"w-5 h-5 text-red-600\" />;\r\n      case \"warning\":\r\n        return <AlertTriangle className=\"w-5 h-5 text-orange-600\" />;\r\n      case \"info\":\r\n        return <Info className=\"w-5 h-5 text-blue-600\" />;\r\n      default:\r\n        return <Info className=\"w-5 h-5 text-gray-600\" />;\r\n    }\r\n  };\r\n\r\n  const getSeverityColor = (severity: string) => {\r\n    switch (severity) {\r\n      case \"error\":\r\n        return \"bg-red-50 border-red-200\";\r\n      case \"warning\":\r\n        return \"bg-orange-50 border-orange-200\";\r\n      case \"info\":\r\n        return \"bg-blue-50 border-blue-200\";\r\n      default:\r\n        return \"bg-gray-50 border-gray-200\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Alert Bell Button */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\r\n      >\r\n        <Bell className=\"w-5 h-5\" />\r\n        {alerts.length > 0 && (\r\n          <span className=\"absolute top-0 right-0 w-5 h-5 bg-red-600 text-white text-xs font-bold rounded-full flex items-center justify-center\">\r\n            {alerts.length}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Alerts Panel */}\r\n      {isOpen && (\r\n        <>\r\n          <div\r\n            className=\"fixed inset-0 bg-black bg-opacity-25 z-40\"\r\n            onClick={() => setIsOpen(false)}\r\n          />\r\n          <div className=\"fixed top-16 right-4 w-96 bg-white rounded-lg shadow-2xl z-50 max-h-[600px] flex flex-col\">\r\n            {/* Header */}\r\n            <div className=\"px-4 py-3 border-b border-gray-200 flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <Bell className=\"w-5 h-5 text-gray-700\" />\r\n                <h3 className=\"font-semibold text-gray-900\">Alerts</h3>\r\n                {alerts.length > 0 && (\r\n                  <span className=\"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded-full\">\r\n                    {alerts.length}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <button onClick={() => setIsOpen(false)}>\r\n                <X className=\"w-5 h-5 text-gray-400 hover:text-gray-600\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Alerts List */}\r\n            <div className=\"flex-1 overflow-y-auto p-2\">\r\n              {loading && (\r\n                <div className=\"text-center py-8 text-gray-500\">\r\n                  Loading alerts...\r\n                </div>\r\n              )}\r\n\r\n              {!loading && alerts.length === 0 && (\r\n                <div className=\"text-center py-8\">\r\n                  <CheckCircle className=\"w-12 h-12 text-green-500 mx-auto mb-2\" />\r\n                  <div className=\"text-gray-900 font-medium\">All clear!</div>\r\n                  <div className=\"text-sm text-gray-500\">No pending alerts</div>\r\n                </div>\r\n              )}\r\n\r\n              {!loading && alerts.length > 0 && (\r\n                <div className=\"space-y-2\">\r\n                  {alerts.map((alert) => (\r\n                    <div\r\n                      key={alert.id}\r\n                      className={`p-3 rounded-lg border ${getSeverityColor(alert.severity)}`}\r\n                    >\r\n                      <div className=\"flex items-start gap-3\">\r\n                        <div className=\"flex-shrink-0 mt-0.5\">\r\n                          {getSeverityIcon(alert.severity)}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"text-sm font-medium text-gray-900 mb-1\">\r\n                            {alert.message}\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 text-xs text-gray-500\">\r\n                            <span className=\"px-2 py-0.5 bg-white rounded\">\r\n                              {alert.entity_type}\r\n                            </span>\r\n                            <span>\r\n                              {new Date(alert.created_at).toLocaleDateString()}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                        <button\r\n                          onClick={() => handleAcknowledge(alert.id)}\r\n                          className=\"flex-shrink-0 p-1 hover:bg-white rounded transition-colors\"\r\n                          title=\"Acknowledge\"\r\n                        >\r\n                          <X className=\"w-4 h-4 text-gray-400 hover:text-gray-600\" />\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            {alerts.length > 0 && (\r\n              <div className=\"px-4 py-2 border-t border-gray-200 bg-gray-50 text-xs text-gray-500 text-center\">\r\n                Click X to acknowledge alerts\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\BriefingCard.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":4,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowRight"},"fix":{"range":[62,74],"text":""},"desc":"Remove unused variable 'ArrowRight'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowRight' is defined but never used.","line":4,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":4,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertCircle"},"fix":{"range":[81,94],"text":""},"desc":"Remove unused variable 'AlertCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertCircle' is defined but never used.","line":4,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":50},{"ruleId":"no-unused-vars","severity":1,"message":"'H1' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"H1"},"fix":{"range":[128,131],"text":""},"desc":"Remove unused variable 'H1'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H1' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'Body' is defined but never used.","line":5,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"Body"},"fix":{"range":[130,136],"text":""},"desc":"Remove unused variable 'Body'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used.","line":5,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"cn"},"fix":{"range":[275,308],"text":""},"desc":"Remove unused variable 'cn'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cn' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'GlassContainer' is defined but never used.","line":26,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"GlassContainer"},"fix":{"range":[791,848],"text":""},"desc":"Remove unused variable 'GlassContainer'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'GlassContainer' is defined but never used.","line":26,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'onAction' is defined but never used.","line":32,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"onAction"},"fix":{"range":[947,962],"text":""},"desc":"Remove unused variable 'onAction'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'onAction' is defined but never used.","line":32,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":13},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":58,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":58,"endColumn":139},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":61,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":61,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":65,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":65,"endColumn":118},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":77,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":77,"endColumn":146},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":80,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":80,"endColumn":130},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":89,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":89,"endColumn":146},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":92,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":92,"endColumn":130}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Sparkles, ArrowRight, Clock, AlertCircle } from \"lucide-react\";\r\nimport { H1, Body, SmallText, H3 } from \"../atoms/Typography\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { Flex, Stack, Box } from \"../atoms/Layout\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { motion } from \"framer-motion\";\r\n\r\n/**\r\n * BriefingCard Organism - Atomic Design System v5.1\r\n * Implementation of the \"Morning Briefing\" operational summary.\r\n * High-density, brand-gradient, enterprise-focused.\r\n * Updated: Matches metric card height (min-h-[140px]), borderless design.\r\n */\r\n\r\nexport interface BriefingCardProps {\r\n    pendingApprovals: number;\r\n    dcInTransit: number;\r\n    userName?: string;\r\n    onAction?: () => void;\r\n    loading?: boolean;\r\n}\r\n\r\nimport { GlassContainer } from \"../atoms/GlassContainer\";\r\n\r\nconst BriefingCardInternal = ({\r\n    pendingApprovals,\r\n    dcInTransit,\r\n    userName = \"Team\",\r\n    onAction,\r\n    loading,\r\n}: BriefingCardProps) => {\r\n    if (loading) {\r\n        return (\r\n            <Card className=\"min-h-[140px] bg-[var(--color-sys-bg-tertiary)]/10 animate-pulse shadow-none\">\r\n                <div />\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, scale: 0.98 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            transition={{ duration: 0.4, type: \"spring\", stiffness: 100 }}\r\n            className=\"h-full\"\r\n        >\r\n            <div className=\"h-full min-h-[140px] relative overflow-hidden group p-6 flex flex-col justify-between\">\r\n                {/* Ambient Blobs - Apple Style */}\r\n                <Box className=\"absolute top-0 right-0 w-64 h-64 bg-[var(--color-sys-brand-primary)]/10 rounded-full -mr-20 -mt-20 blur-3xl group-hover:bg-[var(--color-sys-brand-primary)]/15 transition-all duration-700\" />\r\n                <Box className=\"absolute bottom-0 left-0 w-40 h-40 bg-[var(--color-primitive-blue-400)]/10 rounded-full -ml-10 -mb-10 blur-2xl group-hover:bg-[var(--color-sys-brand-primary)]/10 transition-all duration-700\" />\r\n\r\n                <Flex align=\"start\" justify=\"between\" className=\"relative z-10 w-full mb-4\">\r\n                    <Stack gap={1}>\r\n                        <Flex align=\"center\" gap={2}>\r\n                            <Box className=\"p-1.5 bg-[var(--color-sys-brand-primary)]/10 rounded-lg text-[var(--color-sys-brand-primary)]\">\r\n                                <Sparkles size={14} />\r\n                            </Box>\r\n                            <SmallText className=\"text-[var(--color-sys-brand-primary)] uppercase tracking-[0.2em] font-bold text-[10px]\">\r\n                                Ops Briefing\r\n                            </SmallText>\r\n                        </Flex>\r\n                        <H3 className=\"text-[var(--color-sys-text-primary)] text-lg mt-1 tracking-tight leading-none\">\r\n                            Good Morning, {userName}\r\n                        </H3>\r\n                    </Stack>\r\n                </Flex>\r\n\r\n                <div className=\"relative z-10 grid grid-cols-2 gap-3 mt-auto\">\r\n                    <div className=\"bg-white/50 backdrop-blur-sm rounded-xl p-3 flex items-center gap-3 hover:bg-white/80 transition-colors cursor-pointer border border-white/20 shadow-sm\">\r\n                        <div className=\"p-2 bg-orange-500/10 rounded-lg text-orange-600\">\r\n                            <Clock size={16} />\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"text-2xl font-bold text-[var(--color-sys-text-primary)] leading-none mb-1 font-mono tracking-tighter\">\r\n                                {pendingApprovals}\r\n                            </div>\r\n                            <div className=\"text-[9px] uppercase tracking-wider font-bold text-[var(--color-sys-text-secondary)]\">Pending</div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"bg-white/50 backdrop-blur-sm rounded-xl p-3 flex items-center gap-3 hover:bg-white/80 transition-colors cursor-pointer border border-white/20 shadow-sm\">\r\n                        <div className=\"p-2 bg-emerald-500/20 rounded-lg text-emerald-200 group-hover/item:text-emerald-100 transition-colors\">\r\n                            <Truck size={16} />\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"text-2xl font-bold text-[var(--color-sys-text-primary)] leading-none mb-1 font-mono tracking-tighter\">\r\n                                {dcInTransit}\r\n                            </div>\r\n                            <div className=\"text-[9px] uppercase tracking-wider font-bold text-[var(--color-sys-text-secondary)]\">In Transit</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\n// Simple Truck Icon fallback if needed, but page.tsx imports it so should be fine if passed or imported.\r\n// Since we are inside the file, we need to import Truck.\r\nimport { Truck } from \"lucide-react\";\r\n\r\nexport const BriefingCard = React.memo(BriefingCardInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\CommandBar.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":7,"suggestions":[{"messageId":"removeVar","data":{"varName":"Plus"},"fix":{"range":[202,211],"text":""},"desc":"Remove unused variable 'Plus'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Plus' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":7},{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":15,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowRight"},"fix":{"range":[245,260],"text":""},"desc":"Remove unused variable 'ArrowRight'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowRight' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":17,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":4,"suggestions":[{"messageId":"removeVar","data":{"varName":"X"},"fix":{"range":[272,278],"text":""},"desc":"Remove unused variable 'X'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":4},{"ruleId":"no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":64,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":64,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":64,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":64,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":151,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":151,"endColumn":190},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":162,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":162,"endColumn":110},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":244,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":244,"endColumn":110},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":281,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":281,"endColumn":117},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":287,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":287,"endColumn":117}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n  Search,\r\n  FileText,\r\n  Truck,\r\n  ShoppingCart,\r\n  LayoutDashboard,\r\n  Plus,\r\n  Box,\r\n  BarChart2,\r\n  Receipt,\r\n  ArrowRight,\r\n  Loader2,\r\n  X,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { api, SearchResult } from \"@/lib/api\";\r\nimport { StatusBadge } from \"./StatusBadge\";\r\n\r\nexport function CommandBar() {\r\n  const [open, setOpen] = useState(false);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [results, setResults] = useState<SearchResult[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n  const router = useRouter();\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Toggle on Cmd+K and handle global shortcuts\r\n  useEffect(() => {\r\n    const down = (e: KeyboardEvent) => {\r\n      if (e.key === \"k\" && (e.metaKey || e.ctrlKey)) {\r\n        e.preventDefault();\r\n        setOpen((o) => !o);\r\n      }\r\n      if (e.key === \"Escape\") setOpen(false);\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", down);\r\n    return () => document.removeEventListener(\"keydown\", down);\r\n  }, []);\r\n\r\n  // Database Search\r\n  useEffect(() => {\r\n    if (!open) {\r\n      setSearch(\"\");\r\n      setResults([]);\r\n      return;\r\n    }\r\n\r\n    const performSearch = async () => {\r\n      if (search.length < 2) {\r\n        setResults([]);\r\n        return;\r\n      }\r\n      setLoading(true);\r\n      try {\r\n        const data = await api.searchGlobal(search);\r\n        setResults(data);\r\n        setSelectedIndex(0);\r\n      } catch (err) {\r\n        setResults([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    const debounce = setTimeout(performSearch, 300);\r\n    return () => clearTimeout(debounce);\r\n  }, [search, open]);\r\n\r\n  // Keyboard Navigation\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    const totalItems = results.length + navigationItems.length;\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) => (prev + 1) % totalItems);\r\n    } else if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) => (prev - 1 + totalItems) % totalItems);\r\n    } else if (e.key === \"Enter\") {\r\n      if (search.length >= 2) {\r\n        if (selectedIndex < results.length) {\r\n          handleResultClick(results[selectedIndex]);\r\n        } else {\r\n          handleNavigate(navigationItems[selectedIndex - results.length].path);\r\n        }\r\n      } else {\r\n        handleNavigate(navigationItems[selectedIndex].path);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleNavigate = (path: string) => {\r\n    setOpen(false);\r\n    router.push(path);\r\n  };\r\n\r\n  const handleResultClick = (result: SearchResult) => {\r\n    setOpen(false);\r\n    if (result.type === \"PO\") router.push(`/po/view?id=${result.number}`);\r\n    else if (result.type === \"DC\") router.push(`/dc/view?id=${result.number}`);\r\n    else if (result.type === \"Invoice\")\r\n      router.push(`/invoice/view?id=${encodeURIComponent(result.number)}`);\r\n    else if (result.type === \"SRV\")\r\n      router.push(`/reports?tab=reconciliation&search=${result.number}`);\r\n  };\r\n\r\n  const navigationItems = [\r\n    { label: \"Dashboard\", path: \"/\", icon: LayoutDashboard },\r\n    { label: \"Purchase Orders\", path: \"/po\", icon: ShoppingCart },\r\n    { label: \"Delivery Challans\", path: \"/dc\", icon: Truck },\r\n    { label: \"Invoices\", path: \"/invoice\", icon: Receipt },\r\n    { label: \"Reports\", path: \"/reports\", icon: BarChart2 },\r\n  ];\r\n\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[100] flex items-start justify-center pt-[15vh] px-4\">\r\n      <div\r\n        className=\"fixed inset-0 bg-slate-950/40 backdrop-blur-sm transition-opacity\"\r\n        onClick={() => setOpen(false)}\r\n      />\r\n\r\n      <div className=\"relative w-full max-w-3xl bg-white/95 backdrop-blur-2xl rounded-3xl overflow-hidden shadow-[0_32px_64px_-16px_rgba(0,0,0,0.2)] border border-white/60 animate-in fade-in zoom-in-95 duration-200 ring-1 ring-black/5\">\r\n        {/* Header / Search Area */}\r\n        <div className=\"flex items-center px-6 py-5 border-b border-slate-100\">\r\n          <Search\r\n            className={cn(\r\n              \"mr-4 h-6 w-6 transition-colors\",\r\n              loading ? \"text-blue-500 animate-pulse\" : \"text-slate-400\",\r\n            )}\r\n          />\r\n          <input\r\n            ref={inputRef}\r\n            autoFocus\r\n            className=\"flex-1 bg-transparent text-xl font-medium text-slate-900 outline-none placeholder:text-slate-300\"\r\n            placeholder=\"Search POs, DCs, Invoices, Actions...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n          />\r\n          {loading ? (\r\n            <Loader2 className=\"h-5 w-5 text-blue-500 animate-spin\" />\r\n          ) : (\r\n            <div className=\"flex items-center gap-2\">\r\n              <kbd className=\"hidden sm:flex h-6 select-none items-center gap-1 rounded-lg border border-slate-200 bg-slate-50 px-2 font-mono text-[10px] font-bold text-slate-400 shadow-sm\">\r\n                ESC\r\n              </kbd>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Scrollable Content */}\r\n        <div className=\"max-h-[60vh] overflow-y-auto custom-scrollbar\">\r\n          {search.length >= 2 ? (\r\n            <div className=\"p-3\">\r\n              <div className=\"px-3 py-2 text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-1\">\r\n                Database Matches\r\n              </div>\r\n              {results.length > 0\r\n                ? results.map((result, idx) => (\r\n                  <button\r\n                    key={`search-${idx}`}\r\n                    onClick={() => handleResultClick(result)}\r\n                    onMouseEnter={() => setSelectedIndex(idx)}\r\n                    className={cn(\r\n                      \"w-full flex items-center justify-between p-3 rounded-2xl transition-all duration-200 text-left mb-1 group\",\r\n                      selectedIndex === idx\r\n                        ? \"bg-blue-600 text-white shadow-lg shadow-blue-200\"\r\n                        : \"hover:bg-slate-50 text-slate-700\",\r\n                    )}\r\n                  >\r\n                    <div className=\"flex items-center gap-4\">\r\n                      <div\r\n                        className={cn(\r\n                          \"p-2.5 rounded-xl flex items-center justify-center transition-colors\",\r\n                          selectedIndex === idx\r\n                            ? \"bg-white/20 text-white\"\r\n                            : \"bg-slate-100 text-slate-500 group-hover:bg-white\",\r\n                        )}\r\n                      >\r\n                        {result.type === \"PO\" ? (\r\n                          <ShoppingCart size={18} />\r\n                        ) : result.type === \"DC\" ? (\r\n                          <Truck size={18} />\r\n                        ) : result.type === \"Invoice\" ? (\r\n                          <Receipt size={18} />\r\n                        ) : result.type === \"SRV\" ? (\r\n                          <FileText size={18} />\r\n                        ) : (\r\n                          <Box size={18} />\r\n                        )}\r\n                      </div>\r\n                      <div>\r\n                        <div className=\"font-bold tracking-tight\">\r\n                          {result.number}\r\n                        </div>\r\n                        <div\r\n                          className={cn(\r\n                            \"text-[11px] font-medium opacity-70\",\r\n                            selectedIndex === idx\r\n                              ? \"text-blue-50\"\r\n                              : \"text-slate-500\",\r\n                          )}\r\n                        >\r\n                          {result.type_label} ΓÇó{\" \"}\r\n                          {result.party || \"No Reference Data\"}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3 pr-2\">\r\n                      {result.amount && (\r\n                        <div className=\"font-mono text-sm font-bold tracking-tighter\">\r\n                          Γé╣{result.amount.toLocaleString(\"en-IN\")}\r\n                        </div>\r\n                      )}\r\n                      <StatusBadge\r\n                        status={result.status || \"Active\"}\r\n                        variant={\r\n                          selectedIndex === idx ? \"neutral\" : \"success\"\r\n                        }\r\n                        className={cn(\r\n                          \"px-2 py-0.5 text-[9px]\",\r\n                          selectedIndex === idx &&\r\n                          \"bg-white/20 text-white border-transparent\",\r\n                        )}\r\n                      />\r\n                    </div>\r\n                  </button>\r\n                ))\r\n                : !loading && (\r\n                  <div className=\"py-12 text-center text-slate-400\">\r\n                    No results for \"{search}\"\r\n                  </div>\r\n                )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-3\">\r\n              <div className=\"px-3 py-2 text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-1\">\r\n                Quick Navigation\r\n              </div>\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                {navigationItems.map((item, idx) => (\r\n                  <button\r\n                    key={`action-${idx}`}\r\n                    onClick={() => handleNavigate(item.path)}\r\n                    onMouseEnter={() => setSelectedIndex(idx)}\r\n                    className={cn(\r\n                      \"flex items-center gap-4 p-4 rounded-2xl border transition-all duration-200 text-left\",\r\n                      selectedIndex === idx\r\n                        ? \"bg-slate-900 text-white border-slate-900 shadow-xl\"\r\n                        : \"bg-white border-slate-100 hover:border-slate-300 text-slate-600\",\r\n                    )}\r\n                  >\r\n                    <item.icon\r\n                      size={20}\r\n                      className={\r\n                        selectedIndex === idx\r\n                          ? \"text-blue-400\"\r\n                          : \"text-slate-400\"\r\n                      }\r\n                    />\r\n                    <span className=\"font-bold tracking-tight\">\r\n                      {item.label}\r\n                    </span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"bg-slate-50/50 backdrop-blur-xl px-6 py-4 flex items-center justify-between border-t border-slate-100\">\r\n          <div className=\"flex items-center gap-6\">\r\n            <div className=\"flex items-center gap-1.5 font-bold text-[9px] text-slate-400 uppercase tracking-widest\">\r\n              <span className=\"p-1 px-1.5 bg-white border border-slate-200 rounded text-slate-600\">\r\n                Enter\r\n              </span>\r\n              <span>to Select</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5 font-bold text-[9px] text-slate-400 uppercase tracking-widest\">\r\n              <span className=\"p-1 px-1.5 bg-white border border-slate-200 rounded text-slate-600\">\r\n                Esc\r\n              </span>\r\n              <span>to Close</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DataTable.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'TableHeaderCell' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"TableHeaderCell"},"fix":{"range":[197,260],"text":""},"desc":"Remove unused variable 'TableHeaderCell'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TableHeaderCell' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'value' is defined but never used.","line":24,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"value"},"fix":{"range":[819,830],"text":""},"desc":"Remove unused variable 'value'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'row' is defined but never used.","line":24,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"row"},"fix":{"range":[829,837],"text":""},"desc":"Remove unused variable 'row'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":24,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":47,"suggestions":[{"messageId":"removeVar","data":{"varName":"index"},"fix":{"range":[837,853],"text":""},"desc":"Remove unused variable 'index'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'page' is defined but never used.","line":39,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"page"},"fix":{"range":[1155,1167],"text":""},"desc":"Remove unused variable 'page'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'row' is defined but never used.","line":42,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":42,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"row"},"fix":{"range":[1221,1227],"text":""},"desc":"Remove unused variable 'row'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'row' is defined but never used.","line":43,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"row"},"fix":{"range":[1267,1274],"text":""},"desc":"Remove unused variable 'row'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isExpanded' is defined but never used.","line":43,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"isExpanded"},"fix":{"range":[1273,1294],"text":""},"desc":"Remove unused variable 'isExpanded'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'key' is defined but never used.","line":49,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[1477,1488],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'selected' is defined but never used.","line":54,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":54,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"selected"},"fix":{"range":[1594,1612],"text":""},"desc":"Remove unused variable 'selected'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":226,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":226,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":228,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":228,"endColumn":67},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":238,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":238,"endColumn":63},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":250,"column":26,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":250,"endColumn":76},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":367,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":367,"endColumn":136},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":439,"column":26,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":439,"endColumn":76}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useMemo } from \"react\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { Checkbox } from \"../atoms/Checkbox\";\r\nimport { TableHeaderCell } from \"../molecules/TableHeaderCell\";\r\nimport { Body, SmallText, Accounting } from \"../atoms/Typography\";\r\nimport { ChevronLeft, ChevronRight, FileDown, Inbox } from \"lucide-react\";\r\nimport { TableRowSkeleton } from \"../atoms/Skeleton\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * DataTable Organism - Atomic Design System v1.0\r\n * Features: Sorting, Pagination, Bulk Select, Export, Empty State\r\n * Uses real data only - no mock/dummy data\r\n */\r\n\r\nexport interface Column<T = any> {\r\n  key: string;\r\n  label: string;\r\n  sortable?: boolean;\r\n  align?: \"left\" | \"center\" | \"right\";\r\n  render?: (value: any, row: T, index?: number) => React.ReactNode;\r\n  width?: string;\r\n  isNumeric?: boolean;\r\n  isCurrency?: boolean;\r\n}\r\n\r\nexport interface DataTableProps<T = any> {\r\n  columns: Column<T>[];\r\n  data: T[];\r\n  keyField?: string;\r\n\r\n  // Pagination\r\n  page?: number;\r\n  pageSize?: number;\r\n  totalItems?: number;\r\n  onPageChange?: (page: number) => void;\r\n\r\n  // Expandable Rows\r\n  renderSubRow?: (row: T) => React.ReactNode;\r\n  onRowExpand?: (row: T, isExpanded: boolean) => void;\r\n  density?: \"compact\" | \"normal\"; // Row height mode: compact (40px) or normal (48px)\r\n\r\n  // Sorting\r\n  sortKey?: string;\r\n  sortDirection?: \"asc\" | \"desc\";\r\n  onSort?: (key: string) => void;\r\n\r\n  // Selection\r\n  selectable?: boolean;\r\n  selectedRows?: string[];\r\n  onSelectionChange?: (selected: string[]) => void;\r\n\r\n  // Export\r\n  exportable?: boolean;\r\n  onExport?: () => void;\r\n  exportLabel?: string;\r\n\r\n  // Loading & Error\r\n  loading?: boolean;\r\n  error?: string;\r\n\r\n  // Empty state\r\n  emptyMessage?: string;\r\n  emptyIcon?: React.ReactNode;\r\n\r\n  className?: string;\r\n  no_borders?: boolean;\r\n  table_surface_solid?: boolean;\r\n}\r\n\r\nconst DataTableComponent = <T extends Record<string, any>>({\r\n  columns,\r\n  data,\r\n  keyField = \"id\",\r\n  page = 1,\r\n  pageSize = 10,\r\n  totalItems,\r\n  onPageChange,\r\n  sortKey,\r\n  sortDirection,\r\n  onSort,\r\n  selectable = false,\r\n  selectedRows = [],\r\n  onSelectionChange,\r\n  exportable = false,\r\n  onExport,\r\n  exportLabel = \"Export\",\r\n  loading = false,\r\n  error,\r\n  emptyMessage = \"No data available\",\r\n  emptyIcon,\r\n  className,\r\n  no_borders = true, // Default to true as per GLOBAL_VARIABLES.md\r\n  table_surface_solid = true, // Default to true as per GLOBAL_VARIABLES.md\r\n  renderSubRow,\r\n  onRowExpand,\r\n  density = \"normal\", // Row height mode: compact (40px) or normal (48px)\r\n}: DataTableProps<T>) => {\r\n  const [internalSort, setInternalSort] = useState<{\r\n    key: string;\r\n    direction: \"asc\" | \"desc\";\r\n  } | null>(null);\r\n  const [internalPage, setInternalPage] = useState(1);\r\n  const [expandedRows, setExpandedRows] = useState<string[]>([]);\r\n\r\n  const currentPage = page || internalPage;\r\n\r\n  const currentSortKey = sortKey || internalSort?.key;\r\n  const currentSortDirection = sortDirection || internalSort?.direction;\r\n\r\n  // Calculate pagination\r\n  const total = totalItems || data?.length || 0;\r\n  const totalPages = Math.ceil(total / pageSize);\r\n  const startIndex = (currentPage - 1) * pageSize;\r\n  const endIndex = Math.min(startIndex + pageSize, total);\r\n\r\n  // Sorted and paginated data\r\n  const processedData = useMemo(() => {\r\n    let result = data ? [...data] : [];\r\n\r\n    // Sort\r\n    if (currentSortKey) {\r\n      result.sort((a, b) => {\r\n        const aVal = a[currentSortKey];\r\n        const bVal = b[currentSortKey];\r\n\r\n        if (aVal < bVal) return currentSortDirection === \"asc\" ? -1 : 1;\r\n        if (aVal > bVal) return currentSortDirection === \"asc\" ? 1 : -1;\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    // Paginate (client-side only - when totalItems not provided or equals data.length)\r\n    // Server-side pagination: totalItems > data.length (data is already paginated)\r\n    // Client-side pagination: totalItems === data.length or undefined (need to slice)\r\n    if (!totalItems || totalItems === data.length) {\r\n      result = result.slice(startIndex, endIndex);\r\n    }\r\n\r\n    return result;\r\n  }, [\r\n    data,\r\n    currentSortKey,\r\n    currentSortDirection,\r\n    startIndex,\r\n    endIndex,\r\n    totalItems,\r\n  ]);\r\n\r\n  // Handle page change\r\n  const handlePageChange = React.useCallback((newPage: number) => {\r\n    if (onPageChange) {\r\n      onPageChange(newPage);\r\n    } else {\r\n      setInternalPage(newPage);\r\n    }\r\n  }, [onPageChange]);\r\n\r\n  // Handle sort\r\n  const handleSort = React.useCallback((key: string) => {\r\n    if (onSort) {\r\n      onSort(key);\r\n    } else {\r\n      setInternalSort((prev) => ({\r\n        key,\r\n        direction:\r\n          prev?.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n      }));\r\n    }\r\n  }, [onSort]);\r\n\r\n  // Handle select all\r\n  const handleSelectAll = React.useCallback((checked: boolean) => {\r\n    if (!onSelectionChange) return;\r\n\r\n    if (checked) {\r\n      const allKeys = processedData.map((row) => String(row[keyField]));\r\n      onSelectionChange(allKeys);\r\n    } else {\r\n      onSelectionChange([]);\r\n    }\r\n  }, [onSelectionChange, processedData, keyField]);\r\n\r\n  // Handle select row\r\n  const handleSelectRow = React.useCallback((rowKey: string, checked: boolean) => {\r\n    if (!onSelectionChange) return;\r\n\r\n    if (checked) {\r\n      onSelectionChange([...selectedRows, rowKey]);\r\n    } else {\r\n      onSelectionChange(selectedRows.filter((key) => key !== rowKey));\r\n    }\r\n  }, [onSelectionChange, selectedRows]);\r\n\r\n  const toggleRowExpansion = React.useCallback((rowKey: string, row: T) => {\r\n    const isCurrentlyExpanded = expandedRows.includes(rowKey);\r\n    const willBeExpanded = !isCurrentlyExpanded;\r\n\r\n    setExpandedRows(prev =>\r\n      isCurrentlyExpanded\r\n        ? prev.filter(k => k !== rowKey)\r\n        : [...prev, rowKey]\r\n    );\r\n\r\n    // Call onRowExpand if provided\r\n    if (onRowExpand) {\r\n      onRowExpand(row, willBeExpanded);\r\n    }\r\n  }, [expandedRows, onRowExpand]);\r\n\r\n  const allSelected =\r\n    selectable &&\r\n    processedData.length > 0 &&\r\n    processedData.every((row) => selectedRows.includes(String(row[keyField])));\r\n  const selectedCount = selectedRows.length; // Optimization\r\n\r\n  // Empty state\r\n  if (!loading && !error && data.length === 0) {\r\n    return (\r\n      <Card className={cn(\"p-12 text-center\", className)}>\r\n        <div className=\"flex flex-col items-center gap-4\">\r\n          <div className=\"p-4 rounded-full bg-[var(--color-sys-bg-tertiary)]\">\r\n            {emptyIcon || <Inbox size={32} className=\"text-[var(--color-sys-text-tertiary)]\" />}\r\n          </div>\r\n          <Body className=\"text-[var(--color-sys-text-secondary)]\">{emptyMessage}</Body>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  // Error state\r\n  if (error) {\r\n    return (\r\n      <Card className={cn(\"p-8 text-center\", className)}>\r\n        <Body className=\"text-[var(--color-sys-status-error)]\">{error}</Body>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={cn(\"space-y-4\", className)}>\r\n      {/* Table toolbar */}\r\n      {(exportable || selectable) && (\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            {selectable && selectedCount > 0 && (\r\n              <SmallText className=\"text-[var(--color-sys-text-secondary)]\">\r\n                {selectedCount} row{selectedCount !== 1 ? \"s\" : \"\"} selected\r\n              </SmallText>\r\n            )}\r\n          </div>\r\n          {exportable && onExport && (\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={onExport}>\r\n              <FileDown size={16} />\r\n              {exportLabel}\r\n            </Button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Table Content Container */}\r\n      <Card\r\n        className={cn(\r\n          \"p-0 overflow-hidden transition-all duration-300\",\r\n          no_borders ? \"border-none shadow-none\" : \"border-[var(--color-sys-text-tertiary)]/20 shadow-[var(--shadow-3d-floating)]\",\r\n          table_surface_solid ? \"bg-[var(--color-sys-bg-surface)]\" : \"bg-[var(--color-sys-surface-glass)] backdrop-blur-2xl\"\r\n        )}\r\n      >\r\n        <div\r\n          className=\"overflow-x-auto hover-scrollbar\"\r\n          style={{ minHeight: \"300px\", display: \"block\" }}\r\n        >\r\n          <table\r\n            className=\"w-full border-collapse\"\r\n            style={{ display: \"table\" }}\r\n          >\r\n            <thead className=\"relative z-10\">\r\n              <tr className={cn(\r\n                \"border-b border-[var(--color-sys-text-tertiary)]/10 shadow-[var(--shadow-3d-hover)]\",\r\n                table_surface_solid ? \"bg-[var(--color-sys-bg-tertiary)]/20\" : \"bg-[var(--color-sys-bg-tertiary)]/30 backdrop-blur-md\"\r\n              )}>\r\n                {/* Expansion Column Header */}\r\n                {renderSubRow && <th className=\"w-10\"></th>}\r\n\r\n                {selectable && (\r\n                  <th className={cn(\r\n                    density === \"compact\" ? \"px-2 h-[40px]\" : \"px-4 h-12\",\r\n                  )}>\r\n                    <Checkbox\r\n                      checked={allSelected}\r\n                      onChange={(e) => handleSelectAll(e.target.checked)}\r\n                      aria-label=\"Select all rows\"\r\n                    />\r\n                  </th>\r\n                )}\r\n                {columns.map((column) => (\r\n                  <th\r\n                    key={column.key}\r\n                    className={cn(\r\n                      \"py-3 px-4 table-header-text transition-colors\",\r\n                      (column.isNumeric || column.isCurrency) ? \"text-right\"\r\n                        : column.align === \"right\" ? \"text-right\"\r\n                          : column.align === \"center\" ? \"text-center\"\r\n                            : \"text-left\",\r\n                      column.sortable &&\r\n                      (currentSortKey === column.key\r\n                        ? \"bg-[var(--color-sys-brand-primary)]/5 text-[var(--color-sys-brand-primary)]\"\r\n                        : \"hover:bg-[var(--color-sys-bg-tertiary)]/20 cursor-pointer\"),\r\n                    )}\r\n                    style={{ width: column.width }}\r\n                    onClick={\r\n                      column.sortable ? () => handleSort(column.key) : undefined\r\n                    }\r\n                  >\r\n                    {column.sortable ? (\r\n                      <div className=\"flex items-center gap-1\">\r\n                        {column.label}\r\n                        <span className=\"opacity-40\">\r\n                          {currentSortKey === column.key\r\n                            ? currentSortDirection === \"asc\"\r\n                              ? \"Γåæ\"\r\n                              : \"Γåô\"\r\n                            : \"Γåò\"}\r\n                        </span>\r\n                      </div>\r\n                    ) : (\r\n                      column.label\r\n                    )}\r\n                  </th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-transparent\">\r\n              {loading\r\n                ? Array.from({ length: pageSize || 5 }).map((_, i) => (\r\n                  <tr key={`skeleton-${i}`}>\r\n                    <td colSpan={columns.length + (selectable ? 1 : 0) + (renderSubRow ? 1 : 0)}>\r\n                      <TableRowSkeleton columns={columns.length} />\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n                : processedData.map((row, rowIndex) => {\r\n                  const rowKey = String(row[keyField]);\r\n                  const isSelected = selectedRows.includes(rowKey);\r\n                  const isExpanded = expandedRows.includes(rowKey);\r\n\r\n                  return (\r\n                    <React.Fragment key={rowKey}>\r\n                      <tr\r\n                        className={cn(\r\n                          \"group border-b border-[var(--color-sys-text-tertiary)]/5 transition-all duration-200\",\r\n                          \"hover:bg-[var(--color-sys-bg-surface)] hover:shadow-[var(--shadow-3d-hover)] hover:scale-[1.002] hover:z-10 relative\",\r\n                          isSelected && \"bg-[var(--color-sys-brand-primary)]/[0.04]\",\r\n                          isExpanded && \"bg-[var(--color-sys-brand-primary)]/[0.02] border-transparent shadow-inner\"\r\n                        )}\r\n                      >\r\n                        {/* Expansion Trigger */}\r\n                        {renderSubRow && (\r\n                          <td className=\"w-10 px-0 pl-3\">\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => toggleRowExpansion(rowKey, row)}\r\n                              className=\"w-6 h-6 p-0 text-[var(--color-sys-text-tertiary)] hover:text-[var(--color-sys-brand-primary)]\"\r\n                            >\r\n                              <ChevronRight\r\n                                size={16}\r\n                                className={cn(\"transition-transform duration-200\", isExpanded && \"rotate-90\")}\r\n                              />\r\n                            </Button>\r\n                          </td>\r\n                        )}\r\n\r\n                        {selectable && (\r\n                          <td className=\"px-4 py-2\">\r\n                            <Checkbox\r\n                              checked={isSelected}\r\n                              onChange={(e) =>\r\n                                handleSelectRow(rowKey, e.target.checked)\r\n                              }\r\n                              aria-label={`Select row`}\r\n                            />\r\n                          </td>\r\n                        )}\r\n                        {columns.map((column) => (\r\n                          <td\r\n                            key={column.key}\r\n                            className={cn(\r\n                              density === \"compact\" ? \"px-2 h-[40px]\" : \"px-4 h-12\",\r\n                              \"align-middle border-r border-transparent group-hover:border-[var(--color-sys-text-tertiary)]/10\",\r\n                              // Standardized typography via classes\r\n                              (column.isNumeric || column.isCurrency)\r\n                                ? \"text-right table-cell-number\"\r\n                                : typeof column.render === \"function\" // If custom render, let it handle fonts or inherit\r\n                                  ? (column.align === \"right\" ? \"text-right\" : column.align === \"center\" ? \"text-center\" : \"text-left\")\r\n                                  : \"table-cell-text\", // Default text class for direct values\r\n                              column.align === \"right\" ? \"text-right\"\r\n                                : column.align === \"center\" ? \"text-center\"\r\n                                  : \"text-left\",\r\n                            )}\r\n\r\n                          >\r\n                            {column.render ? (\r\n                              column.render(row[column.key], row, rowIndex)\r\n                            ) : column.isNumeric || column.isCurrency ? (\r\n                              <Accounting isCurrency={column.isCurrency}>\r\n                                {row[column.key]}\r\n                              </Accounting>\r\n                            ) : (\r\n                              row[column.key]\r\n                            )}\r\n                          </td>\r\n                        ))}\r\n                      </tr>\r\n                      {/* Sub-row Rendering */}\r\n                      {renderSubRow && isExpanded && (\r\n                        <tr className=\"bg-[var(--color-sys-brand-primary)]/[0.015]\">\r\n                          <td colSpan={columns.length + (selectable ? 1 : 0) + 1} className=\"p-0\">\r\n                            <div className=\"p-4 pl-12 border-b border-[var(--color-sys-text-tertiary)]/10\">\r\n                              {renderSubRow(row)}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      )}\r\n                    </React.Fragment>\r\n                  );\r\n                })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Pagination */}\r\n        {\r\n          totalPages > 1 && (\r\n            <div className=\"flex items-center justify-between px-4 py-3 border-t border-[var(--color-sys-text-tertiary)]/20 bg-[var(--color-sys-bg-tertiary)]/30\">\r\n              <SmallText className=\"text-[var(--color-sys-text-secondary)]\">\r\n                Showing {startIndex + 1} to {endIndex} of {total} results\r\n              </SmallText>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => handlePageChange(currentPage - 1)}\r\n                  disabled={currentPage === 1}\r\n                >\r\n                  <ChevronLeft size={16} />\r\n                  Previous\r\n                </Button>\r\n\r\n                <div className=\"flex items-center gap-1\">\r\n                  {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                    let pageNum: number;\r\n                    if (totalPages <= 5) {\r\n                      pageNum = i + 1;\r\n                    } else if (currentPage <= 3) {\r\n                      pageNum = i + 1;\r\n                    } else if (currentPage >= totalPages - 2) {\r\n                      pageNum = totalPages - 4 + i;\r\n                    } else {\r\n                      pageNum = currentPage - 2 + i;\r\n                    }\r\n\r\n                    return (\r\n                      <Button\r\n                        key={pageNum}\r\n                        variant={currentPage === pageNum ? \"default\" : \"ghost\"}\r\n                        size=\"sm\"\r\n                        onClick={() => handlePageChange(pageNum)}\r\n                        className=\"w-8 h-8 p-0\"\r\n                      >\r\n                        {pageNum}\r\n                      </Button>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => handlePageChange(currentPage + 1)}\r\n                  disabled={currentPage === totalPages}\r\n                >\r\n                  Next\r\n                  <ChevronRight size={16} />\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )\r\n        }\r\n      </Card >\r\n    </div >\r\n  );\r\n};\r\n\r\nconst DataTable = React.memo(DataTableComponent) as typeof DataTableComponent;\r\n\r\nexport { DataTable };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DocumentActions.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":2,"endColumn":66}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Save, X, Edit2, Trash2, Plus, FileDown } from \"lucide-react\";\r\n\r\nexport interface DocumentActionsProps {\r\n    mode: \"view\" | \"edit\";\r\n    onEdit?: () => void;\r\n    onSave?: () => void;\r\n    onCancel?: () => void;\r\n    onDelete?: () => void;\r\n    onDownload?: () => void;\r\n    onCreate?: () => void;\r\n    isSaving?: boolean;\r\n    isDeleting?: boolean;\r\n    canDelete?: boolean;\r\n    customActions?: React.ReactNode;\r\n}\r\n\r\nexport function DocumentActions({\r\n    mode,\r\n    onEdit,\r\n    onSave,\r\n    onCancel,\r\n    onDelete,\r\n    onDownload,\r\n    onCreate,\r\n    isSaving = false,\r\n    isDeleting = false,\r\n    canDelete = true,\r\n    customActions,\r\n}: DocumentActionsProps) {\r\n    if (mode === \"edit\") {\r\n        return (\r\n            <div className=\"flex gap-3\">\r\n                {onCancel && (\r\n                    <Button variant=\"ghost\" size=\"sm\" onClick={onCancel} disabled={isSaving}>\r\n                        <X size={16} />\r\n                        Cancel\r\n                    </Button>\r\n                )}\r\n                {onSave && (\r\n                    <Button variant=\"default\" size=\"sm\" onClick={onSave} disabled={isSaving}>\r\n                        <Save size={16} />\r\n                        {isSaving ? \"Saving...\" : \"Save\"}\r\n                    </Button>\r\n                )}\r\n                {customActions}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex gap-3\">\r\n            {onDownload && (\r\n                <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={onDownload}\r\n                    className=\"text-emerald-700 border-emerald-200 bg-emerald-50 hover:bg-emerald-100\"\r\n                >\r\n                    <FileDown size={16} />\r\n                    Excel\r\n                </Button>\r\n            )}\r\n            {onCreate && (\r\n                <Button variant=\"secondary\" size=\"sm\" onClick={onCreate}>\r\n                    <Plus size={16} />\r\n                    Create\r\n                </Button>\r\n            )}\r\n            {onEdit && (\r\n                <Button variant=\"default\" size=\"sm\" onClick={onEdit}>\r\n                    <Edit2 size={16} />\r\n                    Edit\r\n                </Button>\r\n            )}\r\n            {onDelete && canDelete && (\r\n                <Button variant=\"destructive\" size=\"sm\" onClick={onDelete} disabled={isDeleting}>\r\n                    <Trash2 size={16} />\r\n                    {isDeleting ? \"Deleting...\" : \"Delete\"}\r\n                </Button>\r\n            )}\r\n            {customActions}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DocumentTrace.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":71,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":71,"endColumn":54},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":72,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":72,"endColumn":59},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":98,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":98,"endColumn":76},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":110,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":110,"endColumn":44}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { H3, Body, SmallText } from \"../atoms/Typography\";\r\nimport { Badge } from \"../atoms/Badge\";\r\nimport { ArrowRight, FileText, Truck, Receipt } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * DocumentTrace Organism - Atomic Design System v1.0\r\n * Shows PO ΓåÆ DC ΓåÆ Invoice linkage hierarchy\r\n * Must display real document numbers and statuses\r\n */\r\n\r\nexport interface DocumentNode {\r\n  type: \"po\" | \"dc\" | \"invoice\";\r\n  number: string;\r\n  date: string;\r\n  status: \"pending\" | \"completed\" | \"active\";\r\n  link?: string;\r\n}\r\n\r\nexport interface DocumentTraceProps {\r\n  documents: DocumentNode[];\r\n  className?: string;\r\n}\r\n\r\nconst documentConfig = {\r\n  po: {\r\n    icon: FileText,\r\n    label: \"Purchase Order\",\r\n    color: \"text-[#1A3D7C]\",\r\n    bgColor: \"bg-[#1A3D7C]/10\",\r\n  },\r\n  dc: {\r\n    icon: Truck,\r\n    label: \"Delivery Challan\",\r\n    color: \"text-[#2BB7A0]\",\r\n    bgColor: \"bg-[#2BB7A0]/10\",\r\n  },\r\n  invoice: {\r\n    icon: Receipt,\r\n    label: \"GST Invoice\",\r\n    color: \"text-[#F59E0B]\",\r\n    bgColor: \"bg-[#F59E0B]/10\",\r\n  },\r\n};\r\n\r\nconst DocumentNode: React.FC<{ node: DocumentNode; isLast: boolean }> = ({\r\n  node,\r\n  isLast,\r\n}) => {\r\n  const config = documentConfig[node.type];\r\n  const Icon = config.icon;\r\n\r\n  const content = (\r\n    <div\r\n      className={cn(\r\n        \"flex items-center gap-3 p-4 rounded-lg border-2 transition-all\",\r\n        node.link\r\n          ? \"cursor-pointer hover:border-[#1A3D7C] hover:shadow-md\"\r\n          : \"border-[#E5E7EB]\",\r\n      )}\r\n    >\r\n      <div className={cn(\"p-2 rounded\", config.bgColor)}>\r\n        <Icon size={20} className={config.color} />\r\n      </div>\r\n      <div className=\"flex-1 min-w-0\">\r\n        <SmallText className=\"uppercase mb-0.5\">{config.label}</SmallText>\r\n        <div className=\"font-semibold text-[#111827]\">{node.number}</div>\r\n        <div className=\"text-[12px] text-[#6B7280] mt-0.5\">{node.date}</div>\r\n      </div>\r\n      <Badge\r\n        variant={\r\n          node.status === \"completed\"\r\n            ? \"success\"\r\n            : node.status === \"active\"\r\n              ? \"default\"\r\n              : \"warning\"\r\n        }\r\n      >\r\n        {node.status}\r\n      </Badge>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-4\">\r\n      {node.link ? (\r\n        <a href={node.link} className=\"flex-1\">\r\n          {content}\r\n        </a>\r\n      ) : (\r\n        <div className=\"flex-1\">{content}</div>\r\n      )}\r\n\r\n      {!isLast && <ArrowRight size={20} className=\"text-[#9CA3AF] shrink-0\" />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const DocumentTrace: React.FC<DocumentTraceProps> = ({\r\n  documents,\r\n  className,\r\n}) => {\r\n  return (\r\n    <Card className={cn(\"p-6\", className)}>\r\n      <H3 className=\"mb-4\">Document Traceability</H3>\r\n      <Body className=\"text-[#6B7280] mb-6\">\r\n        Track the complete document flow from purchase order to invoice\r\n      </Body>\r\n\r\n      <div className=\"flex items-center gap-4 overflow-x-auto pb-2\">\r\n        {documents.map((doc, index) => (\r\n          <DocumentNode\r\n            key={index}\r\n            node={doc}\r\n            isLast={index === documents.length - 1}\r\n          />\r\n        ))}\r\n      </div>\r\n    </Card>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\FormField.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":2,"endColumn":69},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Input' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":3,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":3,"endColumn":64}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { Label } from \"@/components/design-system/atoms/Typography\";\r\nimport { Input } from \"@/components/design-system/atoms/Input\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface FormFieldProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n    label: string;\r\n    error?: string;\r\n    helperText?: string;\r\n    containerClassName?: string;\r\n}\r\n\r\nexport function FormField({\r\n    label,\r\n    error,\r\n    helperText,\r\n    containerClassName,\r\n    className,\r\n    ...inputProps\r\n}: FormFieldProps) {\r\n    return (\r\n        <div className={cn(\"space-y-1.5\", containerClassName)}>\r\n            <Label>{label}</Label>\r\n            <Input {...inputProps} className={className} />\r\n            {error && <p className=\"text-sm text-red-600\">{error}</p>}\r\n            {helperText && !error && <p className=\"text-sm text-slate-500\">{helperText}</p>}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\GlobalSearch.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'History' is defined but never used.","line":13,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":10,"suggestions":[{"messageId":"removeVar","data":{"varName":"History"},"fix":{"range":[178,190],"text":""},"desc":"Remove unused variable 'History'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'History' is defined but never used.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":10},{"ruleId":"no-unused-vars","severity":1,"message":"'Trash2' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":9,"suggestions":[{"messageId":"removeVar","data":{"varName":"Trash2"},"fix":{"range":[190,201],"text":""},"desc":"Remove unused variable 'Trash2'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Trash2' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":9},{"ruleId":"no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Calendar"},"fix":{"range":[249,262],"text":""},"desc":"Remove unused variable 'Calendar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'CreditCard' is defined but never used.","line":19,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"CreditCard"},"fix":{"range":[262,277],"text":""},"desc":"Remove unused variable 'CreditCard'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CreditCard' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":20,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"ChevronRight"},"fix":{"range":[277,294],"text":""},"desc":"Remove unused variable 'ChevronRight'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronRight' is defined but never used.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'clearRecents' is assigned a value but never used.","line":123,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":123,"endColumn":21,"suggestions":[{"messageId":"removeVar","data":{"varName":"clearRecents"},"fix":{"range":[3016,3139],"text":""},"desc":"Remove unused variable 'clearRecents'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'clearRecents' is assigned a value but never used.","line":123,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":123,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":139,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":139,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":139,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":139,"endColumn":21},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":325,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":325,"endColumn":103},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":353,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":353,"endColumn":178},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":459,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":459,"endColumn":60},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":493,"column":12,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":493,"endColumn":151},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":563,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":563,"endColumn":76}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport {\r\n  Search,\r\n  Loader2,\r\n  FileText,\r\n  Truck,\r\n  Receipt,\r\n  Package,\r\n  ArrowRight,\r\n  X,\r\n  History,\r\n  Trash2,\r\n  Settings,\r\n  PlusCircle,\r\n  LayoutDashboard,\r\n  Calendar,\r\n  CreditCard,\r\n  ChevronRight,\r\n} from \"lucide-react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { api, SearchResult } from \"@/lib/api\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { StatusBadge } from \"./StatusBadge\";\r\n\r\n// --- Types ---\r\ntype NavItem = {\r\n  type: \"NAV\";\r\n  id: string;\r\n  label: string;\r\n  subLabel?: string;\r\n  keywords: string[];\r\n  icon: any;\r\n  path: string;\r\n};\r\n\r\ntype GlobalItem = SearchResult | NavItem;\r\n\r\n// --- Static Navigation Commands ---\r\nconst NAV_COMMANDS: NavItem[] = [\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-new-inv\",\r\n    label: \"Create New Invoice\",\r\n    subLabel: \"Go to invoice creation\",\r\n    keywords: [\"invoice\", \"new\", \"create\", \"bill\"],\r\n    icon: PlusCircle,\r\n    path: \"/invoice/create\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-dashboard\",\r\n    label: \"Dashboard\",\r\n    subLabel: \"View overview & stats\",\r\n    keywords: [\"home\", \"main\", \"stats\"],\r\n    icon: LayoutDashboard,\r\n    path: \"/dashboard\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-pos\",\r\n    label: \"Purchase Orders\",\r\n    subLabel: \"View all POs\",\r\n    keywords: [\"po\", \"order\", \"purchase\"],\r\n    icon: Package,\r\n    path: \"/po\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-invs\",\r\n    label: \"All Invoices\",\r\n    subLabel: \"View invoice register\",\r\n    keywords: [\"bill\", \"history\"],\r\n    icon: Receipt,\r\n    path: \"/invoice\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-settings\",\r\n    label: \"Settings\",\r\n    subLabel: \"App configuration\",\r\n    keywords: [\"config\", \"admin\"],\r\n    icon: Settings,\r\n    path: \"/settings\",\r\n  },\r\n];\r\n\r\nexport default function GlobalSearch() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [results, setResults] = useState<SearchResult[]>([]);\r\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n\r\n  const router = useRouter();\r\n  const searchRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const listRef = useRef<HTMLDivElement>(null);\r\n  const portalRef = useRef<HTMLDivElement>(null);\r\n\r\n  // --- Logic: Load/Save Recents ---\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(\"senstosales-recent-searches\");\r\n    if (saved) setRecentSearches(JSON.parse(saved));\r\n  }, []);\r\n\r\n  const saveRecentSearch = (term: string) => {\r\n    if (!term) return;\r\n    const newRecents = [\r\n      term,\r\n      ...recentSearches.filter((r) => r !== term),\r\n    ].slice(0, 5);\r\n    setRecentSearches(newRecents);\r\n    localStorage.setItem(\r\n      \"senstosales-recent-searches\",\r\n      JSON.stringify(newRecents),\r\n    );\r\n  };\r\n\r\n  const clearRecents = () => {\r\n    setRecentSearches([]);\r\n    localStorage.removeItem(\"senstosales-recent-searches\");\r\n  };\r\n\r\n  // --- Logic: Search ---\r\n  useEffect(() => {\r\n    if (query.trim().length === 0) {\r\n      setResults([]);\r\n      return;\r\n    }\r\n    const search = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const data = await api.searchGlobal(query);\r\n        setResults(data);\r\n      } catch (error) {\r\n        setResults([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    const debounce = setTimeout(search, 300);\r\n    return () => clearTimeout(debounce);\r\n  }, [query]);\r\n\r\n  // --- Logic: Combined Items (Nav + Data) ---\r\n  const filteredNavItems = useMemo(() => {\r\n    if (!query) return [];\r\n    const q = query.toLowerCase();\r\n    return NAV_COMMANDS.filter(\r\n      (cmd) =>\r\n        cmd.label.toLowerCase().includes(q) ||\r\n        cmd.keywords.some((k) => k.includes(q)),\r\n    );\r\n  }, [query]);\r\n\r\n  const allItems = useMemo<GlobalItem[]>(() => {\r\n    const raw = [...filteredNavItems, ...results];\r\n    const seen = new Set<string>();\r\n    return raw.filter((item) => {\r\n      const key = `${item.type}-${item.id}`;\r\n      if (seen.has(key)) return false;\r\n      seen.add(key);\r\n      return true;\r\n    });\r\n  }, [filteredNavItems, results]);\r\n\r\n  // Reset selected index when items change\r\n  useEffect(() => {\r\n    setSelectedIndex(0);\r\n  }, [allItems.length]);\r\n\r\n  // --- Scroll to Active Item ---\r\n  useEffect(() => {\r\n    if (listRef.current) {\r\n      const activeEl = listRef.current.children[selectedIndex] as HTMLElement;\r\n      if (activeEl) {\r\n        activeEl.scrollIntoView({ block: \"nearest\", behavior: \"smooth\" });\r\n      }\r\n    }\r\n  }, [selectedIndex]);\r\n\r\n  // --- Logic: Handlers ---\r\n  const handleItemSelect = (item: GlobalItem) => {\r\n    setIsOpen(false);\r\n    setQuery(\"\");\r\n\r\n    if (item.type === \"NAV\") {\r\n      router.push(item.path);\r\n    } else {\r\n      // Search Result\r\n      saveRecentSearch(query);\r\n      if (item.type === \"PO\") router.push(`/po/${item.number}`);\r\n      else if (item.type === \"DC\") router.push(`/dc/${item.number}`);\r\n      else if (item.type === \"Invoice\")\r\n        router.push(`/invoice/${encodeURIComponent(item.number)}`);\r\n      else if (item.type === \"SRV\")\r\n        router.push(`/reports?tab=reconciliation&search=${item.number}`);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) => (prev + 1) % allItems.length);\r\n    } else if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setSelectedIndex(\r\n        (prev) => (prev - 1 + allItems.length) % allItems.length,\r\n      );\r\n    } else if (e.key === \"Enter\" && allItems[selectedIndex]) {\r\n      e.preventDefault();\r\n      handleItemSelect(allItems[selectedIndex]);\r\n    } else if (e.key === \"Escape\") {\r\n      setIsOpen(false);\r\n      inputRef.current?.blur();\r\n    }\r\n  };\r\n\r\n  // --- Global Ctrl+K ---\r\n  useEffect(() => {\r\n    const handleGlobalK = (e: KeyboardEvent) => {\r\n      if (e.key.toLowerCase() === \"k\" && (e.ctrlKey || e.metaKey)) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        inputRef.current?.focus();\r\n        setIsOpen(true);\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", handleGlobalK);\r\n    return () => document.removeEventListener(\"keydown\", handleGlobalK);\r\n  }, []);\r\n\r\n  // --- Click Outside ---\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    return () => setMounted(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const clickedMain = searchRef.current?.contains(e.target as Node);\r\n      const clickedPortal = portalRef.current?.contains(e.target as Node);\r\n      if (!clickedMain && !clickedPortal) setIsOpen(false);\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // --- Calculate Portal Position ---\r\n  const [position, setPosition] = useState<{\r\n    top: number;\r\n    left: number;\r\n    width: number;\r\n  } | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && searchRef.current) {\r\n      const rect = searchRef.current.getBoundingClientRect();\r\n      setPosition({\r\n        top: rect.bottom + 8,\r\n        left: rect.left,\r\n        width: rect.width,\r\n      });\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // --- Render Helpers ---\r\n  const selectedItem = allItems[selectedIndex];\r\n\r\n  const renderIcon = (item: GlobalItem, className?: string) => {\r\n    if (item.type === \"NAV\") {\r\n      const Icon = item.icon;\r\n      return <Icon className={className || \"w-4 h-4\"} />;\r\n    }\r\n    if (item.type === \"PO\") return <Package className={className} />;\r\n    if (item.type === \"DC\") return <Truck className={className} />;\r\n    if (item.type === \"Invoice\") return <Receipt className={className} />;\r\n    return <FileText className={className} />;\r\n  };\r\n\r\n  const portalContent = position ? (\r\n    <div\r\n      ref={portalRef}\r\n      className=\"fixed z-[9999] flex flex-col bg-white/70 backdrop-blur-3xl border border-white/40 shadow-[0_32px_128px_rgba(0,0,0,0.15)] rounded-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200 ring-1 ring-white/20\"\r\n      style={{\r\n        top: position.top,\r\n        left: position.left,\r\n        width: position.width,\r\n        height: 480,\r\n        transformOrigin: \"top center\",\r\n      }}\r\n    >\r\n      {/* 2-Pane Layout */}\r\n      <div className=\"flex flex-1 overflow-hidden h-full\">\r\n        {/* Left Pane: List */}\r\n        <div className=\"w-[50%] border-r border-slate-100 flex flex-col bg-slate-50/50\">\r\n          {/* Empty State */}\r\n          {query && allItems.length === 0 && !loading && (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center text-slate-400\">\r\n              <Search className=\"w-8 h-8 opacity-20 mb-2\" />\r\n              <span className=\"text-xs\">No results found</span>\r\n            </div>\r\n          )}\r\n\r\n          {/* Initial Empty State */}\r\n          {!query && allItems.length === 0 && (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center text-slate-400 p-8 text-center\">\r\n              <Search className=\"w-8 h-8 opacity-20 mb-4\" />\r\n              <p className=\"text-sm font-medium text-slate-600\">\r\n                Type to search...\r\n              </p>\r\n              <p className=\"text-xs mt-1 text-slate-400\">\r\n                Find POs, Invoices, or jump to pages\r\n              </p>\r\n\r\n              {/* Show Recents if any within empty state */}\r\n              {recentSearches.length > 0 && (\r\n                <div className=\"mt-8 w-full\">\r\n                  <div className=\"text-[10px] font-bold uppercase tracking-widest text-slate-300 mb-2\">\r\n                    Recent\r\n                  </div>\r\n                  {recentSearches.map((term) => (\r\n                    <button\r\n                      key={term}\r\n                      onClick={() => {\r\n                        setQuery(term);\r\n                        inputRef.current?.focus();\r\n                      }}\r\n                      className=\"block w-full text-left px-3 py-1.5 text-sm text-slate-500 hover:text-blue-600 hover:bg-slate-100 rounded\"\r\n                    >\r\n                      {term}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Items List */}\r\n          {allItems.length > 0 && (\r\n            <div\r\n              ref={listRef}\r\n              className=\"flex-1 overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-slate-200\"\r\n            >\r\n              {/* Header for Nav if present */}\r\n              {filteredNavItems.length > 0 && (\r\n                <div className=\"px-4 py-2 text-[10px] font-black text-slate-400 uppercase tracking-[0.25em] sticky top-0 bg-white/50 backdrop-blur z-10 border-b border-white/20\">\r\n                  Commands\r\n                </div>\r\n              )}\r\n\r\n              {allItems.map((item, idx) => {\r\n                const isSelected = selectedIndex === idx;\r\n                return (\r\n                  <button\r\n                    key={`${item.type}-${item.id}`}\r\n                    onClick={() => handleItemSelect(item)}\r\n                    onMouseEnter={() => setSelectedIndex(idx)}\r\n                    className={cn(\r\n                      \"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-all duration-150 mb-0.5\",\r\n                      isSelected\r\n                        ? \"bg-blue-600 text-white shadow-sm\"\r\n                        : \"hover:bg-slate-200/50 text-slate-700\",\r\n                    )}\r\n                  >\r\n                    {renderIcon(\r\n                      item,\r\n                      cn(\r\n                        \"w-4 h-4\",\r\n                        isSelected ? \"text-white\" : \"text-slate-400\",\r\n                      ),\r\n                    )}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div\r\n                        className={cn(\r\n                          \"text-sm font-medium truncate\",\r\n                          isSelected ? \"text-white\" : \"text-slate-900\",\r\n                        )}\r\n                      >\r\n                        {item.type === \"NAV\" ? item.label : item.number}\r\n                      </div>\r\n                      <div\r\n                        className={cn(\r\n                          \"text-[11px] truncate\",\r\n                          isSelected ? \"text-blue-100\" : \"text-slate-500\",\r\n                        )}\r\n                      >\r\n                        {item.type === \"NAV\"\r\n                          ? item.subLabel\r\n                          : (item as SearchResult).party}\r\n                      </div>\r\n                    </div>\r\n                    {isSelected && (\r\n                      <ArrowRight size={14} className=\"text-white opacity-80\" />\r\n                    )}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right Pane: Preview */}\r\n        <div className=\"w-[50%] bg-white/40 backdrop-blur-md p-8 flex flex-col border-l border-white/20\">\r\n          {selectedItem ? (\r\n            <div className=\"animate-in fade-in zoom-in-95 duration-300\">\r\n              <div className=\"w-14 h-14 rounded-2xl bg-slate-50 border border-slate-100 flex items-center justify-center mb-6 shadow-sm\">\r\n                {renderIcon(selectedItem, \"w-7 h-7 text-slate-600\")}\r\n              </div>\r\n\r\n              <h3 className=\"text-2xl font-black text-slate-900 leading-tight mb-1 font-heading uppercase tracking-tight\">\r\n                {selectedItem.type === \"NAV\"\r\n                  ? selectedItem.label\r\n                  : selectedItem.number}\r\n              </h3>\r\n              <p className=\"text-sm text-slate-500 mb-8\">\r\n                {selectedItem.type === \"NAV\"\r\n                  ? \"Navigation Command\"\r\n                  : selectedItem.type_label}\r\n              </p>\r\n\r\n              {/* Metadata Grid */}\r\n              <div className=\"space-y-5\">\r\n                {selectedItem.type !== \"NAV\" && (\r\n                  <>\r\n                    {/* Removed Party Row completely as requested */}\r\n                    <div className=\"flex justify-between py-2 border-b border-slate-50\">\r\n                      <span className=\"text-xs text-slate-400 font-medium uppercase tracking-wider\">\r\n                        Date\r\n                      </span>\r\n                      <span className=\"text-sm text-slate-700 font-semibold\">\r\n                        {(selectedItem as SearchResult).date || \"-\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between py-2 border-b border-slate-50\">\r\n                      <span className=\"text-xs text-slate-400 font-medium uppercase tracking-wider\">\r\n                        Amount\r\n                      </span>\r\n                      <span className=\"text-sm text-slate-900 font-mono font-bold\">\r\n                        {(selectedItem as SearchResult).amount\r\n                          ? `Γé╣${(selectedItem as SearchResult).amount?.toLocaleString()}`\r\n                          : \"-\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between py-2 border-b border-slate-50\">\r\n                      <span className=\"text-xs text-slate-400 font-medium uppercase tracking-wider\">\r\n                        Status\r\n                      </span>\r\n                      <StatusBadge\r\n                        status={\r\n                          (selectedItem as SearchResult).status || \"Active\"\r\n                        }\r\n                        className=\"text-[10px] py-0.5 px-2\"\r\n                      />\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedItem.type === \"NAV\" && (\r\n                  <div className=\"p-4 bg-blue-50/50 rounded-xl border border-blue-100 text-sm text-blue-700 leading-relaxed\">\r\n                    {selectedItem.subLabel}. <br />\r\n                    Press <strong className=\"font-semibold\">Enter</strong> to\r\n                    navigate immediately.\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"mt-auto pt-8 flex gap-3\">\r\n                <button\r\n                  onClick={() => handleItemSelect(selectedItem)}\r\n                  className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold py-3 rounded-xl shadow-sm transition-all hover:shadow-md hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2\"\r\n                >\r\n                  <ArrowRight size={16} />\r\n                  Open{\" \"}\r\n                  {selectedItem.type === \"NAV\" ? \"Page\" : selectedItem.type}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex-1 flex items-center justify-center text-slate-300 text-sm\">\r\n              Select an item to preview\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Footer / Shortcuts Hint */}\r\n      <div className=\"bg-slate-50/80 backdrop-blur border-t border-slate-100 px-4 py-2.5 flex items-center justify-between text-[10px] text-slate-400\">\r\n        <div className=\"flex gap-4\">\r\n          <span className=\"flex items-center gap-1.5\">\r\n            <kbd className=\"bg-white border shadow-sm rounded px-1.5 py-0.5 font-sans min-w-[20px] text-center\">\r\n              Γå╡\r\n            </kbd>{\" \"}\r\n            Select\r\n          </span>\r\n          <span className=\"flex items-center gap-1.5\">\r\n            <kbd className=\"bg-white border shadow-sm rounded px-1.5 py-0.5 font-sans min-w-[20px] text-center\">\r\n              Γåô\r\n            </kbd>{\" \"}\r\n            Navigate\r\n          </span>\r\n        </div>\r\n        <div className=\"font-medium opacity-50\">SenstoSales Raycast</div>\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n\r\n  return (\r\n    <>\r\n      <div ref={searchRef} className=\"relative max-w-[700px] w-full group z-50\">\r\n        <div\r\n          className={cn(\r\n            \"flex items-center gap-4 px-6 py-3.5 border-none rounded-full transition-all duration-300 ease-out\",\r\n            // Phase 1: Floating Search Pill\r\n            \"bg-white/70 backdrop-blur-xl shadow-pill\",\r\n            isOpen\r\n              ? \"shadow-xl ring-1 ring-[var(--color-sys-brand-primary)] bg-white scale-[1.01]\"\r\n              : \"hover:shadow-xl hover:scale-[1.005]\",\r\n          )}\r\n        >\r\n          {loading ? (\r\n            <Loader2 className=\"w-5 h-5 text-blue-500 animate-spin\" />\r\n          ) : (\r\n            <Search\r\n              className={cn(\r\n                \"w-5 h-5 transition-colors\",\r\n                isOpen ? \"text-[var(--color-sys-brand-primary)]\" : \"text-slate-400\",\r\n              )}\r\n            />\r\n          )}\r\n\r\n          <input\r\n            ref={inputRef}\r\n            id=\"global-search\"\r\n            name=\"global-search\"\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            onFocus={() => setIsOpen(true)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Search items, vendors, invoices...\"\r\n            className=\"flex-1 bg-transparent border-none outline-none text-sm font-medium text-slate-900 placeholder:text-slate-400\"\r\n          />\r\n\r\n          {query && (\r\n            <button\r\n              onClick={() => {\r\n                setQuery(\"\");\r\n                inputRef.current?.focus();\r\n              }}\r\n              className=\"p-1 hover:bg-slate-200 rounded-lg transition-colors\"\r\n            >\r\n              <X size={14} className=\"text-slate-400\" />\r\n            </button>\r\n          )}\r\n\r\n          <div className=\"hidden lg:flex items-center gap-1.5 px-2 py-1 bg-white rounded border border-slate-200 shadow-sm pointer-events-none select-none\">\r\n            <kbd className=\"font-mono text-[10px] font-bold text-slate-400\">\r\n              CTRL K\r\n            </kbd>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {mounted && isOpen && createPortal(portalContent, document.body)}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\ReportNavGrid.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"motion"},"fix":{"range":[164,203],"text":""},"desc":"Remove unused variable 'motion'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'motion' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16},{"ruleId":"no-unused-vars","severity":1,"message":"'id' is defined but never used.","line":11,"column":16,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"id"},"fix":{"range":[355,365],"text":""},"desc":"Remove unused variable 'id'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { NavigationCard, NavigationCardProps } from \"../molecules/NavigationCard\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport interface ReportNavGridProps {\r\n    items: (Omit<NavigationCardProps, \"onClick\"> & { id: string })[];\r\n    activeId: string;\r\n    onSelect: (id: string) => void;\r\n    className?: string;\r\n}\r\n\r\nexport const ReportNavGrid = ({\r\n    items,\r\n    activeId,\r\n    onSelect,\r\n    className,\r\n}: ReportNavGridProps) => {\r\n    return (\r\n        <div className={cn(\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4\", className)}>\r\n            {items.map((item) => (\r\n                <NavigationCard\r\n                    key={item.id}\r\n                    {...item}\r\n                    active={item.id === activeId}\r\n                    onClick={() => onSelect(item.id)}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\ReportsCharts.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":20,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":20,"endColumn":82},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":21,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":21,"endColumn":79},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":45,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":45,"endColumn":126},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":203,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":203,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":206,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":206,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":212,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":212,"endColumn":134},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":225,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":225,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":228,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":228,"endColumn":112},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":232,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":232,"endColumn":178},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":240,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":240,"endColumn":141}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n    BarChart as ReBarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    ResponsiveContainer,\r\n    Cell,\r\n    PieChart,\r\n    Pie,\r\n    ComposedChart,\r\n    Legend,\r\n} from \"recharts\";\r\nimport { Activity } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Flex, Stack, Box, Grid } from \"@/components/design-system/atoms/Layout\";\r\nimport { Body, SmallText } from \"@/components/design-system/atoms/Typography\";\r\n\r\ninterface ReportsChartsProps {\r\n    activeTab: string;\r\n    chartData: any[];\r\n}\r\n\r\nconst ReportsCharts = ({ activeTab, chartData }: ReportsChartsProps) => {\r\n    return (\r\n        <motion.div\r\n            key={`chart-${activeTab}`}\r\n            initial={{ opacity: 0, scale: 0.98 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.98 }}\r\n        >\r\n            <Grid cols=\"1\" gap={6} className=\"lg:grid-cols-3\">\r\n                {/* Main Chart Card */}\r\n                <Box className=\"lg:col-span-2 p-6 rounded-2xl bg-[var(--color-sys-bg-surface)]/40 backdrop-blur-md border-none shadow-sm transition-all duration-300 hover:shadow-lg\">\r\n                    <Flex\r\n                        align=\"center\"\r\n                        justify=\"between\"\r\n                        className=\"mb-6 border-b border-[var(--color-sys-text-tertiary)]/5 pb-2\"\r\n                    >\r\n                        <Box>\r\n                            <Body className=\"text-sm font-bold text-[var(--color-sys-brand-primary)] uppercase tracking-wide\">\r\n                                {activeTab === \"sales\" ? \"Revenue Momentum\" : \"Quality Distribution\"}\r\n                            </Body>\r\n                        </Box>\r\n                    </Flex>\r\n\r\n                    <Box className=\"h-[300px] w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            {activeTab === \"sales\" ? (\r\n                                <ComposedChart data={chartData}>\r\n                                    <CartesianGrid\r\n                                        strokeDasharray=\"3 3\"\r\n                                        vertical={false}\r\n                                        stroke=\"var(--color-sys-text-tertiary)/10\"\r\n                                    />\r\n                                    <XAxis\r\n                                        dataKey=\"name\"\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 700,\r\n                                            fill: \"var(--color-sys-text-secondary)\",\r\n                                        }}\r\n                                        dy={10}\r\n                                    />\r\n                                    <YAxis\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 700,\r\n                                            fill: \"var(--color-sys-text-secondary)\",\r\n                                        }}\r\n                                        tickFormatter={(value) => {\r\n                                            if (value >= 10000000) return `${(value / 10000000).toFixed(1)}Cr`;\r\n                                            if (value >= 100000) return `${(value / 100000).toFixed(1)}L`;\r\n                                            if (value >= 1000) return `${(value / 1000).toFixed(0)}k`;\r\n                                            return String(value);\r\n                                        }}\r\n                                    />\r\n                                    <Tooltip\r\n                                        contentStyle={{\r\n                                            borderRadius: \"16px\",\r\n                                            border: \"none\",\r\n                                            boxShadow: \"0 8px 32px rgba(0,0,0,0.05)\",\r\n                                            background: \"var(--color-sys-bg-surface)\",\r\n                                            backdropFilter: \"blur(10px)\",\r\n                                            padding: \"12px\",\r\n                                        }}\r\n                                        labelStyle={{\r\n                                            fontWeight: 800,\r\n                                            color: \"var(--color-sys-text-primary)\",\r\n                                            fontSize: \"12px\",\r\n                                            marginBottom: \"4px\",\r\n                                        }}\r\n                                        formatter={(value: any, name: any) => {\r\n                                            let formattedValue = value;\r\n                                            if (typeof value === 'number') {\r\n                                                if (value >= 10000000) formattedValue = `${(value / 10000000).toFixed(2)}Cr`;\r\n                                                else if (value >= 100000) formattedValue = `${(value / 100000).toFixed(2)}L`;\r\n                                                else if (value >= 1000) formattedValue = `${(value / 1000).toFixed(1)}k`;\r\n                                            }\r\n                                            return [formattedValue, name];\r\n                                        }}\r\n                                    />\r\n                                    <Legend\r\n                                        verticalAlign=\"top\"\r\n                                        height={36}\r\n                                        iconType=\"circle\"\r\n                                        wrapperStyle={{ fontSize: \"12px\", fontWeight: 600, color: \"var(--color-sys-text-secondary)\" }}\r\n                                    />\r\n                                    <Bar\r\n                                        dataKey=\"delivered_value\"\r\n                                        name=\"Delivered\"\r\n                                        barSize={20}\r\n                                        fill=\"var(--color-sys-status-success)\"\r\n                                        radius={[4, 4, 0, 0]}\r\n                                    />\r\n                                    <Bar\r\n                                        dataKey=\"ordered_value\"\r\n                                        name=\"Ordered\"\r\n                                        barSize={20}\r\n                                        fill=\"var(--color-sys-brand-primary)\"\r\n                                        radius={[4, 4, 0, 0]}\r\n                                    />\r\n                                </ComposedChart>\r\n                            ) : (\r\n                                <ReBarChart data={chartData} layout=\"vertical\" margin={{ left: 40 }}>\r\n                                    <XAxis type=\"number\" hide />\r\n                                    <YAxis\r\n                                        dataKey=\"name\"\r\n                                        type=\"category\"\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 700,\r\n                                            fill: \"var(--color-sys-text-secondary)\",\r\n                                        }}\r\n                                    />\r\n                                    <Tooltip\r\n                                        formatter={(value: any) => [\r\n                                            typeof value === \"number\" ? Math.round(value) : value,\r\n                                            \"\",\r\n                                        ]}\r\n                                        contentStyle={{\r\n                                            borderRadius: \"16px\",\r\n                                            border: \"1px solid rgba(255,255,255,0.2)\",\r\n                                            boxShadow: \"0 8px 32px rgba(0,0,0,0.05)\",\r\n                                            background: \"rgba(255,255,255,0.8)\",\r\n                                            backdropFilter: \"blur(10px)\",\r\n                                        }}\r\n                                    />\r\n                                    <Bar dataKey=\"value\" radius={[0, 8, 8, 0]} barSize={24} fill=\"#3B82F6\">\r\n                                        {chartData.map((entry: any, index: number) => (\r\n                                            <Cell key={`cell-${index}`} fill={entry.color} />\r\n                                        ))}\r\n                                    </Bar>\r\n                                </ReBarChart>\r\n                            )}\r\n                        </ResponsiveContainer>\r\n                    </Box>\r\n                </Box>\r\n\r\n                {/* Secondary Charts Stack */}\r\n                <Stack gap={4}>\r\n                    <Flex\r\n                        align=\"center\"\r\n                        justify=\"center\"\r\n                        direction=\"col\"\r\n                        className=\"p-6 rounded-2xl bg-white/40 backdrop-blur-md shadow-sm text-center\"\r\n                    >\r\n                        <Flex align=\"center\" justify=\"center\" className=\"relative w-32 h-32\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <PieChart>\r\n                                    <Pie\r\n                                        data={[\r\n                                            { name: \"Growth\", value: 75, fill: \"var(--color-sys-brand-primary)\" },\r\n                                            {\r\n                                                name: \"Remaining\",\r\n                                                value: 25,\r\n                                                fill: \"#e2e8f0\",\r\n                                            },\r\n                                        ]}\r\n                                        cx=\"50%\"\r\n                                        cy=\"50%\"\r\n                                        innerRadius={50}\r\n                                        outerRadius={65}\r\n                                        dataKey=\"value\"\r\n                                        startAngle={90}\r\n                                        endAngle={-270}\r\n                                        stroke=\"#ffffff\"\r\n                                        strokeWidth={2}\r\n                                    />\r\n                                </PieChart>\r\n                            </ResponsiveContainer>\r\n                            <Stack align=\"center\" justify=\"center\" className=\"absolute inset-0\">\r\n                                <Body className=\"text-2xl font-black text-[var(--color-sys-brand-primary)]\">\r\n                                    75%\r\n                                </Body>\r\n                                <SmallText className=\"text-[10px] text-[var(--color-sys-brand-primary)] font-bold uppercase tracking-wider leading-none\">\r\n                                    Margin\r\n                                </SmallText>\r\n                            </Stack>\r\n                        </Flex>\r\n                        <Box className=\"mt-4\">\r\n                            <Body className=\"text-[11px] font-black text-[var(--color-sys-text-secondary)] uppercase tracking-widest\">\r\n                                Gross Profit Margin\r\n                            </Body>\r\n                        </Box>\r\n                    </Flex>\r\n\r\n                    <Flex\r\n                        justify=\"between\"\r\n                        direction=\"col\"\r\n                        className=\"p-6 rounded-2xl bg-white/40 backdrop-blur-md shadow-sm transition-all duration-300 hover:shadow-lg\"\r\n                    >\r\n                        <Flex align=\"center\" justify=\"between\">\r\n                            <Stack>\r\n                                <SmallText className=\"text-[10px] font-black text-[var(--color-sys-text-secondary)] uppercase tracking-widest leading-none\">\r\n                                    Quick Ratio\r\n                                </SmallText>\r\n                                <Body className=\"text-2xl font-black text-[var(--color-sys-text-primary)] mt-1\">\r\n                                    0.9:8\r\n                                </Body>\r\n                            </Stack>\r\n                            <Box className=\"w-10 h-10 rounded-xl flex items-center justify-center bg-[var(--color-sys-status-warning)]/10 text-[var(--color-sys-status-warning)]\">\r\n                                <Activity size={20} />\r\n                            </Box>\r\n                        </Flex>\r\n                        <Box className=\"mt-4\">\r\n                            <Box className=\"w-full bg-[var(--color-sys-bg-tertiary)]/50 h-2.5 rounded-full overflow-hidden p-[2px]\">\r\n                                <Box className=\"bg-gradient-to-r from-amber-400 to-amber-600 h-full rounded-full w-[45%]\" />\r\n                            </Box>\r\n                            <SmallText className=\"text-[10px] text-[var(--color-sys-text-tertiary)] font-medium mt-3 italic leading-relaxed\">\r\n                                Liquid assets vs Current liabilities dashboard.\r\n                            </SmallText>\r\n                        </Box>\r\n                    </Flex>\r\n                </Stack>\r\n            </Grid>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default ReportsCharts;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\ReportsToolbar.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":3,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"useState"},"fix":{"range":[29,43],"text":""},"desc":"Remove unused variable 'useState'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useState' is defined but never used.","line":3,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'FormField' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":19,"suggestions":[{"messageId":"removeVar","data":{"varName":"FormField"},"fix":{"range":[59,110],"text":""},"desc":"Remove unused variable 'FormField'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FormField' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"no-unused-vars","severity":1,"message":"'start' is defined but never used.","line":18,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"start"},"fix":{"range":[502,516],"text":""},"desc":"Remove unused variable 'start'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'end' is defined but never used.","line":18,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"end"},"fix":{"range":[515,528],"text":""},"desc":"Remove unused variable 'end'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":48,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":48,"endColumn":121},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":55,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":55,"endColumn":121},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":75}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { FormField } from \"../molecules/FormField\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { FileSpreadsheet, Calendar } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ReportsToolbar Organism - Atomic Design System v1.0\r\n * Date range selector + Module selector + Export buttons\r\n * Used in Reports page\r\n */\r\n\r\nexport interface ReportsToolbarProps {\r\n  startDate: string;\r\n  endDate: string;\r\n  onDateChange: (start: string, end: string) => void;\r\n  onExport?: () => void;\r\n  loading?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport const ReportsToolbar: React.FC<ReportsToolbarProps> = ({\r\n  startDate,\r\n  endDate,\r\n  onDateChange,\r\n  onExport,\r\n  loading = false,\r\n  className,\r\n}) => {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"flex flex-col sm:flex-row items-center justify-between gap-4 py-2 px-4\",\r\n        \"bg-white/50 backdrop-blur-sm rounded-xl border border-slate-200 shadow-sm\",\r\n        className,\r\n      )}\r\n    >\r\n      {/* Date Range Selection */}\r\n      <div className=\"flex items-center gap-3\">\r\n        <div className=\"flex items-center gap-2 bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-white/40 shadow-[0_2px_10px_rgba(0,0,0,0.02)] focus-within:ring-2 focus-within:ring-blue-500/10 transition-all\">\r\n          <Calendar size={14} className=\"text-blue-600 mr-0.5\" />\r\n          <input\r\n            type=\"date\"\r\n            value={startDate}\r\n            onChange={(e) => onDateChange(e.target.value, endDate)}\r\n            className=\"bg-transparent border-none text-[12px] font-bold text-slate-800 focus:ring-0 w-32 cursor-pointer\"\r\n          />\r\n          <span className=\"text-slate-300 font-black\">ΓåÆ</span>\r\n          <input\r\n            type=\"date\"\r\n            value={endDate}\r\n            onChange={(e) => onDateChange(startDate, e.target.value)}\r\n            className=\"bg-transparent border-none text-[12px] font-bold text-slate-800 focus:ring-0 w-32 cursor-pointer\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Export Action */}\r\n      {onExport && (\r\n        <Button\r\n          onClick={onExport}\r\n          variant=\"secondary\"\r\n          size=\"sm\"\r\n          disabled={loading}\r\n          className=\"h-8 gap-2 bg-white hover:bg-slate-50 border-slate-200 text-slate-700\"\r\n        >\r\n          <FileSpreadsheet size={14} className=\"text-green-600\" />\r\n          <span className=\"text-[11px] font-bold uppercase tracking-wider\">\r\n            Export Excel\r\n          </span>\r\n        </Button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\SidebarNav.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":14,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"Activity"},"fix":{"range":[217,230],"text":""},"desc":"Remove unused variable 'Activity'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Activity' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'Users' is defined but never used.","line":16,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":8,"suggestions":[{"messageId":"removeVar","data":{"varName":"Users"},"fix":{"range":[238,248],"text":""},"desc":"Remove unused variable 'Users'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Users' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":8},{"ruleId":"no-unused-vars","severity":1,"message":"'CreditCard' is defined but never used.","line":18,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":13,"suggestions":[{"messageId":"removeVar","data":{"varName":"CreditCard"},"fix":{"range":[262,277],"text":""},"desc":"Remove unused variable 'CreditCard'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CreditCard' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":21,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":21,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"AnimatePresence"},"fix":{"range":[354,371],"text":""},"desc":"Remove unused variable 'AnimatePresence'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AnimatePresence' is defined but never used.","line":21,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":33},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":63,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":63,"endColumn":76},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":65,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":65,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":76,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":76,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":124,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":124,"endColumn":104},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":137,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":137,"endColumn":132},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":141,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":141,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":144,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":144,"endColumn":106}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport {\r\n  LayoutDashboard,\r\n  ShoppingCart,\r\n  Truck,\r\n  Receipt,\r\n  FileText,\r\n  Settings,\r\n  ChevronRight,\r\n  Package,\r\n  Activity,\r\n  Box,\r\n  Users,\r\n  BarChart3,\r\n  CreditCard,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nconst navGroups = [\r\n  {\r\n    label: \"Intelligence\",\r\n    items: [\r\n      { name: \"Dashboard\", href: \"/\", icon: LayoutDashboard },\r\n      { name: \"Reports\", href: \"/reports\", icon: BarChart3 },\r\n    ]\r\n  },\r\n  {\r\n    label: \"Operations\",\r\n    items: [\r\n      { name: \"Purchase Order\", href: \"/po\", icon: ShoppingCart },\r\n      { name: \"Delivery Challan\", href: \"/dc\", icon: Truck },\r\n      { name: \"Invoice\", href: \"/invoice\", icon: Receipt },\r\n      { name: \"SRV Ingestion\", href: \"/srv\", icon: Box },\r\n    ]\r\n  },\r\n  {\r\n    label: \"Configuration\",\r\n    items: [\r\n      { name: \"PO Notes\", href: \"/po-notes\", icon: FileText },\r\n      { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n    ]\r\n  }\r\n];\r\n\r\nexport function SidebarNav() {\r\n  const pathname = usePathname();\r\n\r\n  return (\r\n    <div className=\"w-[270px] bg-white/35 backdrop-blur-xl flex flex-col z-50 shadow-[4px_0_24px_rgba(0,0,0,0.02)] shrink-0 relative overflow-hidden border-r border-white/20 font-heading\">\r\n\r\n      {/* Brand Header - Compacted */}\r\n      <div className=\"p-6 pb-2 shrink-0 relative z-10\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-9 h-9 rounded-lg bg-[var(--color-sys-brand-primary)] flex items-center justify-center shadow-lg shadow-[var(--color-sys-brand-primary)]/20\">\r\n            <Package className=\"text-white w-5 h-5\" />\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-md font-black text-slate-900 tracking-tight leading-none uppercase\">\r\n              SENSTO<span className=\"text-[var(--color-sys-brand-primary)]\">SALES</span>\r\n            </span>\r\n            <span className=\"text-[8px] font-black text-slate-400 mt-1 uppercase tracking-[0.3em]\">\r\n              PRO ENTERPRISE\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation Groups - Densified */}\r\n      <div className=\"flex-1 px-3 py-4 space-y-6 overflow-y-auto no-scrollbar relative z-10\">\r\n        {navGroups.map((group) => (\r\n          <div key={group.label} className=\"space-y-0.5\">\r\n            <h3 className=\"px-3 text-[9px] font-black text-slate-400 uppercase tracking-[0.3em] mb-2 opacity-70\">\r\n              {group.label}\r\n            </h3>\r\n            {group.items.map((item) => {\r\n              const isActive =\r\n                pathname === item.href ||\r\n                (item.href !== \"/\" && pathname.startsWith(item.href + \"/\"));\r\n\r\n              return (\r\n                <Link\r\n                  key={item.href}\r\n                  href={item.href}\r\n                  className={cn(\r\n                    \"group flex items-center justify-between px-3 py-2.5 rounded-lg transition-all duration-200 relative z-10\",\r\n                    isActive\r\n                      ? \"text-[var(--color-sys-brand-primary)]\"\r\n                      : \"text-slate-600 hover:text-slate-900\"\r\n                  )}\r\n                >\r\n                  {isActive && (\r\n                    <motion.div\r\n                      layoutId=\"sidebar-active-pill\"\r\n                      className=\"absolute inset-0 bg-[var(--color-sys-brand-primary)]/10 rounded-lg -z-10 shadow-sm border border-[var(--color-sys-brand-primary)]/5\"\r\n                      initial={false}\r\n                      transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\r\n                    />\r\n                  )}\r\n\r\n                  <div className=\"flex items-center gap-3 relative z-10 pl-2\">\r\n                    <item.icon\r\n                      className={cn(\r\n                        \"w-4 h-4 transition-all duration-200\",\r\n                        isActive\r\n                          ? \"text-[var(--color-sys-brand-primary)]\"\r\n                          : \"text-slate-400 group-hover:text-slate-600\"\r\n                      )}\r\n                    />\r\n                    <span\r\n                      className={cn(\r\n                        \"text-[11px] font-bold tracking-wider uppercase\",\r\n                        isActive ? \"text-[var(--color-sys-brand-primary)]\" : \"text-slate-600 group-hover:text-slate-900\"\r\n                      )}\r\n                    >\r\n                      {item.name}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {isActive && (\r\n                    <ChevronRight className=\"w-3 h-3 text-[var(--color-sys-brand-primary)] opacity-100\" />\r\n                  )}\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Premium Profile Footer */}\r\n      <div className=\"p-4 shrink-0 mt-auto relative z-10 border-t border-slate-100\">\r\n        <div className=\"p-2.5 bg-slate-50 rounded-xl border border-slate-100\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-slate-200 flex items-center justify-center text-slate-600 font-black text-[11px]\">\r\n              AS\r\n            </div>\r\n            <div className=\"flex flex-col min-w-0 flex-1\">\r\n              <span className=\"text-[10px] font-bold text-slate-900 truncate\">Abhijit S.</span>\r\n              <div className=\"flex items-center gap-1 mt-0.5\">\r\n                <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500\" />\r\n                <span className=\"text-[7px] font-black text-slate-400 uppercase tracking-widest truncate\">Administrator</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-1.5 hover:bg-slate-200 rounded-lg transition-colors cursor-pointer text-slate-400 hover:text-slate-600\">\r\n              <Settings size={12} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\SimpleDataTable.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'row' is defined but never used.","line":13,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"row"},"fix":{"range":[267,275],"text":""},"desc":"Remove unused variable 'row'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":86,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":86,"endColumn":93}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface SimpleDataTableProps {\r\n  data: any[];\r\n  columns: {\r\n    header: string;\r\n    accessor: string;\r\n    width?: number;\r\n    align?: \"left\" | \"center\" | \"right\";\r\n    render?: (row: any) => React.ReactNode;\r\n  }[];\r\n  className?: string;\r\n}\r\n\r\nexport function SimpleDataTable({\r\n  data = [],\r\n  columns = [],\r\n  className,\r\n}: SimpleDataTableProps) {\r\n  const safeData = Array.isArray(data) ? data : [];\r\n\r\n  return (\r\n    <div className={cn(\"rounded-xl overflow-hidden bg-white\", className)}>\r\n      {/* Borderless Header */}\r\n      <div className=\"flex bg-slate-50/50 h-9 sticky top-0 z10\">\r\n        {columns.map((col, idx) => (\r\n          <div\r\n            key={col.accessor || `col-${idx}`}\r\n            className={cn(\r\n              \"flex items-center px-4 font-semibold text-[10px] uppercase tracking-wider text-slate-400\",\r\n              col.align === \"right\" && \"justify-end\",\r\n              col.align === \"center\" && \"justify-center\",\r\n            )}\r\n            style={{\r\n              width: col.width\r\n                ? `${col.width}%`\r\n                : `${100 / (columns.length || 1)}%`,\r\n            }}\r\n          >\r\n            {col.header}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Borderless Body */}\r\n      <div className=\"overflow-y-auto max-h-[500px]\">\r\n        {safeData.length > 0 ? (\r\n          safeData.map((row, rowIdx) => {\r\n            if (!row) return null;\r\n            return (\r\n              <div\r\n                key={rowIdx}\r\n                className=\"flex hover:bg-slate-50/80 transition-colors duration-150 cursor-pointer\"\r\n              >\r\n                {columns.map((col, colIdx) => (\r\n                  <div\r\n                    key={colIdx}\r\n                    className={cn(\r\n                      \"flex items-center px-4 py-2.5 text-[13px] font-medium\",\r\n                      col.align === \"right\" &&\r\n                      \"justify-end font-mono tabular-nums text-slate-700\",\r\n                      col.align === \"center\" && \"justify-center\",\r\n                      !col.align && \"text-slate-600\",\r\n                    )}\r\n                    style={{\r\n                      width: col.width\r\n                        ? `${col.width}%`\r\n                        : `${100 / columns.length}%`,\r\n                    }}\r\n                  >\r\n                    {col.render ? (\r\n                      col.render(row)\r\n                    ) : (\r\n                      <span className=\"truncate\">{row[col.accessor]}</span>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <div className=\"flex flex-col items-center justify-center h-[300px] gap-2 opacity-30\">\r\n            <div className=\"text-[11px] font-medium uppercase tracking-wider text-slate-400\">\r\n              No data available\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\StatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\StatusCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":2,"endColumn":62},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Badge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":3,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":3,"endColumn":64}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { Card } from \"@/components/design-system/atoms/Card\";\r\nimport { Badge } from \"@/components/design-system/atoms/Badge\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface StatusCardProps {\r\n    title?: string;\r\n    status?: string;\r\n    variant?: \"default\" | \"success\" | \"warning\" | \"error\";\r\n    children: React.ReactNode;\r\n    className?: string;\r\n    showBadge?: boolean;\r\n}\r\n\r\nexport function StatusCard({\r\n    title,\r\n    status,\r\n    variant = \"default\",\r\n    children,\r\n    className,\r\n    showBadge = false,\r\n}: StatusCardProps) {\r\n    return (\r\n        <Card className={cn(\"p-6\", className)}>\r\n            {(title || status) && (\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    {title && <h3 className=\"font-medium text-slate-950\">{title}</h3>}\r\n                    {status && showBadge && <Badge variant={variant}>{status}</Badge>}\r\n                </div>\r\n            )}\r\n            {children}\r\n        </Card>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\SummaryCards.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AnimatePresence' is defined but never used.","line":51,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"AnimatePresence"},"fix":{"range":[1837,1854],"text":""},"desc":"Remove unused variable 'AnimatePresence'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AnimatePresence' is defined but never used.","line":51,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":51,"endColumn":33},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":112,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":112,"endColumn":89}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { H2, SmallText } from \"../atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { SummaryCardSkeleton } from \"../atoms/Skeleton\";\r\n\r\n/**\r\n * SummaryCard Organism - Atomic Design System v1.0\r\n * Used in dashboard and list pages for KPI display\r\n * Max 4 per row, equal height, real data only\r\n */\r\n\r\nexport interface SummaryCardProps {\r\n  title: string;\r\n  value: React.ReactNode;\r\n  icon?: React.ReactNode;\r\n  trend?: {\r\n    value: string;\r\n    direction: \"up\" | \"down\" | \"neutral\";\r\n  };\r\n  variant?: \"default\" | \"primary\" | \"success\" | \"warning\" | \"secondary\" | \"error\";\r\n  className?: string;\r\n}\r\n\r\nconst variantTextStyles = {\r\n  default: \"text-[var(--color-sys-text-primary)]\",\r\n  primary: \"text-[var(--color-sys-brand-primary)]\",\r\n  secondary: \"text-[var(--color-primitive-blue-800)]\",\r\n  success: \"text-[var(--color-sys-status-success)]\",\r\n  warning: \"text-[var(--color-sys-status-warning)]\",\r\n  error: \"text-[var(--color-sys-status-error)]\",\r\n};\r\n\r\nconst variantIconStyles = {\r\n  default: \"bg-[var(--color-sys-bg-primary)] text-[var(--color-sys-text-secondary)]\",\r\n  primary: \"bg-[var(--color-sys-brand-primary)]/10 text-[var(--color-sys-brand-primary)]\",\r\n  secondary: \"bg-[var(--color-primitive-blue-800)]/10 text-[var(--color-primitive-blue-800)]\",\r\n  success: \"bg-[var(--color-sys-status-success)]/10 text-[var(--color-sys-status-success)]\",\r\n  warning: \"bg-[var(--color-sys-status-warning)]/10 text-[var(--color-sys-status-warning)]\",\r\n  error: \"bg-[var(--color-sys-status-error)]/10 text-[var(--color-sys-status-error)]\",\r\n};\r\n\r\nconst trendStyles = {\r\n  up: \"text-[var(--color-sys-status-success)]\",\r\n  down: \"text-[var(--color-sys-status-error)]\",\r\n  neutral: \"text-[var(--color-sys-text-tertiary)]\",\r\n};\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nexport const SummaryCard = React.memo(function SummaryCard({\r\n  title,\r\n  value,\r\n  icon,\r\n  trend,\r\n  variant = \"primary\", // Default to primary instead of default - gives colored icons automatically\r\n  className,\r\n}: SummaryCardProps) {\r\n  return (\r\n    <Card\r\n      className={cn(\r\n        \"relative flex flex-col justify-between min-h-[110px] h-full transition-all duration-300\",\r\n        // Phase 3: Claymorphic Object\r\n        \"bg-[var(--glass-bg)] border-[var(--glass-border)] shadow-clay\",\r\n        \"backdrop-blur-2xl\", // Enforcing glass constraint\r\n        \"hover:-translate-y-1 hover:shadow-lifted\", // Physical feedback\r\n        className,\r\n      )}\r\n    >\r\n      <div className=\"flex justify-between items-start\">\r\n        <SmallText className={cn(\r\n          \"uppercase tracking-widest font-bold text-[11px]\",\r\n          variant !== \"default\" ? variantTextStyles[variant] : \"text-[var(--color-sys-text-secondary)]\"\r\n        )}>\r\n          {title}\r\n        </SmallText>\r\n\r\n        {/* Icon - Clean Circle */}\r\n        {icon && (\r\n          <div\r\n            className={cn(\r\n              \"w-10 h-10 rounded-xl flex items-center justify-center text-base transition-colors duration-300\",\r\n              variantIconStyles[variant]\r\n            )}\r\n          >\r\n            {icon}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"mt-auto pt-2\">\r\n        <H2 className={cn(\r\n          \"leading-none font-bold\",\r\n          variantTextStyles[variant]\r\n        )}>\r\n          {value}\r\n        </H2>\r\n\r\n        {/* Trend indicator area - fixed height to prevent layout shift */}\r\n        <div className=\"h-4 flex items-end mt-1\">\r\n          {trend ? (\r\n            <SmallText\r\n              className={cn(\r\n                \"font-semibold flex items-center gap-1\",\r\n                trendStyles[trend.direction],\r\n              )}\r\n            >\r\n              <span className=\"opacity-70\">{trend.direction === 'up' ? 'Γåæ' : trend.direction === 'down' ? 'Γåô' : 'ΓÇó'}</span>\r\n              <span>{trend.value}</span>\r\n              <span className=\"text-[var(--color-sys-text-tertiary)] font-medium ml-0.5\">VS L/M</span>\r\n            </SmallText>\r\n          ) : (\r\n            <SmallText className=\"opacity-0 pointer-events-none\">Spacer</SmallText>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Card>\r\n  );\r\n});\r\n\r\n/**\r\n * SummaryCards Container\r\n * Ensures max 4 per row with equal heights\r\n */\r\nexport interface SummaryCardsProps {\r\n  cards: SummaryCardProps[];\r\n  loading?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst container = {\r\n  hidden: { opacity: 0 },\r\n  show: {\r\n    opacity: 1,\r\n    transition: {\r\n      staggerChildren: 0.05\r\n    }\r\n  }\r\n};\r\n\r\nconst item = {\r\n  hidden: { opacity: 0, y: -20 },\r\n  show: {\r\n    opacity: 1,\r\n    y: 0,\r\n    transition: {\r\n      type: \"spring\",\r\n      stiffness: 400,\r\n      damping: 25\r\n    } as any\r\n  }\r\n};\r\n\r\nexport const SummaryCards = React.memo(function SummaryCards({\r\n  cards,\r\n  loading,\r\n  className,\r\n}: SummaryCardsProps) {\r\n  if (loading) {\r\n    return (\r\n      <div\r\n        className={cn(\r\n          \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\",\r\n          className,\r\n        )}\r\n      >\r\n        {Array.from({ length: 4 }).map((_, i) => (\r\n          <SummaryCardSkeleton key={i} />\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      variants={container}\r\n      initial=\"hidden\"\r\n      animate=\"show\"\r\n      className={cn(\r\n        \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\",\r\n        className,\r\n      )}\r\n    >\r\n      {cards.map((card, index) => (\r\n        <motion.div key={index} variants={item} className=\"h-full\">\r\n          <SummaryCard {...card} />\r\n        </motion.div>\r\n      ))}\r\n    </motion.div>\r\n  );\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\CreateEditFormTemplate.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":62,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":62,"endColumn":61},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":68,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":68,"endColumn":84},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":73,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":73,"endColumn":61},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":78,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":78,"endColumn":67},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":88,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":88,"endColumn":54},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":98,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":98,"endColumn":49}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H1, H2, Body } from \"../atoms/Typography\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { ActionButtonGroup, Action } from \"../molecules/ActionButtonGroup\";\r\nimport { ChevronRight } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * CreateEditFormTemplate - Atomic Design System v1.0\r\n * Standard layout for create/edit pages\r\n * Layout: Breadcrumbs ΓåÆ Heading ΓåÆ Form Sections ΓåÆ Action Buttons\r\n */\r\n\r\nexport interface BreadcrumbItem {\r\n  label: string;\r\n  href?: string;\r\n}\r\n\r\nexport interface FormSection {\r\n  title: string;\r\n  description?: string;\r\n  content: React.ReactNode;\r\n}\r\n\r\nexport interface CreateEditFormTemplateProps {\r\n  // Navigation\r\n  breadcrumbs?: BreadcrumbItem[];\r\n\r\n  // Header\r\n  title: string;\r\n  subtitle?: string;\r\n\r\n  // Form sections\r\n  sections: FormSection[];\r\n\r\n  // Actions\r\n  primaryAction: Action;\r\n  secondaryActions?: Action[];\r\n\r\n  // State\r\n  loading?: boolean;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport const CreateEditFormTemplate: React.FC<CreateEditFormTemplateProps> = ({\r\n  breadcrumbs,\r\n  title,\r\n  subtitle,\r\n  sections,\r\n  primaryAction,\r\n  secondaryActions = [],\r\n  loading = false,\r\n  className,\r\n}) => {\r\n  return (\r\n    <div className={cn(\"max-w-5xl mx-auto space-y-6\", className)}>\r\n      {/* Breadcrumbs */}\r\n      {breadcrumbs && breadcrumbs.length > 0 && (\r\n        <nav className=\"flex items-center gap-2 text-[14px]\">\r\n          {breadcrumbs.map((crumb, index) => (\r\n            <React.Fragment key={index}>\r\n              {crumb.href ? (\r\n                <a\r\n                  href={crumb.href}\r\n                  className=\"text-[#6B7280] hover:text-[#1A3D7C] transition-colors\"\r\n                >\r\n                  {crumb.label}\r\n                </a>\r\n              ) : (\r\n                <span className=\"text-[#111827] font-medium\">\r\n                  {crumb.label}\r\n                </span>\r\n              )}\r\n              {index < breadcrumbs.length - 1 && (\r\n                <ChevronRight size={16} className=\"text-[#9CA3AF]\" />\r\n              )}\r\n            </React.Fragment>\r\n          ))}\r\n        </nav>\r\n      )}\r\n\r\n      {/* Page Header */}\r\n      <div className=\"space-y-2 pb-4 border-b border-[#E5E7EB]\">\r\n        <H1>{title}</H1>\r\n        {subtitle && <Body className=\"text-[#6B7280]\">{subtitle}</Body>}\r\n      </div>\r\n\r\n      {/* Form Sections */}\r\n      <div className=\"space-y-8\">\r\n        {sections.map((section, index) => (\r\n          <div key={index} className=\"space-y-4\">\r\n            <div className=\"space-y-1\">\r\n              <H2>{section.title}</H2>\r\n              {section.description && (\r\n                <Body className=\"text-[#6B7280]\">{section.description}</Body>\r\n              )}\r\n            </div>\r\n            <div className=\"bg-white rounded-lg border border-[#E5E7EB] p-6\">\r\n              {section.content}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"sticky bottom-0 bg-[#F6F8FB] border-t border-[#E5E7EB] px-6 py-4 -mx-6 flex items-center justify-between gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          {secondaryActions.length > 0 && (\r\n            <ActionButtonGroup actions={secondaryActions} align=\"left\" />\r\n          )}\r\n        </div>\r\n\r\n        <Button\r\n          variant={primaryAction.variant || \"default\"}\r\n          onClick={primaryAction.onClick}\r\n          disabled={primaryAction.disabled || loading}\r\n          className=\"min-w-32\"\r\n        >\r\n          {primaryAction.icon}\r\n          {primaryAction.label}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\DetailViewTemplate.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'H2' is defined but never used.","line":4,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"H2"},"fix":{"range":[70,74],"text":""},"desc":"Remove unused variable 'H2'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H2' is defined but never used.","line":4,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":78,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":78,"endColumn":61},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":84,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":84,"endColumn":84},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":89,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":89,"endColumn":61},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":94,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":94,"endColumn":67}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { H1, H2, Body } from \"../atoms/Typography\";\r\nimport { SummaryCards, SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport { DocumentTrace, DocumentNode } from \"../organisms/DocumentTrace\";\r\nimport { ActionButtonGroup, Action } from \"../molecules/ActionButtonGroup\";\r\nimport { ChevronRight } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * DetailViewTemplate - Atomic Design System v1.0\r\n * Standard layout for detail/view pages\r\n * Layout: Breadcrumbs ΓåÆ Header + Actions ΓåÆ Summary Cards ΓåÆ Document Trace ΓåÆ Tabbed Content\r\n */\r\n\r\nexport interface BreadcrumbItem {\r\n  label: string;\r\n  href?: string;\r\n}\r\n\r\nexport interface TabItem {\r\n  id: string;\r\n  label: string;\r\n  icon?: React.ReactNode;\r\n  content: React.ReactNode;\r\n}\r\n\r\nexport interface DetailViewTemplateProps {\r\n  // Navigation\r\n  breadcrumbs?: BreadcrumbItem[];\r\n\r\n  // Header\r\n  title: string;\r\n  subtitle?: string;\r\n  badge?: React.ReactNode;\r\n\r\n  // Header actions\r\n  actions?: Action[];\r\n\r\n  // Summary cards\r\n  summaryCards?: SummaryCardProps[];\r\n\r\n  // Document traceability\r\n  documentTrace?: DocumentNode[];\r\n\r\n  // Tabs\r\n  tabs?: TabItem[];\r\n  defaultTab?: string;\r\n\r\n  // Additional content (if not using tabs)\r\n  children?: React.ReactNode;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport const DetailViewTemplate: React.FC<DetailViewTemplateProps> = ({\r\n  breadcrumbs,\r\n  title,\r\n  subtitle,\r\n  badge,\r\n  actions,\r\n  summaryCards,\r\n  documentTrace,\r\n  tabs,\r\n  defaultTab,\r\n  children,\r\n  className,\r\n}) => {\r\n  const [activeTab, setActiveTab] = useState(defaultTab || tabs?.[0]?.id || \"\");\r\n\r\n  const activeTabContent = tabs?.find((tab) => tab.id === activeTab)?.content;\r\n\r\n  return (\r\n    <div className={cn(\"space-y-6\", className)}>\r\n      {/* Breadcrumbs */}\r\n      {breadcrumbs && breadcrumbs.length > 0 && (\r\n        <nav className=\"flex items-center gap-2 text-[14px]\">\r\n          {breadcrumbs.map((crumb, index) => (\r\n            <React.Fragment key={index}>\r\n              {crumb.href ? (\r\n                <a\r\n                  href={crumb.href}\r\n                  className=\"text-[#6B7280] hover:text-[#1A3D7C] transition-colors\"\r\n                >\r\n                  {crumb.label}\r\n                </a>\r\n              ) : (\r\n                <span className=\"text-[#111827] font-medium\">\r\n                  {crumb.label}\r\n                </span>\r\n              )}\r\n              {index < breadcrumbs.length - 1 && (\r\n                <ChevronRight size={16} className=\"text-[#9CA3AF]\" />\r\n              )}\r\n            </React.Fragment>\r\n          ))}\r\n        </nav>\r\n      )}\r\n\r\n      {/* Header */}\r\n      <div className=\"flex items-start justify-between gap-4\">\r\n        <div className=\"space-y-1 flex-1\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <H1 className=\"uppercase tracking-tight\">{title}</H1>\r\n            {badge}\r\n          </div>\r\n          {subtitle && <Body className=\"text-slate-500 font-medium\">{subtitle}</Body>}\r\n        </div>\r\n\r\n        {actions && actions.length > 0 && (\r\n          <ActionButtonGroup actions={actions} align=\"right\" />\r\n        )}\r\n      </div>\r\n\r\n      {/* Summary Cards */}\r\n      {summaryCards && summaryCards.length > 0 && (\r\n        <SummaryCards cards={summaryCards} />\r\n      )}\r\n\r\n      {/* Document Trace */}\r\n      {documentTrace && documentTrace.length > 0 && (\r\n        <DocumentTrace documents={documentTrace} />\r\n      )}\r\n\r\n      {/* Tabs */}\r\n      {tabs && tabs.length > 0 ? (\r\n        <div className=\"space-y-4\">\r\n          {/* Tab Headers */}\r\n          <div className=\"border-b border-[#E5E7EB]\">\r\n            <div className=\"flex items-center gap-1\">\r\n              {tabs.map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id)}\r\n                  className={cn(\r\n                    \"flex items-center gap-2 px-4 py-3 text-[11px] font-semibold uppercase tracking-widest transition-all\",\r\n                    \"border-b-2 -mb-px\",\r\n                    activeTab === tab.id\r\n                      ? \"border-blue-600 text-blue-600\"\r\n                      : \"border-transparent text-slate-500 hover:text-slate-900\",\r\n                  )}\r\n                >\r\n                  {tab.icon}\r\n                  {tab.label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tab Content */}\r\n          <div>{activeTabContent}</div>\r\n        </div>\r\n      ) : (\r\n        // Direct content if no tabs\r\n        children && <div>{children}</div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\DocumentTemplate.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":81,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":81,"endColumn":105}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H1 } from \"../atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nimport { ArrowLeft } from \"lucide-react\";\r\nimport { Button } from \"../atoms/Button\";\r\n\r\nimport { motion } from \"framer-motion\";\r\nimport { StatusBadge } from \"../organisms/StatusBadge\";\r\n\r\ninterface DocumentTemplateProps {\r\n  title: string;\r\n  description?: React.ReactNode;\r\n  actions?: React.ReactNode;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  onBack?: () => void;\r\n  layoutId?: string;\r\n  icon?: React.ReactNode;\r\n  iconLayoutId?: string;\r\n  status?: string;\r\n  statusVariant?: \"success\" | \"warning\" | \"error\" | \"neutral\" | \"info\";\r\n}\r\n\r\nexport const DocumentTemplate = ({\r\n  title,\r\n  description,\r\n  actions,\r\n  children,\r\n  className,\r\n  onBack,\r\n  layoutId,\r\n  icon,\r\n  iconLayoutId,\r\n  status,\r\n  statusVariant,\r\n}: DocumentTemplateProps) => {\r\n  return (\r\n    <div className={cn(\"space-y-4 will-change-[transform,opacity]\", className)}>\r\n      {/* Compact Header */}\r\n      <div className=\"flex items-center justify-between mb-2 min-h-[40px]\">\r\n        <div className=\"flex items-center gap-4\">\r\n          {onBack && (\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              onClick={onBack}\r\n              className=\"h-8 w-8 p-0 rounded-full text-slate-500 hover:text-slate-900 hover:bg-slate-100\"\r\n            >\r\n              <ArrowLeft size={16} />\r\n            </Button>\r\n          )}\r\n\r\n          {icon && (\r\n            <motion.div\r\n              layoutId={iconLayoutId}\r\n              className=\"flex items-center justify-center\"\r\n            >\r\n              {icon}\r\n            </motion.div>\r\n          )}\r\n\r\n          <div>\r\n            <div className=\"flex items-center gap-3\">\r\n              {layoutId ? (\r\n                <motion.div layoutId={layoutId}>\r\n                  <H1 className=\"uppercase tracking-tight text-slate-950\">\r\n                    {title}\r\n                  </H1>\r\n                </motion.div>\r\n              ) : (\r\n                <H1 className=\"uppercase tracking-tight text-slate-950\">\r\n                  {title}\r\n                </H1>\r\n              )}\r\n              {status && <StatusBadge status={status} variant={statusVariant} />}\r\n            </div>\r\n            {description && (\r\n              <div className=\"text-[10px] font-semibold uppercase tracking-widest text-slate-500 mt-0.5\">\r\n                {description}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n        {actions && <div className=\"flex gap-2\">{actions}</div>}\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div>{children}</div>\r\n    </div>\r\n  );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\ListPageTemplate.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'Body' is defined but never used.","line":5,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"Body"},"fix":{"range":[114,120],"text":""},"desc":"Remove unused variable 'Body'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used.","line":5,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'page' is defined but never used.","line":41,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":41,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"page"},"fix":{"range":[1156,1168],"text":""},"desc":"Remove unused variable 'page'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'key' is defined but never used.","line":44,"column":13,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"key"},"fix":{"range":[1248,1259],"text":""},"desc":"Remove unused variable 'key'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'selected' is defined but never used.","line":47,"column":24,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":42,"suggestions":[{"messageId":"removeVar","data":{"varName":"selected"},"fix":{"range":[1347,1365],"text":""},"desc":"Remove unused variable 'selected'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'row' is defined but never used.","line":58,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":25,"suggestions":[{"messageId":"removeVar","data":{"varName":"row"},"fix":{"range":[1658,1664],"text":""},"desc":"Remove unused variable 'row'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'row' is defined but never used.","line":59,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":24,"suggestions":[{"messageId":"removeVar","data":{"varName":"row"},"fix":{"range":[1704,1711],"text":""},"desc":"Remove unused variable 'row'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'isExpanded' is defined but never used.","line":59,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":59,"endColumn":45,"suggestions":[{"messageId":"removeVar","data":{"varName":"isExpanded"},"fix":{"range":[1710,1731],"text":""},"desc":"Remove unused variable 'isExpanded'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { H1, Body, SmallText } from \"../atoms/Typography\";\r\nimport { SummaryCards, type SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport { type Column } from \"../organisms/DataTable\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst DataTable = dynamic(\r\n  () => import(\"../organisms/DataTable\").then((mod) => mod.DataTable),\r\n  {\r\n    loading: () => <div className=\"h-96 w-full bg-slate-50/50 rounded-xl animate-pulse\" />,\r\n    ssr: false,\r\n  }\r\n) as any;\r\n\r\n/**\r\n * ListPageTemplate - Atomic Design System v1.0\r\n * Standard layout for list pages (PO, DC, Invoice, SRV)\r\n * Layout: Heading ΓåÆ Toolbar ΓåÆ Summary Cards (optional) ΓåÆ DataTable\r\n */\r\n\r\nexport interface ListPageTemplateProps<T = any> {\r\n  // Header\r\n  title: string;\r\n  subtitle?: string;\r\n  toolbar?: React.ReactNode;\r\n\r\n  // Summary Row (KPI Cards)\r\n  summaryCards?: SummaryCardProps[];\r\n\r\n  // Table\r\n  columns: Column<T>[];\r\n  data: T[];\r\n  keyField?: string;\r\n  page?: number;\r\n  pageSize?: number;\r\n  totalItems?: number;\r\n  onPageChange?: (page: number) => void;\r\n  sortKey?: string;\r\n  sortDirection?: \"asc\" | \"desc\";\r\n  onSort?: (key: string) => void;\r\n  selectable?: boolean;\r\n  selectedRows?: string[];\r\n  onSelectionChange?: (selected: string[]) => void;\r\n  exportable?: boolean;\r\n  onExport?: () => void;\r\n  loading?: boolean;\r\n  error?: string;\r\n  emptyMessage?: string;\r\n  density?: \"compact\" | \"normal\"; // Pass through to DataTable\r\n\r\n  // Customization\r\n  no_borders?: boolean;\r\n  table_surface_solid?: boolean;\r\n  renderSubRow?: (row: T) => React.ReactNode;\r\n  onRowExpand?: (row: T, isExpanded: boolean) => void;\r\n\r\n  className?: string;\r\n  children?: React.ReactNode;\r\n}\r\n\r\nexport function ListPageTemplate<T extends Record<string, any>>({\r\n  title,\r\n  subtitle,\r\n  toolbar,\r\n  summaryCards,\r\n  columns,\r\n  data,\r\n  keyField = \"id\",\r\n  page,\r\n  pageSize,\r\n  totalItems,\r\n  onPageChange,\r\n  sortKey,\r\n  sortDirection,\r\n  onSort,\r\n  selectable,\r\n  selectedRows,\r\n  onSelectionChange,\r\n  exportable,\r\n  onExport,\r\n  loading,\r\n  error,\r\n  emptyMessage,\r\n  density = \"normal\", // Default density\r\n  className,\r\n  children,\r\n  no_borders,\r\n  table_surface_solid,\r\n  renderSubRow,\r\n  onRowExpand,\r\n}: ListPageTemplateProps<T>) {\r\n  return (\r\n    <div className={cn(\"min-h-screen will-change-[transform,opacity]\", className)}>\r\n      {/* Premium Header Strip */}\r\n      <div className=\"header-strip sticky top-0 z-10\">\r\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n          <div className=\"space-y-0.5\">\r\n            <H1 className=\"tracking-tight\">{title}</H1>\r\n            {subtitle && (\r\n              <SmallText className=\"text-slate-500 font-medium block\">\r\n                {subtitle}\r\n              </SmallText>\r\n            )}\r\n          </div>\r\n          {toolbar && <div className=\"flex items-center gap-3\">{toolbar}</div>}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n\r\n        {/* Summary Cards */}\r\n        {summaryCards && summaryCards.length > 0 && (\r\n          <SummaryCards cards={summaryCards} loading={loading} />\r\n        )}\r\n\r\n        <div className=\"pb-6 min-h-[600px]\">\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              key=\"table-content\"\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              exit={{ opacity: 0 }}\r\n              transition={{ duration: 0.15 }}\r\n            >\r\n              {children ? (\r\n                <div className=\"min-h-[400px]\">{children}</div>\r\n              ) : (\r\n                <DataTable\r\n                  columns={columns}\r\n                  data={data}\r\n                  keyField={keyField}\r\n                  page={page}\r\n                  pageSize={pageSize}\r\n                  totalItems={totalItems}\r\n                  onPageChange={onPageChange}\r\n                  sortKey={sortKey}\r\n                  sortDirection={sortDirection}\r\n                  onSort={onSort}\r\n                  selectable={selectable}\r\n                  selectedRows={selectedRows}\r\n                  onSelectionChange={onSelectionChange}\r\n                  exportable={exportable}\r\n                  onExport={onExport}\r\n                  loading={loading}\r\n                  error={error}\r\n                  emptyMessage={emptyMessage}\r\n                  emptyIcon={null}\r\n                  no_borders={no_borders}\r\n                  table_surface_solid={table_surface_solid}\r\n                  renderSubRow={renderSubRow}\r\n                  onRowExpand={onRowExpand}\r\n                  density={density}\r\n                />\r\n              )}\r\n            </motion.div>\r\n          </AnimatePresence>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\ReportsPageTemplate.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'ReportsToolbar' is defined but never used.","line":7,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":17,"suggestions":[{"messageId":"removeVar","data":{"varName":"ReportsToolbar"},"fix":{"range":[183,198],"text":""},"desc":"Remove unused variable 'ReportsToolbar'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ReportsToolbar' is defined but never used.","line":7,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'page' is defined but never used.","line":43,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":43,"endColumn":31,"suggestions":[{"messageId":"removeVar","data":{"varName":"page"},"fix":{"range":[1092,1104],"text":""},"desc":"Remove unused variable 'page'."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H1, Body } from \"../atoms/Typography\";\r\nimport { SummaryCards, SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport {\r\n  ReportsToolbar,\r\n  ReportsToolbarProps,\r\n} from \"../organisms/ReportsToolbar\";\r\nimport { DataTable, Column } from \"../organisms/DataTable\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ReportsPageTemplate - Atomic Design System v1.0\r\n * Standard layout for reports page\r\n * Layout: Heading ΓåÆ Reports Toolbar ΓåÆ KPI Cards ΓåÆ Charts ΓåÆ Data Table\r\n */\r\n\r\nexport interface ReportsPageTemplateProps<T = any> {\r\n  // Page header\r\n  title: string;\r\n  subtitle?: string;\r\n\r\n  // Toolbar (Optional as it might be in header)\r\n  toolbar?: Partial<Omit<ReportsToolbarProps, \"className\">>;\r\n\r\n  // KPI Summary cards\r\n  kpiCards?: SummaryCardProps[];\r\n\r\n  // Charts section\r\n  charts?: React.ReactNode;\r\n\r\n  // Data table\r\n  tableTitle?: React.ReactNode;\r\n  columns?: Column<T>[];\r\n  data?: T[];\r\n  keyField?: string;\r\n\r\n  // Table features\r\n  page?: number;\r\n  pageSize?: number;\r\n  totalItems?: number;\r\n  onPageChange?: (page: number) => void;\r\n  exportable?: boolean;\r\n  onExport?: () => void;\r\n\r\n  // States\r\n  loading?: boolean;\r\n  error?: string;\r\n  emptyMessage?: string;\r\n\r\n  className?: string;\r\n}\r\n\r\nexport const ReportsPageTemplate = React.memo(\r\n  <T extends Record<string, any>>({\r\n    title,\r\n    subtitle,\r\n    kpiCards,\r\n    charts,\r\n    tableTitle,\r\n    columns,\r\n    data,\r\n    keyField = \"id\",\r\n    page,\r\n    pageSize,\r\n    totalItems,\r\n    onPageChange,\r\n    loading,\r\n    error,\r\n    emptyMessage,\r\n    className,\r\n  }: ReportsPageTemplateProps<T>) => {\r\n    return (\r\n      <div className={cn(\"space-y-6 pb-12 w-full max-w-full overflow-hidden bg-slate-50 min-h-screen\", className)}>\r\n        {/* Enterprise Header - Compact & Functional */}\r\n        <div className=\"bg-white border-b border-slate-300 px-6 py-4 flex items-center justify-between shadow-sm\">\r\n          <div className=\"flex flex-col\">\r\n            <H1 className=\"text-slate-800 font-bold tracking-tight text-xl\">\r\n              {title}\r\n            </H1>\r\n            {subtitle && (\r\n              <Body className=\"text-slate-500 font-medium text-xs\">\r\n                {subtitle}\r\n              </Body>\r\n            )}\r\n          </div>\r\n          {/* Right side could hold global actions or date picker portal */}\r\n        </div>\r\n\r\n        <div className=\"px-6 space-y-6\">\r\n          {/* KPI Summary Cards - Enterprise Grid (Standard Component) */}\r\n          {((kpiCards && kpiCards.length > 0) || loading) && (\r\n            <SummaryCards cards={kpiCards || []} loading={loading} />\r\n          )}\r\n\r\n          {/* Main Content: Charts or Table */}\r\n          <div className=\"space-y-4 w-full\">\r\n            {charts && (\r\n              <div className=\"bg-white/40 backdrop-blur-md border border-white/20 shadow-sm rounded-2xl p-6 w-full overflow-hidden transition-all duration-500 hover:shadow-lg\">\r\n                <div className=\"mb-4 border-b border-white/20 pb-2\">\r\n                  <h3 className=\"text-sm font-bold text-slate-700 uppercase tracking-wide\">Analytics Overview</h3>\r\n                </div>\r\n                {charts}\r\n              </div>\r\n            )}\r\n\r\n            {columns && data && (\r\n              <div className=\"space-y-4 w-full\">\r\n                {tableTitle && (\r\n                  <div className=\"flex items-center justify-between px-1\">\r\n                    <h2 className=\"text-sm font-bold text-slate-700 uppercase tracking-wide\">\r\n                      {tableTitle}\r\n                    </h2>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"bg-white/40 backdrop-blur-md border border-white/20 shadow-sm rounded-2xl overflow-hidden w-full transition-all duration-300\">\r\n                  <div className=\"w-full overflow-x-auto\">\r\n                    {/* Reuse DataTable but ensure it fits the theme */}\r\n                    <DataTable\r\n                      columns={columns}\r\n                      data={data}\r\n                      keyField={keyField}\r\n                      page={page}\r\n                      pageSize={pageSize}\r\n                      totalItems={totalItems}\r\n                      onPageChange={onPageChange}\r\n                      loading={loading}\r\n                      error={error}\r\n                      emptyMessage={emptyMessage}\r\n                      density=\"compact\"\r\n                      no_borders\r\n                      table_surface_solid={false}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  },\r\n);\r\n\r\nReportsPageTemplate.displayName = \"ReportsPageTemplate\";\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\global\\BatchUploadCard.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":85,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":85,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":96,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":96,"endColumn":98},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":102,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":102,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":103,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":103,"endColumn":100},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":127,"column":47,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":127,"endColumn":129},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":130,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":130,"endColumn":114}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, Minimize2, Maximize2, CheckCircle, AlertCircle, Loader2 } from \"lucide-react\";\r\nimport { useUpload } from \"@/components/providers/UploadContext\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n    Body,\r\n    SmallText,\r\n    Accounting,\r\n    Button,\r\n    Flex,\r\n    Stack,\r\n    Box,\r\n    H4,\r\n} from \"@/components/design-system/organisms\";\r\n\r\nexport default function BatchUploadCard() {\r\n    const {\r\n        isUploading,\r\n        progress,\r\n        acceptedCount,\r\n        rejectedCount,\r\n        minimized,\r\n        files,\r\n        uploadType,\r\n        cancelUpload,\r\n        setMinimized,\r\n        resetUpload,\r\n    } = useUpload();\r\n\r\n    // Only show if there's active state or finding results\r\n    const isVisible = isUploading || (progress.total > 0 && progress.current === progress.total);\r\n\r\n    if (!isVisible) return null;\r\n\r\n    const isComplete = progress.total > 0 && progress.current === progress.total;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                layoutId=\"global-upload-card\"\r\n                drag\r\n                dragMomentum={false}\r\n                initial={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                exit={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                className={cn(\r\n                    \"fixed top-24 right-8 z-[100] cursor-grab active:cursor-grabbing\",\r\n                    minimized ? \"w-auto\" : \"w-[400px]\"\r\n                )}\r\n            >\r\n                <div\r\n                    className={cn(\r\n                        \"rounded-3xl transition-all duration-300 overflow-hidden\",\r\n                        \"bg-white/90 backdrop-blur-xl border border-white/60\",\r\n                        \"shadow-[0_20px_40px_-12px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.05),inset_0_1px_1px_rgba(255,255,255,0.8)]\",\r\n                        minimized ? \"p-2 pr-4\" : \"p-0\"\r\n                    )}\r\n                >\r\n                    {minimized ? (\r\n                        <Flex align=\"center\" gap={3}>\r\n                            <Box className=\"relative w-10 h-10 flex items-center justify-center bg-white rounded-full shadow-inner\">\r\n                                <svg className=\"w-full h-full transform -rotate-90 p-1\">\r\n                                    <circle\r\n                                        cx=\"16\"\r\n                                        cy=\"16\"\r\n                                        r=\"14\"\r\n                                        stroke=\"currentColor\"\r\n                                        strokeWidth=\"3\"\r\n                                        fill=\"transparent\"\r\n                                        className=\"text-slate-100\"\r\n                                        viewBox=\"0 0 32 32\"\r\n                                    />\r\n                                    <circle\r\n                                        cx=\"16\"\r\n                                        cy=\"16\"\r\n                                        r=\"14\"\r\n                                        stroke=\"url(#gradient-brand)\"\r\n                                        strokeWidth=\"3\"\r\n                                        fill=\"transparent\"\r\n                                        strokeDasharray={88}\r\n                                        strokeDashoffset={88 - (88 * progress.current) / progress.total}\r\n                                        className=\"text-[var(--color-sys-brand-primary)]\"\r\n                                        viewBox=\"0 0 32 32\"\r\n                                    />\r\n                                    <defs>\r\n                                        <linearGradient id=\"gradient-brand\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                            <stop offset=\"0%\" stopColor=\"#3B82F6\" />\r\n                                            <stop offset=\"100%\" stopColor=\"#8B5CF6\" />\r\n                                        </linearGradient>\r\n                                    </defs>\r\n                                </svg>\r\n                                <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                    <H4 className=\"text-[var(--color-sys-brand-primary)] p-0 m-0\">\r\n                                        {Math.round((progress.current / progress.total) * 100)}%\r\n                                    </H4>\r\n                                </div>\r\n                            </Box>\r\n                            <Stack gap={0}>\r\n                                <SmallText className=\"font-bold text-[var(--color-sys-text-primary)]\">Uploading...</SmallText>\r\n                                <H4 className=\"text-[var(--color-sys-text-tertiary)] font-semibold\">\r\n                                    {progress.current}/{progress.total} Parsed\r\n                                </H4>\r\n                            </Stack>\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                                className=\"h-8 w-8 ml-auto hover:bg-black/5 rounded-full\"\r\n                                onClick={() => setMinimized(false)}\r\n                            >\r\n                                <Maximize2 size={16} />\r\n                            </Button>\r\n                        </Flex>\r\n                    ) : (\r\n                        <div className=\"p-6\">\r\n                            <Flex justify=\"between\" align=\"start\" className=\"mb-6\">\r\n                                <Flex align=\"center\" gap={3}>\r\n                                    <Box className={cn(\r\n                                        \"w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg transition-colors duration-500\",\r\n                                        isComplete ? \"bg-emerald-500 text-white\" : \"bg-blue-600 text-white\"\r\n                                    )}>\r\n                                        {isComplete ? <CheckCircle size={24} strokeWidth={3} /> : <Loader2 size={24} className=\"animate-spin\" />}\r\n                                    </Box>\r\n                                    <Stack gap={0.5}>\r\n                                        <Body className=\"font-black text-xl text-[var(--color-sys-text-primary)] tracking-tight\">\r\n                                            {isComplete ? \"Processing Complete\" : `Ingesting ${uploadType}`}\r\n                                        </Body>\r\n                                        <SmallText className=\"text-[var(--color-sys-text-secondary)] font-medium\">\r\n                                            {files.length} Document{files.length !== 1 ? 's' : ''} in Queue\r\n                                        </SmallText>\r\n                                    </Stack>\r\n                                </Flex>\r\n                                <Flex gap={1}>\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon\"\r\n                                        className=\"h-8 w-8 rounded-full hover:bg-black/5 text-slate-400 hover:text-slate-600\"\r\n                                        onClick={() => setMinimized(true)}\r\n                                    >\r\n                                        <Minimize2 size={18} />\r\n                                    </Button>\r\n                                    {isComplete && (\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 rounded-full hover:bg-black/5 text-slate-400 hover:text-slate-600\"\r\n                                            onClick={resetUpload}\r\n                                        >\r\n                                            <X size={18} />\r\n                                        </Button>\r\n                                    )}\r\n                                </Flex>\r\n                            </Flex>\r\n\r\n                            <Stack gap={6}>\r\n                                {/* Progress Bar */}\r\n                                <Box className=\"w-full\">\r\n                                    <Flex justify=\"between\" align=\"end\" className=\"mb-2 w-full\">\r\n                                        <H4 className=\"text-slate-400\">\r\n                                            Parsers Active\r\n                                        </H4>\r\n                                        <Accounting className=\"font-black text-blue-600 text-h2 leading-none\">\r\n                                            {Math.round((progress.current / progress.total) * 100)}%\r\n                                        </Accounting>\r\n                                    </Flex>\r\n                                    <div className=\"h-4 w-full bg-slate-100 rounded-full overflow-hidden shadow-inner border border-slate-200/50\">\r\n                                        <motion.div\r\n                                            className={cn(\r\n                                                \"h-full rounded-full shadow-[0_2px_4px_rgba(0,0,0,0.1)] relative overflow-hidden\",\r\n                                                isComplete ? \"bg-emerald-500\" : \"bg-gradient-to-r from-blue-500 to-indigo-600\"\r\n                                            )}\r\n                                            initial={{ width: 0 }}\r\n                                            animate={{\r\n                                                width: `${(progress.current / progress.total) * 100}%`,\r\n                                            }}\r\n                                        >\r\n                                            <div className=\"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]\" />\r\n                                        </motion.div>\r\n                                    </div>\r\n                                </Box>\r\n\r\n                                {/* Grid Stats - Perfectly Aligned */}\r\n                                <div className=\"grid grid-cols-2 gap-4 w-full\">\r\n                                    <Box className=\"flex flex-col items-start justify-center p-4 bg-emerald-50/80 border border-emerald-100/80 rounded-2xl shadow-sm h-24\">\r\n                                        <Flex align=\"center\" gap={2} className=\"mb-2\">\r\n                                            <div className=\"p-1.5 bg-white rounded-full shadow-sm text-emerald-600\">\r\n                                                <CheckCircle size={14} strokeWidth={3} />\r\n                                            </div>\r\n                                            <H4 className=\"text-emerald-600/80 font-bold tracking-widest\">Accepted</H4>\r\n                                        </Flex>\r\n                                        <Accounting className=\"text-h1 font-black text-emerald-700 tracking-tighter\">{acceptedCount}</Accounting>\r\n                                    </Box>\r\n\r\n                                    <Box className={cn(\r\n                                        \"flex flex-col items-start justify-center p-4 rounded-2xl shadow-sm h-24 border transition-colors\",\r\n                                        rejectedCount > 0 ? \"bg-rose-50/80 border-rose-100/80\" : \"bg-slate-50/80 border-slate-100/80\"\r\n                                    )}>\r\n                                        <Flex align=\"center\" gap={2} className=\"mb-2\">\r\n                                            <div className={cn(\"p-1.5 bg-white rounded-full shadow-sm\", rejectedCount > 0 ? \"text-rose-600\" : \"text-slate-400\")}>\r\n                                                <AlertCircle size={14} strokeWidth={3} />\r\n                                            </div>\r\n                                            <H4 className={cn(\"font-bold tracking-widest\", rejectedCount > 0 ? \"text-rose-600/80\" : \"text-slate-400\")}>Rejected</H4>\r\n                                        </Flex>\r\n                                        <Accounting className={cn(\"text-h1 font-black tracking-tighter\", rejectedCount > 0 ? \"text-rose-700\" : \"text-slate-400\")}>{rejectedCount}</Accounting>\r\n                                    </Box>\r\n                                </div>\r\n\r\n                                {/* Actions */}\r\n                                {!isComplete && (\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"sm\"\r\n                                        onClick={cancelUpload}\r\n                                        className=\"w-full text-rose-500 hover:text-rose-600 hover:bg-rose-50 border-rose-200/60 h-12 font-bold tracking-widest text-xs uppercase rounded-xl border-2 shadow-sm\"\r\n                                    >\r\n                                        Halt Operation\r\n                                    </Button>\r\n                                )}\r\n                                {isComplete && (\r\n                                    <Button\r\n                                        onClick={resetUpload}\r\n                                        className=\"w-full bg-emerald-500 hover:bg-emerald-600 text-white shadow-lg shadow-emerald-200 h-12 font-bold tracking-widest text-xs uppercase rounded-xl\"\r\n                                    >\r\n                                        Done\r\n                                    </Button>\r\n                                )}\r\n                            </Stack>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\providers\\UploadContext.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'files' is defined but never used.","line":22,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":32,"suggestions":[{"messageId":"removeVar","data":{"varName":"files"},"fix":{"range":[516,530],"text":""},"desc":"Remove unused variable 'files'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'type' is defined but never used.","line":22,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":50,"suggestions":[{"messageId":"removeVar","data":{"varName":"type"},"fix":{"range":[529,547],"text":""},"desc":"Remove unused variable 'type'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'minimized' is defined but never used.","line":24,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":38,"suggestions":[{"messageId":"removeVar","data":{"varName":"minimized"},"fix":{"range":[618,636],"text":""},"desc":"Remove unused variable 'minimized'."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":105,"column":21,"nodeType":"MemberExpression","messageId":"unexpected","endLine":105,"endColumn":34,"suggestions":[{"fix":{"range":[3776,3818],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":121,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":121,"endColumn":26,"suggestions":[{"fix":{"range":[4424,4460],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useState, useRef, useCallback } from \"react\";\r\nimport { api } from \"@/lib/api\";\r\n\r\ntype UploadType = \"PO\" | \"SRV\";\r\n\r\ninterface UploadState {\r\n    isUploading: boolean;\r\n    progress: {\r\n        current: number;\r\n        total: number;\r\n    };\r\n    acceptedCount: number;\r\n    rejectedCount: number;\r\n    uploadType: UploadType | null;\r\n    files: File[];\r\n    minimized: boolean;\r\n}\r\n\r\ninterface UploadContextType extends UploadState {\r\n    startUpload: (files: File[], type: UploadType) => Promise<void>;\r\n    cancelUpload: () => void;\r\n    setMinimized: (minimized: boolean) => void;\r\n    resetUpload: () => void;\r\n}\r\n\r\nconst UploadContext = createContext<UploadContextType | undefined>(undefined);\r\n\r\nexport function UploadProvider({ children }: { children: React.ReactNode }) {\r\n    const [state, setState] = useState<UploadState>({\r\n        isUploading: false,\r\n        progress: { current: 0, total: 0 },\r\n        acceptedCount: 0,\r\n        rejectedCount: 0,\r\n        uploadType: null,\r\n        files: [],\r\n        minimized: false, // Changed from space in interface to camelCase\r\n    });\r\n\r\n    const isCancelled = useRef(false);\r\n\r\n    const startUpload = useCallback(async (files: File[], type: UploadType) => {\r\n        setState((prev) => ({\r\n            ...prev,\r\n            isUploading: true,\r\n            files: files,\r\n            progress: { current: 0, total: files.length },\r\n            acceptedCount: 0,\r\n            rejectedCount: 0,\r\n            uploadType: type,\r\n            minimized: false,\r\n        }));\r\n        isCancelled.current = false;\r\n\r\n        let processedCount = 0;\r\n        let accepted = 0;\r\n        let rejected = 0;\r\n        const CHUNK_SIZE = 5;\r\n\r\n        try {\r\n            for (let i = 0; i < files.length; i += CHUNK_SIZE) {\r\n                if (isCancelled.current) break;\r\n\r\n                const chunk = files.slice(i, i + CHUNK_SIZE);\r\n\r\n                try {\r\n                    let response: any = null;\r\n                    if (type === \"PO\") {\r\n                        response = await api.uploadPOBatch(chunk);\r\n                    } else if (type === \"SRV\") {\r\n                        response = await api.uploadSRVBatch(chunk);\r\n                    }\r\n\r\n                    // Process Response\r\n                    if (response) {\r\n                        // Backend returns: { total, successful, failed, results: [...] }\r\n                        const successCount = response.successful || 0;\r\n                        const totalCount = response.total || chunk.length;\r\n\r\n                        accepted += successCount;\r\n\r\n                        if (typeof response.failed === \"number\") {\r\n                            rejected += response.failed;\r\n                        } else {\r\n                            // Fallback if failed count not explicit\r\n                            rejected += Math.max(0, totalCount - successCount);\r\n                        }\r\n                    } else {\r\n                        // No response but no error thrown? Assume success for now or count as rejected?\r\n                        // If we are here, something weird happened (204?). Treat as accepted to be safe, or rejected?\r\n                        // Let's assume accepted if no error.\r\n                        accepted += chunk.length;\r\n                    }\r\n\r\n                    processedCount += chunk.length;\r\n\r\n                    setState((prev) => ({\r\n                        ...prev,\r\n                        progress: { current: processedCount, total: files.length },\r\n                        acceptedCount: accepted,\r\n                        rejectedCount: rejected,\r\n                    }));\r\n                } catch (err) {\r\n                    console.error(\"Chunk upload failed\", err);\r\n                    // Network/Server 500 Error -> All in chunk rejected\r\n                    rejected += chunk.length;\r\n                    processedCount += chunk.length;\r\n\r\n                    setState((prev) => ({\r\n                        ...prev,\r\n                        progress: { current: processedCount, total: files.length },\r\n                        rejectedCount: rejected,\r\n                    }));\r\n                }\r\n\r\n                // Keep loop non-blocking\r\n                await new Promise((resolve) => setTimeout(resolve, 50));\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Upload failed\", err);\r\n        } finally {\r\n            setState((prev) => ({ ...prev, isUploading: false }));\r\n        }\r\n    }, []);\r\n\r\n    const cancelUpload = useCallback(() => {\r\n        isCancelled.current = true;\r\n        setState((prev) => ({ ...prev, isUploading: false }));\r\n    }, []);\r\n\r\n    const setMinimized = useCallback((minimized: boolean) => {\r\n        setState((prev) => ({ ...prev, minimized }));\r\n    }, []);\r\n\r\n    const resetUpload = useCallback(() => {\r\n        setState({\r\n            isUploading: false,\r\n            progress: { current: 0, total: 0 },\r\n            acceptedCount: 0,\r\n            rejectedCount: 0,\r\n            uploadType: null,\r\n            files: [],\r\n            minimized: false,\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <UploadContext.Provider\r\n            value={{\r\n                ...state,\r\n                startUpload,\r\n                cancelUpload,\r\n                setMinimized,\r\n                resetUpload\r\n            }}\r\n        >\r\n            {children}\r\n        </UploadContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useUpload() {\r\n    const context = useContext(UploadContext);\r\n    if (context === undefined) {\r\n        throw new Error(\"useUpload must be used within an UploadProvider\");\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\ChallanDateSummary.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":53,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":53,"endColumn":68}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Challan Date Summary Table\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport PaginationControls from \"@/components/design-system/molecules/PaginationControls\";\r\nimport DownloadButton from \"@/components/DownloadButton\";\r\nimport { API_BASE_URL } from \"@/lib/api\";\r\n\r\ninterface ChallanRow {\r\n  dc_number: string;\r\n  dc_date: string;\r\n  po_number: string;\r\n  dispatched_qty: number;\r\n  invoice_status: string;\r\n}\r\n\r\ninterface ChallanDateSummaryProps {\r\n  data: {\r\n    rows: ChallanRow[];\r\n    totals: {\r\n      total_challans: number;\r\n      total_dispatched: number;\r\n      uninvoiced_count: number;\r\n    };\r\n    period: { start: string; end: string };\r\n  };\r\n}\r\n\r\nexport default function ChallanDateSummary({ data }: ChallanDateSummaryProps) {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const ITEMS_PER_PAGE = 10;\r\n\r\n  if (!data || !data.rows || data.rows.length === 0) {\r\n    return (\r\n      <div className=\"glass-card p-8 text-center\">\r\n        <p className=\"text-text-secondary\">No data for selected period</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const totalPages = Math.ceil(data.rows.length / ITEMS_PER_PAGE);\r\n  const paginatedRows = data.rows.slice(\r\n    (currentPage - 1) * ITEMS_PER_PAGE,\r\n    currentPage * ITEMS_PER_PAGE,\r\n  );\r\n\r\n  return (\r\n    <div className=\"glass-card p-6\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h3 className=\"text-[16px] font-semibold text-text-primary\">\r\n          Challan Summary ({data.period.start} to {data.period.end})\r\n        </h3>\r\n        <DownloadButton\r\n          url={`${API_BASE_URL}/api/reports/register/dc?export=true&start_date=${data.period.start}&end_date=${data.period.end}`}\r\n          filename={`Challan_Summary_${data.period.start}_to_${data.period.end}.xlsx`}\r\n          label=\"Export\"\r\n          size=\"sm\"\r\n        />\r\n      </div>\r\n\r\n      {/* Totals */}\r\n      <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Total Challans</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            {data.totals.total_challans}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-3 bg-emerald-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Total Dispatched</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            {data.totals.total_dispatched.toLocaleString()}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-3 bg-amber-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Uninvoiced</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            {data.totals.uninvoiced_count}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full text-sm\">\r\n          <thead>\r\n            <tr className=\"border-b border-border\">\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                DC Number\r\n              </th>\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                DC Date\r\n              </th>\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Linked PO\r\n              </th>\r\n              <th className=\"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Dispatched Qty\r\n              </th>\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Invoice Status\r\n              </th>\r\n              <th className=\"text-center py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Quick Export\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedRows.map((row, idx) => (\r\n              <tr\r\n                key={`row-${idx}`}\r\n                className=\"border-b border-border/50 hover:bg-gray-50\"\r\n              >\r\n                <td className=\"py-3 px-4 font-medium text-text-primary\">\r\n                  {row.dc_number}\r\n                </td>\r\n                <td className=\"py-3 px-4 text-text-secondary\">{row.dc_date}</td>\r\n                <td className=\"py-3 px-4 text-text-primary\">{row.po_number}</td>\r\n                <td className=\"py-3 px-4 text-right text-text-primary\">\r\n                  {row.dispatched_qty.toLocaleString()}\r\n                </td>\r\n                <td className=\"py-3 px-4\">\r\n                  <span\r\n                    className={`inline-block px-2 py-1 rounded text-xs font-medium ${row.invoice_status === \"Invoiced\"\r\n                      ? \"bg-emerald-100 text-emerald-700\"\r\n                      : \"bg-amber-100 text-amber-700\"\r\n                      }`}\r\n                  >\r\n                    {row.invoice_status}\r\n                  </span>\r\n                </td>\r\n                <td className=\"py-3 px-4 text-center\">\r\n                  <div className=\"flex justify-center gap-1\">\r\n                    <DownloadButton\r\n                      url={`${API_BASE_URL}/api/dc/${row.dc_number}/download`}\r\n                      filename={`DC_${row.dc_number}.xlsx`}\r\n                      label=\"DC\"\r\n                      size=\"sm\"\r\n                      variant=\"ghost\"\r\n                    />\r\n                    <DownloadButton\r\n                      url={`${API_BASE_URL}/api/reports/guarantee-certificate?dc_number=${row.dc_number}`}\r\n                      filename={`GC_${row.dc_number}.xlsx`}\r\n                      label=\"GC\"\r\n                      size=\"sm\"\r\n                      variant=\"outline\"\r\n                    />\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <PaginationControls\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        onPageChange={setCurrentPage}\r\n        itemName=\"DC's\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\CollapsibleVoiceHeader.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'query' is defined but never used.","line":6,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"query"},"fix":{"range":[206,219],"text":""},"desc":"Remove unused variable 'query'."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":92,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":92,"endColumn":103},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":103,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":103,"endColumn":197}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { Search, Mic, ChevronDown, ChevronUp, Sparkles } from \"lucide-react\";\r\n\r\ninterface CollapsibleVoiceHeaderProps {\r\n  onVoiceStart: () => void;\r\n  onSearch: (query: string) => void;\r\n}\r\n\r\nexport function CollapsibleVoiceHeader({\r\n  onVoiceStart,\r\n  onSearch,\r\n}: CollapsibleVoiceHeaderProps) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (query.trim()) {\r\n      onSearch(query);\r\n      setIsExpanded(false);\r\n    }\r\n  };\r\n\r\n  const suggestions = [\r\n    \"Monthly summary\",\r\n    \"Pending issues\",\r\n    \"Uninvoiced challans\",\r\n    \"Compare quarters\",\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-white border-b border-gray-200 transition-all duration-200\">\r\n      {/* Compact Header */}\r\n      <div className=\"px-6 py-2 flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <h1 className=\"text-lg font-semibold text-gray-900\">\r\n            Reports & Analytics\r\n          </h1>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Compact Search */}\r\n          <button\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            className=\"flex items-center gap-2 px-3 py-1.5 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm text-gray-600 transition-colors\"\r\n          >\r\n            <Search className=\"w-4 h-4\" />\r\n            <span className=\"text-xs\">Ask anything...</span>\r\n            {isExpanded ? (\r\n              <ChevronUp className=\"w-3 h-3\" />\r\n            ) : (\r\n              <ChevronDown className=\"w-3 h-3\" />\r\n            )}\r\n          </button>\r\n\r\n          <button\r\n            onClick={onVoiceStart}\r\n            className=\"p-1.5 hover:bg-gray-100 rounded-lg text-gray-600 transition-colors\"\r\n            title=\"Voice Mode\"\r\n          >\r\n            <Mic className=\"w-4 h-4\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Expanded Search Bar */}\r\n      {isExpanded && (\r\n        <div className=\"px-6 pb-3 animate-in slide-in-from-top-2 duration-200\">\r\n          <form onSubmit={handleSubmit} className=\"relative\">\r\n            <div className=\"absolute inset-y-0 left-3 flex items-center pointer-events-none\">\r\n              <Search className=\"w-4 h-4 text-gray-400\" />\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              value={query}\r\n              onChange={(e) => setQuery(e.target.value)}\r\n              placeholder=\"Ask about orders, dispatch, billing...\"\r\n              className=\"w-full pl-10 pr-12 py-2.5 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all\"\r\n              autoFocus\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={onVoiceStart}\r\n              className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-gray-200 rounded-lg transition-colors text-blue-600\"\r\n            >\r\n              <Mic className=\"w-4 h-4\" />\r\n            </button>\r\n          </form>\r\n\r\n          {/* Chips */}\r\n          <div className=\"flex flex-wrap gap-1.5 mt-2\">\r\n            <div className=\"flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium text-blue-600\">\r\n              <Sparkles className=\"w-2.5 h-2.5\" />\r\n              <span>Suggested:</span>\r\n            </div>\r\n            {suggestions.map((s) => (\r\n              <button\r\n                key={s}\r\n                onClick={() => {\r\n                  onSearch(s);\r\n                  setIsExpanded(false);\r\n                }}\r\n                className=\"px-2 py-0.5 bg-white border border-gray-200 rounded-full text-[10px] font-medium text-gray-600 hover:border-blue-500 hover:text-blue-600 hover:bg-blue-50 transition-all\"\r\n              >\r\n                {s}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\CommandBar.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'query' is defined but never used.","line":6,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":27,"suggestions":[{"messageId":"removeVar","data":{"varName":"query"},"fix":{"range":[170,183],"text":""},"desc":"Remove unused variable 'query'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { Mic, Search, Sparkles } from \"lucide-react\";\r\n\r\ninterface CommandBarProps {\r\n  onVoiceStart: () => void;\r\n  onSearch: (query: string) => void;\r\n}\r\n\r\nexport function CommandBar({ onVoiceStart, onSearch }: CommandBarProps) {\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (query.trim()) onSearch(query);\r\n  };\r\n\r\n  const suggestions = [\r\n    \"Monthly summary\",\r\n    \"Pending issues\",\r\n    \"Uninvoiced challans\",\r\n    \"Compare quarters\",\r\n  ];\r\n\r\n  return (\r\n    <div className=\"relative mb-8\">\r\n      {/* Main Input */}\r\n      <form onSubmit={handleSubmit} className=\"relative group\">\r\n        <div className=\"absolute inset-y-0 left-4 flex items-center pointer-events-none\">\r\n          <Search className=\"w-5 h-5 text-gray-400 group-focus-within:text-primary transition-colors\" />\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={(e) => setQuery(e.target.value)}\r\n          placeholder=\"Ask anything about orders, dispatch, or billing...\"\r\n          className=\"w-full pl-12 pr-14 py-4 bg-white border border-gray-200 rounded-2xl shadow-sm text-lg focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all placeholder:text-gray-400\"\r\n        />\r\n\r\n        {/* Voice Button */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={onVoiceStart}\r\n          className=\"absolute right-3 top-1/2 -translate-y-1/2 p-2 hover:bg-gray-100 rounded-xl transition-colors text-primary\"\r\n          title=\"Start Voice Mode\"\r\n        >\r\n          <Mic className=\"w-6 h-6\" />\r\n        </button>\r\n      </form>\r\n\r\n      {/* Chips */}\r\n      <div className=\"flex flex-wrap gap-2 mt-3 px-1\">\r\n        <div className=\"flex items-center gap-1.5 px-2 py-1 text-xs font-medium text-primary/70\">\r\n          <Sparkles className=\"w-3 h-3\" />\r\n          <span>Suggested:</span>\r\n        </div>\r\n        {suggestions.map((s) => (\r\n          <button\r\n            key={s}\r\n            onClick={() => onSearch(s)}\r\n            className=\"px-3 py-1.5 bg-white border border-gray-200 rounded-full text-xs font-medium text-gray-600 hover:border-primary hover:text-primary hover:bg-primary/5 transition-all\"\r\n          >\r\n            {s}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\CompactKPIRow.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'getStatusColor' is assigned a value but never used.","line":25,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":25,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"getStatusColor"},"fix":{"range":[572,914],"text":""},"desc":"Remove unused variable 'getStatusColor'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getStatusColor' is assigned a value but never used.","line":25,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'idx' is defined but never used.","line":49,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":49,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"idx"},"fix":{"range":[1244,1249],"text":""},"desc":"Remove unused variable 'idx'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'idx' is defined but never used.","line":49,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":26}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport {\r\n  TrendingUp,\r\n  TrendingDown,\r\n  AlertTriangle,\r\n  CheckCircle,\r\n} from \"lucide-react\";\r\nimport { Label, Accounting, SmallText } from \"@/components/design-system/organisms\";\r\n\r\nexport interface KPIData {\r\n  label: string;\r\n  value: string | number;\r\n  unit?: string;\r\n  trend?: number; // percentage change\r\n  status?: \"success\" | \"warning\" | \"error\" | \"neutral\";\r\n  subtitle?: string;\r\n  onClick?: () => void;\r\n}\r\n\r\ninterface CompactKPIProps {\r\n  kpis: KPIData[];\r\n}\r\n\r\nexport function CompactKPIRow({ kpis }: CompactKPIProps) {\r\n  const getStatusColor = (status?: string) => {\r\n    switch (status) {\r\n      case \"success\":\r\n        return \"text-green-600 bg-green-50\";\r\n      case \"warning\":\r\n        return \"text-amber-600 bg-amber-50\";\r\n      case \"error\":\r\n        return \"text-red-600 bg-red-50\";\r\n      default:\r\n        return \"text-blue-600 bg-blue-50\";\r\n    }\r\n  };\r\n\r\n  const getTrendIcon = (trend?: number) => {\r\n    if (!trend) return null;\r\n    return trend > 0 ? (\r\n      <TrendingUp className=\"w-3 h-3 text-green-500\" />\r\n    ) : (\r\n      <TrendingDown className=\"w-3 h-3 text-red-500\" />\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-5 gap-3 mb-4\">\r\n      {kpis.map((kpi, idx) => (\r\n        <div\r\n          key={kpi.label}\r\n          className=\"bg-[var(--color-sys-bg-surface)] rounded-lg border border-[var(--color-sys-bg-tertiary)] p-3 hover:shadow-md transition-shadow\"\r\n        >\r\n          <div className=\"flex items-start justify-between mb-1\">\r\n            <Label className=\"text-gray-500 uppercase tracking-wide mb-0\">\r\n              {kpi.label}\r\n            </Label>\r\n            {kpi.status === \"error\" && (\r\n              <AlertTriangle className=\"w-3 h-3 text-red-500\" />\r\n            )}\r\n            {kpi.status === \"success\" && (\r\n              <CheckCircle className=\"w-3 h-3 text-green-500\" />\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex items-baseline gap-1\">\r\n            <Accounting className=\"text-2xl font-bold text-gray-900\">\r\n              {kpi.value}\r\n            </Accounting>\r\n            {kpi.unit && (\r\n              <SmallText className=\"text-gray-500\">{kpi.unit}</SmallText>\r\n            )}\r\n          </div>\r\n\r\n          {(kpi.trend !== undefined || kpi.subtitle) && (\r\n            <div className=\"flex items-center gap-1 mt-1\">\r\n              {getTrendIcon(kpi.trend)}\r\n              <Label\r\n                className={`font-medium mb-0 ${kpi.trend && kpi.trend > 0\r\n                  ? \"text-green-600\"\r\n                  : kpi.trend && kpi.trend < 0\r\n                    ? \"text-red-600\"\r\n                    : \"text-gray-500\"\r\n                  }`}\r\n              >\r\n                {kpi.subtitle || (kpi.trend ? `${Math.abs(kpi.trend)}%` : \"\")}\r\n              </Label>\r\n            </div>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\DateSummaryControls.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'entity' is defined but never used.","line":12,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":33,"suggestions":[{"messageId":"removeVar","data":{"varName":"entity"},"fix":{"range":[283,298],"text":""},"desc":"Remove unused variable 'entity'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'startDate' is defined but never used.","line":12,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"startDate"},"fix":{"range":[297,316],"text":""},"desc":"Remove unused variable 'startDate'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'endDate' is defined but never used.","line":12,"column":54,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":69,"suggestions":[{"messageId":"removeVar","data":{"varName":"endDate"},"fix":{"range":[316,333],"text":""},"desc":"Remove unused variable 'endDate'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Date-Wise Summary Controls\r\n * Compact controls row for entity selection, date picking, and actions\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Calendar, Download, Eye } from \"lucide-react\";\r\n\r\ninterface DateSummaryControlsProps {\r\n  onViewSummary: (entity: string, startDate: string, endDate: string) => void;\r\n  onExport: () => void;\r\n  exportEnabled: boolean;\r\n  loading: boolean;\r\n}\r\n\r\nexport default function DateSummaryControls({\r\n  onViewSummary,\r\n  onExport,\r\n  exportEnabled,\r\n  loading,\r\n}: DateSummaryControlsProps) {\r\n  const [entity, setEntity] = useState(\"po\");\r\n  const [startDate, setStartDate] = useState(\"2019-01-01\");\r\n  const [endDate, setEndDate] = useState(\"2019-12-31\");\r\n\r\n  const handleView = () => {\r\n    onViewSummary(entity, startDate, endDate);\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap items-center gap-3\">\r\n      {/* Entity Dropdown */}\r\n      <div className=\"flex items-center gap-2\">\r\n        <label className=\"text-sm font-medium text-text-secondary\">\r\n          Summary Type:\r\n        </label>\r\n        <select\r\n          value={entity}\r\n          onChange={(e) => setEntity(e.target.value)}\r\n          className=\"px-3 py-2 border border-border rounded-lg text-sm font-medium text-text-primary bg-white focus:outline-none focus:ring-2 focus:ring-primary/20\"\r\n        >\r\n          <option value=\"po\">PO Summary</option>\r\n          <option value=\"challan\">Challan Summary</option>\r\n          <option value=\"invoice\">Invoice Summary</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Date Range */}\r\n      <div className=\"flex items-center gap-2 bg-white/40 backdrop-blur-md px-4 py-2 rounded-xl border border-white/50 shadow-[0_2px_10px_rgba(0,0,0,0.02)] focus-within:ring-2 focus-within:ring-blue-500/10 transition-all\">\r\n        <Calendar className=\"w-4 h-4 text-blue-600\" />\r\n        <input\r\n          type=\"date\"\r\n          value={startDate}\r\n          onChange={(e) => setStartDate(e.target.value)}\r\n          className=\"bg-transparent border-none text-sm font-bold text-slate-800 focus:ring-0 w-36 cursor-pointer\"\r\n        />\r\n        <span className=\"text-slate-300 font-black px-1\">ΓåÆ</span>\r\n        <input\r\n          type=\"date\"\r\n          value={endDate}\r\n          onChange={(e) => setEndDate(e.target.value)}\r\n          className=\"bg-transparent border-none text-sm font-bold text-slate-800 focus:ring-0 w-36 cursor-pointer\"\r\n        />\r\n      </div>\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex items-center gap-2 ml-auto\">\r\n        <button\r\n          onClick={handleView}\r\n          disabled={loading}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n        >\r\n          <Eye className=\"w-4 h-4\" />\r\n          View Summary\r\n        </button>\r\n        <button\r\n          onClick={onExport}\r\n          disabled={!exportEnabled || loading}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-white border border-border text-text-primary rounded-lg text-sm font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n        >\r\n          <Download className=\"w-4 h-4\" />\r\n          Download Excel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\DualAxisLineChart.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":146,"column":14,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":146,"endColumn":121},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":159,"column":12,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":159,"endColumn":105}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\n\r\ninterface TrendData {\r\n  month: string;\r\n  ordered_value: number;\r\n  invoiced_value: number;\r\n}\r\n\r\ninterface DualAxisChartProps {\r\n  data: TrendData[];\r\n}\r\n\r\nexport function DualAxisLineChart({ data }: DualAxisChartProps) {\r\n  if (!data || data.length === 0) return null;\r\n\r\n  // Calculate scales\r\n  const maxOrdered = Math.max(...data.map((d) => d.ordered_value));\r\n  const maxInvoiced = Math.max(...data.map((d) => d.invoiced_value));\r\n  const scaleOrdered = maxOrdered > 0 ? 100 / maxOrdered : 1;\r\n  const scaleInvoiced = maxInvoiced > 0 ? 100 / maxInvoiced : 1;\r\n\r\n  // Generate SVG path for line charts\r\n  const generatePath = (values: number[], scale: number) => {\r\n    const width = 100;\r\n    const step = width / (values.length - 1 || 1);\r\n\r\n    return values\r\n      .map((val, idx) => {\r\n        const x = idx * step;\r\n        const y = 100 - val * scale;\r\n        return `${idx === 0 ? \"M\" : \"L\"} ${x} ${y}`;\r\n      })\r\n      .join(\" \");\r\n  };\r\n\r\n  const orderedPath = generatePath(\r\n    data.map((d) => d.ordered_value),\r\n    scaleOrdered,\r\n  );\r\n  const invoicedPath = generatePath(\r\n    data.map((d) => d.invoiced_value),\r\n    scaleInvoiced,\r\n  );\r\n\r\n  const months = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"May\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Aug\",\r\n    \"Sep\",\r\n    \"Oct\",\r\n    \"Nov\",\r\n    \"Dec\",\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-[var(--color-sys-bg-surface)] p-4 rounded-xl border border-[var(--color-sys-bg-tertiary)]\">\r\n      <div className=\"flex justify-between items-center mb-3\">\r\n        <h3 className=\"text-sm font-semibold text-gray-800\">\r\n          Sales vs Dispatch Trends\r\n        </h3>\r\n        <div className=\"flex items-center gap-3 text-xs font-medium\">\r\n          <div className=\"flex items-center gap-1.5\">\r\n            <div className=\"w-3 h-0.5 bg-blue-500\"></div> Ordered\r\n          </div>\r\n          <div className=\"flex items-center gap-1.5\">\r\n            <div className=\"w-3 h-0.5 bg-green-500\"></div> Invoiced\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"relative h-48 w-full\">\r\n        {/* Grid lines */}\r\n        <svg\r\n          className=\"absolute inset-0 w-full h-full\"\r\n          viewBox=\"0 0 100 100\"\r\n          preserveAspectRatio=\"none\"\r\n        >\r\n          <defs>\r\n            <pattern\r\n              id=\"grid\"\r\n              width=\"10\"\r\n              height=\"10\"\r\n              patternUnits=\"userSpaceOnUse\"\r\n            >\r\n              <path\r\n                d=\"M 10 0 L 0 0 0 10\"\r\n                fill=\"none\"\r\n                stroke=\"#f0f0f0\"\r\n                strokeWidth=\"0.5\"\r\n              />\r\n            </pattern>\r\n          </defs>\r\n          <rect width=\"100\" height=\"100\" fill=\"url(#grid)\" />\r\n\r\n          {/* Ordered line */}\r\n          <path\r\n            d={orderedPath}\r\n            fill=\"none\"\r\n            stroke=\"#3b82f6\"\r\n            strokeWidth=\"2\"\r\n            vectorEffect=\"non-scaling-stroke\"\r\n          />\r\n\r\n          {/* Invoiced line */}\r\n          <path\r\n            d={invoicedPath}\r\n            fill=\"none\"\r\n            stroke=\"#10b981\"\r\n            strokeWidth=\"2\"\r\n            vectorEffect=\"non-scaling-stroke\"\r\n          />\r\n\r\n          {/* Data points */}\r\n          {data.map((d, idx) => {\r\n            const x = (idx / (data.length - 1 || 1)) * 100;\r\n            const yOrdered = 100 - d.ordered_value * scaleOrdered;\r\n            const yInvoiced = 100 - d.invoiced_value * scaleInvoiced;\r\n\r\n            return (\r\n              <g key={`bar-${idx}`}>\r\n                <circle\r\n                  cx={x}\r\n                  cy={yOrdered}\r\n                  r=\"1.5\"\r\n                  fill=\"#3b82f6\"\r\n                  vectorEffect=\"non-scaling-stroke\"\r\n                />\r\n                <circle\r\n                  cx={x}\r\n                  cy={yInvoiced}\r\n                  r=\"1.5\"\r\n                  fill=\"#10b981\"\r\n                  vectorEffect=\"non-scaling-stroke\"\r\n                />\r\n              </g>\r\n            );\r\n          })}\r\n        </svg>\r\n\r\n        {/* X-axis labels */}\r\n        <div className=\"absolute bottom-0 left-0 right-0 flex justify-between px-1 text-[9px] text-gray-400 font-medium\">\r\n          {months.map((month, idx) => (\r\n            <span\r\n              key={`line-${idx}`}\r\n              className={data[idx] ? \"opacity-100\" : \"opacity-30\"}\r\n            >\r\n              {month}\r\n            </span>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* AI Insight */}\r\n      <div className=\"mt-3 p-2 bg-blue-50/50 rounded text-[10px] text-blue-800 flex items-start gap-1.5\">\r\n        <span className=\"font-semibold shrink-0\">≡ƒÆí</span>\r\n        <p>\r\n          Invoicing trails orders by 12% this quarter. Consider expediting\r\n          dispatch for pending items.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\InsightStrip.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'action' is defined but never used.","line":17,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"action"},"fix":{"range":[309,323],"text":""},"desc":"Remove unused variable 'action'."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport {\r\n  AlertCircle,\r\n  TrendingDown,\r\n  CheckCircle,\r\n  ArrowRight,\r\n} from \"lucide-react\";\r\n\r\nexport interface Insight {\r\n  type: \"warning\" | \"error\" | \"success\";\r\n  text: string;\r\n  action?: string;\r\n}\r\n\r\ninterface InsightStripProps {\r\n  insights: Insight[];\r\n  onAction?: (action: string) => void;\r\n}\r\n\r\nexport function InsightStrip({ insights, onAction }: InsightStripProps) {\r\n  if (!insights || insights.length === 0) return null;\r\n\r\n  const getIcon = (type: Insight[\"type\"]) => {\r\n    switch (type) {\r\n      case \"warning\":\r\n        return <AlertCircle className=\"w-5 h-5 text-amber-600\" />;\r\n      case \"error\":\r\n        return <TrendingDown className=\"w-5 h-5 text-red-600\" />;\r\n      case \"success\":\r\n        return <CheckCircle className=\"w-5 h-5 text-green-600\" />;\r\n    }\r\n  };\r\n\r\n  const getStyles = (type: Insight[\"type\"]) => {\r\n    switch (type) {\r\n      case \"warning\":\r\n        return \"bg-amber-50 border-amber-200 text-amber-900\";\r\n      case \"error\":\r\n        return \"bg-red-50 border-red-200 text-red-900\";\r\n      case \"success\":\r\n        return \"bg-green-50 border-green-200 text-green-900\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n      {insights.map((insight, idx) => (\r\n        <div\r\n          key={`insight-${idx}`}\r\n          onClick={() => onAction && insight.action && onAction(insight.action)}\r\n          className={`\r\n                        p-4 rounded-xl border flex items-start gap-3 cursor-pointer transition-all hover:scale-[1.01] hover:shadow-sm\r\n                        ${getStyles(insight.type)}\r\n                    `}\r\n        >\r\n          <div className=\"mt-0.5 shrink-0\">{getIcon(insight.type)}</div>\r\n          <div className=\"flex-1\">\r\n            <p className=\"font-medium text-sm leading-snug\">{insight.text}</p>\r\n            {insight.action && (\r\n              <div className=\"flex items-center gap-1 mt-2 text-xs font-semibold opacity-80 hover:opacity-100\">\r\n                <span>View Details</span>\r\n                <ArrowRight className=\"w-3 h-3\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\InsightsPanel.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'TrendingDown' is defined but never used.","line":5,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":15,"suggestions":[{"messageId":"removeVar","data":{"varName":"TrendingDown"},"fix":{"range":[66,83],"text":""},"desc":"Remove unused variable 'TrendingDown'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingDown' is defined but never used.","line":5,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'H3' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"H3"},"fix":{"range":[134,137],"text":""},"desc":"Remove unused variable 'H3'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H3' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":12},{"ruleId":"no-unused-vars","severity":1,"message":"'Body' is defined but never used.","line":8,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"Body"},"fix":{"range":[140,146],"text":""},"desc":"Remove unused variable 'Body'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used.","line":8,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'action' is defined but never used.","line":27,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"action"},"fix":{"range":[549,564],"text":""},"desc":"Remove unused variable 'action'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used.","line":27,"column":31,"nodeType":"Identifier","messageId":"unusedVar","endLine":27,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[563,575],"text":""},"desc":"Remove unused variable 'data'."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport {\r\n  AlertTriangle,\r\n  FileText,\r\n  TrendingDown,\r\n  ArrowRight,\r\n} from \"lucide-react\";\r\nimport { H3, H4, Body, SmallText, Accounting, Label } from \"@/components/design-system/organisms\";\r\n\r\ninterface PendingItem {\r\n  category: string;\r\n  count: number;\r\n  percentage: number;\r\n  action?: string;\r\n}\r\n\r\ninterface TopItem {\r\n  name: string;\r\n  units: number;\r\n  trend: number;\r\n}\r\n\r\ninterface InsightsPanelProps {\r\n  pendingItems: PendingItem[];\r\n  uninvoicedCount: number;\r\n  topItems?: TopItem[];\r\n  onAction?: (action: string, data?: any) => void;\r\n}\r\n\r\nexport function InsightsPanel({\r\n  pendingItems,\r\n  uninvoicedCount,\r\n  topItems = [],\r\n  onAction,\r\n}: InsightsPanelProps) {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {/* Pending Breakdown */}\r\n      <div className=\"bg-[var(--color-sys-bg-surface)] p-4 rounded-xl border border-[var(--color-sys-bg-tertiary)]\">\r\n        <div className=\"flex items-center gap-2 mb-3\">\r\n          <AlertTriangle className=\"w-4 h-4 text-amber-600\" />\r\n          <H4 className=\"text-gray-800\">\r\n            Pending Breakdown\r\n          </H4>\r\n        </div>\r\n\r\n        <div className=\"space-y-2.5\">\r\n          {pendingItems.map((item, idx) => (\r\n            <div key={item.category || `pending-${idx}`}>\r\n              <div className=\"flex justify-between text-xs font-medium mb-1\">\r\n                <SmallText className=\"text-gray-700\">{item.category}</SmallText>\r\n                <Accounting className=\"text-gray-900 text-xs\">{item.count} items</Accounting>\r\n              </div>\r\n              <div className=\"h-1.5 w-full bg-gray-100 rounded-full overflow-hidden\">\r\n                <div\r\n                  className={`h-full rounded-full ${item.percentage > 50\r\n                    ? \"bg-red-400\"\r\n                    : item.percentage > 30\r\n                      ? \"bg-amber-400\"\r\n                      : \"bg-green-400\"\r\n                    }`}\r\n                  style={{ width: `${item.percentage}%` }}\r\n                ></div>\r\n              </div>\r\n              {item.action && (\r\n                <button\r\n                  onClick={() => onAction?.(item.action!, item)}\r\n                  className=\"text-blue-600 hover:text-blue-700 font-medium mt-1 flex items-center gap-1\"\r\n                >\r\n                  <Label className=\"mb-0\">{item.action}</Label> <ArrowRight className=\"w-2.5 h-2.5\" />\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Uninvoiced Challans - Actionable */}\r\n      {uninvoicedCount > 0 && (\r\n        <div className=\"bg-red-50 border border-red-200 p-4 rounded-xl\">\r\n          <div className=\"flex items-start gap-2 mb-2\">\r\n            <FileText className=\"w-4 h-4 text-red-600 mt-0.5 shrink-0\" />\r\n            <div className=\"flex-1\">\r\n              <H4 className=\"text-red-900\">\r\n                {uninvoicedCount} Challan{uninvoicedCount > 1 ? \"s\" : \"\"}{\" \"}\r\n                Pending Invoice\r\n              </H4>\r\n              <SmallText className=\"text-red-700 mt-0.5\">\r\n                Overdue by 14+ days. Revenue at risk.\r\n              </SmallText>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-2 mt-3\">\r\n            <button\r\n              onClick={() => onAction?.(\"draft_invoice_all\")}\r\n              className=\"flex-1 px-3 py-1.5 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors\"\r\n            >\r\n              <SmallText className=\"text-white\">Draft Invoice Now</SmallText>\r\n            </button>\r\n            <button\r\n              onClick={() => onAction?.(\"view_details\")}\r\n              className=\"px-3 py-1.5 bg-white border border-red-300 text-red-700 font-semibold rounded-lg hover:bg-red-50 transition-colors\"\r\n            >\r\n              <SmallText className=\"text-red-700\">View Details</SmallText>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Top Selling Items */}\r\n      {topItems && topItems.length > 0 && (\r\n        <div className=\"bg-[var(--color-sys-bg-surface)] p-4 rounded-xl border border-[var(--color-sys-bg-tertiary)]\">\r\n          <H4 className=\"text-gray-800 mb-3\">\r\n            Top Selling Items\r\n          </H4>\r\n          <div className=\"space-y-2\">\r\n            {topItems.slice(0, 3).map((item, idx) => (\r\n              <div\r\n                key={`top-item-${idx}`}\r\n                className=\"flex items-center justify-between text-xs\"\r\n              >\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"text-gray-400 font-mono\">{idx + 1}.</span>\r\n                  <span\r\n                    className=\"font-medium text-gray-700 truncate max-w-[150px]\"\r\n                    title={item.name}\r\n                  >\r\n                    {item.name}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className=\"font-semibold text-gray-900\">\r\n                    {item.units}\r\n                  </span>\r\n                  {item.trend !== 0 && (\r\n                    <Label\r\n                      className={`font-medium mb-0 ${item.trend > 0 ? \"text-green-600\" : \"text-red-600\"}`}\r\n                    >\r\n                      {item.trend > 0 ? \"Γåæ\" : \"Γåô\"}\r\n                      {Math.abs(item.trend)}%\r\n                    </Label>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\InvoiceDateSummary.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":52,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":52,"endColumn":68}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Invoice Date Summary Table\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport PaginationControls from \"@/components/design-system/molecules/PaginationControls\";\r\nimport DownloadButton from \"@/components/DownloadButton\";\r\nimport { API_BASE_URL } from \"@/lib/api\";\r\n\r\ninterface InvoiceRow {\r\n  invoice_number: string;\r\n  invoice_date: string;\r\n  linked_dc_numbers: string;\r\n  invoice_value: number;\r\n}\r\n\r\ninterface InvoiceDateSummaryProps {\r\n  data: {\r\n    rows: InvoiceRow[];\r\n    totals: {\r\n      total_invoices: number;\r\n      total_value: number;\r\n      avg_value: number;\r\n    };\r\n    period: { start: string; end: string };\r\n  };\r\n}\r\n\r\nexport default function InvoiceDateSummary({ data }: InvoiceDateSummaryProps) {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const ITEMS_PER_PAGE = 10;\r\n\r\n  if (!data || !data.rows || data.rows.length === 0) {\r\n    return (\r\n      <div className=\"glass-card p-8 text-center\">\r\n        <p className=\"text-text-secondary\">No data for selected period</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const totalPages = Math.ceil(data.rows.length / ITEMS_PER_PAGE);\r\n  const paginatedRows = data.rows.slice(\r\n    (currentPage - 1) * ITEMS_PER_PAGE,\r\n    currentPage * ITEMS_PER_PAGE,\r\n  );\r\n\r\n  return (\r\n    <div className=\"glass-card p-6\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h3 className=\"text-[16px] font-semibold text-text-primary\">\r\n          Invoice Summary ({data.period.start} to {data.period.end})\r\n        </h3>\r\n        <DownloadButton\r\n          url={`${API_BASE_URL}/api/reports/register/invoice?export=true&start_date=${data.period.start}&end_date=${data.period.end}`}\r\n          filename={`Invoice_Summary_${data.period.start}_to_${data.period.end}.xlsx`}\r\n          label=\"Export\"\r\n          size=\"sm\"\r\n        />\r\n      </div>\r\n\r\n      {/* Totals */}\r\n      <div className=\"grid grid-cols-3 gap-4 mb-6\">\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Total Invoices</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            {data.totals.total_invoices}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-3 bg-emerald-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Total Value</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            Γé╣{(data.totals.total_value / 100000).toFixed(2)}L\r\n          </p>\r\n        </div>\r\n        <div className=\"p-3 bg-purple-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Average Value</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            Γé╣{(data.totals.avg_value / 1000).toFixed(1)}K\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full text-sm\">\r\n          <thead>\r\n            <tr className=\"border-b border-border\">\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Invoice Number\r\n              </th>\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Invoice Date\r\n              </th>\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Linked DC Numbers\r\n              </th>\r\n              <th className=\"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Invoice Value\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedRows.map((row, idx) => (\r\n              <tr\r\n                key={`row-${idx}`}\r\n                className=\"border-b border-border/50 hover:bg-gray-50\"\r\n              >\r\n                <td className=\"py-3 px-4 font-medium text-text-primary\">\r\n                  {row.invoice_number}\r\n                </td>\r\n                <td className=\"py-3 px-4 text-text-secondary\">\r\n                  {row.invoice_date}\r\n                </td>\r\n                <td className=\"py-3 px-4 text-text-primary\">\r\n                  {row.linked_dc_numbers}\r\n                </td>\r\n                <td className=\"py-3 px-4 text-right text-text-primary font-medium\">\r\n                  Γé╣{row.invoice_value.toLocaleString()}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <PaginationControls\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        onPageChange={setCurrentPage}\r\n        itemName=\"Invoices\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\POAgingReport.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":71,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":71,"endColumn":70},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":81,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":81,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":84,"column":26,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":84,"endColumn":117},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":87,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":87,"endColumn":87},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":100,"column":26,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":100,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":105,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":105,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":108,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":108,"endColumn":74},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":122,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":122,"endColumn":83},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":125,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":125,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":134,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":134,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":140,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":140,"endColumn":87},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":146,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":146,"endColumn":85}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PO Aging & Risk Report Component\r\n * Displays age buckets with pending quantity distribution\r\n */\r\n\r\ninterface POAgingData {\r\n  period: string;\r\n  age_buckets: {\r\n    \"0_7_days\": {\r\n      po_count: number;\r\n      pending_qty: number;\r\n      percentage: number;\r\n      pos: string[];\r\n    };\r\n    \"8_30_days\": {\r\n      po_count: number;\r\n      pending_qty: number;\r\n      percentage: number;\r\n      pos: string[];\r\n    };\r\n    \"30_plus_days\": {\r\n      po_count: number;\r\n      pending_qty: number;\r\n      percentage: number;\r\n      pos: string[];\r\n    };\r\n  };\r\n  total_pending_qty: number;\r\n}\r\n\r\nimport {\r\n  H2,\r\n  H3,\r\n  Body,\r\n  SmallText,\r\n  Accounting,\r\n} from \"@/components/design-system/organisms\";\r\n\r\ninterface POAgingReportProps {\r\n  data: POAgingData;\r\n  aiSummary?: string;\r\n}\r\n\r\nexport default function POAgingReport({ data, aiSummary }: POAgingReportProps) {\r\n  const buckets = [\r\n    {\r\n      key: \"0_7_days\",\r\n      label: \"0-7 Days\",\r\n      color: \"bg-[var(--color-sys-status-success)]\",\r\n      data: data.age_buckets[\"0_7_days\"],\r\n    },\r\n    {\r\n      key: \"8_30_days\",\r\n      label: \"8-30 Days\",\r\n      color: \"bg-[var(--color-sys-status-warning)]\",\r\n      data: data.age_buckets[\"8_30_days\"],\r\n    },\r\n    {\r\n      key: \"30_plus_days\",\r\n      label: \"30+ Days\",\r\n      color: \"bg-[var(--color-sys-status-error)]\",\r\n      data: data.age_buckets[\"30_plus_days\"],\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <H2>PO Aging & Risk Analysis</H2>\r\n        <Body className=\"text-[var(--color-sys-text-secondary)] mt-1\">\r\n          Total Pending: <Accounting>{data.total_pending_qty}</Accounting> units\r\n        </Body>\r\n      </div>\r\n\r\n      {/* AI Summary */}\r\n      {aiSummary && (\r\n        <div className=\"p-4 bg-[var(--color-sys-brand-primary)]/5 border border-[var(--color-sys-brand-primary)]/20 rounded-2xl backdrop-blur-sm\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-[var(--color-sys-brand-primary)]/10 flex items-center justify-center flex-shrink-0\">\r\n              <span className=\"text-[var(--color-sys-brand-primary)] text-lg\">Γ£¿</span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <SmallText className=\"font-semibold text-[var(--color-sys-text-primary)] mb-1 uppercase tracking-wide\">\r\n                AI Insight\r\n              </SmallText>\r\n              <Body className=\"text-[var(--color-sys-text-secondary)] leading-relaxed\">\r\n                {aiSummary}\r\n              </Body>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Age Buckets */}\r\n      <div className=\"grid grid-cols-3 gap-4\">\r\n        {buckets.map((bucket) => (\r\n          <div key={bucket.key} className=\"p-5 bg-[var(--color-sys-bg-primary)] border border-[var(--color-sys-bg-tertiary)]/30 rounded-2xl shadow-sm hover:shadow-md transition-shadow\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <SmallText className=\"font-semibold text-[var(--color-sys-text-secondary)] uppercase tracking-wide\">\r\n                {bucket.label}\r\n              </SmallText>\r\n              <div className={`w-3 h-3 rounded-full ${bucket.color}`} />\r\n            </div>\r\n            <Accounting className=\"text-2xl font-bold text-[var(--color-sys-text-primary)] mb-1 block text-left\">\r\n              {bucket.data.pending_qty}\r\n            </Accounting>\r\n            <SmallText className=\"text-[var(--color-sys-text-secondary)]\">\r\n              {bucket.data.po_count} POs ΓÇó {bucket.data.percentage}% of total\r\n            </SmallText>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Detailed Breakdown */}\r\n      <div className=\"p-5 bg-[var(--color-sys-bg-primary)] border border-[var(--color-sys-bg-tertiary)]/30 rounded-2xl shadow-sm\">\r\n        <H3 className=\"mb-4\">POs by Age Bucket</H3>\r\n        <div className=\"space-y-4\">\r\n          {buckets.map((bucket) => (\r\n            <div key={bucket.key}>\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <Body className=\"font-medium text-[var(--color-sys-text-primary)]\">\r\n                  {bucket.label}\r\n                </Body>\r\n                <SmallText className=\"text-[var(--color-sys-text-secondary)]\">\r\n                  {bucket.data.po_count} POs\r\n                </SmallText>\r\n              </div>\r\n              {bucket.data.pos.length > 0 ? (\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {bucket.data.pos.slice(0, 10).map((po) => (\r\n                    <span\r\n                      key={po}\r\n                      className=\"px-2 py-1 bg-[var(--color-sys-bg-tertiary)] text-[var(--color-sys-text-primary)] rounded\"\r\n                    >\r\n                      <SmallText className=\"font-medium\">{po}</SmallText>\r\n                    </span>\r\n                  ))}\r\n                  {bucket.data.pos.length > 10 && (\r\n                    <span className=\"px-2 py-1 text-[var(--color-sys-text-secondary)]\">\r\n                      <SmallText>+{bucket.data.pos.length - 10} more</SmallText>\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <SmallText className=\"text-[var(--color-sys-text-secondary)] italic\">\r\n                  No POs in this bucket\r\n                </SmallText>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\PODateSummary.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":56,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":56,"endColumn":68}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PO Date Summary Table\r\n * Displays PO summary with totals\r\n */\r\n\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport PaginationControls from \"@/components/design-system/molecules/PaginationControls\";\r\nimport DownloadButton from \"@/components/DownloadButton\";\r\nimport { API_BASE_URL } from \"@/lib/api\";\r\n\r\ninterface PORow {\r\n  po_number: string;\r\n  po_date: string;\r\n  total_ordered: number;\r\n  total_dispatched: number;\r\n  pending_qty: number;\r\n  status: string;\r\n}\r\n\r\ninterface PODateSummaryProps {\r\n  data: {\r\n    rows: PORow[];\r\n    totals: {\r\n      total_pos: number;\r\n      total_ordered: number;\r\n      total_dispatched: number;\r\n      total_pending: number;\r\n    };\r\n    period: { start: string; end: string };\r\n  };\r\n}\r\n\r\nexport default function PODateSummary({ data }: PODateSummaryProps) {\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const ITEMS_PER_PAGE = 10;\r\n\r\n  if (!data || !data.rows || data.rows.length === 0) {\r\n    return (\r\n      <div className=\"glass-card p-8 text-center\">\r\n        <p className=\"text-text-secondary\">No data for selected period</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const totalPages = Math.ceil(data.rows.length / ITEMS_PER_PAGE);\r\n  const paginatedRows = data.rows.slice(\r\n    (currentPage - 1) * ITEMS_PER_PAGE,\r\n    currentPage * ITEMS_PER_PAGE,\r\n  );\r\n\r\n  return (\r\n    <div className=\"glass-card p-6\">\r\n      <div className=\"flex justify-between items-center mb-4\">\r\n        <h3 className=\"text-[16px] font-semibold text-text-primary\">\r\n          PO Summary ({data.period.start} to {data.period.end})\r\n        </h3>\r\n        <DownloadButton\r\n          url={`${API_BASE_URL}/api/reports/register/po?export=true&start_date=${data.period.start}&end_date=${data.period.end}`}\r\n          filename={`PO_Summary_${data.period.start}_to_${data.period.end}.xlsx`}\r\n          label=\"Export\"\r\n          size=\"sm\"\r\n        />\r\n      </div>\r\n\r\n      {/* Totals */}\r\n      <div className=\"grid grid-cols-4 gap-4 mb-6\">\r\n        <div className=\"p-3 bg-blue-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Total POs</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            {data.totals.total_pos}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-3 bg-emerald-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Total Ordered</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            {data.totals.total_ordered.toLocaleString()}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-3 bg-purple-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Total Dispatched</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            {data.totals.total_dispatched.toLocaleString()}\r\n          </p>\r\n        </div>\r\n        <div className=\"p-3 bg-amber-50 rounded-lg\">\r\n          <p className=\"text-xs text-text-secondary\">Total Pending</p>\r\n          <p className=\"text-xl font-bold text-text-primary\">\r\n            {data.totals.total_pending.toLocaleString()}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full text-sm\">\r\n          <thead>\r\n            <tr className=\"border-b border-border\">\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                PO Number\r\n              </th>\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                PO Date\r\n              </th>\r\n              <th className=\"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Ordered\r\n              </th>\r\n              <th className=\"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Dispatched\r\n              </th>\r\n              <th className=\"text-right py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Pending\r\n              </th>\r\n              <th className=\"text-left py-3 px-4 text-xs font-semibold text-text-secondary uppercase\">\r\n                Status\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {paginatedRows.map((row, idx) => (\r\n              <tr\r\n                key={`row-${idx}`}\r\n                className=\"border-b border-border/50 hover:bg-gray-50\"\r\n              >\r\n                <td className=\"py-3 px-4 font-medium text-text-primary\">\r\n                  {row.po_number}\r\n                </td>\r\n                <td className=\"py-3 px-4 text-text-secondary\">{row.po_date}</td>\r\n                <td className=\"py-3 px-4 text-right text-text-primary\">\r\n                  {row.total_ordered.toLocaleString()}\r\n                </td>\r\n                <td className=\"py-3 px-4 text-right text-text-primary\">\r\n                  {row.total_dispatched.toLocaleString()}\r\n                </td>\r\n                <td className=\"py-3 px-4 text-right text-text-primary\">\r\n                  {row.pending_qty.toLocaleString()}\r\n                </td>\r\n                <td className=\"py-3 px-4\">\r\n                  <span\r\n                    className={`inline-block px-2 py-1 rounded text-xs font-medium ${row.status === \"Completed\"\r\n                      ? \"bg-emerald-100 text-emerald-700\"\r\n                      : row.status === \"In Progress\"\r\n                        ? \"bg-blue-100 text-blue-700\"\r\n                        : \"bg-gray-100 text-gray-700\"\r\n                      }`}\r\n                  >\r\n                    {row.status}\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <PaginationControls\r\n        currentPage={currentPage}\r\n        totalPages={totalPages}\r\n        onPageChange={setCurrentPage}\r\n        itemName=\"POs\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\PODependencyReport.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":65,"column":13,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":65,"endColumn":68},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":68,"column":12,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":68,"endColumn":60},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":83,"column":16,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":83,"endColumn":76},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":86,"column":16,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":86,"endColumn":59},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":105,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":105,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":108,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":108,"endColumn":77},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":122,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":122,"endColumn":76},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":125,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":125,"endColumn":70},{"ruleId":"no-unused-vars","severity":1,"message":"'idx' is defined but never used.","line":138,"column":53,"nodeType":"Identifier","messageId":"unusedVar","endLine":138,"endColumn":56,"suggestions":[{"messageId":"removeVar","data":{"varName":"idx"},"fix":{"range":[4500,4505],"text":""},"desc":"Remove unused variable 'idx'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'idx' is defined but never used.","line":138,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":138,"endColumn":56},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":144,"column":26,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":144,"endColumn":79},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":151,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":151,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":157,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":157,"endColumn":85}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PO Dependency Analysis Report Component\r\n * Shows which POs are blocking at dispatch vs billing stage\r\n */\r\n\r\ninterface PODependencyData {\r\n  period: string;\r\n  coverage: {\r\n    no_dc: {\r\n      count: number;\r\n      pos: Array<{ po_number: string; supplier: string }>;\r\n    };\r\n    dc_but_no_invoice: {\r\n      count: number;\r\n      pos: Array<{ po_number: string; supplier: string }>;\r\n    };\r\n    fully_invoiced: {\r\n      count: number;\r\n      pos: Array<{ po_number: string; supplier: string }>;\r\n    };\r\n  };\r\n  total_pos: number;\r\n}\r\n\r\ninterface PODependencyReportProps {\r\n  data: PODependencyData;\r\n  aiSummary?: string;\r\n}\r\n\r\nexport default function PODependencyReport({\r\n  data,\r\n  aiSummary,\r\n}: PODependencyReportProps) {\r\n  const categories = [\r\n    {\r\n      key: \"no_dc\",\r\n      title: \"No Delivery Challan\",\r\n      description: \"POs blocked at dispatch stage\",\r\n      color: \"bg-danger\",\r\n      textColor: \"text-danger\",\r\n      data: data.coverage.no_dc,\r\n    },\r\n    {\r\n      key: \"dc_but_no_invoice\",\r\n      title: \"DC Created, Not Invoiced\",\r\n      description: \"POs blocked at billing stage\",\r\n      color: \"bg-warning\",\r\n      textColor: \"text-warning\",\r\n      data: data.coverage.dc_but_no_invoice,\r\n    },\r\n    {\r\n      key: \"fully_invoiced\",\r\n      title: \"Fully Invoiced\",\r\n      description: \"POs completed\",\r\n      color: \"bg-success\",\r\n      textColor: \"text-success\",\r\n      data: data.coverage.fully_invoiced,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <h2 className=\"text-[18px] font-semibold text-text-primary\">\r\n          PO Dependency Analysis\r\n        </h2>\r\n        <p className=\"text-[12px] text-text-secondary mt-1\">\r\n          Total POs: {data.total_pos} ΓÇó Analyzing dispatch and billing coverage\r\n        </p>\r\n      </div>\r\n\r\n      {/* Summary Cards */}\r\n      <div className=\"grid grid-cols-3 gap-4\">\r\n        {categories.map((cat) => (\r\n          <div key={cat.key} className=\"glass-card p-5\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <div className={`w-3 h-3 rounded-full ${cat.color}`} />\r\n              <p className={`text-[24px] font-bold ${cat.textColor}`}>\r\n                {cat.data.count}\r\n              </p>\r\n            </div>\r\n            <p className=\"text-[13px] font-semibold text-text-primary mb-1\">\r\n              {cat.title}\r\n            </p>\r\n            <p className=\"text-[11px] text-text-secondary\">{cat.description}</p>\r\n            <div className=\"mt-2 h-2 bg-gray-100 rounded-full overflow-hidden\">\r\n              <div\r\n                className={`h-full ${cat.color}`}\r\n                style={{ width: `${(cat.data.count / data.total_pos) * 100}%` }}\r\n              />\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* AI Summary */}\r\n      {aiSummary && (\r\n        <div className=\"glass-card p-4 bg-primary/5 border border-primary/20\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\r\n              <span className=\"text-primary text-lg\">Γ£¿</span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <p className=\"text-[12px] font-semibold text-text-primary mb-1\">\r\n                AI Insight\r\n              </p>\r\n              <p className=\"text-[13px] text-text-secondary leading-relaxed\">\r\n                {aiSummary}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Detailed Breakdown */}\r\n      <div className=\"space-y-4\">\r\n        {categories.map((cat) => (\r\n          <div key={cat.key} className=\"glass-card p-5\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div>\r\n                <h3 className=\"text-[14px] font-semibold text-text-primary\">\r\n                  {cat.title}\r\n                </h3>\r\n                <p className=\"text-[12px] text-text-secondary mt-0.5\">\r\n                  {cat.data.count} POs\r\n                </p>\r\n              </div>\r\n              <div\r\n                className={`px-3 py-1 rounded-full ${cat.color}/10 ${cat.textColor} text-[12px] font-medium`}\r\n              >\r\n                {Math.round((cat.data.count / data.total_pos) * 100)}% of total\r\n              </div>\r\n            </div>\r\n\r\n            {cat.data.pos.length > 0 ? (\r\n              <div className=\"space-y-2\">\r\n                {cat.data.pos.slice(0, 10).map((po, idx) => (\r\n                  <div\r\n                    key={po.po_number}\r\n                    className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\"\r\n                  >\r\n                    <div>\r\n                      <p className=\"text-[13px] font-medium text-text-primary\">\r\n                        {po.po_number}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                {cat.data.pos.length > 10 && (\r\n                  <p className=\"text-[12px] text-text-secondary text-center pt-2\">\r\n                    +{cat.data.pos.length - 10} more POs\r\n                  </p>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-[12px] text-text-secondary italic text-center py-4\">\r\n                No POs in this category\r\n              </p>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Actions: None enabled (Phase 2) */}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\POEfficiencyReport.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":59,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":59,"endColumn":65},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":63},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":81,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":81,"endColumn":65}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PO Fulfillment Efficiency Report Component\r\n * Displays fulfillment % per PO with best/worst performers\r\n */\r\n\r\ninterface POEfficiencyData {\r\n  period: string;\r\n  pos: Array<{\r\n    po_number: string;\r\n    supplier_name: string;\r\n    ordered: number;\r\n    dispatched: number;\r\n    fulfillment_pct: number;\r\n  }>;\r\n  insights: {\r\n    best_po: {\r\n      po_number: string | null;\r\n      fulfillment_pct: number;\r\n    };\r\n    worst_po: {\r\n      po_number: string | null;\r\n      fulfillment_pct: number;\r\n    };\r\n    zero_fulfillment_count: number;\r\n    zero_fulfillment_pos: string[];\r\n  };\r\n}\r\n\r\nimport { H2, H1, SmallText, Body, Accounting } from \"../design-system/atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface POEfficiencyReportProps {\r\n  data: POEfficiencyData;\r\n  aiSummary: string;\r\n}\r\n\r\nexport default function POEfficiencyReport({\r\n  data,\r\n  aiSummary,\r\n}: POEfficiencyReportProps) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <H2 className=\"text-sys-primary\">\r\n          PO Fulfillment Efficiency\r\n        </H2>\r\n        <SmallText className=\"text-sys-tertiary mt-1\">\r\n          Period: {data.period}\r\n        </SmallText>\r\n      </div>\r\n\r\n      {/* Key Insights */}\r\n      <div className=\"grid grid-cols-3 gap-4\">\r\n        <div className=\"glass-card p-4\">\r\n          <SmallText className=\"text-sys-tertiary uppercase mb-2 font-bold tracking-wider\">\r\n            Best Performer\r\n          </SmallText>\r\n          <H1 className=\"text-[var(--color-sys-status-success)]\">\r\n            {data.insights.best_po.po_number || \"N/A\"}\r\n          </H1>\r\n          <SmallText className=\"text-sys-secondary mt-1\">\r\n            {data.insights.best_po.fulfillment_pct}% fulfilled\r\n          </SmallText>\r\n        </div>\r\n        <div className=\"glass-card p-4\">\r\n          <SmallText className=\"text-sys-tertiary uppercase mb-2 font-bold tracking-wider\">\r\n            Worst Performer\r\n          </SmallText>\r\n          <H1 className=\"text-[var(--color-sys-status-error)]\">\r\n            {data.insights.worst_po.po_number || \"N/A\"}\r\n          </H1>\r\n          <SmallText className=\"text-sys-secondary mt-1\">\r\n            {data.insights.worst_po.fulfillment_pct}% fulfilled\r\n          </SmallText>\r\n        </div>\r\n        <div className=\"glass-card p-4\">\r\n          <SmallText className=\"text-sys-tertiary uppercase mb-2 font-bold tracking-wider\">\r\n            Zero Fulfillment\r\n          </SmallText>\r\n          <H1 className=\"text-[var(--color-sys-status-warning)]\">\r\n            {data.insights.zero_fulfillment_count}\r\n          </H1>\r\n          <SmallText className=\"text-sys-secondary mt-1\">\r\n            POs with 0% dispatch\r\n          </SmallText>\r\n        </div>\r\n      </div>\r\n\r\n      {/* AI Summary */}\r\n      {aiSummary && (\r\n        <div className=\"glass-card p-4 bg-primary/5 border border-primary/20\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\r\n              <span className=\"text-primary text-lg\">Γ£¿</span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <SmallText className=\"font-bold text-sys-primary mb-1\">\r\n                AI Insight\r\n              </SmallText>\r\n              <Body className=\"text-sys-secondary leading-relaxed\">\r\n                {aiSummary}\r\n              </Body>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* PO Table */}\r\n      <div className=\"glass-card overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50 border-b border-border\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left table-header-text\">\r\n                  PO Number\r\n                </th>\r\n                <th className=\"px-4 py-3 text-right table-header-text\">\r\n                  Ordered\r\n                </th>\r\n                <th className=\"px-4 py-3 text-right table-header-text\">\r\n                  Dispatched\r\n                </th>\r\n                <th className=\"px-4 py-3 text-right table-header-text\">\r\n                  Fulfillment %\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-border\">\r\n              {data.pos.slice(0, 20).map((po) => (\r\n                <tr key={po.po_number} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-4 py-3 table-cell-text font-medium text-sys-primary\">\r\n                    {po.po_number}\r\n                  </td>\r\n\r\n                  <td className=\"px-4 py-3 text-right\">\r\n                    <Accounting>{po.ordered}</Accounting>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right\">\r\n                    <Accounting>{po.dispatched}</Accounting>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right\">\r\n                    <span\r\n                      className={cn(\r\n                        \"inline-flex items-center px-2 py-1 rounded text-[12px] font-bold tracking-wide tabular-nums\",\r\n                        po.fulfillment_pct === 0\r\n                          ? \"bg-danger/10 text-danger\"\r\n                          : po.fulfillment_pct < 50\r\n                            ? \"bg-warning/10 text-warning\"\r\n                            : \"bg-success/10 text-success\"\r\n                      )}\r\n                    >\r\n                      <Accounting>{po.fulfillment_pct}</Accounting>%\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {data.pos.length > 20 && (\r\n          <div className=\"px-4 py-3 bg-gray-50 border-t border-border text-center\">\r\n            <SmallText className=\"text-sys-secondary\">\r\n              Showing 20 of {data.pos.length} POs\r\n            </SmallText>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Actions: None enabled (Phase 2) */}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\POHealthReport.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'AlertTriangle' is defined but never used.","line":6,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":23,"suggestions":[{"messageId":"removeVar","data":{"varName":"AlertTriangle"},"fix":{"range":[109,123],"text":""},"desc":"Remove unused variable 'AlertTriangle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":6,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":36,"suggestions":[{"messageId":"removeVar","data":{"varName":"CheckCircle"},"fix":{"range":[122,135],"text":""},"desc":"Remove unused variable 'CheckCircle'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used.","line":6,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":36},{"ruleId":"no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":6,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":43,"suggestions":[{"messageId":"removeVar","data":{"varName":"Clock"},"fix":{"range":[135,142],"text":""},"desc":"Remove unused variable 'Clock'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used.","line":6,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":43},{"ruleId":"no-unused-vars","severity":1,"message":"'Package' is defined but never used.","line":6,"column":45,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":52,"suggestions":[{"messageId":"removeVar","data":{"varName":"Package"},"fix":{"range":[142,151],"text":""},"desc":"Remove unused variable 'Package'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Package' is defined but never used.","line":6,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":52},{"ruleId":"no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":12,"suggestions":[{"messageId":"removeVar","data":{"varName":"cn"},"fix":{"range":[266,299],"text":""},"desc":"Remove unused variable 'cn'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cn' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":12},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":79,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":79,"endColumn":68},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":85,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":85,"endColumn":70},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":91,"column":15,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":91,"endColumn":70},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":158,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":158,"endColumn":112}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * PO Health Summary Report Component\r\n * Displays one row per PO with complete status\r\n */\r\n\r\nimport { AlertTriangle, CheckCircle, Clock, Package } from \"lucide-react\";\r\nimport { H1, H2, SmallText, Body, Accounting } from \"../design-system/atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface POHealthData {\r\n  period: string;\r\n  summary: {\r\n    total_pos: number;\r\n    not_started: number;\r\n    partially_dispatched: number;\r\n    fully_dispatched: number;\r\n  };\r\n  pos: Array<{\r\n    po_number: string;\r\n    supplier_name: string;\r\n    po_date: string;\r\n    po_value: number;\r\n    ordered_qty: number;\r\n    dispatched_qty: number;\r\n    pending_qty: number;\r\n    po_age_days: number;\r\n    fulfillment_status: string;\r\n    invoice_status: string;\r\n    fulfillment_pct: number;\r\n  }>;\r\n}\r\n\r\ninterface POHealthReportProps {\r\n  data: POHealthData;\r\n  aiSummary: string;\r\n}\r\n\r\nexport default function POHealthReport({\r\n  data,\r\n  aiSummary,\r\n}: POHealthReportProps) {\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case \"FULLY_DISPATCHED\":\r\n        return \"text-success bg-success/10\";\r\n      case \"PARTIALLY_DISPATCHED\":\r\n        return \"text-warning bg-warning/10\";\r\n      case \"NOT_STARTED\":\r\n        return \"text-danger bg-danger/10\";\r\n      default:\r\n        return \"text-text-secondary bg-gray-100\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div>\r\n        <H2 className=\"text-sys-primary\">\r\n          PO Health Summary\r\n        </H2>\r\n        <SmallText className=\"text-sys-tertiary mt-1\">\r\n          Period: {data.period}\r\n        </SmallText>\r\n      </div>\r\n\r\n      {/* Summary Stats */}\r\n      <div className=\"grid grid-cols-4 gap-4\">\r\n        <div className=\"glass-card p-4\">\r\n          <SmallText className=\"text-sys-tertiary uppercase font-bold tracking-wider\">Total POs</SmallText>\r\n          <H1 className=\"text-sys-primary mt-1\">\r\n            {data.summary.total_pos}\r\n          </H1>\r\n        </div>\r\n        <div className=\"glass-card p-4\">\r\n          <SmallText className=\"text-sys-tertiary uppercase font-bold tracking-wider\">\r\n            Not Started\r\n          </SmallText>\r\n          <H1 className=\"text-[var(--color-sys-status-error)] mt-1\">\r\n            {data.summary.not_started}\r\n          </H1>\r\n        </div>\r\n        <div className=\"glass-card p-4\">\r\n          <SmallText className=\"text-sys-tertiary uppercase font-bold tracking-wider\">Partial</SmallText>\r\n          <H1 className=\"text-[var(--color-sys-status-warning)] mt-1\">\r\n            {data.summary.partially_dispatched}\r\n          </H1>\r\n        </div>\r\n        <div className=\"glass-card p-4\">\r\n          <SmallText className=\"text-sys-tertiary uppercase font-bold tracking-wider\">Complete</SmallText>\r\n          <H1 className=\"text-[var(--color-sys-status-success)] mt-1\">\r\n            {data.summary.fully_dispatched}\r\n          </H1>\r\n        </div>\r\n      </div>\r\n\r\n      {/* AI Summary */}\r\n      {aiSummary && (\r\n        <div className=\"glass-card p-4 bg-primary/5 border border-primary/20\">\r\n          <div className=\"flex items-start gap-3\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\r\n              <span className=\"text-primary text-lg\">Γ£¿</span>\r\n            </div>\r\n            <div className=\"flex-1\">\r\n              <SmallText className=\"font-bold text-sys-primary mb-1\">\r\n                AI Insight\r\n              </SmallText>\r\n              <Body className=\"text-sys-secondary leading-relaxed\">\r\n                {aiSummary}\r\n              </Body>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* PO Table */}\r\n      <div className=\"glass-card overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full\">\r\n            <thead className=\"bg-gray-50 border-b border-border\">\r\n              <tr>\r\n                <th className=\"px-4 py-3 text-left table-header-text\">\r\n                  PO Number\r\n                </th>\r\n                <th className=\"px-4 py-3 text-left table-header-text\">\r\n                  Order Value\r\n                </th>\r\n                <th className=\"px-4 py-3 text-right table-header-text\">\r\n                  Dispatched\r\n                </th>\r\n                <th className=\"px-4 py-3 text-right table-header-text\">\r\n                  Pending\r\n                </th>\r\n                <th className=\"px-4 py-3 text-right table-header-text\">\r\n                  Age (Days)\r\n                </th>\r\n                <th className=\"px-4 py-3 text-center table-header-text\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-4 py-3 text-right table-header-text\">\r\n                  Fulfillment %\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-border\">\r\n              {data.pos.slice(0, 20).map((po) => (\r\n                <tr key={po.po_number} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-4 py-3 table-cell-text font-medium text-sys-primary\">\r\n                    {po.po_number}\r\n                  </td>\r\n\r\n                  <td className=\"px-4 py-3 text-right\">\r\n                    <Accounting>{po.ordered_qty}</Accounting>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right\">\r\n                    <Accounting>{po.dispatched_qty}</Accounting>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right table-cell-number text-[var(--color-sys-status-warning)]\">\r\n                    <Accounting>{po.pending_qty}</Accounting>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right table-cell-number text-sys-secondary\">\r\n                    {po.po_age_days}\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-center\">\r\n                    <span\r\n                      className={`inline-flex items-center gap-1 px-2 py-1 rounded text-[10px] font-bold tracking-wide uppercase ${getStatusColor(po.fulfillment_status)}`}\r\n                    >\r\n                      {po.fulfillment_status.replace(\"_\", \" \")}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-4 py-3 text-right\">\r\n                    <Accounting>{po.fulfillment_pct}</Accounting>%\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {data.pos.length > 20 && (\r\n          <div className=\"px-4 py-3 bg-gray-50 border-t border-border text-center\">\r\n            <SmallText className=\"text-sys-secondary\">\r\n              Showing 20 of {data.pos.length} POs\r\n            </SmallText>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Actions */}\r\n      <div className=\"flex gap-3\">\r\n        {/* PDF generation disabled (Phase 2) */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\TrendsSection.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'range' is defined but never used.","line":16,"column":39,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":44,"suggestions":[{"messageId":"removeVar","data":{"varName":"range"},"fix":{"range":[393,400],"text":""},"desc":"Remove unused variable 'range'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'range' is defined but never used.","line":16,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { ArrowUpRight, TrendingUp } from \"lucide-react\";\r\nimport { H3, H4, Body, SmallText, Accounting } from \"@/components/design-system/organisms\";\r\n\r\ninterface TrendItem {\r\n  month: string;\r\n  ordered_value: number;\r\n  invoiced_value: number;\r\n}\r\n\r\ninterface TrendsSectionProps {\r\n  data: TrendItem[];\r\n  range: string;\r\n}\r\n\r\nexport function TrendsSection({ data, range }: TrendsSectionProps) {\r\n  if (!data || data.length === 0) return null;\r\n\r\n  // Find max value for scaling\r\n  const maxValue = Math.max(\r\n    ...data.map((d) => Math.max(d.ordered_value, d.invoiced_value)),\r\n  );\r\n  const scale = maxValue > 0 ? 100 / maxValue : 1;\r\n\r\n  // Simple Line/Bar combo visualizer\r\n  return (\r\n    <div className=\"space-y-6 mb-8\">\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Main Trend Chart */}\r\n        <div className=\"bg-[var(--color-sys-bg-surface)] p-6 rounded-2xl border border-[var(--color-sys-bg-tertiary)] shadow-sm\">\r\n          <div className=\"flex justify-between items-center mb-6\">\r\n            <H3 className=\"text-gray-800\">\r\n              Sales & Dispatch Trends\r\n            </H3>\r\n            <div className=\"flex items-center gap-4 text-xs font-medium\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"w-3 h-3 rounded-full bg-blue-500\"></span>{\" \"}\r\n                <SmallText>Ordered</SmallText>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <span className=\"w-3 h-3 rounded-full bg-green-500\"></span>{\" \"}\r\n                <SmallText>Invoiced</SmallText>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"relative h-64 w-full flex items-end justify-between px-2 gap-2\">\r\n            {/* Grid Lines */}\r\n            <div className=\"absolute inset-0 flex flex-col justify-between pointer-events-none text-xs text-gray-300\">\r\n              <div className=\"border-b border-gray-100 h-full w-full absolute top-0\"></div>\r\n              <div className=\"border-b border-gray-100 h-full w-full absolute top-1/4\"></div>\r\n              <div className=\"border-b border-gray-100 h-full w-full absolute top-2/4\"></div>\r\n              <div className=\"border-b border-gray-100 h-full w-full absolute top-3/4\"></div>\r\n            </div>\r\n\r\n            {data.map((item, idx) => (\r\n              <div\r\n                key={item.month || `trend-${idx}`}\r\n                className=\"relative flex flex-col items-center flex-1 h-full justify-end group z-10\"\r\n              >\r\n                <div className=\"absolute bottom-0 w-full flex justify-center gap-1 h-full items-end pb-6\">\r\n                  {/* Bar for Invoiced */}\r\n                  <div\r\n                    style={{ height: `${item.invoiced_value * scale}%` }}\r\n                    className=\"w-2 md:w-4 bg-green-500 rounded-t-sm opacity-80 group-hover:opacity-100 transition-all duration-500\"\r\n                  ></div>\r\n                  {/* Bar for Ordered */}\r\n                  <div\r\n                    style={{ height: `${item.ordered_value * scale}%` }}\r\n                    className=\"w-2 md:w-4 bg-blue-500 rounded-t-sm opacity-80 group-hover:opacity-100 transition-all duration-500\"\r\n                  ></div>\r\n                </div>\r\n                <SmallText className=\"text-gray-400 mt-2 absolute bottom-0\">\r\n                  {item.month}\r\n                </SmallText>\r\n\r\n                {/* Tooltip */}\r\n                <div className=\"opacity-0 group-hover:opacity-100 absolute -top-12 bg-gray-900 text-white text-xs p-2 rounded pointer-events-none transition-opacity z-20 whitespace-nowrap\">\r\n                  <div className=\"font-semibold mb-1\">Month {item.month}</div>\r\n                  <div>Ord: Γé╣{(item.ordered_value / 1000).toFixed(1)}k</div>\r\n                  <div>Inv: Γé╣{(item.invoiced_value / 1000).toFixed(1)}k</div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"mt-4 p-3 bg-blue-50/50 rounded-lg text-xs text-blue-800 flex items-start gap-2\">\r\n            <TrendingUp className=\"w-4 h-4 mt-0.5 shrink-0\" />\r\n            <Body className=\"text-blue-800 text-sm\">\r\n              <strong>Insight:</strong> Invoicing is trailing orders by{\" \"}\r\n              <strong>12%</strong> this quarter. Consider expediting dispatch\r\n              for pending items.\r\n            </Body>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Period Comparison (Simple Cards) */}\r\n        <div className=\"grid grid-cols-1 gap-6\">\r\n          <div className=\"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm flex flex-col justify-center\">\r\n            <H4 className=\"text-gray-500 uppercase tracking-wider mb-1\">\r\n              This Quarter Efficiency\r\n            </H4>\r\n            <div className=\"flex items-end gap-3 mt-2\">\r\n              <span className=\"text-4xl font-bold text-gray-900\">92%</span>\r\n              <span className=\"flex items-center text-sm font-bold text-green-600 mb-1\">\r\n                <ArrowUpRight className=\"w-4 h-4\" /> 4.5%\r\n              </span>\r\n            </div>\r\n            <SmallText className=\"text-gray-400 mt-2\">\r\n              vs Last Quarter (87.5%)\r\n            </SmallText>\r\n\r\n            <div className=\"mt-6 h-2 w-full bg-gray-100 rounded-full overflow-hidden\">\r\n              <div className=\"h-full bg-green-500 w-[92%]\"></div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-[var(--color-sys-bg-surface)] p-6 rounded-2xl border border-[var(--color-sys-bg-tertiary)] shadow-sm\">\r\n            <H4 className=\"text-gray-500 uppercase tracking-wider mb-4\">\r\n              Pending Breakdown\r\n            </H4>\r\n            <div className=\"space-y-3\">\r\n              <div>\r\n                <div className=\"flex justify-between text-xs font-medium mb-1\">\r\n                  <SmallText>Material Shortage</SmallText>\r\n                  <Accounting>3 Items</Accounting>\r\n                </div>\r\n                <div className=\"h-1.5 w-full bg-gray-100 rounded-full\">\r\n                  <div className=\"h-full bg-red-400 w-[30%]\"></div>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <div className=\"flex justify-between text-xs font-medium mb-1\">\r\n                  <SmallText>Awaiting Inspection</SmallText>\r\n                  <Accounting>5 Items</Accounting>\r\n                </div>\r\n                <div className=\"h-1.5 w-full bg-gray-100 rounded-full\">\r\n                  <div className=\"h-full bg-amber-400 w-[50%]\"></div>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <div className=\"flex justify-between text-xs font-medium mb-1\">\r\n                  <SmallText>Ready for Dispatch</SmallText>\r\n                  <Accounting>2 Items</Accounting>\r\n                </div>\r\n                <div className=\"h-1.5 w-full bg-gray-100 rounded-full\">\r\n                  <div className=\"h-full bg-green-400 w-[20%]\"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\UnifiedTable.tsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":18,"suggestions":[{"messageId":"removeVar","data":{"varName":"FileText"},"fix":{"range":[97,106],"text":""},"desc":"Remove unused variable 'FileText'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18},{"ruleId":"no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":3,"column":20,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"ArrowRight"},"fix":{"range":[105,117],"text":""},"desc":"Remove unused variable 'ArrowRight'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowRight' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":30},{"ruleId":"no-unused-vars","severity":1,"message":"'Body' is defined but never used.","line":5,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":29,"suggestions":[{"messageId":"removeVar","data":{"varName":"Body"},"fix":{"range":[222,228],"text":""},"desc":"Remove unused variable 'Body'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":29},{"ruleId":"no-unused-vars","severity":1,"message":"'idx' is defined but never used.","line":63,"column":38,"nodeType":"Identifier","messageId":"unusedVar","endLine":63,"endColumn":41,"suggestions":[{"messageId":"removeVar","data":{"varName":"idx"},"fix":{"range":[2387,2392],"text":""},"desc":"Remove unused variable 'idx'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'idx' is defined but never used.","line":63,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":63,"endColumn":41},{"ruleId":"no-unused-vars","severity":1,"message":"'isWarning' is assigned a value but never used.","line":66,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":30,"suggestions":[{"messageId":"removeVar","data":{"varName":"isWarning"},"fix":{"range":[2531,2589],"text":""},"desc":"Remove unused variable 'isWarning'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isWarning' is assigned a value but never used.","line":66,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":30}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { FileText, ArrowRight, Truck } from \"lucide-react\";\r\nimport Pagination from \"@/components/Pagination\";\r\nimport { H3, SmallText, Body, Accounting } from \"../design-system/atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface SmartTableRow {\r\n  po_number: number;\r\n  po_date: string;\r\n  po_item_no: number;\r\n  material_description: string;\r\n  ord_qty: number;\r\n  dispatched_qty: number;\r\n  pending_qty: number;\r\n  age_days: number;\r\n  status: \"Pending\" | \"Completed\";\r\n}\r\n\r\ninterface UnifiedTableProps {\r\n  data: SmartTableRow[];\r\n  loading: boolean;\r\n}\r\n\r\nexport function UnifiedTable({ data, loading }: UnifiedTableProps) {\r\n  const router = useRouter();\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 10;\r\n\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const paginatedData = data.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-8 text-center text-sys-tertiary\">\r\n        Loading operational data...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-[var(--color-sys-bg-surface)] rounded-2xl border border-[var(--color-sys-bg-tertiary)] shadow-sm overflow-hidden\">\r\n      <div className=\"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/30\">\r\n        <H3 className=\"text-gray-800\">Operational Deep Dive</H3>\r\n        <SmallText className=\"text-gray-500\">\r\n          Showing {data.length} records\r\n        </SmallText>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full text-left border-collapse\">\r\n          <thead>\r\n            <tr className=\"bg-gray-50/50 border-b border-gray-100\">\r\n              <th className=\"px-6 py-4 table-header-text\">Status</th>\r\n              <th className=\"px-6 py-4 table-header-text\">PO Details</th>\r\n              <th className=\"px-6 py-4 table-header-text max-w-xs\">Material</th>\r\n              <th className=\"px-6 py-4 table-header-text text-center\">Progress</th>\r\n              <th className=\"px-6 py-4 table-header-text text-right\">Age</th>\r\n              <th className=\"px-6 py-4 table-header-text text-right\">Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-100\">\r\n            {paginatedData.map((row, idx) => {\r\n              // Smart Highlighting logic\r\n              const isUrgent = row.pending_qty > 0 && row.age_days > 14;\r\n              const isWarning = row.pending_qty > 0 && row.age_days > 7;\r\n\r\n              return (\r\n                <tr\r\n                  key={`${row.po_number}-${row.po_item_no}`}\r\n                  className={cn(\r\n                    \"group hover:bg-gray-50 transition-colors\",\r\n                    isUrgent && \"bg-red-50/30\"\r\n                  )}\r\n                >\r\n                  <td className=\"px-6 py-4\">\r\n                    <span\r\n                      className={cn(\r\n                        \"inline-flex items-center px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide\",\r\n                        row.pending_qty === 0\r\n                          ? \"bg-green-100 text-green-700\"\r\n                          : isUrgent\r\n                            ? \"bg-red-100 text-red-700 animate-pulse\"\r\n                            : \"bg-amber-100 text-amber-700\"\r\n                      )}\r\n                    >\r\n                      {row.pending_qty === 0 ? \"Done\" : \"Pending\"}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div className=\"table-cell-text font-semibold text-gray-900\">\r\n                      PO #{row.po_number}\r\n                    </div>\r\n                    <SmallText className=\"text-gray-500\">{row.po_date}</SmallText>\r\n                  </td>\r\n                  <td className=\"px-6 py-4\">\r\n                    <div\r\n                      className=\"table-cell-text text-gray-700 max-w-[240px] truncate\"\r\n                      title={row.material_description}\r\n                    >\r\n                      {row.material_description}\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-center\">\r\n                    <div className=\"flex flex-col items-center gap-1\">\r\n                      <SmallText className=\"font-medium text-gray-600\">\r\n                        <Accounting>{row.dispatched_qty}</Accounting> / <Accounting>{row.ord_qty}</Accounting>\r\n                      </SmallText>\r\n                      <div className=\"w-24 h-1.5 bg-gray-100 rounded-full overflow-hidden\">\r\n                        <div\r\n                          className={`h-full rounded-full ${row.pending_qty === 0 ? \"bg-green-500\" : \"bg-blue-500\"}`}\r\n                          style={{\r\n                            width: `${Math.min((row.dispatched_qty / row.ord_qty) * 100, 100)}%`,\r\n                          }}\r\n                        ></div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right\">\r\n                    <span\r\n                      className={cn(\r\n                        \"table-cell-number font-medium\",\r\n                        isUrgent ? \"text-red-600\" : \"text-gray-500\"\r\n                      )}\r\n                    >\r\n                      {row.age_days} days\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 text-right\">\r\n                    {row.pending_qty > 0 ? (\r\n                      <button\r\n                        onClick={() =>\r\n                          router.push(`/dc/create?po=${row.po_number}`)\r\n                        }\r\n                        className=\"inline-flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors shadow-sm opacity-0 group-hover:opacity-100\"\r\n                      >\r\n                        <Truck className=\"w-3 h-3\" />\r\n                        Dispatch\r\n                      </button>\r\n                    ) : (\r\n                      <SmallText className=\"text-gray-400 font-medium\">\r\n                        Completed\r\n                      </SmallText>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div className=\"p-4 border-t border-gray-100\">\r\n        <Pagination\r\n          currentPage={currentPage}\r\n          totalItems={data.length}\r\n          itemsPerPage={itemsPerPage}\r\n          onPageChange={setCurrentPage}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\adapters.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'DCHeader' is defined but never used.","line":8,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"DCHeader"},"fix":{"range":[162,175],"text":""},"desc":"Remove unused variable 'DCHeader'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DCHeader' is defined but never used.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'POHeader' is defined but never used.","line":10,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":11,"suggestions":[{"messageId":"removeVar","data":{"varName":"POHeader"},"fix":{"range":[186,199],"text":""},"desc":"Remove unused variable 'POHeader'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'POHeader' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":11},{"ruleId":"no-unused-vars","severity":1,"message":"'InvoiceItem' is defined but never used.","line":11,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":14,"suggestions":[{"messageId":"removeVar","data":{"varName":"InvoiceItem"},"fix":{"range":[199,215],"text":""},"desc":"Remove unused variable 'InvoiceItem'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InvoiceItem' is defined but never used.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'InvoiceHeader' is defined but never used.","line":12,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":16,"suggestions":[{"messageId":"removeVar","data":{"varName":"InvoiceHeader"},"fix":{"range":[215,233],"text":""},"desc":"Remove unused variable 'InvoiceHeader'."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InvoiceHeader' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":16},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":22,"column":1,"severity":1,"nodeType":null,"fix":{"range":[459,521],"text":" "}},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":89,"column":1,"severity":1,"nodeType":null,"fix":{"range":[3691,3753],"text":" "}}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":2,"source":"/**\r\n * Data Adapters for API Γåö UI Transformation\r\n * Ensures type safety between backend (snake_case) and frontend (camelCase)\r\n */\r\n\r\nimport type {\r\n  DCItemRow,\r\n  DCHeader,\r\n  POItem,\r\n  POHeader,\r\n  InvoiceItem,\r\n  InvoiceHeader,\r\n} from \"@/types\";\r\n\r\n// ============================================================\r\n// DC ITEM ADAPTERS\r\n// ============================================================\r\n\r\n/**\r\n * Transform API DC item to UI format\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function dcItemFromAPI(apiItem: any): DCItemRow {\r\n  return {\r\n    id: apiItem.id || `${apiItem.po_item_id}-${apiItem.lot_no}`,\r\n    po_item_id: apiItem.po_item_id,\r\n    po_item_no: apiItem.po_item_no,\r\n    lot_no: apiItem.lot_no,\r\n    material_code: apiItem.material_code,\r\n    material_description: apiItem.material_description,\r\n    description: apiItem.material_description || apiItem.description,\r\n    unit: apiItem.unit,\r\n    po_rate: apiItem.po_rate,\r\n    lot_ordered_quantity:\r\n      apiItem.lot_ordered_qty || apiItem.lot_ordered_quantity,\r\n    ordered_quantity: apiItem.ordered_quantity || apiItem.lot_ordered_quantity,\r\n    already_dispatched: apiItem.already_dispatched,\r\n    remaining_quantity: apiItem.remaining_quantity || apiItem.remaining_qty,\r\n    dispatched_quantity: apiItem.dispatched_quantity || 0,\r\n    dispatch_quantity:\r\n      apiItem.dispatched_quantity || apiItem.dispatch_quantity || 0,\r\n    hsn_code: apiItem.hsn_code,\r\n    hsn_rate: apiItem.hsn_rate,\r\n    remaining_post_dc: apiItem.remaining_post_dc,\r\n  };\r\n}\r\n\r\n/**\r\n * Transform UI DC item to API format\r\n */\r\nexport function dcItemToAPI(uiItem: DCItemRow): Record<string, unknown> {\r\n  return {\r\n    po_item_id: uiItem.po_item_id,\r\n    lot_no: uiItem.lot_no ? parseInt(String(uiItem.lot_no)) : undefined,\r\n    dispatch_quantity: uiItem.dispatch_quantity || uiItem.dispatched_quantity,\r\n    // Backend expects 'dispatched_quantity' alias in models? No, create_dc uses dictionary.\r\n    // routers/dc.py create_dc uses \"items: List[dict]\".\r\n    // service_create_dc reads \"dispatch_qty\" usually?\r\n    // I need to check backend service creation logic.\r\n    // But assuming standardized naming, I should send \"dispatched_quantity\" or \"dispatch_qty\".\r\n    // The router aliases INPUT?\r\n    // `service_create_dc` validation: `item.get(\"dispatch_qty\")`.\r\n    // I did NOT update `service_create_dc` to use `dispatched_quantity` in logic yet?\r\n    // Phase 2 \"Move Business Logic\" might address that.\r\n    // But for now, backend expects `dispatch_qty` in `create_dc` payload likely.\r\n    // Wait, I updated `models.py` `DCListItem`.\r\n    // But `create_dc` accepts `items: List[dict]`.\r\n    // `routers/dc.py` documentation says `items format: [{ ... \"dispatch_qty\": 10 ... }]`\r\n    // So I must stick to `dispatch_qty` for POST payload unless I change backend acceptance.\r\n    // User said \"Standardize Quantity Field Naming (Backend)\".\r\n    // I should probably start sending `dispatched_quantity` and update backend to accept it.\r\n    // But safely, I can send BOTH. Or check backend logic.\r\n    // I'll check backend logic in next step. For now, sending `dispatch_qty` (legacy) is safer if backend not updated for INPUT.\r\n    // But `types/index.ts` `DCItemRow` has `dispatched_quantity`.\r\n    // `dcItemToAPI` returns `any`.\r\n    dispatch_qty: uiItem.dispatch_quantity || uiItem.dispatched_quantity,\r\n    hsn_code: uiItem.hsn_code,\r\n    hsn_rate: uiItem.hsn_rate,\r\n  };\r\n}\r\n\r\n// ============================================================\r\n// PO ITEM ADAPTERS\r\n// ============================================================\r\n\r\n/**\r\n * Transform API PO item to UI format\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function poItemFromAPI(apiItem: any): POItem {\r\n  return {\r\n    id: apiItem.id,\r\n    po_item_no: apiItem.po_item_no,\r\n    material_code: apiItem.material_code,\r\n    material_description: apiItem.material_description,\r\n    drg_no: apiItem.drg_no,\r\n    mtrl_cat: apiItem.mtrl_cat,\r\n    unit: apiItem.unit,\r\n    po_rate: apiItem.po_rate,\r\n    ordered_quantity: apiItem.ordered_quantity || apiItem.ord_qty,\r\n    received_quantity: apiItem.received_quantity || apiItem.rcd_qty,\r\n    item_value: apiItem.item_value,\r\n    hsn_code: apiItem.hsn_code,\r\n    delivered_quantity: apiItem.delivered_quantity || apiItem.delivered_qty,\r\n    pending_quantity: apiItem.pending_quantity || apiItem.pending_qty,\r\n    deliveries:\r\n      apiItem.deliveries?.map((d: any) => ({\r\n        id: d.id,\r\n        lot_no: d.lot_no,\r\n        delivered_quantity: d.delivered_quantity || d.dely_qty,\r\n        dely_date: d.dely_date,\r\n        entry_allow_date: d.entry_allow_date,\r\n        dest_code: d.dest_code,\r\n      })) || [],\r\n  };\r\n}\r\n\r\n// ============================================================\r\n// VALIDATION HELPERS\r\n// ============================================================\r\n\r\n/**\r\n * Validate DC item before sending to API\r\n * Throws error if validation fails\r\n */\r\nexport function validateDCItem(item: DCItemRow): void {\r\n  const dispatchQty = item.dispatch_quantity || item.dispatched_quantity;\r\n\r\n  if (!item.po_item_id) {\r\n    throw new Error(\"PO item ID is required\");\r\n  }\r\n\r\n  if (!dispatchQty || dispatchQty <= 0) {\r\n    throw new Error(\"Dispatch quantity must be greater than 0\");\r\n  }\r\n\r\n  if (\r\n    item.remaining_quantity !== undefined &&\r\n    dispatchQty > item.remaining_quantity\r\n  ) {\r\n    throw new Error(\r\n      `Cannot dispatch ${dispatchQty} units. Only ${item.remaining_quantity} remaining.`,\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * Batch validate DC items\r\n */\r\nexport function validateDCItems(items: DCItemRow[]): void {\r\n  if (items.length === 0) {\r\n    throw new Error(\"At least one item is required\");\r\n  }\r\n\r\n  items.forEach((item, index) => {\r\n    try {\r\n      validateDCItem(item);\r\n    } catch (error) {\r\n      throw new Error(\r\n        `Item ${index + 1}: ${error instanceof Error ? error.message : \"Invalid item\"}`,\r\n      );\r\n    }\r\n  });\r\n}\r\n\r\n// ============================================================\r\n// UTILITY FUNCTIONS\r\n// ============================================================\r\n\r\n/**\r\n * Safe number parsing with fallback\r\n */\r\nexport function parseNumber(value: unknown, fallback: number = 0): number {\r\n  const parsed = typeof value === \"string\" ? parseFloat(value) : Number(value);\r\n  return isNaN(parsed) ? fallback : parsed;\r\n}\r\n\r\n/**\r\n * Safe string conversion\r\n */\r\nexport function toString(value: unknown): string {\r\n  return value === null || value === undefined ? \"\" : String(value);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\api.ts","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'status' is defined but never used.","line":199,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":199,"endColumn":26,"suggestions":[{"messageId":"removeVar","data":{"varName":"status"},"fix":{"range":[4518,4532],"text":""},"desc":"Remove unused variable 'status'."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'data' is defined but never used.","line":201,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":201,"endColumn":22,"suggestions":[{"messageId":"removeVar","data":{"varName":"data"},"fix":{"range":[4575,4585],"text":""},"desc":"Remove unused variable 'data'."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":227,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":227,"endColumn":20,"suggestions":[{"fix":{"range":[5351,5392],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":234,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":234,"endColumn":20,"suggestions":[{"fix":{"range":[5598,5649],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":261,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":261,"endColumn":20,"suggestions":[{"fix":{"range":[6370,6413],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":276,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":276,"endColumn":25,"suggestions":[{"fix":{"range":[6836,6898],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":318,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":318,"endColumn":22,"suggestions":[{"fix":{"range":[8104,8146],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":324,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":324,"endColumn":22,"suggestions":[{"fix":{"range":[8382,8483],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":340,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":340,"endColumn":21,"suggestions":[{"fix":{"range":[9005,9073],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":354,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":354,"endColumn":20,"suggestions":[{"fix":{"range":[10011,10064],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// CENTRALIZED API FETCH\r\n// ============================================================\r\n\r\nexport const API_BASE_URL =\r\n  process.env.NEXT_PUBLIC_API_URL || \"http://127.0.0.1:8000\";\r\n\r\nexport interface Buyer {\r\n  id: number;\r\n  name: string;\r\n  gstin: string;\r\n  billing_address: string;\r\n  shipping_address?: string;\r\n  designation?: string;\r\n  place_of_supply: string;\r\n  state?: string;\r\n  state_code?: string;\r\n  is_default: boolean;\r\n  is_active: boolean;\r\n  created_at: string;\r\n}\r\n\r\nexport interface POHeader {\r\n  po_number: string;\r\n  po_date: string;\r\n  supplier_name: string;\r\n  supplier_code: string;\r\n  supplier_email: string;\r\n  department_no: string;\r\n  po_value: number;\r\n  net_po_value: number;\r\n  tin_no: string;\r\n  ecc_no: string;\r\n  remarks: string;\r\n  project_name?: string;\r\n  status?: string;\r\n}\r\nexport interface POListItem {\r\n  po_number: number;\r\n  po_date: string;\r\n  vendor_name: string;\r\n  project_name: string;\r\n  items: any[];\r\n  total_amount?: number;\r\n  po_value?: number;\r\n  total_ordered_quantity?: number;\r\n  total_dispatched_quantity?: number;\r\n  total_received_quantity?: number;\r\n  total_rejected_quantity?: number;\r\n  total_pending_quantity?: number;\r\n  total_items_count?: number; // Added\r\n  status: string;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface POStats {\r\n  total_pos: number;\r\n  active_count: number; // Added for UI consumption\r\n  total_value: number;\r\n  pending_pos: number;\r\n  completed_pos: number;\r\n  open_orders_count: number;\r\n  pending_approval_count: number;\r\n  total_value_ytd: number;\r\n  total_value_change: number;\r\n}\r\n\r\nexport interface DCListItem {\r\n  dc_number: string;\r\n  dc_date: string;\r\n  po_number: number;\r\n  consignee_name: string;\r\n  total_value: number;\r\n  status: string;\r\n}\r\n\r\nexport interface DCStats {\r\n  total_challans: number;\r\n  pending_delivery: number;\r\n  completed_delivery: number;\r\n  total_value: number;\r\n}\r\n\r\nexport interface DCDetailResponse {\r\n  header: any; // Using any for flexibility during refactor, strictly typed in refactor\r\n  items: any[];\r\n}\r\n\r\nexport interface InvoiceDetailResponse {\r\n  header: any;\r\n  items: any[];\r\n}\r\n\r\nexport interface InvoiceListItem {\r\n  invoice_number: string;\r\n  invoice_date: string;\r\n  linked_dc_numbers: string; // Comma separated\r\n  customer_gstin: string;\r\n  total_invoice_value: number;\r\n  status?: string; // Optional if not always present\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface InvoiceStats {\r\n  total_invoiced: number;\r\n  total_invoiced_change: number;\r\n  gst_collected: number;\r\n  gst_collected_change: number;\r\n  pending_payments: number;\r\n  pending_payments_count: number;\r\n}\r\n\r\nexport interface Settings {\r\n  supplier_name: string;\r\n  supplier_description: string;\r\n  supplier_address: string;\r\n  supplier_gstin: string;\r\n  supplier_contact: string;\r\n  supplier_state: string;\r\n  supplier_state_code: string;\r\n}\r\n\r\nexport interface ReconciliationItem {\r\n  id: number;\r\n  po_item_no: number;\r\n  material_code: string;\r\n  material_description: string;\r\n  unit: string;\r\n  ord_qty: number;\r\n  dispatched_qty: number;\r\n  pending_qty: number;\r\n  status: string;\r\n}\r\n\r\nexport interface PONote {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface DashboardSummary {\r\n  total_sales_month: number;\r\n  sales_growth: number | string;\r\n  pending_pos: number;\r\n  new_pos_today: number;\r\n  active_challans: number;\r\n  total_po_value: number;\r\n  po_value_growth: number | string;\r\n  active_po_count: number;\r\n  total_ordered?: number;\r\n  total_delivered?: number;\r\n  total_received?: number;\r\n}\r\n\r\nexport interface SRVListItem {\r\n  srv_number: string;\r\n  srv_date: string;\r\n  po_number: number | string;\r\n  total_accepted_qty: number;\r\n  total_rejected_qty: number;\r\n  po_found: boolean;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface SRVStats {\r\n  total_srvs: number;\r\n  total_received_qty: number;\r\n  rejection_rate: number;\r\n  pending_srvs?: number;\r\n}\r\n\r\nexport interface ActivityItem {\r\n  type: \"PO\" | \"DC\" | \"Invoice\";\r\n  status: string;\r\n  number: string;\r\n  amount?: number;\r\n  date: string;\r\n}\r\n\r\nexport interface SearchResult {\r\n  id: string | number;\r\n  type: \"PO\" | \"DC\" | \"Invoice\" | \"SRV\";\r\n  number: string;\r\n  date: string;\r\n  party: string;\r\n  amount?: number;\r\n  type_label: string;\r\n  status?: string;\r\n}\r\n\r\ntype FetchOptions = RequestInit & {\r\n  retries?: number;\r\n  timeout?: number;\r\n};\r\n\r\nclass APIError extends Error {\r\n  constructor(\r\n    public status: number,\r\n    public message: string,\r\n    public data?: any,\r\n  ) {\r\n    super(message);\r\n    this.name = \"APIError\";\r\n  }\r\n}\r\n\r\n// --- SIMPLE CACHE SYSTEM ---\r\nconst GET_CACHE = new Map<string, { data: any; timestamp: number }>();\r\nconst CACHE_TTL = 5000; // 5 seconds cache for GET requests\r\n\r\n// --- DEDUPLICATION SYSTEM ---\r\nconst PENDING_REQUESTS = new Map<string, Promise<any>>();\r\n\r\nasync function apiFetch<T>(\r\n  endpoint: string,\r\n  options: FetchOptions = {},\r\n): Promise<T> {\r\n  const { retries = 0, timeout = 60000, ...fetchOptions } = options;\r\n  const url = `${API_BASE_URL}${endpoint}`;\r\n  const method = fetchOptions.method || \"GET\";\r\n\r\n  // Check Cache for GET requests\r\n  if (method === \"GET\") {\r\n    const cached = GET_CACHE.get(url);\r\n    if (cached && Date.now() - cached.timestamp < CACHE_TTL) {\r\n      console.debug(`[API] Cache Hit: ${url}`);\r\n      return cached.data as T;\r\n    }\r\n\r\n    // Deduplication: If a request for this URL is already in flight, reuse the promise\r\n    const pending = PENDING_REQUESTS.get(url);\r\n    if (pending) {\r\n      console.debug(`[API] Deduplication Reuse: ${url}`);\r\n      return pending as Promise<T>;\r\n    }\r\n  }\r\n\r\n  const fetchPromise = (async () => {\r\n    const headers: Record<string, string> = {\r\n      Accept: \"application/json\",\r\n      ...(fetchOptions.headers as Record<string, string>),\r\n    };\r\n\r\n    if (!(fetchOptions.body instanceof FormData)) {\r\n      headers[\"Content-Type\"] = \"application/json\";\r\n    }\r\n\r\n    // Add Auth Token if exists\r\n    if (typeof window !== \"undefined\") {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        (headers as any)[\"Authorization\"] = `Bearer ${token}`;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const controller = new AbortController();\r\n      const id = setTimeout(() => controller.abort(), timeout);\r\n\r\n      console.debug(`[API] Fetching ${url} ...`);\r\n      const response = await fetch(url, {\r\n        ...fetchOptions,\r\n        headers,\r\n        signal: controller.signal,\r\n      });\r\n      clearTimeout(id);\r\n\r\n      if (!response.ok) {\r\n        // Handle 401 Unauthorized globally\r\n        if (response.status === 401) {\r\n          if (\r\n            typeof window !== \"undefined\" &&\r\n            !window.location.pathname.startsWith(\"/auth\")\r\n          ) {\r\n            console.warn(\"[API] 401 Unauthorized - Redirecting to login\");\r\n            localStorage.removeItem(\"token\");\r\n            window.location.href = \"/auth/login\";\r\n          }\r\n          throw new APIError(401, \"Unauthorized\");\r\n        }\r\n\r\n        // Parse error\r\n        let errorData;\r\n        try {\r\n          errorData = await response.json();\r\n        } catch {\r\n          errorData = { detail: response.statusText };\r\n        }\r\n\r\n        const errorMessage =\r\n          errorData.detail ||\r\n          errorData.message ||\r\n          `Request failed with status ${response.status}`;\r\n        throw new APIError(response.status, errorMessage, errorData);\r\n      }\r\n\r\n      // Handle 204 No Content\r\n      if (response.status === 204) {\r\n        return {} as T;\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      // Populate Cache for GET requests\r\n      if (method === \"GET\") {\r\n        GET_CACHE.set(url, { data, timestamp: Date.now() });\r\n        // Cleanup old cache entries\r\n        if (GET_CACHE.size > 100) {\r\n          const oldestKey = GET_CACHE.keys().next().value;\r\n          if (oldestKey) GET_CACHE.delete(oldestKey);\r\n        }\r\n      }\r\n\r\n      return data;\r\n    } catch (error: any) {\r\n      if (error.name === \"AbortError\") {\r\n        console.error(`[API] Timeout for ${url}`);\r\n        throw new APIError(408, `Request timed out after ${timeout}ms`);\r\n      }\r\n\r\n      // Handle Network Errors (TypeError: Failed to fetch)\r\n      if (error instanceof TypeError && error.message === \"Failed to fetch\") {\r\n        console.error(`[API] Network Error: Could not connect to backend at ${url}. Is the server running?`);\r\n        if (typeof window !== \"undefined\") {\r\n          window.dispatchEvent(\r\n            new CustomEvent(\"api-error\", {\r\n              detail: {\r\n                title: \"Connection Failed\",\r\n                message: \"Could not connect to the server. Please check your internet connection or try again later.\",\r\n                type: \"critical\"\r\n              }\r\n            })\r\n          );\r\n        }\r\n        throw new APIError(0, \"Network Error: Backend Unreachable\");\r\n      }\r\n\r\n      if (retries > 0) {\r\n        console.warn(`[API] Retrying ${url} (${retries} attempts left)...`);\r\n        await new Promise((res) => setTimeout(res, 1000));\r\n        // Note: We don't recurse apiFetch here to avoid infinite deduplication loops if we were to just call apiFetch again.\r\n        // Instead we let the error propagate or handle retry logic differently if complex.\r\n        // For simplicity in this deductive model, we remove from pending map and re-throw to let upper layer retry,\r\n        // OR better: we can't easily retry inside the dedup promise without recursion complications.\r\n        // Let's keep it simple: Retries are valuable.\r\n        // We will simple RECURSE, but we need to be careful about PENDING_REQUESTS.\r\n        // Actually, if we recurse, the new call will find the PENDING entry (itself) and wait forever!\r\n        // FIX: Remove from pending before recursing.\r\n        PENDING_REQUESTS.delete(url);\r\n        return apiFetch<T>(endpoint, { ...options, retries: retries - 1 });\r\n      }\r\n\r\n      console.error(`[API] Error fetching ${url}:`, error);\r\n\r\n      // Dispatch global event for UI to verify\r\n      if (\r\n        typeof window !== \"undefined\" &&\r\n        options.method &&\r\n        options.method !== \"GET\"\r\n      ) {\r\n        window.dispatchEvent(\r\n          new CustomEvent(\"api-error\", {\r\n            detail: {\r\n              title: \"Operation Failed\",\r\n              message: error.message || \"Unknown error occurred\",\r\n              type: \"error\",\r\n            },\r\n          }),\r\n        );\r\n      }\r\n\r\n      throw error;\r\n    } finally {\r\n      // Clean up pending request\r\n      if (method === \"GET\") {\r\n        PENDING_REQUESTS.delete(url);\r\n      }\r\n    }\r\n  })();\r\n\r\n  if (method === \"GET\") {\r\n    PENDING_REQUESTS.set(url, fetchPromise);\r\n  }\r\n\r\n  return fetchPromise;\r\n}\r\n\r\n// ============================================================\r\n// STABLE API CLIENT\r\n// ============================================================\r\n\r\nexport const api = {\r\n  // DASHBOARD\r\n  getDashboardSummary: () => apiFetch<any>(\"/api/dashboard/summary\"),\r\n  getDashboardInsights: () => apiFetch<any[]>(\"/api/dashboard/insights\"),\r\n  getRecentActivity: (limit = 10) =>\r\n    apiFetch<any[]>(`/api/dashboard/activity?limit=${limit}`),\r\n\r\n  // PURCHASE ORDERS\r\n  listPOs: () => apiFetch<POListItem[]>(\"/api/po/\"),\r\n  getPOStats: () => apiFetch<POStats>(\"/api/po/stats\"),\r\n  getPO: (poNumber: string | number) => apiFetch<any>(`/api/po/${poNumber}`), // Alias for internal use\r\n  getPODetail: (poNumber: string | number) =>\r\n    apiFetch<any>(`/api/po/${poNumber}`), // Explicitly called by UI\r\n  checkPOHasDC: (poNumber: string | number) =>\r\n    apiFetch<any>(`/api/po/${poNumber}/dc`),\r\n  updatePO: (poNumber: string | number, data: any, items: any[]) =>\r\n    apiFetch(`/api/po/${poNumber}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ header: data, items }),\r\n    }),\r\n  createPO: (data: any) =>\r\n    apiFetch(\"/api/po/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  syncPO: (file: File) => {\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    return apiFetch<any>(\"/api/po/upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n    });\r\n  },\r\n  uploadPOBatch: (files: File[]) => {\r\n    const formData = new FormData();\r\n    files.forEach((file) => formData.append(\"files\", file));\r\n    return apiFetch<any>(\"/api/po/upload/batch\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n      timeout: 600000, // 10 minutes for large batch uploads\r\n    });\r\n  },\r\n\r\n  // DELIVERY CHALLANS\r\n  listDCs: () => apiFetch<DCListItem[]>(\"/api/dc/\"),\r\n  getDCStats: () => apiFetch<DCStats>(\"/api/dc/stats\"),\r\n  createDC: (data: any, items: any[]) =>\r\n    apiFetch(\"/api/dc/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ dc: data, items }),\r\n    }),\r\n  updateDC: (dcNumber: string, data: any, items: any[]) =>\r\n    apiFetch(`/api/dc/${dcNumber}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ dc: data, items }),\r\n    }),\r\n  getDC: (dcNumber: string) => apiFetch<any>(`/api/dc/${dcNumber}`),\r\n  getDCDetail: (dcNumber: string | null) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}`), // Alias for UI\r\n  checkDCHasInvoice: (dcNumber: string | null) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}/invoice`),\r\n  deleteDC: (dcNumber: string) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}`, { method: \"DELETE\" }),\r\n\r\n  // INVOICES\r\n  listInvoices: () => apiFetch<InvoiceListItem[]>(\"/api/invoice/\"),\r\n  getInvoiceStats: () => apiFetch<InvoiceStats>(\"/api/invoice/stats\"),\r\n  createInvoice: (data: any) =>\r\n    apiFetch(\"/api/invoice/\", { method: \"POST\", body: JSON.stringify(data) }),\r\n  getInvoiceDetail: (invoiceNumber: string) =>\r\n    apiFetch<any>(`/api/invoice/${encodeURIComponent(invoiceNumber)}`),\r\n\r\n  // COMMON\r\n  checkDuplicateNumber: (\r\n    type: \"DC\" | \"Invoice\",\r\n    number: string,\r\n    date: string,\r\n  ) =>\r\n    apiFetch<{ exists: boolean; financial_year: string; conflict_type?: string | null }>(\r\n      `/api/common/check-duplicate?type=${type}&number=${encodeURIComponent(number)}&date=${date}`,\r\n    ),\r\n\r\n  // SRVS\r\n  listSRVs: (poId?: number) =>\r\n    apiFetch<SRVListItem[]>(poId ? `/api/srv/po/${poId}/srvs` : \"/api/srv/\"),\r\n  getSRVStats: () => apiFetch<SRVStats>(\"/api/srv/stats\"),\r\n  uploadSRVBatch: (files: File[]) => {\r\n    const formData = new FormData();\r\n    files.forEach((file) => formData.append(\"files\", file));\r\n    return apiFetch<any>(\"/api/srv/upload/batch\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n      timeout: 600000,\r\n    });\r\n  },\r\n  getSRV: (srvNumber: string) => apiFetch<any>(`/api/srv/${encodeURIComponent(srvNumber)}`),\r\n  deleteSRV: (srvNumber: string) =>\r\n    apiFetch<void>(`/api/srv/${srvNumber}`, { method: \"DELETE\" }),\r\n\r\n  // SETTINGS\r\n  getSettings: () => apiFetch<Settings>(\"/api/settings/\"),\r\n  updateSetting: (key: string, value: string) =>\r\n    apiFetch(\"/api/settings/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ key, value }),\r\n    }),\r\n  updateSettingsBatch: (settings: { key: string; value: string }[]) =>\r\n    apiFetch(\"/api/settings/batch\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(settings),\r\n    }),\r\n\r\n  // PO NOTES\r\n  getPONotes: () => apiFetch<PONote[]>(\"/api/po-notes/\"),\r\n  getPONote: (id: string | number) => apiFetch<PONote>(`/api/po-notes/${id}`),\r\n  createPONote: (data: Partial<PONote>) =>\r\n    apiFetch<PONote>(\"/api/po-notes/\", { method: \"POST\", body: JSON.stringify(data) }),\r\n  updatePONote: (id: string | number, data: Partial<PONote>) =>\r\n    apiFetch<PONote>(`/api/po-notes/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  deletePONote: (id: string | number) =>\r\n    apiFetch<void>(`/api/po-notes/${id}`, { method: \"DELETE\" }),\r\n\r\n  // REPORTS (RECONCILIATION)\r\n  getReconciliation: (poNumber: number) =>\r\n    apiFetch<any[]>(`/api/reconciliation/po/${poNumber}`),\r\n  getReconciliationLots: (poNumber: number) =>\r\n    apiFetch<any>(`/api/reconciliation/po/${poNumber}/lots`),\r\n\r\n\r\n  // REPORTS\r\n  getReports: (\r\n    type: \"sales\" | \"reconciliation\" | \"dc_register\" | \"invoice_register\" | \"pending\",\r\n    params: string\r\n  ) => {\r\n    // Map internal types to API endpoints if they differ, or use common logic\r\n    // endpoints: /api/reports/sales, /api/reports/reconciliation, /api/reports/register/dc, etc.\r\n    let endpoint = \"\";\r\n    switch (type) {\r\n      case \"sales\": endpoint = \"/api/reports/sales\"; break;\r\n      case \"reconciliation\": endpoint = \"/api/reports/reconciliation\"; break;\r\n      case \"dc_register\": endpoint = \"/api/reports/register/dc\"; break; // Note: Frontend used /register/dc\r\n      case \"invoice_register\": endpoint = \"/api/reports/register/invoice\"; break;\r\n      case \"pending\": endpoint = \"/api/reports/pending\"; break;\r\n      default: throw new Error(`Unknown report type: ${type}`);\r\n    }\r\n    return apiFetch<any[]>(`${endpoint}?${params}`);\r\n  },\r\n  getReport: (type: string, dateParams: string) =>\r\n    apiFetch<any[]>(`/api/reports/${type}?${dateParams}`),\r\n  exportReport: (type: string, dateParams: string) => {\r\n    // Reports export usually calls the same endpoint with export=true\r\n    // But we need to handle the URL construction carefully\r\n    // Reusing the logic from getReports but with export flag\r\n    let endpoint = \"\";\r\n    switch (type) {\r\n      case \"sales\": endpoint = \"/api/reports/sales\"; break;\r\n      case \"reconciliation\": endpoint = \"/api/reports/reconciliation\"; break;\r\n      case \"dc_register\": endpoint = \"/api/reports/register/dc\"; break;\r\n      case \"invoice_register\": endpoint = \"/api/reports/register/invoice\"; break;\r\n      case \"pending\": endpoint = \"/api/reports/pending\"; break;\r\n      default: endpoint = `/api/reports/${type}`; // Fallback\r\n    }\r\n    const baseUrl = API_BASE_URL;\r\n    window.open(`${baseUrl}${endpoint}?export=true&${dateParams}`, \"_blank\");\r\n  },\r\n\r\n  // SEARCH\r\n  searchGlobal: (q: string) =>\r\n    apiFetch<{ results: SearchResult[] }>(\r\n      `/api/search/?q=${encodeURIComponent(q)}`,\r\n    ).then((res) => res.results),\r\n\r\n  // --- Buyers ---\r\n  getBuyers: () => apiFetch<Buyer[]>(\"/api/buyers\"),\r\n  createBuyer: (data: Partial<Buyer>) =>\r\n    apiFetch<Buyer>(\"/api/buyers\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  updateBuyer: (id: number, data: Partial<Buyer>) =>\r\n    apiFetch<Buyer>(`/api/buyers/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  setBuyerDefault: (id: number) =>\r\n    apiFetch<Buyer>(`/api/buyers/${id}/default`, { method: \"PUT\" }),\r\n  deleteBuyer: (id: number) =>\r\n    apiFetch<{ success: boolean }>(`/api/buyers/${id}`, { method: \"DELETE\" }),\r\n\r\n  baseUrl: API_BASE_URL,\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\apiMonitor.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":44,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":44,"endColumn":18,"suggestions":[{"fix":{"range":[1019,1243],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * API Client with Monitoring\r\n * Tracks all API requests for debugging and performance monitoring\r\n */\r\n\r\ninterface RequestLog {\r\n  method: string;\r\n  url: string;\r\n  timestamp: string;\r\n  duration?: number;\r\n  status?: number;\r\n  error?: string;\r\n  requestId?: string;\r\n}\r\n\r\nclass APIMonitor {\r\n  private logs: RequestLog[] = [];\r\n  private maxLogs = 100;\r\n  private errorCount = 0;\r\n  private successCount = 0;\r\n\r\n  logRequest(log: RequestLog) {\r\n    this.logs.push(log);\r\n\r\n    // Track success/error counts\r\n    if (log.error || (log.status && log.status >= 400)) {\r\n      this.errorCount++;\r\n    } else if (log.status && log.status < 400) {\r\n      this.successCount++;\r\n    }\r\n\r\n    // Keep only recent logs\r\n    if (this.logs.length > this.maxLogs) {\r\n      this.logs.shift();\r\n    }\r\n\r\n    // Log to console in development\r\n    if (process.env.NODE_ENV === \"development\") {\r\n      const emoji = log.error\r\n        ? \"Γ¥î\"\r\n        : log.status && log.status >= 400\r\n          ? \"ΓÜá∩╕Å\"\r\n          : \"Γ£à\";\r\n      console.log(\r\n        `[API ${emoji}]`,\r\n        log.method,\r\n        log.url,\r\n        log.duration ? `${log.duration.toFixed(0)}ms` : \"\",\r\n        log.status ? `HTTP ${log.status}` : \"\",\r\n        log.error || \"\",\r\n      );\r\n    }\r\n  }\r\n\r\n  getLogs(): RequestLog[] {\r\n    return [...this.logs];\r\n  }\r\n\r\n  getRecentErrors(count: number = 10): RequestLog[] {\r\n    return this.logs\r\n      .filter((log) => log.error || (log.status && log.status >= 400))\r\n      .slice(-count);\r\n  }\r\n\r\n  getErrorRate(): number {\r\n    const total = this.errorCount + this.successCount;\r\n    if (total === 0) return 0;\r\n    return this.errorCount / total;\r\n  }\r\n\r\n  getStats() {\r\n    const recentLogs = this.logs.slice(-20);\r\n    const avgDuration =\r\n      recentLogs.reduce((sum, log) => sum + (log.duration || 0), 0) /\r\n      recentLogs.length;\r\n\r\n    return {\r\n      totalRequests: this.logs.length,\r\n      successCount: this.successCount,\r\n      errorCount: this.errorCount,\r\n      errorRate: this.getErrorRate(),\r\n      avgDuration: Math.round(avgDuration),\r\n      recentErrors: this.getRecentErrors(5),\r\n    };\r\n  }\r\n\r\n  clear() {\r\n    this.logs = [];\r\n    this.errorCount = 0;\r\n    this.successCount = 0;\r\n  }\r\n}\r\n\r\nexport const apiMonitor = new APIMonitor();\r\n\r\n/**\r\n * Monitored fetch wrapper\r\n * Automatically logs all requests with timing and status\r\n */\r\nexport async function monitoredFetch(\r\n  url: string,\r\n  options?: RequestInit,\r\n): Promise<Response> {\r\n  const startTime = performance.now();\r\n  const log: RequestLog = {\r\n    method: options?.method || \"GET\",\r\n    url,\r\n    timestamp: new Date().toISOString(),\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(url, options);\r\n    log.duration = performance.now() - startTime;\r\n    log.status = response.status;\r\n    log.requestId = response.headers.get(\"X-Request-ID\") || undefined;\r\n\r\n    if (!response.ok) {\r\n      log.error = `HTTP ${response.status}: ${response.statusText}`;\r\n    }\r\n\r\n    apiMonitor.logRequest(log);\r\n    return response;\r\n  } catch (error) {\r\n    log.duration = performance.now() - startTime;\r\n    log.error = error instanceof Error ? error.message : \"Unknown error\";\r\n    apiMonitor.logRequest(log);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Get API monitoring stats\r\n * Useful for debugging and performance analysis\r\n */\r\nexport function getAPIStats() {\r\n  return apiMonitor.getStats();\r\n}\r\n\r\n/**\r\n * Clear API monitoring logs\r\n */\r\nexport function clearAPILogs() {\r\n  apiMonitor.clear();\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\hooks\\useDebounce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\tts.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":20,"suggestions":[{"fix":{"range":[2212,2243],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Text-to-Speech Utility using Web Speech API\r\n * Optimized for natural voice delivery and queue management\r\n */\r\n\r\nclass TTSManager {\r\n  private synthesis: SpeechSynthesis;\r\n  private voice: SpeechSynthesisVoice | null = null;\r\n  private queue: { text: string; onEnd?: () => void }[] = [];\r\n  private isSpeaking = false;\r\n  private enabled = true;\r\n\r\n  constructor() {\r\n    if (typeof window !== \"undefined\") {\r\n      this.synthesis = window.speechSynthesis;\r\n      // Load voices\r\n      this.loadVoice();\r\n      if (this.synthesis.onvoiceschanged !== undefined) {\r\n        this.synthesis.onvoiceschanged = () => this.loadVoice();\r\n      }\r\n    } else {\r\n      // Server-side fallback (noop)\r\n      this.synthesis = {\r\n        speak: () => {},\r\n        cancel: () => {},\r\n        getVoices: () => [],\r\n      } as any;\r\n    }\r\n  }\r\n\r\n  private loadVoice() {\r\n    const voices = this.synthesis.getVoices();\r\n    // Prefer Google US English or Microsoft Zira/David\r\n    this.voice =\r\n      voices.find((v) => v.name.includes(\"Google US English\")) ||\r\n      voices.find((v) => v.name.includes(\"Zira\")) ||\r\n      voices.find((v) => v.lang === \"en-US\") ||\r\n      voices[0] ||\r\n      null;\r\n  }\r\n\r\n  public speak(\r\n    text: string,\r\n    priority: \"normal\" | \"high\" = \"normal\",\r\n    onEnd?: () => void,\r\n  ) {\r\n    if (!this.enabled || !text) {\r\n      if (onEnd) onEnd();\r\n      return;\r\n    }\r\n\r\n    if (priority === \"high\") {\r\n      this.stop();\r\n      this.queue = [{ text, onEnd }];\r\n      this.processQueue();\r\n    } else {\r\n      this.queue.push({ text, onEnd });\r\n      if (!this.isSpeaking) {\r\n        this.processQueue();\r\n      }\r\n    }\r\n  }\r\n\r\n  private processQueue() {\r\n    if (this.queue.length === 0) {\r\n      this.isSpeaking = false;\r\n      return;\r\n    }\r\n\r\n    this.isSpeaking = true;\r\n    const item = this.queue.shift()!;\r\n    const utterance = new SpeechSynthesisUtterance(item.text);\r\n\r\n    if (this.voice) utterance.voice = this.voice;\r\n\r\n    // Optimize rate/pitch\r\n    utterance.rate = 1.1; // Slightly faster\r\n    utterance.pitch = 1.0;\r\n\r\n    utterance.onend = () => {\r\n      if (item.onEnd) item.onEnd();\r\n      this.processQueue();\r\n    };\r\n\r\n    utterance.onerror = (e) => {\r\n      console.error(\"TTS Error:\", e);\r\n      this.isSpeaking = false;\r\n      if (item.onEnd) item.onEnd();\r\n    };\r\n\r\n    this.synthesis.speak(utterance);\r\n  }\r\n\r\n  public stop() {\r\n    this.synthesis.cancel();\r\n    this.queue = [];\r\n    this.isSpeaking = false;\r\n  }\r\n\r\n  public setEnabled(enabled: boolean) {\r\n    this.enabled = enabled;\r\n    if (!enabled) this.stop();\r\n  }\r\n}\r\n\r\nexport const tts = new TTSManager();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\uiAdapters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\uiContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\utils.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":15,"column":33,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":15,"endColumn":34,"suggestions":[{"messageId":"removeEscape","fix":{"range":[424,425],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[424,424],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":15,"column":35,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":15,"endColumn":36,"suggestions":[{"messageId":"removeEscape","fix":{"range":[426,427],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[426,426],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":15,"column":46,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":15,"endColumn":47,"suggestions":[{"messageId":"removeEscape","fix":{"range":[437,438],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[437,437],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":15,"column":48,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":15,"endColumn":49,"suggestions":[{"messageId":"removeEscape","fix":{"range":[439,440],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[439,439],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":16,"column":37,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":16,"endColumn":38,"suggestions":[{"messageId":"removeEscape","fix":{"range":[491,492],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[491,491],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":16,"column":39,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":16,"endColumn":40,"suggestions":[{"messageId":"removeEscape","fix":{"range":[493,494],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[493,493],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatDate(dateStr: string | null | undefined): string {\r\n  if (!dateStr || dateStr === \"-\") return \"-\";\r\n\r\n  try {\r\n    let date: Date;\r\n\r\n    // Try to parse dd/mm/yyyy or dd-mm-yyyy format first\r\n    if (dateStr.match(/^\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{4}$/)) {\r\n      const parts = dateStr.split(/[\\/\\-]/);\r\n      // Assuming dd/mm/yyyy format\r\n      date = new Date(\r\n        parseInt(parts[2]),\r\n        parseInt(parts[1]) - 1,\r\n        parseInt(parts[0]),\r\n      );\r\n    } else {\r\n      // Try standard ISO format or other formats\r\n      date = new Date(dateStr);\r\n    }\r\n\r\n    if (isNaN(date.getTime())) return \"-\";\r\n\r\n    const day = date.getDate().toString().padStart(2, \"0\");\r\n    const months = [\r\n      \"Jan\",\r\n      \"Feb\",\r\n      \"Mar\",\r\n      \"Apr\",\r\n      \"May\",\r\n      \"Jun\",\r\n      \"Jul\",\r\n      \"Aug\",\r\n      \"Sep\",\r\n      \"Oct\",\r\n      \"Nov\",\r\n      \"Dec\",\r\n    ];\r\n    const month = months[date.getMonth()];\r\n    const year = date.getFullYear();\r\n\r\n    return `${day}-${month}-${year}`;\r\n  } catch {\r\n    return \"-\";\r\n  }\r\n}\r\n\r\nexport function formatIndianCurrency(\r\n  amount: number | null | undefined,\r\n): string {\r\n  if (amount === null || amount === undefined) return \"Γé╣0\";\r\n\r\n  const isNeg = amount < 0;\r\n  const absAmount = Math.abs(amount);\r\n\r\n  let formatted = \"\";\r\n  if (absAmount >= 10000000) {\r\n    formatted = `${(absAmount / 10000000).toFixed(2)} Cr`;\r\n  } else if (absAmount >= 100000) {\r\n    formatted = `${(absAmount / 100000).toFixed(2)} L`;\r\n  } else {\r\n    formatted = absAmount.toLocaleString(\"en-IN\");\r\n  }\r\n\r\n  return `${isNeg ? \"- \" : \"\"}Γé╣${formatted}`;\r\n}\r\n\r\nfunction numberToWords(num: number): string {\r\n  if (num === 0) return \"Zero\";\r\n\r\n  const ones = [\r\n    \"\",\r\n    \"One\",\r\n    \"Two\",\r\n    \"Three\",\r\n    \"Four\",\r\n    \"Five\",\r\n    \"Six\",\r\n    \"Seven\",\r\n    \"Eight\",\r\n    \"Nine\",\r\n  ];\r\n  const tens = [\r\n    \"\",\r\n    \"\",\r\n    \"Twenty\",\r\n    \"Thirty\",\r\n    \"Forty\",\r\n    \"Fifty\",\r\n    \"Sixty\",\r\n    \"Seventy\",\r\n    \"Eighty\",\r\n    \"Ninety\",\r\n  ];\r\n  const teens = [\r\n    \"Ten\",\r\n    \"Eleven\",\r\n    \"Twelve\",\r\n    \"Thirteen\",\r\n    \"Fourteen\",\r\n    \"Fifteen\",\r\n    \"Sixteen\",\r\n    \"Seventeen\",\r\n    \"Eighteen\",\r\n    \"Nineteen\",\r\n  ];\r\n\r\n  function convertLessThanThousand(n: number): string {\r\n    if (n === 0) return \"\";\r\n    if (n < 10) return ones[n];\r\n    if (n < 20) return teens[n - 10];\r\n    if (n < 100)\r\n      return (\r\n        tens[Math.floor(n / 10)] + (n % 10 !== 0 ? \" \" + ones[n % 10] : \"\")\r\n      );\r\n    return (\r\n      ones[Math.floor(n / 100)] +\r\n      \" Hundred\" +\r\n      (n % 100 !== 0 ? \" and \" + convertLessThanThousand(n % 100) : \"\")\r\n    );\r\n  }\r\n\r\n  const crore = Math.floor(num / 10000000);\r\n  const lakh = Math.floor((num % 10000000) / 100000);\r\n  const thousand = Math.floor((num % 100000) / 1000);\r\n  const remainder = num % 1000;\r\n\r\n  let result = \"\";\r\n  if (crore > 0) result += convertLessThanThousand(crore) + \" Crore \";\r\n  if (lakh > 0) result += convertLessThanThousand(lakh) + \" Lakh \";\r\n  if (thousand > 0) result += convertLessThanThousand(thousand) + \" Thousand \";\r\n  if (remainder > 0) result += convertLessThanThousand(remainder);\r\n\r\n  return result.trim();\r\n}\r\n\r\nexport function amountInWords(amount: number): string {\r\n  const rupees = Math.floor(amount);\r\n  const paise = Math.round((amount - rupees) * 100);\r\n\r\n  let words = \"Rupees \" + numberToWords(rupees);\r\n  if (paise > 0) words += \" and Paise \" + numberToWords(paise);\r\n  words += \" Only\";\r\n\r\n  return words;\r\n}\r\n\r\nexport function getFinancialYear(dateStr?: string): string {\r\n  const date = dateStr ? new Date(dateStr) : new Date();\r\n  if (isNaN(date.getTime())) return getFinancialYear();\r\n\r\n  const year = date.getFullYear();\r\n  const month = date.getMonth() + 1; // 1-12\r\n\r\n  if (month >= 4) {\r\n    return `${year}-${(year + 1).toString().slice(-2)}`;\r\n  } else {\r\n    return `${year - 1}-${year.toString().slice(-2)}`;\r\n  }\r\n}\r\n","usedDeprecatedRules":[]}]
