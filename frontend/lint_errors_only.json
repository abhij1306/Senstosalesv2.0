[{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\[id]\\DCDetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Suspense' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":98,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":98,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2975,2978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2975,2978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3301,3304],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3301,3304],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Loader2' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":459,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":459,"endColumn":14}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useState, useCallback, useEffect, Suspense, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n    Edit2,\r\n    Save,\r\n    X,\r\n    FileText,\r\n    Plus,\r\n    Trash2,\r\n    Truck,\r\n    AlertCircle,\r\n    FileDown,\r\n} from \"lucide-react\";\r\nimport { api, API_BASE_URL } from \"@/lib/api\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\nimport { DCDetail } from \"@/types\";\r\nimport {\r\n    H3,\r\n    Body,\r\n    SmallText,\r\n    Label,\r\n    Accounting,\r\n    Button,\r\n    Input,\r\n    Card,\r\n    DocumentTemplate,\r\n    Tabs,\r\n    TabsList,\r\n    TabsTrigger,\r\n    TabsContent,\r\n    MonoCode,\r\n} from \"@/components/design-system\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { DetailSkeleton } from \"@/components/design-system/molecules/skeletons/DetailSkeleton\";\r\nimport { useDCStore } from \"@/store/dcStore\";\r\n\r\nconst DocumentJourney = dynamic(\r\n    () =>\r\n        import(\"@/components/design-system/molecules/DocumentJourney\").then(\r\n            (mod) => mod.DocumentJourney\r\n        ),\r\n    {\r\n        loading: () => <div className=\"h-6 w-48 bg-app-surface-hover rounded-full animate-pulse\" />,\r\n        ssr: false,\r\n    }\r\n);\r\n\r\ninterface DCDetailClientProps {\r\n    initialData: DCDetail;\r\n    initialInvoiceData: { has_invoice: boolean; invoice_number?: string } | null;\r\n}\r\n\r\nexport default function DCDetailClient({ initialData, initialInvoiceData }: DCDetailClientProps) {\r\n    const router = useRouter();\r\n    const dcId = initialData.header.dc_number;\r\n\r\n    const { data, isEditing, setDC, updateHeader, updateItem, setEditing, reset } = useDCStore();\r\n\r\n    useEffect(() => {\r\n        if (initialData) setDC(initialData);\r\n    }, [initialData, setDC]);\r\n\r\n    // UI Local State\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n    const [activeTab, setActiveTab] = useState(\"basic\");\r\n\r\n    const hasInvoice = initialInvoiceData?.has_invoice || false;\r\n    const invoiceNumber = initialInvoiceData?.invoice_number || null;\r\n\r\n    if (!data) return <DetailSkeleton />;\r\n\r\n    const header = data.header;\r\n    const items = data.items || [];\r\n    const notes = header.remarks ? header.remarks.split(\"\\n\\n\") : [];\r\n\r\n    // Memoized grouping for Parent-Lot hierarchy\r\n    const groupedItems = useMemo(() => {\r\n        return Object.values(items.reduce((acc, item) => {\r\n            const key = item.po_item_id;\r\n            if (!acc[key]) acc[key] = [];\r\n            acc[key].push(item);\r\n            return acc;\r\n        }, {} as Record<string, typeof items>));\r\n    }, [items]);\r\n\r\n    const handleSave = async () => {\r\n        setLoading(true);\r\n        try {\r\n            await api.updateDC(dcId, header, items);\r\n            setEditing(false);\r\n            setError(null);\r\n        } catch (err: any) {\r\n            setError(err.message || \"Failed to save\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = useCallback(async () => {\r\n        setLoading(true);\r\n        try {\r\n            await api.deleteDC(dcId);\r\n            router.push(\"/dc\");\r\n        } catch (err: any) {\r\n            setError(err.message || \"Failed to delete DC\");\r\n            setShowDeleteConfirm(false);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [dcId, router]);\r\n\r\n    const topActions = (\r\n        <div className=\"flex gap-3\">\r\n            {!isEditing ? (\r\n                <>\r\n                    <Button\r\n                        variant=\"secondary\"\r\n                        size=\"sm\"\r\n                        asChild\r\n                        className=\"bg-app-status-success/10 text-app-status-success hover:bg-app-status-success/20\"\r\n                    >\r\n                        <a href={`${API_BASE_URL}/api/dc/${dcId}/download`} target=\"_blank\" rel=\"noreferrer\">\r\n                            <FileDown size={16} className=\"mr-2\" />\r\n                            Excel\r\n                        </a>\r\n                    </Button>\r\n                    {hasInvoice && (\r\n                        <Button\r\n                            variant=\"secondary\"\r\n                            size=\"sm\"\r\n                            onClick={() => router.push(`/invoice/${encodeURIComponent(invoiceNumber!)}`)}\r\n                        >\r\n                            <FileText size={16} className=\"mr-2\" />\r\n                            View Invoice\r\n                        </Button>\r\n                    )}\r\n                    {!hasInvoice && (\r\n                        <Button\r\n                            variant=\"secondary\"\r\n                            size=\"sm\"\r\n                            onClick={() => router.push(`/invoice/create?dc=${dcId}`)}\r\n                        >\r\n                            <Plus size={16} className=\"mr-2\" />\r\n                            Create Invoice\r\n                        </Button>\r\n                    )}\r\n                    <Button variant=\"default\" size=\"sm\" onClick={() => setEditing(true)}>\r\n                        <Edit2 size={16} className=\"mr-2\" />\r\n                        Edit\r\n                    </Button>\r\n                    {!hasInvoice && (\r\n                        <Button variant=\"destructive\" size=\"sm\" onClick={() => setShowDeleteConfirm(true)}>\r\n                            <Trash2 size={16} className=\"mr-2\" />\r\n                            Delete\r\n                        </Button>\r\n                    )}\r\n                </>\r\n            ) : (\r\n                <>\r\n                    <Button variant=\"ghost\" size=\"sm\" onClick={reset}>\r\n                        <X size={16} className=\"mr-2\" />\r\n                        Cancel\r\n                    </Button>\r\n                    <Button variant=\"default\" size=\"sm\" onClick={handleSave} disabled={loading}>\r\n                        {loading ? <span className=\"animate-spin mr-2\">◌</span> : <Save size={16} className=\"mr-2\" />}\r\n                        Save Changes\r\n                    </Button>\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title={`DC #${header.dc_number}`}\r\n            description={`${header.consignee_name} • ${formatDate(header.dc_date)}`}\r\n            actions={topActions}\r\n            onBack={() => router.back()}\r\n            layoutId={`dc-title-${header.dc_number}`}\r\n            icon={<Truck size={20} className=\"text-app-status-success\" />}\r\n            iconLayoutId={`dc-icon-${header.dc_number}`}\r\n        >\r\n            <div className=\"space-y-6\">\r\n                <DocumentJourney currentStage=\"DC\" className=\"mb-2\" />\r\n\r\n                {error && (\r\n                    <Card className=\"p-4 bg-app-status-error/10 border-none shadow-sm\">\r\n                        <div className=\"flex items-center gap-2 text-app-status-error\">\r\n                            <AlertCircle size={16} />\r\n                            <SmallText className=\"text-app-status-error\">{error}</SmallText>\r\n                        </div>\r\n                    </Card>\r\n                )}\r\n\r\n                {/* Delete Confirmation */}\r\n                {showDeleteConfirm && (\r\n                    <Card className=\"p-6 bg-app-status-error/5 border-none shadow-premium-hover\">\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"p-2 bg-app-status-error/10 rounded-full\">\r\n                                    <Trash2 size={20} className=\"text-app-status-error\" />\r\n                                </div>\r\n                                <div className=\"space-y-1\">\r\n                                    <H3 className=\"text-app-fg\">Delete Delivery Challan?</H3>\r\n                                    <Body className=\"text-app-fg-muted mt-1\">\r\n                                        This action cannot be undone. The DC and all its items will be permanently deleted.\r\n                                    </Body>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex gap-3 justify-end\">\r\n                                <Button variant=\"outline\" size=\"sm\" onClick={() => setShowDeleteConfirm(false)}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button variant=\"destructive\" size=\"sm\" onClick={handleDelete}>\r\n                                    <Trash2 size={16} className=\"mr-2\" />\r\n                                    Delete DC\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                )}\r\n\r\n                <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n                    <TabsList className=\"mb-4 bg-transparent p-0 border-none shadow-none\">\r\n                        <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\r\n                        <TabsTrigger value=\"supplier\">Supplier</TabsTrigger>\r\n                        <TabsTrigger value=\"consignee\">Consignee</TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <AnimatePresence mode=\"wait\">\r\n                        <motion.div\r\n                            key={activeTab}\r\n                            initial={{ opacity: 0, y: 5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -5 }}\r\n                            transition={{ duration: 0.15 }}\r\n                        >\r\n                            <Card className=\"p-6 mt-0 border-none shadow-sm bg-app-surface/50 backdrop-blur-sm relative top-[-1px]\">\r\n                                <TabsContent value=\"basic\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label>DC Number</Label>\r\n                                            <Input value={header.dc_number} readOnly className=\"bg-app-overlay/5\" />\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label>DC Date</Label>\r\n                                            <Input\r\n                                                type=\"date\"\r\n                                                value={header.dc_date}\r\n                                                onChange={(e) => updateHeader(\"dc_date\", e.target.value)}\r\n                                                readOnly={!isEditing}\r\n                                                className={!isEditing ? \"bg-transparent border-transparent\" : \"\"}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label>PO Reference</Label>\r\n                                            <Input\r\n                                                value={header.po_number}\r\n                                                readOnly\r\n                                                className=\"bg-app-surface-hover cursor-pointer text-app-accent\"\r\n                                                onClick={() => router.push(`/po/${header.po_number}`)}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </TabsContent>\r\n                                <TabsContent value=\"supplier\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label>Supplier Phone</Label>\r\n                                            <Input\r\n                                                value={header.supplier_phone}\r\n                                                onChange={(e) => updateHeader(\"supplier_phone\", e.target.value)}\r\n                                                readOnly={!isEditing}\r\n                                                className={!isEditing ? \"bg-transparent border-transparent\" : \"\"}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label>Supplier GSTIN</Label>\r\n                                            <Input\r\n                                                value={header.supplier_gstin}\r\n                                                onChange={(e) => updateHeader(\"supplier_gstin\", e.target.value)}\r\n                                                readOnly={!isEditing}\r\n                                                className={!isEditing ? \"bg-transparent border-transparent\" : \"\"}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </TabsContent>\r\n                                <TabsContent value=\"consignee\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label>Consignee Name</Label>\r\n                                            <Input\r\n                                                value={header.consignee_name}\r\n                                                onChange={(e) => updateHeader(\"consignee_name\", e.target.value)}\r\n                                                readOnly={!isEditing}\r\n                                                className={!isEditing ? \"bg-transparent border-transparent\" : \"\"}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label>Consignee Address</Label>\r\n                                            <Input\r\n                                                value={header.consignee_address}\r\n                                                onChange={(e) => updateHeader(\"consignee_address\", e.target.value)}\r\n                                                readOnly={!isEditing}\r\n                                                className={cn(\"min-h-[60px]\", !isEditing ? \"bg-transparent border-transparent\" : \"\")}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </TabsContent>\r\n                            </Card>\r\n                        </motion.div>\r\n                    </AnimatePresence>\r\n                </Tabs>\r\n\r\n                {/* Items Table with Parent-Lot Hierarchy */}\r\n                <div className=\"space-y-3\">\r\n                    <Label className=\"m-0 mb-1\">Dispatched Items ({items.length})</Label>\r\n                    <div className=\"table-container shadow-premium-hover\">\r\n                        <table className=\"w-full\">\r\n                            <thead>\r\n                                <tr className=\"border-b border-app-border/10 bg-app-overlay/5\">\r\n                                    <th className=\"py-3 px-2 text-left w-[60px]\"><Label>Lot</Label></th>\r\n                                    <th className=\"py-3 px-2 text-left w-[120px]\"><Label>Code</Label></th>\r\n                                    <th className=\"py-3 px-2 text-left w-[120px]\"><Label>Drawing</Label></th>\r\n                                    <th className=\"py-3 px-2 text-left w-[200px]\"><Label>Description</Label></th>\r\n                                    <th className=\"py-3 px-2 text-center w-[60px]\"><Label>Unit</Label></th>\r\n                                    <th className=\"py-3 px-2 text-right w-[80px]\"><Label>Ord</Label></th>\r\n                                    <th className=\"py-3 px-2 text-right w-[80px]\"><Label>Dlv</Label></th>\r\n                                    <th className=\"py-3 px-2 text-right w-[100px] bg-blue-50/10 dark:bg-blue-900/10\">\r\n                                        <Label className=\"text-blue-600 dark:text-blue-400\">Disp</Label>\r\n                                    </th>\r\n                                    <th className=\"py-3 px-2 text-right w-[100px] bg-blue-50/10 dark:bg-blue-900/10\">\r\n                                        <Label className=\"text-blue-600 dark:text-blue-400\">Bal</Label>\r\n                                    </th>\r\n                                    <th className=\"py-3 px-2 text-right w-[80px]\"><Label>Recd</Label></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {groupedItems.map((group, groupIdx) => {\r\n                                    const parentItem = group[0];\r\n                                    const totalOrd = group.reduce((sum, i) => sum + (i.ordered_quantity || 0), 0);\r\n                                    const totalDlv = group.reduce((sum, i) => sum + (i.delivered_quantity || 0), 0);\r\n                                    const totalRec = group.reduce((sum, i) => sum + (i.received_quantity || 0), 0);\r\n                                    const totalBal = group.reduce((sum, i) => sum + (i.remaining_post_dc || 0), 0);\r\n                                    const totalDisp = group.reduce((sum, i) => sum + (i.dispatch_quantity || 0), 0);\r\n\r\n                                    return (\r\n                                        <React.Fragment key={parentItem.po_item_id || groupIdx}>\r\n                                            <tr className=\"bg-app-overlay/5 border-b border-app-border/5\">\r\n                                                <td className=\"py-3 px-2 align-top\">\r\n                                                    <MonoCode className=\"text-app-fg-muted/60\">\r\n                                                        #{parentItem.po_item_no || groupIdx + 1}\r\n                                                    </MonoCode>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top\">\r\n                                                    <Accounting className=\"text-app-fg-muted/60\">{parentItem.material_code || \"-\"}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top\">\r\n                                                    <SmallText className=\"text-app-fg-muted/50\">{parentItem.drg_no || \"-\"}</SmallText>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top\">\r\n                                                    <Body className=\"truncate max-w-[200px] text-app-fg-muted/70\" title={parentItem.material_description || parentItem.description}>\r\n                                                        {parentItem.material_description || parentItem.description}\r\n                                                    </Body>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top text-center\">\r\n                                                    <SmallText className=\"uppercase text-app-fg-muted/50\">{parentItem.unit}</SmallText>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top text-right\">\r\n                                                    <Accounting className=\"text-app-fg-muted/60\">{totalOrd}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top text-right\">\r\n                                                    <Accounting className=\"text-app-fg-muted/60\">{totalDlv}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                                                    <Accounting className=\"text-blue-600/60 dark:text-blue-400/60\">{totalDisp}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                                                    <Accounting className=\"text-blue-600/60 dark:text-blue-400/60\">{totalBal}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-3 px-2 align-top text-right\">\r\n                                                    <Accounting className=\"text-app-fg-muted/60\">{totalRec}</Accounting>\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                            {group.map((item) => {\r\n                                                const originalIndex = items.findIndex(i => i.id === item.id);\r\n                                                return (\r\n                                                    <tr key={item.id} className=\"bg-app-surface transition-colors border-b border-app-border/5\">\r\n                                                        <td className=\"py-2 px-0 relative\">\r\n                                                            <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                                                            <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                                                                <span className=\"text-app-accent/30\" style={{ fontSize: '10px' }}>L</span>\r\n                                                                <MonoCode className=\"text-app-fg-muted\">L-{item.lot_no}</MonoCode>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td colSpan={4} />\r\n                                                        <td className=\"py-2 px-2 text-right\">\r\n                                                            <Accounting className=\"text-app-fg-muted\">{item.ordered_quantity}</Accounting>\r\n                                                        </td>\r\n                                                        <td className=\"py-2 px-2 text-right\">\r\n                                                            <Accounting className=\"text-app-fg-muted\">{item.delivered_quantity}</Accounting>\r\n                                                        </td>\r\n                                                        <td className=\"py-2 px-2 bg-blue-50/5 dark:bg-blue-900/5\">\r\n                                                            {isEditing ? (\r\n                                                                <Input\r\n                                                                    type=\"number\"\r\n                                                                    value={item.dispatch_quantity || \"\"}\r\n                                                                    onChange={(e) => updateItem(originalIndex, \"dispatch_quantity\", parseFloat(e.target.value) || 0)}\r\n                                                                    className=\"text-right w-full font-mono h-7 text-xs border-blue-200 dark:border-blue-800 focus:ring-blue-500/20\"\r\n                                                                />\r\n                                                            ) : (\r\n                                                                <Accounting className=\"text-blue-600 dark:text-blue-400 block text-right\">\r\n                                                                    {item.dispatch_quantity}\r\n                                                                </Accounting>\r\n                                                            )}\r\n                                                        </td>\r\n                                                        <td className=\"py-2 px-2 text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                                                            <Accounting className=\"text-blue-600 dark:text-blue-400\">{item.remaining_post_dc}</Accounting>\r\n                                                        </td>\r\n                                                        <td className=\"py-2 px-2 text-right\">\r\n                                                            <Accounting className=\"text-app-fg-muted\">{item.received_quantity}</Accounting>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                );\r\n                                            })}\r\n                                        </React.Fragment>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Notes */}\r\n                {notes.length > 0 && (\r\n                    <Card className=\"p-6 border-none shadow-sm bg-app-surface/30 backdrop-blur-sm\">\r\n                        <Label className=\"mb-4 block\">Additional Notes</Label>\r\n                        <div className=\"space-y-2\">\r\n                            {notes.map((note, idx) => (\r\n                                <div key={`note-${idx}`} className=\"p-3 bg-app-overlay/5 rounded-lg border border-app-border/5\">\r\n                                    <Body className=\"text-app-fg-muted italic\">{note}</Body>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </Card>\r\n                )}\r\n            </div>\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n\r\nconst Loader2 = ({ size, className }: { size?: number, className?: string }) => (\r\n    <motion.svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={size || 24}\r\n        height={size || 24}\r\n        viewBox=\"0 0 24 24\"\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        className={cn(\"animate-spin\", className)}\r\n    >\r\n        <path d=\"M21 12a9 9 0 1 1-6.219-8.56\" />\r\n    </motion.svg>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2439,2442],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2439,2442],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2538,2541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2538,2541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":124,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3649,3652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3649,3652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":125,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3722,3725],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3722,3725],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":134,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4044,4047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4044,4047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":191,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6091,6094],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6091,6094],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":193,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6184,6187],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6184,6187],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":195,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6308,6311],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6308,6311],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":448,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":448,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":492,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":492,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":493,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":493,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":498,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":498,"endColumn":86},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":501,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":501,"endColumn":86},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":521,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":521,"endColumn":111},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":524,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":524,"endColumn":86}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useEffect, useState, Suspense } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { Save, Search, AlertCircle, Loader2, Plus, Trash2, Truck } from \"lucide-react\";\r\nimport { api } from \"@/lib/api\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { DCItemRow } from \"@/types\";\r\nimport {\r\n  H3,\r\n  Label,\r\n  SmallText,\r\n  Body,\r\n  Accounting,\r\n  MonoCode,\r\n  Button,\r\n  Badge,\r\n  Input,\r\n  Card,\r\n  DocumentJourney,\r\n  DocumentTemplate,\r\n} from \"@/components/design-system\";\r\nimport { CreateDCSkeleton } from \"@/components/design-system/molecules/skeletons/CreateDCSkeleton\";\r\nimport { useDCStore } from \"@/store/dcStore\";\r\n\r\nfunction CreateDCPageContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const initialPoNumber = searchParams ? searchParams.get(\"po\") : \"\";\r\n\r\n  const {\r\n    data,\r\n    poData,\r\n    notes,\r\n    isCheckingNumber,\r\n    isDuplicateNumber,\r\n    conflictType,\r\n    updateHeader,\r\n    setHeader,\r\n    updateItem,\r\n    setPOData,\r\n    setItems,\r\n    addNote,\r\n    updateNote,\r\n    removeNote,\r\n    setNumberStatus,\r\n  } = useDCStore();\r\n\r\n  const [poNumber, setPONumber] = useState(initialPoNumber || \"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const header = data?.header || {\r\n    dc_number: \"\",\r\n    dc_date: new Date().toISOString().split(\"T\")[0],\r\n    supplier_phone: \"0755 – 4247748\",\r\n    supplier_gstin: \"23AACFS6810L1Z7\",\r\n    consignee_name: \"\",\r\n    consignee_address: \"\",\r\n  };\r\n\r\n  const items = data?.items || [];\r\n\r\n  // Memoized item grouping to eliminate re-calculation lag\r\n  const groupedItems = React.useMemo(() => {\r\n    return Object.values(items.reduce((acc, item) => {\r\n      const key = item.po_item_id;\r\n      if (!acc[key]) acc[key] = [];\r\n      acc[key].push(item);\r\n      return acc;\r\n    }, {} as Record<string, typeof items>));\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    if (initialPoNumber) {\r\n      loadInitialData(initialPoNumber);\r\n    }\r\n  }, [initialPoNumber]);\r\n\r\n  const loadInitialData = async (po: string) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const pod = await api.getPODetail(po);\r\n      const mappedItems: DCItemRow[] = [];\r\n\r\n      if (pod?.items) {\r\n        pod.items.forEach((item: any) => {\r\n          const deliveries = item.deliveries || [];\r\n          deliveries.forEach((lot: any) => {\r\n            const ord = lot.ordered_quantity || 0;\r\n            const dlv = lot.delivered_quantity || 0;\r\n            const recd = lot.received_quantity || 0;\r\n            const currentBal = Math.max(0, ord - dlv);\r\n\r\n            mappedItems.push({\r\n              id: `${item.id}-${lot.lot_no}`,\r\n              po_item_id: item.id.toString(),\r\n              po_item_no: item.po_item_no,\r\n              lot_no: lot.lot_no,\r\n              material_code: item.material_code || \"\",\r\n              description: item.material_description || \"\",\r\n              drg_no: item.drg_no || \"\",\r\n              unit: item.unit || \"NOS\",\r\n              ordered_quantity: ord,\r\n              delivered_quantity: dlv,\r\n              received_quantity: recd,\r\n              dispatch_quantity: 0,\r\n              remaining_post_dc: currentBal,\r\n              original_remaining: currentBal\r\n            });\r\n          });\r\n        });\r\n      }\r\n\r\n      setItems(mappedItems);\r\n\r\n      if (pod?.header) {\r\n        setPOData(pod.header);\r\n        setHeader({\r\n          ...header,\r\n          consignee_name: (pod.header as any)?.consignee_name || \"\",\r\n          consignee_address: (pod.header as any)?.consignee_address || \"\",\r\n          supplier_phone: pod.header?.supplier_phone || \"0755 – 4247748\",\r\n          supplier_gstin: pod.header?.supplier_gstin || \"23AACFS6810L1Z7\",\r\n        });\r\n      }\r\n\r\n      if (mappedItems.length === 0) {\r\n        setError(\"No items found in this PO.\");\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to load initial data\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkNumberDuplicate = async (num: string, date: string) => {\r\n    if (!num || num.trim() === \"\") return;\r\n    setNumberStatus(true, false, null);\r\n    try {\r\n      const res = await api.checkDuplicateNumber(\"DC\", num, date);\r\n      setNumberStatus(false, res.exists, res.conflict_type || null);\r\n    } catch {\r\n      setNumberStatus(false, false, null);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    setError(null);\r\n    setIsSubmitting(true);\r\n    const itemsToDispatch = items.filter(\r\n      (item) => item.dispatch_quantity && item.dispatch_quantity > 0\r\n    );\r\n    if (itemsToDispatch.length === 0) {\r\n      setError(\"At least one item must have dispatch quantity\");\r\n      setIsSubmitting(false);\r\n      return;\r\n    }\r\n    const overDeliveryItem = itemsToDispatch.find(\r\n      (item) => item.dispatch_quantity > (item.original_remaining || 0)\r\n    );\r\n    if (overDeliveryItem) {\r\n      setError(\r\n        `Cannot dispatch more than originally available (Lot ${overDeliveryItem.lot_no}: ${overDeliveryItem.dispatch_quantity} > ${overDeliveryItem.original_remaining})`\r\n      );\r\n      setIsSubmitting(false);\r\n      return;\r\n    }\r\n    try {\r\n      const dcPayload = {\r\n        dc_number: header.dc_number,\r\n        dc_date: header.dc_date,\r\n        po_number: poNumber || undefined,\r\n        supplier_phone: header.supplier_phone,\r\n        supplier_gstin: header.supplier_gstin,\r\n        consignee_name: header.consignee_name,\r\n        consignee_address: header.consignee_address,\r\n        remarks: notes.join(\"\\n\\n\"),\r\n      };\r\n      const itemsPayload = itemsToDispatch.map((item) => ({\r\n        po_item_id: item.po_item_id,\r\n        lot_no: item.lot_no ? parseInt(item.lot_no.toString()) : undefined,\r\n        dispatch_qty: item.dispatch_quantity,\r\n        hsn_code: null,\r\n        hsn_rate: null,\r\n      }));\r\n      const response = (await api.createDC(dcPayload, itemsPayload)) as any;\r\n      router.push(`/dc/${response.dc_number || header.dc_number}`);\r\n    } catch (err: any) {\r\n      if (err.status === 422 && Array.isArray(err.data?.detail)) {\r\n        const details = err.data.detail.map((d: any) => `${d.loc.join(\".\")}: ${d.msg}`).join(\", \");\r\n        setError(`Validation Error: ${details}`);\r\n      } else {\r\n        const msg =\r\n          typeof err.message === \"object\"\r\n            ? JSON.stringify(err.message)\r\n            : err.message || \"Failed to create challan\";\r\n        setError(msg);\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const topActions = (\r\n    <div className=\"flex items-center gap-2\">\r\n      <Button variant=\"outline\" size=\"sm\" onClick={() => router.back()} disabled={isSubmitting}>\r\n        Cancel\r\n      </Button>\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"sm\"\r\n        onClick={handleSubmit}\r\n        disabled={\r\n          isSubmitting || items.length === 0 || isDuplicateNumber || isCheckingNumber || !header.dc_number\r\n        }\r\n      >\r\n        {isSubmitting ? (\r\n          <Loader2 size={16} className=\"animate-spin mr-2\" />\r\n        ) : (\r\n          <Save size={16} className=\"mr-2\" />\r\n        )}\r\n        {isSubmitting ? \"Generating...\" : \"Generate Challan\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"Create Delivery Challan\"\r\n      description=\"Generate dispatch documentation from PO\"\r\n      actions={topActions}\r\n      icon={<Truck size={20} className=\"text-app-status-success\" />}\r\n      iconLayoutId=\"create-dc-icon\"\r\n    >\r\n      <div className=\"mb-6\">\r\n        <DocumentJourney currentStage=\"DC\" />\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {error && (\r\n          <Card className=\"p-4 bg-app-status-error/10 border-app-status-error/20\">\r\n            <div className=\"flex items-center gap-2 text-app-status-error\">\r\n              <AlertCircle size={16} />\r\n              <SmallText className=\"font-medium text-app-status-error\">{error}</SmallText>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* PO Selection */}\r\n        {!initialPoNumber && (\r\n          <Card className=\"p-6\">\r\n            <Label className=\"mb-2 block\">\r\n              Purchase Order Reference\r\n            </Label>\r\n            <div className=\"flex gap-3 mt-1\">\r\n              <div className=\"flex-1\">\r\n                <Input\r\n                  id=\"search-po-number\"\r\n                  name=\"search-po-number\"\r\n                  value={poNumber}\r\n                  onChange={(e) => setPONumber(e.target.value)}\r\n                  placeholder=\"Enter PO number\"\r\n                  className=\"font-medium text-app-fg\"\r\n                />\r\n              </div>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => loadInitialData(poNumber)}\r\n                disabled={!poNumber || isLoading}\r\n              >\r\n                {isLoading ? (\r\n                  <Loader2 size={16} className=\"animate-spin mr-2\" />\r\n                ) : (\r\n                  <Search size={16} className=\"mr-2\" />\r\n                )}\r\n                {isLoading ? \"Loading...\" : \"Load Items\"}\r\n              </Button>\r\n            </div>\r\n            {poData && (\r\n              <div className=\"mt-4 p-4 bg-app-surface/50 rounded-xl border border-app-border/10 flex items-center justify-between\">\r\n                <div className=\"flex flex-col\">\r\n                  <Label className=\"text-app-fg-muted\">\r\n                    Supplier\r\n                  </Label>\r\n                  <Body className=\"text-app-fg\">{poData.supplier_name}</Body>\r\n                </div>\r\n                <Badge\r\n                  variant=\"outline\"\r\n                  className=\"bg-app-surface text-app-fg-muted border-app-border\"\r\n                >\r\n                  PO #{poData.po_number}\r\n                </Badge>\r\n              </div>\r\n            )}\r\n          </Card>\r\n        )}\r\n\r\n        {/* Challan Details */}\r\n        <Card className=\"p-6 shadow-sm border-none bg-app-surface/50\">\r\n          <H3 className=\"mb-6 font-bold text-app-fg\">Challan Information</H3>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div className=\"space-y-2\">\r\n              <Label>DC NUMBER</Label>\r\n              <Input\r\n                value={header.dc_number}\r\n                onChange={(e) => updateHeader(\"dc_number\", e.target.value)}\r\n                onBlur={() => checkNumberDuplicate(header.dc_number, header.dc_date)}\r\n                placeholder=\"Ex. DC/001/24-25\"\r\n                className={cn(\r\n                  \"font-medium transition-all shadow-sm focus:ring-2\",\r\n                  isDuplicateNumber\r\n                    ? \"border-app-status-error focus:ring-app-status-error/20\"\r\n                    : isCheckingNumber\r\n                      ? \"border-app-accent focus:ring-app-accent/20\"\r\n                      : \"border-app-border focus:ring-app-accent/10\"\r\n                )}\r\n              />\r\n              {isCheckingNumber && (\r\n                <div className=\"flex items-center gap-2 text-xs text-app-accent mt-1\">\r\n                  <Loader2 className=\"w-3 h-3 animate-spin\" /> Checking availability...\r\n                </div>\r\n              )}\r\n              {isDuplicateNumber && (\r\n                <div className=\"flex items-center gap-2 text-xs text-app-status-error mt-1 font-medium\">\r\n                  <AlertCircle className=\"w-3 h-3\" />\r\n                  {conflictType === \"DC\"\r\n                    ? \"This DC Number already exists\"\r\n                    : \"DC Number conflicts with \" + conflictType}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label>DC DATE</Label>\r\n              <Input\r\n                type=\"date\"\r\n                value={header.dc_date}\r\n                onChange={(e) => {\r\n                  const d = e.target.value;\r\n                  updateHeader(\"dc_date\", d);\r\n                  if (header.dc_number) checkNumberDuplicate(header.dc_number, d);\r\n                }}\r\n                className=\"font-medium\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label>SUPPLIER PHONE</Label>\r\n              <Input\r\n                value={header.supplier_phone}\r\n                onChange={(e) => updateHeader(\"supplier_phone\", e.target.value)}\r\n                className=\"font-medium bg-app-surface/50\"\r\n                readOnly\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label>SUPPLIER GSTIN</Label>\r\n              <Input\r\n                value={header.supplier_gstin}\r\n                onChange={(e) => updateHeader(\"supplier_gstin\", e.target.value)}\r\n                className=\"font-medium bg-app-surface/50\"\r\n                readOnly\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label>CONSIGNEE NAME</Label>\r\n              <Input\r\n                value={header.consignee_name}\r\n                onChange={(e) => updateHeader(\"consignee_name\", e.target.value)}\r\n                className=\"font-medium\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-2\">\r\n              <Label>CONSIGNEE ADDRESS</Label>\r\n              <Input\r\n                value={header.consignee_address}\r\n                onChange={(e) => updateHeader(\"consignee_address\", e.target.value)}\r\n                className=\"font-medium truncate\"\r\n                title={header.consignee_address}\r\n              />\r\n            </div>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* Items Table */}\r\n        {items.length > 0 && (\r\n          <div className=\"space-y-3\">\r\n            <Label className=\"m-0 mb-1\">\r\n              Dispatch Items ({items.length})\r\n            </Label>\r\n            <div className=\"table-container shadow-premium-hover\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-app-border/10 bg-app-overlay/5\">\r\n                    <th className=\"py-3 px-2 text-left w-[60px]\">\r\n                      <Label>Lot</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-left w-[120px]\">\r\n                      <Label>Code</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-left w-[120px]\">\r\n                      <Label>Drawing</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-left w-[200px]\">\r\n                      <Label>Description</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-center w-[60px]\">\r\n                      <Label>Unit</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-right w-[80px]\">\r\n                      <Label>Ord</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-right w-[80px]\">\r\n                      <Label>Dlv</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-right w-[100px] bg-blue-50/10 dark:bg-blue-900/10\">\r\n                      <Label className=\"text-blue-600 dark:text-blue-400\">Disp</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-right w-[100px] bg-blue-50/10 dark:bg-blue-900/10\">\r\n                      <Label className=\"text-blue-600 dark:text-blue-400\">Bal</Label>\r\n                    </th>\r\n                    <th className=\"py-3 px-2 text-right w-[80px]\">\r\n                      <Label>Recd</Label>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {groupedItems.map((group, groupIdx) => {\r\n                    const parentItem = group[0];\r\n                    const totalOrd = group.reduce((sum, i) => sum + (i.ordered_quantity || 0), 0);\r\n                    const totalDlv = group.reduce((sum, i) => sum + (i.delivered_quantity || 0), 0);\r\n                    const totalRec = group.reduce((sum, i) => sum + (i.received_quantity || 0), 0);\r\n                    const totalBal = group.reduce((sum, i) => sum + (i.remaining_post_dc || 0), 0);\r\n                    const totalDisp = group.reduce((sum, i) => sum + (i.dispatch_quantity || 0), 0);\r\n\r\n                    return (\r\n                      <React.Fragment key={parentItem.po_item_id}>\r\n                        <tr className=\"bg-app-overlay/5 border-b border-app-border/5\">\r\n                          <td className=\"py-3 px-2 align-top\">\r\n                            <MonoCode className=\"text-[12px] font-bold text-app-fg-muted/60\">\r\n                              #{parentItem.po_item_no || groupIdx + 1}\r\n                            </MonoCode>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top\">\r\n                            <Accounting className=\"text-app-fg-muted/60\">{parentItem.material_code || \"-\"}</Accounting>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top\">\r\n                            <SmallText className=\"text-app-fg-muted/50\">{parentItem.drg_no || \"-\"}</SmallText>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top\">\r\n                            <Body className=\"font-medium truncate max-w-[200px] text-app-fg-muted/70\" title={parentItem.description}>\r\n                              {parentItem.description}\r\n                            </Body>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top text-center\">\r\n                            <SmallText className=\"uppercase font-bold text-app-fg-muted/50\">{parentItem.unit}</SmallText>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top text-right\">\r\n                            <Accounting className=\"text-app-fg-muted/60\">{totalOrd}</Accounting>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top text-right\">\r\n                            <Accounting className=\"text-app-fg-muted/60\">{totalDlv}</Accounting>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                            <Accounting className=\"font-bold text-blue-600/60 dark:text-blue-400/60\">{totalDisp}</Accounting>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                            <Accounting className=\"font-bold text-blue-600/60 dark:text-blue-400/60\">{totalBal}</Accounting>\r\n                          </td>\r\n                          <td className=\"py-3 px-2 align-top text-right\">\r\n                            <Accounting className=\"text-app-fg-muted/60\">{totalRec}</Accounting>\r\n                          </td>\r\n                        </tr>\r\n\r\n                        {group.map((item) => {\r\n                          const originalIndex = items.findIndex(i => i.id === item.id);\r\n\r\n                          return (\r\n                            <tr key={item.id} className=\"bg-app-surface transition-colors border-b border-app-border/5\">\r\n                              <td className=\"py-2 px-0 relative\">\r\n                                {/* Visual Indent Pipe */}\r\n                                <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                                <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                                  <span className=\"text-[10px] text-app-accent/30 font-bold\">L</span>\r\n                                  <MonoCode className=\"text-[11px] text-app-fg-muted font-bold\">L-{item.lot_no}</MonoCode>\r\n                                </div>\r\n                              </td>\r\n                              <td colSpan={4} />\r\n                              <td className=\"py-2 px-2 text-right\">\r\n                                <Accounting className=\"text-[11px] text-app-fg-muted\">{item.ordered_quantity}</Accounting>\r\n                              </td>\r\n                              <td className=\"py-2 px-2 text-right\">\r\n                                <Accounting className=\"text-[11px] text-app-fg-muted\">{item.delivered_quantity}</Accounting>\r\n                              </td>\r\n                              <td className=\"py-2 px-2 bg-blue-50/5 dark:bg-blue-900/5\">\r\n                                <Input\r\n                                  type=\"number\"\r\n                                  value={item.dispatch_quantity || \"\"}\r\n                                  onChange={(e) => {\r\n                                    const val = parseFloat(e.target.value) || 0;\r\n                                    const originalRem = items[originalIndex].original_remaining ?? items[originalIndex].remaining_post_dc ?? 0;\r\n                                    const validDispatch = Math.min(Math.max(0, val), originalRem);\r\n                                    const newBalance = Math.max(0, originalRem - validDispatch);\r\n\r\n                                    updateItem(originalIndex, \"dispatch_quantity\", validDispatch);\r\n                                    updateItem(originalIndex, \"remaining_post_dc\", newBalance);\r\n                                  }}\r\n                                  className=\"text-right w-full font-mono h-7 text-xs border-blue-200 dark:border-blue-800 focus:ring-blue-500/20\"\r\n                                  placeholder=\"0\"\r\n                                />\r\n                              </td>\r\n                              <td className=\"py-2 px-2 text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                                <Accounting className=\"text-[12px] font-bold text-blue-600 dark:text-blue-400\">{item.remaining_post_dc}</Accounting>\r\n                              </td>\r\n                              <td className=\"py-2 px-2 text-right\">\r\n                                <Accounting className=\"text-[11px] text-app-fg-muted\">{item.received_quantity}</Accounting>\r\n                              </td>\r\n                            </tr>\r\n                          );\r\n                        })}\r\n                      </React.Fragment>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Notes */}\r\n        <Card className=\"p-6 border-none bg-app-surface/50\">\r\n          <Label className=\"mb-4 block\">\r\n            Additional Notes\r\n          </Label>\r\n          <div className=\"space-y-3\">\r\n            {notes.map((note, idx) => (\r\n              <div key={`lot-${idx}`} className=\"flex gap-2\">\r\n                <Input\r\n                  value={note}\r\n                  onChange={(e) => updateNote(idx, e.target.value)}\r\n                  placeholder=\"Enter additional information...\"\r\n                  className=\"font-medium text-app-fg\"\r\n                />\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => removeNote(idx)}\r\n                  className=\"text-app-fg-muted hover:text-app-status-error\"\r\n                >\r\n                  <Trash2 size={16} />\r\n                </Button>\r\n              </div>\r\n            ))}\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={addNote}\r\n              className=\"border-dashed border-2 border-app-border/50 hover:border-app-accent/30\"\r\n            >\r\n              <Plus size={16} className=\"mr-2\" />\r\n              Add Line Note\r\n            </Button>\r\n          </div>\r\n        </Card >\r\n      </div >\r\n    </DocumentTemplate >\r\n  );\r\n}\r\n\r\nexport default function CreateDCPage() {\r\n  return (\r\n    <Suspense fallback={<CreateDCSkeleton />}>\r\n      <CreateDCPageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\[id]\\InvoiceDetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Suspense' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatIndianCurrency' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":42}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect, useMemo, Suspense } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Printer, FileDown, Receipt, Loader2, ChevronDown, ChevronUp } from \"lucide-react\";\r\nimport { API_BASE_URL } from \"@/lib/api\";\r\nimport { formatDate, formatIndianCurrency, cn, amountInWords } from \"@/lib/utils\";\r\nimport { dcRoute } from \"@/lib/routes\";\r\nimport {\r\n    H3,\r\n    Body,\r\n    SmallText,\r\n    Label,\r\n    Accounting,\r\n    Button,\r\n    Card,\r\n    Tabs,\r\n    TabsList,\r\n    TabsTrigger,\r\n    TabsContent,\r\n    DocumentTemplate,\r\n    MonoCode,\r\n} from \"@/components/design-system\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { useInvoiceStore } from \"@/store/invoiceStore\";\r\nimport { InvoiceDetail } from \"@/types\";\r\n\r\nconst DocumentJourney = dynamic(\r\n    () =>\r\n        import(\"@/components/design-system/molecules/DocumentJourney\").then(\r\n            (mod) => mod.DocumentJourney,\r\n        ),\r\n    {\r\n        loading: () => null,\r\n        ssr: false,\r\n    },\r\n);\r\n\r\ninterface InvoiceDetailClientProps {\r\n    data: InvoiceDetail;\r\n}\r\n\r\nexport default function InvoiceDetailClient({ data: initialData }: InvoiceDetailClientProps) {\r\n    const router = useRouter();\r\n    const [activeTab, setActiveTab] = useState(\"buyer\");\r\n    const [expandedItems, setExpandedItems] = useState<Set<string>>(new Set());\r\n\r\n    const {\r\n        data,\r\n        setInvoice,\r\n    } = useInvoiceStore();\r\n\r\n    useEffect(() => {\r\n        if (initialData) {\r\n            setInvoice(initialData);\r\n        }\r\n    }, [initialData, setInvoice]);\r\n\r\n    // Group items for Parent-Lot hierarchy\r\n    const groupedItems = useMemo(() => {\r\n        if (!data?.items) return [];\r\n        const items = data.items;\r\n        return Object.values(items.reduce((acc, item) => {\r\n            const key = item.description || \"item\";\r\n            if (!acc[key]) acc[key] = [];\r\n            acc[key].push(item);\r\n            return acc;\r\n        }, {} as Record<string, typeof items>));\r\n    }, [data?.items]);\r\n\r\n    const toggleItem = (key: string) => {\r\n        const newSet = new Set(expandedItems);\r\n        if (newSet.has(key)) newSet.delete(key);\r\n        else newSet.add(key);\r\n        setExpandedItems(newSet);\r\n    };\r\n\r\n    if (!data || !data.header) return (\r\n        <div className=\"flex items-center justify-center min-h-[400px]\">\r\n            <Loader2 className=\"animate-spin text-app-accent\" size={32} />\r\n        </div>\r\n    );\r\n\r\n    const { header, items = [] } = data;\r\n\r\n    const topActions = (\r\n        <div className=\"flex gap-3\">\r\n            <Button\r\n                variant=\"secondary\"\r\n                size=\"sm\"\r\n                asChild\r\n                className=\"bg-app-status-success/10 text-app-status-success hover:bg-app-status-success/20 border-app-status-success/20\"\r\n            >\r\n                <a\r\n                    href={`${API_BASE_URL}/api/invoice/${encodeURIComponent(header.invoice_number)}/download`}\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                >\r\n                    <FileDown size={16} className=\"mr-2\" /> Excel\r\n                </a>\r\n            </Button>\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={() => window.print()} className=\"border-app-border/20\">\r\n                <Printer size={16} className=\"mr-2\" /> Print\r\n            </Button>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title={`Invoice #${header?.invoice_number || 'N/A'}`}\r\n            description={`${header?.buyer_name || 'N/A'} • ${formatDate(header?.invoice_date || '')}`}\r\n            actions={topActions}\r\n            onBack={() => router.back()}\r\n            layoutId={`inv-title-${header?.invoice_number}`}\r\n            icon={<Receipt size={20} className=\"text-app-accent\" />}\r\n            iconLayoutId={`inv-icon-${header?.invoice_number}`}\r\n        >\r\n            <div className=\"space-y-6\">\r\n                <DocumentJourney currentStage=\"Invoice\" className=\"mb-2\" />\r\n\r\n                <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n                    <TabsList className=\"mb-4 bg-app-overlay/5 p-1 border border-app-border/10 rounded-xl inline-flex\">\r\n                        <TabsTrigger value=\"buyer\">Buyer</TabsTrigger>\r\n                        <TabsTrigger value=\"references\">References</TabsTrigger>\r\n                        <TabsTrigger value=\"logistics\">Logistics</TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <AnimatePresence mode=\"wait\">\r\n                        <motion.div\r\n                            key={activeTab}\r\n                            initial={{ opacity: 0, y: 5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -5 }}\r\n                            transition={{ duration: 0.15 }}\r\n                        >\r\n                            <Card className=\"p-6 mt-0 border-none shadow-sm bg-app-surface/50 backdrop-blur-md\">\r\n                                <TabsContent value=\"buyer\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label className=\"uppercase tracking-widest text-app-fg-muted\">Buyer Name</Label>\r\n                                            <H3 className=\"text-app-fg text-xl leading-none\">\r\n                                                {header.buyer_name || \"-\"}\r\n                                            </H3>\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label className=\"uppercase tracking-widest text-app-fg-muted\">Buyer GSTIN</Label>\r\n                                            <Accounting className=\"text-app-accent text-xl leading-none\">{header.buyer_gstin || \"-\"}</Accounting>\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5 col-span-2 pt-4 border-t border-app-border/5\">\r\n                                            <Label className=\"uppercase tracking-widest text-app-fg-muted\">Billing Address</Label>\r\n                                            <Body className=\"text-app-fg leading-relaxed max-w-3xl\">\r\n                                                {header.buyer_address || \"-\"}\r\n                                            </Body>\r\n                                        </div>\r\n                                    </div>\r\n                                </TabsContent>\r\n\r\n                                <TabsContent value=\"references\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">Order Number</Label><Accounting className=\"text-app-fg\">{header.buyers_order_no || \"-\"}</Accounting></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">Order Date</Label><Body className=\"text-app-fg\">{header.buyers_order_date ? formatDate(header.buyers_order_date) : \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">Linked DC</Label><Accounting className=\"text-app-accent cursor-pointer hover:underline\" onClick={() => router.push(header.dc_number ? dcRoute(header.dc_number) : \"#\")}>{header.dc_number || \"-\"}</Accounting></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">Challan Date</Label><Body className=\"text-app-fg\">{header.dc_date ? formatDate(header.dc_date) : \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">GEMC Number</Label><Body className=\"text-app-fg\">{header.gemc_number || \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">SRV Number</Label><Body className=\"text-app-fg\">{header.srv_no || \"-\"}</Body></div>\r\n                                    </div>\r\n                                </TabsContent>\r\n\r\n                                <TabsContent value=\"logistics\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">Vehicle No</Label><Body className=\"text-app-fg\">{header.vehicle_no || \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">LR Number</Label><Body className=\"text-app-fg\">{header.lr_no || \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">Transporter</Label><Body className=\"text-app-fg\">{header.transporter || \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-widest text-app-fg-muted\">Payment Terms</Label><Body className=\"text-app-fg text-app-accent\">{header.payment_terms || \"45 Days\"}</Body></div>\r\n                                    </div>\r\n                                </TabsContent>\r\n                            </Card>\r\n                        </motion.div>\r\n                    </AnimatePresence>\r\n                </Tabs>\r\n\r\n                {/* Items Table */}\r\n                <div className=\"space-y-4\">\r\n                    <Label className=\"m-0 text-app-fg-muted uppercase tracking-widest\">\r\n                        Billing Structure ({items.length} Items)\r\n                    </Label>\r\n                    <div className=\"table-container shadow-premium-hover border-none bg-app-surface/30\">\r\n                        <table className=\"w-full text-left\">\r\n                            <thead>\r\n                                <tr className=\"border-b border-app-border/10 bg-app-overlay/10\">\r\n                                    <th className=\"py-3 px-4 w-[60px]\"><Label>#</Label></th>\r\n                                    <th className=\"py-3 px-4\"><Label>Description</Label></th>\r\n                                    <th className=\"py-3 px-4 w-[120px]\"><Label>HSN/SAC</Label></th>\r\n                                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label>Qty</Label></th>\r\n                                    <th className=\"py-3 px-4 text-right w-[120px]\"><Label>Rate</Label></th>\r\n                                    <th className=\"py-3 px-4 text-right w-[140px] bg-blue-50/10 dark:bg-blue-900/10\"><Label className=\"text-blue-600 dark:text-blue-400\">Taxable</Label></th>\r\n                                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label>Recd</Label></th>\r\n                                    <th className=\"py-3 px-4 w-[50px]\"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {groupedItems.map((group, groupIdx) => {\r\n                                    const parent = group[0];\r\n                                    const parentKey = parent.description || `item-${groupIdx}`;\r\n                                    const isExpanded = expandedItems.has(parentKey);\r\n                                    const tQty = group.reduce((sum, i) => sum + (i.quantity || 0), 0);\r\n                                    const tVal = group.reduce((sum, i) => sum + (i.taxable_value || i.amount || 0), 0);\r\n                                    const tRec = group.reduce((sum, i) => sum + (i.received_qty || 0), 0);\r\n\r\n                                    return (\r\n                                        <React.Fragment key={parentKey}>\r\n                                            <tr className={cn(\"transition-colors border-b border-app-border/5\", isExpanded ? \"bg-app-overlay/10\" : \"bg-app-overlay/5\")}>\r\n                                                <td className=\"py-3 px-4\"><MonoCode className=\"text-app-accent/60\">#S</MonoCode></td>\r\n                                                <td className=\"py-3 px-4\">\r\n                                                    <Body className=\"text-app-fg-muted/90\">{parent.description}</Body>\r\n                                                    {parent.material_code && <SmallText className=\"text-app-fg-muted/40 uppercase tracking-tighter\">Code: {parent.material_code}</SmallText>}\r\n                                                </td>\r\n                                                <td className=\"py-3 px-4\"><SmallText className=\"text-app-fg-muted/40 uppercase tracking-widest\">{parent.hsn_sac || \"-\"}</SmallText></td>\r\n                                                <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-app-fg-muted/70\">{tQty}</Accounting></td>\r\n                                                <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-app-fg-muted/40\">{parent.rate}</Accounting></td>\r\n                                                <td className=\"py-3 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\"><Accounting className=\"text-blue-600/60 dark:text-blue-400/60\">{tVal}</Accounting></td>\r\n                                                <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-app-fg-muted/70\">{tRec}</Accounting></td>\r\n                                                <td className=\"py-3 px-4 text-center\">\r\n                                                    <button onClick={() => toggleItem(parentKey)} className=\"p-1.5 rounded-md hover:bg-app-accent/10 hover:text-app-accent transition-all text-app-fg-muted/30\">\r\n                                                        {isExpanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n                                                    </button>\r\n                                                </td>\r\n                                            </tr>\r\n                                            {isExpanded && group.map((item, idx) => (\r\n                                                <tr key={idx} className=\"bg-app-surface border-b border-app-border/5\">\r\n                                                    <td className=\"py-2 px-0 relative\">\r\n                                                        <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                                                        <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                                                            <span className=\"text-app-accent/30\" style={{ fontSize: '10px' }}>L</span>\r\n                                                            <MonoCode className=\"text-app-fg-muted\">L-{item.po_sl_no}</MonoCode>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td colSpan={2} />\r\n                                                    <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-app-fg-muted\">{item.quantity}</Accounting></td>\r\n                                                    <td className=\"py-2 px-4 text-right\" />\r\n                                                    <td className=\"py-2 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                                                        <Accounting className=\"text-blue-600 dark:text-blue-400\">{item.taxable_value || item.amount}</Accounting>\r\n                                                    </td>\r\n                                                    <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-app-fg-muted\">{item.received_qty || 0}</Accounting></td>\r\n                                                    <td />\r\n                                                </tr>\r\n                                            ))}\r\n                                        </React.Fragment>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Totals */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-4\">\r\n                    <div className=\"lg:col-start-2\">\r\n                        <Card className=\"p-8 bg-app-surface/50 border-none shadow-premium-hover backdrop-blur-xl\">\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"flex justify-between items-center pb-2 border-b border-app-border/10\">\r\n                                    <Label className=\"uppercase tracking-widest text-app-fg-muted\">Net Taxable Value</Label>\r\n                                    <Accounting className=\"text-xl text-app-fg\">{header.total_taxable_value || header.taxable_value}</Accounting>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center text-app-fg-muted\">\r\n                                    <Label className=\"uppercase tracking-widest\">Total GST (CGST + SGST)</Label>\r\n                                    <Accounting className=\"text-sm\">{((header.cgst_total || header.cgst || 0) + (header.sgst_total || header.sgst || 0)).toFixed(2)}</Accounting>\r\n                                </div>\r\n                                <div className=\"pt-6 mt-4 border-t border-app-border/20 flex justify-between items-end\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label className=\"uppercase text-app-accent tracking-widest\">Grand Total</Label>\r\n                                        <SmallText className=\"text-app-fg-muted block max-w-[280px] leading-snug italic lowercase first-letter:uppercase\">\r\n                                            {amountInWords(header.total_invoice_value || 0)} Only\r\n                                        </SmallText>\r\n                                    </div>\r\n                                    <Accounting className=\"text-4xl text-app-fg tracking-tighter leading-none\">\r\n                                        {header.total_invoice_value || 0}\r\n                                    </Accounting>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[943,946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[943,946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { api } from \"@/lib/api\";\r\nimport { normalizeId } from \"@/lib/routes\";\r\nimport { notFound } from \"next/navigation\";\r\nimport InvoiceDetailClient from \"./InvoiceDetailClient\";\r\n\r\nexport default async function InvoiceDetailPage({\r\n    params,\r\n}: {\r\n    params: Promise<{ id: string }>;\r\n}) {\r\n    const { id } = await params;\r\n\r\n    // Normalize logic consistent with client-side\r\n    const invoiceId = normalizeId(id);\r\n\r\n    if (!invoiceId) {\r\n        notFound();\r\n    }\r\n\r\n    try {\r\n        const decodedId = decodeURIComponent(invoiceId);\r\n        const data = await api.getInvoiceDetail(decodedId);\r\n\r\n        if (!data || !data.header) {\r\n            // If we get valid JSON but empty header, treat as 404\r\n            // console.error(`[InvoicePage] No header found for ID: ${decodedId}`);\r\n            notFound();\r\n        }\r\n\r\n        return <InvoiceDetailClient data={data} />;\r\n    } catch (error: any) {\r\n        // console.error(`[InvoicePage] Error fetching invoice ${invoiceId}:`, error);\r\n\r\n        // Handle 404 from API\r\n        if (error?.status === 404) {\r\n            notFound();\r\n        }\r\n\r\n        // For other errors, we could throw to trigger error.tsx\r\n        // or return a friendly error state here.\r\n        throw error;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Check' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":81},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useDragControls' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dcData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":38,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isCheckingNumber' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":39,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setInvoice' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":41,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2055,2058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2055,2058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":162,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4889,4892],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4889,4892],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":168,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5062,5065],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5062,5065],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":189,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5994,5997],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5994,5997],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":194,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":194,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6123,6126],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6123,6126],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6285,6288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6285,6288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":248,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":248,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8148,8151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8148,8151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":354,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":354,"endColumn":106},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":374,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":374,"endColumn":88},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":405,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":405,"endColumn":91},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":433,"column":59,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":433,"endColumn":103},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":435,"column":76,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":435,"endColumn":120},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":436,"column":76,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":436,"endColumn":120},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":437,"column":108,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":437,"endColumn":170},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":438,"column":76,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":438,"endColumn":120},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":446,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":446,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":447,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":447,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":451,"column":78,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":451,"endColumn":119},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":454,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":454,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":456,"column":78,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":456,"endColumn":119},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":472,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":472,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":476,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":476,"endColumn":79},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":481,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":481,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":522,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":522,"endColumn":116}],"suppressedMessages":[],"errorCount":24,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, Suspense, useMemo } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { cn, amountInWords } from \"@/lib/utils\";\r\nimport { Save, Loader2, AlertCircle, Search, ChevronDown, Check, X, CheckCircle2, Receipt } from \"lucide-react\";\r\nimport { api, type Buyer } from \"@/lib/api\";\r\nimport * as Select from \"@radix-ui/react-select\";\r\nimport { motion, useDragControls, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  H3,\r\n  Label,\r\n  SmallText,\r\n  Body,\r\n  Accounting,\r\n  Button,\r\n  Input,\r\n  Card,\r\n  DocumentTemplate,\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n  DocumentJourney,\r\n  MonoCode,\r\n} from \"@/components/design-system\";\r\nimport { useInvoiceStore } from \"@/store/invoiceStore\";\r\n\r\nconst TAX_RATES = { cgst: 9.0, sgst: 9.0 };\r\n\r\nfunction CreateInvoicePageContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const dcIdFromUrl = searchParams?.get(\"dc\") || \"\";\r\n\r\n  const {\r\n    data,\r\n    dcData,\r\n    isCheckingNumber,\r\n    isDuplicateNumber,\r\n    setInvoice,\r\n    setHeader,\r\n    updateHeader,\r\n    setDCData,\r\n    setItems,\r\n    setNumberStatus,\r\n  } = useInvoiceStore();\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [manualDcId, setManualDcId] = useState(dcIdFromUrl);\r\n\r\n  // Multi-Buyer States\r\n  const [buyers, setBuyers] = useState<Buyer[]>([]);\r\n  const [selectedBuyerId, setSelectedBuyerId] = useState<string>(\"\");\r\n  const [showWarning, setShowWarning] = useState(false);\r\n\r\n  const header = data?.header || {\r\n    invoice_number: \"\",\r\n    invoice_date: new Date().toISOString().split(\"T\")[0],\r\n    dc_number: dcIdFromUrl,\r\n    buyer_name: \"\",\r\n    buyer_gstin: \"\",\r\n    buyer_address: \"\",\r\n    buyer_state: \"\",\r\n    buyer_state_code: \"\",\r\n    place_of_supply: \"\",\r\n    total_taxable_value: 0,\r\n    cgst_total: 0,\r\n    sgst_total: 0,\r\n    total_invoice_value: 0,\r\n  } as any;\r\n\r\n  const items = data?.items || [];\r\n\r\n  // Memoized Item Grouping for Parent-Lot hierarchy\r\n  const groupedItems = useMemo(() => {\r\n    return Object.values(items.reduce((acc, item) => {\r\n      // In Invoice, po_sl_no is used for lot reference\r\n      const key = item.description || \"item\";\r\n      if (!acc[key]) acc[key] = [];\r\n      acc[key].push(item);\r\n      return acc;\r\n    }, {} as Record<string, typeof items>));\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    fetchInitialData();\r\n  }, [dcIdFromUrl]);\r\n\r\n  const fetchInitialData = async () => {\r\n    try {\r\n      const buyerList = await api.getBuyers();\r\n      setBuyers(buyerList);\r\n\r\n      const defaultBuyer = buyerList.find((b) => b.is_default);\r\n      if (defaultBuyer) {\r\n        setSelectedBuyerId(defaultBuyer.id.toString());\r\n        applyBuyerToStore(defaultBuyer);\r\n      } else if (buyerList.length > 0) {\r\n        setSelectedBuyerId(buyerList[0].id.toString());\r\n        applyBuyerToStore(buyerList[0]);\r\n      }\r\n\r\n      if (dcIdFromUrl) loadDC(dcIdFromUrl);\r\n    } catch {\r\n      // Failure not critical\r\n    }\r\n  };\r\n\r\n  const applyBuyerToStore = (buyer: Buyer) => {\r\n    updateHeader(\"buyer_name\", buyer.name);\r\n    updateHeader(\"buyer_gstin\", buyer.gstin);\r\n    updateHeader(\"buyer_address\", buyer.billing_address);\r\n    updateHeader(\"buyer_state\", buyer.state || \"\");\r\n    updateHeader(\"buyer_state_code\", buyer.state_code || \"\");\r\n    updateHeader(\"place_of_supply\", buyer.place_of_supply);\r\n  };\r\n\r\n  const handleBuyerChange = (id: string) => {\r\n    setSelectedBuyerId(id);\r\n    const buyer = buyers.find((b) => b.id.toString() === id);\r\n    if (buyer) applyBuyerToStore(buyer);\r\n  };\r\n\r\n  const checkNumberDuplicate = async (num: string, date: string) => {\r\n    if (!num || num.length < 3) return;\r\n    setNumberStatus(true, false);\r\n    try {\r\n      const res = await api.checkDuplicateNumber(\"Invoice\", num, date);\r\n      setNumberStatus(false, res.exists);\r\n    } catch {\r\n      setNumberStatus(false, false);\r\n    }\r\n  };\r\n\r\n  const loadDC = async (id: string) => {\r\n    if (!id) return;\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const dcDetail = await api.getDCDetail(id);\r\n\r\n      if (!dcDetail?.header) {\r\n        setError(\"Challan not found.\");\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      setDCData(dcDetail.header);\r\n\r\n      const newHeader = {\r\n        ...header,\r\n        dc_number: dcDetail.header.dc_number || \"\",\r\n        dc_date: dcDetail.header.dc_date || \"\",\r\n        buyers_order_no: dcDetail.header.po_number?.toString() || \"\",\r\n        buyers_order_date: dcDetail.header.po_date || \"\",\r\n        vehicle_no: dcDetail.header.vehicle_no || \"\",\r\n        lr_no: dcDetail.header.lr_no || \"\",\r\n        transporter: dcDetail.header.transporter || \"\",\r\n        destination: (dcDetail.header as any).destination || \"\",\r\n      };\r\n      setHeader(newHeader);\r\n\r\n      if (dcDetail.items?.length > 0) {\r\n        const mappedItems = dcDetail.items\r\n          .map((item: any) => {\r\n            const qty = item.dispatched_quantity || item.dispatch_qty || 0;\r\n            const rate = item.po_rate || 0;\r\n            const taxableValue = qty * rate;\r\n            const cgstAmount = (taxableValue * TAX_RATES.cgst) / 100;\r\n            const sgstAmount = (taxableValue * TAX_RATES.sgst) / 100;\r\n\r\n            return {\r\n              po_sl_no: item.lot_no?.toString() || \"1\",\r\n              description: item.description || item.material_description || \"\",\r\n              hsn_sac: item.hsn_code || \"\",\r\n              quantity: qty,\r\n              unit: item.unit || \"NOS\",\r\n              rate: rate,\r\n              taxable_value: taxableValue,\r\n              cgst_amount: cgstAmount,\r\n              sgst_amount: sgstAmount,\r\n              total_amount: taxableValue + cgstAmount + sgstAmount,\r\n              received_qty: item.received_quantity || 0,\r\n            };\r\n          })\r\n          .filter((item: any) => item.quantity > 0);\r\n\r\n        setItems(mappedItems);\r\n        calculateTotals(mappedItems);\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to load DC\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateTotals = (currentItems: any[]) => {\r\n    const taxable = currentItems.reduce((sum, item) => sum + (item.taxable_value || 0), 0);\r\n    const cgst = currentItems.reduce((sum, item) => sum + (item.cgst_amount || 0), 0);\r\n    const sgst = currentItems.reduce((sum, item) => sum + (item.sgst_amount || 0), 0);\r\n    const total = taxable + cgst + sgst;\r\n\r\n    updateHeader(\"total_taxable_value\", taxable);\r\n    updateHeader(\"cgst_total\", cgst);\r\n    updateHeader(\"sgst_total\", sgst);\r\n    updateHeader(\"total_invoice_value\", total);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setShowWarning(false);\r\n    setIsSaving(true);\r\n    setError(null);\r\n    try {\r\n      const payload = {\r\n        invoice_number: header.invoice_number,\r\n        invoice_date: header.invoice_date,\r\n        dc_number: header.dc_number,\r\n        buyer_name: header.buyer_name,\r\n        buyer_address: header.buyer_address,\r\n        buyer_gstin: header.buyer_gstin,\r\n        buyer_state: header.buyer_state,\r\n        buyer_state_code: header.buyer_state_code,\r\n        place_of_supply: header.place_of_supply,\r\n        buyers_order_no: header.buyers_order_no,\r\n        buyers_order_date: header.buyers_order_date,\r\n        vehicle_no: header.vehicle_no,\r\n        lr_no: header.lr_no,\r\n        transporter: header.transporter,\r\n        destination: header.destination,\r\n        terms_of_delivery: header.terms_of_delivery,\r\n        gemc_number: header.gemc_number,\r\n        gemc_date: header.gemc_date,\r\n        mode_of_payment: header.mode_of_payment,\r\n        payment_terms: header.payment_terms || \"45 Days\",\r\n        despatch_doc_no: header.despatch_doc_no,\r\n        srv_no: header.srv_no,\r\n        srv_date: header.srv_date,\r\n        remarks: header.remarks,\r\n        items: items,\r\n      };\r\n\r\n      await api.createInvoice(payload);\r\n      router.push(`/invoice/${header.invoice_number}`);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to create invoice\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const topActions = (\r\n    <div className=\"flex items-center gap-2\">\r\n      <Button variant=\"outline\" size=\"sm\" onClick={() => router.back()} disabled={isSaving}>\r\n        Cancel\r\n      </Button>\r\n      <Button\r\n        color=\"primary\"\r\n        size=\"sm\"\r\n        onClick={() => setShowWarning(true)}\r\n        disabled={isSaving || items.length === 0 || isDuplicateNumber || !header.invoice_number}\r\n      >\r\n        {isSaving ? <Loader2 size={16} className=\"animate-spin mr-2\" /> : <Save size={16} className=\"mr-2\" />}\r\n        {isSaving ? \"Saving...\" : \"Generate Invoice\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"Create GST Invoice\"\r\n      description=\"Generate billing documentation from DC\"\r\n      actions={topActions}\r\n      onBack={() => router.back()}\r\n      icon={<Receipt size={20} className=\"text-app-accent\" />}\r\n      iconLayoutId=\"create-invoice-icon\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        <DocumentJourney currentStage=\"Invoice\" className=\"mb-2\" />\r\n\r\n        {error && (\r\n          <Card className=\"p-4 bg-app-status-error/10 border-none\">\r\n            <div className=\"flex items-center gap-2 text-app-status-error\">\r\n              <AlertCircle size={16} />\r\n              <SmallText className=\"font-semibold text-app-status-error\">{error}</SmallText>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* DC Selection */}\r\n        {!dcIdFromUrl && (\r\n          <Card className=\"p-6\">\r\n            <Label className=\"mb-2 block\">Delivery Challan Reference</Label>\r\n            <div className=\"flex gap-3 mt-1\">\r\n              <div className=\"flex-1\">\r\n                <Input\r\n                  value={manualDcId}\r\n                  onChange={(e) => setManualDcId(e.target.value)}\r\n                  placeholder=\"Enter DC number\"\r\n                  className=\"text-app-fg text-lg\"\r\n                />\r\n              </div>\r\n              <Button variant=\"secondary\" onClick={() => loadDC(manualDcId)} disabled={!manualDcId || isLoading}>\r\n                {isLoading ? <Loader2 size={16} className=\"animate-spin mr-2\" /> : <Search size={16} className=\"mr-2\" />}\r\n                {isLoading ? \"Loading...\" : \"Load DC\"}\r\n              </Button>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Info Tabs */}\r\n        <Tabs defaultValue=\"buyer\" className=\"w-full\">\r\n          <TabsList className=\"mb-4 bg-app-overlay/5 p-1 rounded-xl inline-flex border border-app-border/10\">\r\n            <TabsTrigger value=\"buyer\">Buyer Info</TabsTrigger>\r\n            <TabsTrigger value=\"references\">References</TabsTrigger>\r\n            <TabsTrigger value=\"logistics\">Logistics</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 5 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -5 }}\r\n              transition={{ duration: 0.15 }}\r\n            >\r\n              <Card className=\"p-6 mt-0 border-none shadow-sm bg-app-surface/50 backdrop-blur-md\">\r\n                <TabsContent value=\"buyer\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                    <div className=\"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 border-r border-app-border/10 pr-6\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label>INVOICE NUMBER</Label>\r\n                        <Input\r\n                          value={header.invoice_number}\r\n                          onChange={(e) => {\r\n                            const val = e.target.value;\r\n                            updateHeader(\"invoice_number\", val);\r\n                            checkNumberDuplicate(val, header.invoice_date);\r\n                          }}\r\n                          className={cn(\"tabular-nums text-lg\", isDuplicateNumber ? \"border-app-status-error ring-app-status-error/10\" : \"\")}\r\n                          placeholder=\"INV/001/24-25\"\r\n                        />\r\n                        {isDuplicateNumber && <SmallText className=\"text-app-status-error font-medium\">This number already exists</SmallText>}\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label>INVOICE DATE</Label>\r\n                        <Input type=\"date\" value={header.invoice_date} onChange={(e) => updateHeader(\"invoice_date\", e.target.value)} />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"lg:col-span-1\">\r\n                      <Label className=\"text-app-accent mb-3 block uppercase tracking-widest text-[10px]\">Billed To</Label>\r\n                      <Select.Root value={selectedBuyerId} onValueChange={handleBuyerChange}>\r\n                        <Select.Trigger className=\"flex items-center justify-between w-full px-4 py-2 bg-app-surface border border-app-border/20 rounded-xl text-sm shadow-sm mb-4\">\r\n                          <Select.Value placeholder=\"Select Buyer\" />\r\n                          <Select.Icon><ChevronDown size={14} /></Select.Icon>\r\n                        </Select.Trigger>\r\n                        <Select.Portal>\r\n                          <Select.Content className=\"overflow-hidden bg-app-surface rounded-2xl shadow-premium border border-app-border/10 z-50\">\r\n                            <Select.Viewport className=\"p-1\">\r\n                              {buyers.map((b) => (\r\n                                <Select.Item key={b.id} value={b.id.toString()} className=\"flex items-center px-8 py-3 text-sm text-app-fg-muted rounded-xl outline-none hover:bg-app-accent/10 hover:text-app-accent cursor-pointer\">\r\n                                  <Select.ItemText className=\"font-medium\">{b.name}</Select.ItemText>\r\n                                </Select.Item>\r\n                              ))}\r\n                            </Select.Viewport>\r\n                          </Select.Content>\r\n                        </Select.Portal>\r\n                      </Select.Root>\r\n                      <div className=\"p-4 rounded-xl bg-app-overlay/5 border border-app-border/10\">\r\n                        <H3 className=\"text-app-fg text-sm mb-1\">{header.buyer_name || \"---\"}</H3>\r\n                        <Body className=\"text-[11px] text-app-fg-muted leading-relaxed\">{header.buyer_address || \"---\"}</Body>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"references\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                    <div className=\"space-y-1.5\"><Label>Order Number</Label><Input value={header.buyers_order_no || \"\"} onChange={(e) => updateHeader(\"buyers_order_no\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>Order Date</Label><Input type=\"date\" value={header.buyers_order_date || \"\"} onChange={(e) => updateHeader(\"buyers_order_date\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>GEMC No</Label><Input value={header.gemc_number || \"\"} onChange={(e) => updateHeader(\"gemc_number\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>SRV No</Label><Input value={header.srv_no || \"\"} onChange={(e) => updateHeader(\"srv_no\", e.target.value)} /></div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"logistics\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                    <div className=\"space-y-1.5\"><Label>Vehicle No</Label><Input value={header.vehicle_no || \"\"} onChange={(e) => updateHeader(\"vehicle_no\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>LR Number</Label><Input value={header.lr_no || \"\"} onChange={(e) => updateHeader(\"lr_no\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>Transporter</Label><Input value={header.transporter || \"\"} onChange={(e) => updateHeader(\"transporter\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>Payment Terms</Label><Input value={header.payment_terms || \"45 Days\"} onChange={(e) => updateHeader(\"payment_terms\", e.target.value)} /></div>\r\n                  </div>\r\n                </TabsContent>\r\n              </Card>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n        </Tabs>\r\n\r\n        {/* Items Table */}\r\n        {items.length > 0 && (\r\n          <div className=\"space-y-4\">\r\n            <Label className=\"m-0 text-app-fg-muted uppercase tracking-widest text-[11px]\">\r\n              Billing Structure ({items.length} Items)\r\n            </Label>\r\n            <div className=\"table-container shadow-premium-hover bg-app-surface/30\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-app-border/10 bg-app-overlay/10\">\r\n                    <th className=\"py-3 px-4 text-left w-[60px]\"><Label>Lot</Label></th>\r\n                    <th className=\"py-3 px-4 text-left\"><Label>Description</Label></th>\r\n                    <th className=\"py-3 px-4 text-left w-[120px]\"><Label>HSN/SAC</Label></th>\r\n                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label>Qty</Label></th>\r\n                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label>Rate</Label></th>\r\n                    <th className=\"py-3 px-4 text-right w-[120px] bg-blue-50/10 dark:bg-blue-900/10\"><Label className=\"text-blue-600 dark:text-blue-400\">Taxable</Label></th>\r\n                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label>Recd</Label></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {groupedItems.map((group, groupIdx) => {\r\n                    const parent = group[0];\r\n                    const tQty = group.reduce((sum, i) => sum + (i.quantity || 0), 0);\r\n                    const tVal = group.reduce((sum, i) => sum + (i.taxable_value || 0), 0);\r\n                    const tRec = group.reduce((sum, i) => sum + (i.received_qty || 0), 0);\r\n\r\n                    return (\r\n                      <React.Fragment key={(parent.description || \"\") + groupIdx}>\r\n                        {/* Summary Header */}\r\n                        <tr className=\"bg-app-overlay/10 border-b border-app-border/5\">\r\n                          <td className=\"py-3 px-4\"><MonoCode className=\"text-app-accent/60\">#S</MonoCode></td>\r\n                          <td className=\"py-3 px-4\"><Body className=\"text-[13px] text-app-fg-muted/80\">{parent.description}</Body></td>\r\n                          <td className=\"py-3 px-4\"><SmallText className=\"text-app-fg-muted/40 uppercase tracking-widest\">{parent.hsn_sac || \"-\"}</SmallText></td>\r\n                          <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-[13px] text-app-fg-muted/60\">{tQty}</Accounting></td>\r\n                          <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-[13px] text-app-fg-muted/40\">{parent.rate}</Accounting></td>\r\n                          <td className=\"py-3 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\"><Accounting className=\"text-[13px] text-blue-600/60 dark:text-blue-400/60\">{tVal}</Accounting></td>\r\n                          <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-[13px] text-app-fg-muted/60\">{tRec}</Accounting></td>\r\n                        </tr>\r\n                        {/* Lot Rows */}\r\n                        {group.map((item, idx) => (\r\n                          <tr key={idx} className=\"bg-app-surface border-b border-app-border/5 transition-colors\">\r\n                            <td className=\"py-2 px-0 relative\">\r\n                              <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                              <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                                <span className=\"text-[10px] text-app-accent/30 font-medium\">L</span>\r\n                                <MonoCode className=\"text-[11px] text-app-fg-muted font-medium\">L-{item.po_sl_no}</MonoCode>\r\n                              </div>\r\n                            </td>\r\n                            <td colSpan={2} />\r\n                            <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-[12px] text-app-fg-muted\">{item.quantity}</Accounting></td>\r\n                            <td className=\"py-2 px-4 text-right\" />\r\n                            <td className=\"py-2 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                              <Accounting className=\"text-[12px] text-blue-600 dark:text-blue-400\">{item.taxable_value}</Accounting>\r\n                            </td>\r\n                            <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-[11px] text-app-fg-muted\">{item.received_qty}</Accounting></td>\r\n                          </tr>\r\n                        ))}\r\n                      </React.Fragment>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Totals Card */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-4\">\r\n              <div className=\"lg:col-start-2\">\r\n                <Card className=\"p-8 bg-app-surface/50 border-none shadow-premium-hover backdrop-blur-xl\">\r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-between items-center pb-2 border-b border-app-border/10\">\r\n                      <Label className=\"uppercase tracking-widest text-app-fg-muted text-[10px]\">Net Taxable Value</Label>\r\n                      <Accounting className=\"text-xl text-app-fg\">{header.total_taxable_value}</Accounting>\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center text-app-fg-muted\">\r\n                      <Label className=\"text-[10px] uppercase tracking-widest\">CGST (9%) + SGST (9%)</Label>\r\n                      <Accounting className=\"text-sm\">{(header.cgst_total + header.sgst_total).toFixed(2)}</Accounting>\r\n                    </div>\r\n                    <div className=\"pt-6 mt-4 border-t border-app-border/20 flex justify-between items-end\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"uppercase text-app-accent tracking-widest text-[12px]\">Total Invoice Value</Label>\r\n                        <SmallText className=\"text-app-fg-muted font-medium block max-w-[280px] leading-snug italic lowercase first-letter:uppercase\">\r\n                          {amountInWords(header.total_invoice_value)} Only\r\n                        </SmallText>\r\n                      </div>\r\n                      <Accounting className=\"text-4xl text-app-fg tracking-tighter leading-none\">\r\n                        {header.total_invoice_value}\r\n                      </Accounting>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Verification Modal */}\r\n      <AnimatePresence>\r\n        {showWarning && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-app-overlay/40 backdrop-blur-sm\"\r\n            onClick={() => setShowWarning(false)}\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.95, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.95, opacity: 0 }}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"relative w-full max-w-md\"\r\n            >\r\n              <Card className=\"p-0 overflow-hidden border-none shadow-2xl bg-app-surface\">\r\n                <div className=\"p-8 pb-6 bg-gradient-to-br from-app-status-error/5 to-app-status-warning/5 border-b border-app-border/10 flex items-center gap-4\">\r\n                  <div className=\"w-12 h-12 rounded-2xl bg-app-status-error flex items-center justify-center shadow-lg shadow-app-status-error/20\">\r\n                    <AlertCircle className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <H3 className=\"text-app-fg leading-none\">Generate Invoice?</H3>\r\n                    <SmallText className=\"text-app-fg-muted font-medium mt-1 uppercase tracking-widest text-[10px]\">Permanent Financial Action</SmallText>\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-8\">\r\n                  <div className=\"p-4 rounded-2xl bg-app-status-error/5 border border-app-status-error/10 mb-6\">\r\n                    <Body className=\"text-sm text-app-status-error italic\">\r\n                      Warning: Generating this invoice will lock the associated DC and cannot be undone.\r\n                    </Body>\r\n                  </div>\r\n                  <div className=\"flex gap-3\">\r\n                    <Button variant=\"outline\" className=\"flex-1 font-medium\" onClick={() => setShowWarning(false)}>Cancel</Button>\r\n                    <Button color=\"primary\" className=\"flex-1 shadow-lg shadow-app-accent/20\" onClick={handleSave}>Confirm</Button>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\nexport default function CreateInvoicePage() {\r\n  return (\r\n    <Suspense fallback={<div className=\"h-screen w-full bg-app-bg animate-pulse\" />}>\r\n      <CreateInvoicePageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po-notes\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\PODetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PODelivery' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateHeader' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":40,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'updateItem' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":41,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'addItem' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'removeItem' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'addDelivery' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":44,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'removeDelivery' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":45,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'items' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":120,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":26}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useCallback, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n    Edit2,\r\n    Save,\r\n    X,\r\n    FileText,\r\n    FileDown,\r\n} from \"lucide-react\";\r\nimport { api } from \"@/lib/api\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\nimport { PODetail, POItem, PODelivery, SRVListItem } from \"@/types\";\r\nimport {\r\n    DocumentTemplate,\r\n    Button,\r\n    Flex,\r\n    Box,\r\n} from \"@/components/design-system\";\r\nimport { PODetailCard } from \"@/components/po/organisms/PODetailCard\";\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\ninterface PODetailClientProps {\r\n    initialPO: PODetail | null;\r\n    initialSrvs: SRVListItem[];\r\n    initialDC: { has_dc: boolean; dc_id?: string } | null;\r\n}\r\n\r\nexport default function PODetailClient({\r\n    initialPO,\r\n    initialSrvs,\r\n    initialDC,\r\n}: PODetailClientProps) {\r\n    const router = useRouter();\r\n\r\n    // Zustand Store Integration\r\n    const data = usePOStore((state) => state.data);\r\n    const setPO = usePOStore((state) => state.setPO);\r\n    const updateHeader = usePOStore((state) => state.updateHeader);\r\n    const updateItem = usePOStore((state) => state.updateItem);\r\n    const addItem = usePOStore((state) => state.addItem);\r\n    const removeItem = usePOStore((state) => state.removeItem);\r\n    const addDelivery = usePOStore((state) => state.addDelivery);\r\n    const removeDelivery = usePOStore((state) => state.removeDelivery);\r\n\r\n    // Initialize store with server data\r\n    useEffect(() => {\r\n        if (initialPO) {\r\n            setPO(initialPO);\r\n        }\r\n    }, [initialPO, setPO]);\r\n\r\n    const [srvs] = useState<SRVListItem[]>(initialSrvs);\r\n    const [hasDC] = useState(initialDC?.has_dc || false);\r\n    const [dcId] = useState(initialDC?.dc_id || null);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [expandedItems, setExpandedItems] = useState<Set<number>>(\r\n        new Set(initialPO?.items?.map((item: POItem) => item.po_item_no) || [])\r\n    );\r\n    const [activeTab, setActiveTab] = useState(\"basic\");\r\n\r\n    // Handle Not Found State\r\n    if (!initialPO || !initialPO.header) {\r\n        return (\r\n            <DocumentTemplate\r\n                title=\"Purchase Order Not Found\"\r\n                description=\"The requested purchase order could not be found or has been deleted.\"\r\n                onBack={() => router.back()}\r\n                layoutId=\"po-not-found\"\r\n                icon={<FileText size={20} className=\"text-app-fg-muted\" />}\r\n                iconLayoutId=\"po-icon-not-found\"\r\n            >\r\n                <div className=\"flex flex-col items-center justify-center p-12 text-center h-[50vh]\">\r\n                    <div className=\"w-16 h-16 rounded-full bg-app-surface-hover flex items-center justify-center mb-4\">\r\n                        <FileText size={32} className=\"text-app-fg-muted\" />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-medium text-app-fg-primary mb-2\">\r\n                        PO Not Found\r\n                    </h3>\r\n                    <p className=\"text-sm text-app-fg-muted max-w-md mb-6\">\r\n                        We couldn't find the Purchase Order you're looking for. It may have been deleted or the ID is incorrect.\r\n                    </p>\r\n                    <Button onClick={() => router.push(\"/po/list\")}>\r\n                        Return to List\r\n                    </Button>\r\n                </div>\r\n            </DocumentTemplate>\r\n        );\r\n    }\r\n\r\n    const handleSave = useCallback(async () => {\r\n        if (!data || !data.header) return;\r\n        setLoading(true);\r\n        try {\r\n            await api.updatePO(data.header.po_number, data.header, data.items);\r\n            setEditMode(false);\r\n        } catch {\r\n            // console.error(err.message || \"Failed to sync changes\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [data]);\r\n\r\n    const toggleItem = useCallback((itemNo: number) => {\r\n        const s = new Set(expandedItems);\r\n        if (s.has(itemNo)) {\r\n            s.delete(itemNo);\r\n        } else {\r\n            s.add(itemNo);\r\n        }\r\n        setExpandedItems(s);\r\n    }, [expandedItems]);\r\n\r\n    // Safe destructuring after Not Found check\r\n    if (!data || !data.header) return null;\r\n\r\n    const { header, items } = data;\r\n\r\n    const renderActions = () => {\r\n        if (editMode) {\r\n            return (\r\n                <Flex align=\"center\" gap={3}>\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        size=\"sm\"\r\n                        onClick={() => setEditMode(false)}\r\n                        className=\"text-app-fg-muted hover:bg-app-surface-hover text-xs\"\r\n                    >\r\n                        <X className=\"w-4 h-4 mr-2\" /> DISCARD\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"default\"\r\n                        size=\"sm\"\r\n                        onClick={handleSave}\r\n                        className=\"bg-app-accent hover:brightness-110 text-white shadow-sm text-xs\"\r\n                        disabled={loading}\r\n                    >\r\n                        {loading ? \"SAVING...\" : (\r\n                            <><Save className=\"w-4 h-4 mr-2\" /> SAVE CHANGES</>\r\n                        )}\r\n                    </Button>\r\n                </Flex>\r\n            );\r\n        }\r\n        return (\r\n            <Flex align=\"center\" gap={3}>\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    asChild\r\n                    className=\"text-app-fg-muted hover:bg-app-surface-hover text-xs\"\r\n                >\r\n                    <a\r\n                        href={`/api/po/${header.po_number}/download`}\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                    >\r\n                        <FileDown className=\"w-4 h-4 mr-2 text-app-accent\" />\r\n                        EXCEL\r\n                    </a>\r\n                </Button>\r\n                <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() =>\r\n                        hasDC && dcId\r\n                            ? router.push(`/dc/${dcId}`)\r\n                            : router.push(`/dc/create?po=${header.po_number}`)\r\n                    }\r\n                    className={cn(\r\n                        \"text-app-fg-muted hover:bg-app-surface-hover text-xs\",\r\n                        hasDC && \"text-app-accent\",\r\n                    )}\r\n                >\r\n                    <FileText className=\"w-4 h-4 mr-2\" />\r\n                    {hasDC ? \"VIEW DC\" : \"GENERATE DC\"}\r\n                </Button>\r\n                <Box className=\"w-[1px] h-6 bg-app-border/10 mx-1\" />\r\n                <Button\r\n                    variant=\"default\"\r\n                    size=\"sm\"\r\n                    onClick={() => setEditMode(true)}\r\n                    className=\"bg-app-accent text-white hover:brightness-110 shadow-lg text-xs\"\r\n                >\r\n                    <Edit2 className=\"w-4 h-4 mr-2 text-white\" /> MODIFY RECORD\r\n                </Button>\r\n            </Flex>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title={`PO #${header.po_number}`}\r\n            description={`${header.supplier_name} • ${formatDate(header.po_date)}`}\r\n            actions={renderActions()}\r\n            onBack={() => router.back()}\r\n            layoutId={`po-title-${header.po_number}`}\r\n            icon={<FileText size={20} className=\"text-app-accent\" />}\r\n            iconLayoutId={`po-icon-${header.po_number}`}\r\n        >\r\n            <PODetailCard\r\n                srvs={srvs}\r\n                editMode={editMode}\r\n                expandedItems={expandedItems}\r\n                activeTab={activeTab}\r\n                setActiveTab={setActiveTab}\r\n                toggleItem={toggleItem}\r\n                onSRVClick={(srvNo: string) => router.push(`/srv/${srvNo}`)}\r\n            />\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H3' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":5},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":113,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2982,2985],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2982,2985],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":363,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":363,"endColumn":96},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16619,16622],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16619,16622],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":402,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":402,"endColumn":95},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":412,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":412,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":421,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":421,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":430,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":430,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":442,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":442,"endColumn":95},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":454,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":454,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":463,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":463,"endColumn":107},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":490,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":490,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":513,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":513,"endColumn":109},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":523,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":523,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[25128,25131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[25128,25131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":12,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useCallback, useEffect, Suspense } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Save, Plus, Trash2, Package, Loader2, FileText, Calendar } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  H3,\r\n  Label,\r\n  Body,\r\n  Accounting,\r\n  Button,\r\n  Input,\r\n  Card,\r\n  DocumentJourney,\r\n  DocumentTemplate,\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n  SmallText,\r\n} from \"@/components/design-system\";\r\nimport { api } from \"@/lib/api\";\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\nfunction CreatePOPageContent() {\r\n  const router = useRouter();\r\n  const {\r\n    data,\r\n    setHeader,\r\n    updateHeader,\r\n    addItem,\r\n    removeItem,\r\n    updateItem,\r\n    reset\r\n  } = usePOStore();\r\n\r\n  const [activeTab, setActiveTab] = useState(\"basic\");\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  // Initialize store with default structure on mount\r\n  useEffect(() => {\r\n    reset();\r\n    const defaultHeader = {\r\n      po_number: \"\",\r\n      po_date: new Date().toISOString().split(\"T\")[0],\r\n      supplier_name: \"\",\r\n      supplier_code: \"\",\r\n      supplier_phone: \"\",\r\n      supplier_fax: \"\",\r\n      supplier_email: \"\",\r\n      department_no: \"\",\r\n      enquiry_no: \"\",\r\n      enquiry_date: \"\",\r\n      quotation_ref: \"\",\r\n      quotation_date: \"\",\r\n      rc_no: \"\",\r\n      order_type: \"\",\r\n      po_status: \"New\",\r\n      amend_no: 0,\r\n      po_value: 0,\r\n      fob_value: 0,\r\n      net_po_value: 0,\r\n      tin_no: \"\",\r\n      ecc_no: \"\",\r\n      mpct_no: \"\",\r\n      inspection_by: \"\",\r\n      inspection_at: \"\",\r\n      consignee_name: \"\",\r\n      consignee_address: \"\",\r\n      issuer_name: \"\",\r\n      issuer_designation: \"\",\r\n      issuer_phone: \"\",\r\n      remarks: \"\",\r\n    };\r\n    setHeader(defaultHeader);\r\n\r\n    const fetchDefaults = async () => {\r\n      try {\r\n        const settings = await api.getSettings();\r\n        updateHeader(\"consignee_name\", settings.supplier_name || \"\");\r\n        updateHeader(\"consignee_address\", settings.supplier_address || \"\");\r\n        updateHeader(\"inspection_at\", settings.supplier_address || \"BHEL Works\");\r\n      } catch (e) {\r\n        console.error(\"Failed to load defaults\", e);\r\n      }\r\n    };\r\n    fetchDefaults();\r\n  }, [setHeader, updateHeader, reset]);\r\n\r\n  const handleSave = useCallback(async () => {\r\n    if (!data?.header?.po_number) {\r\n      alert(\"PO Number is required\");\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const payload = {\r\n        header: {\r\n          ...data.header,\r\n          po_number: parseInt(data.header.po_number),\r\n        },\r\n        items: (data.items || []).map((item) => ({\r\n          ...item,\r\n          ordered_quantity: item.ordered_quantity,\r\n          deliveries: [], // Simple manual PO creation defaults to one delivery in backend\r\n        })),\r\n      };\r\n\r\n      await api.createPO(payload);\r\n      router.push(`/po/${data.header.po_number}`);\r\n    } catch (err: any) {\r\n      alert(err.message || \"Failed to save Purchase Order\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }, [data, router]);\r\n\r\n  if (!data || !data.header) return (\r\n    <div className=\"flex items-center justify-center min-h-[400px]\">\r\n      <Loader2 className=\"animate-spin text-app-accent\" size={32} />\r\n    </div>\r\n  );\r\n\r\n  const { header, items = [] } = data;\r\n\r\n  const topActions = (\r\n    <div className=\"flex items-center gap-2\">\r\n      <Button variant=\"outline\" size=\"sm\" onClick={() => router.back()} disabled={saving}>\r\n        Cancel\r\n      </Button>\r\n      <Button color=\"primary\" size=\"sm\" onClick={handleSave} disabled={saving}>\r\n        {saving ? (\r\n          <Loader2 size={16} className=\"animate-spin mr-2\" />\r\n        ) : (\r\n          <Save size={16} className=\"mr-2\" />\r\n        )}\r\n        {saving ? \"Saving...\" : \"Save PO\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"Create Purchase Order\"\r\n      description=\"Enter procurement contract details manually\"\r\n      actions={topActions}\r\n      onBack={() => router.back()}\r\n      icon={<FileText size={20} className=\"text-app-accent\" />}\r\n      iconLayoutId=\"create-po-icon\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        <DocumentJourney currentStage=\"PO\" className=\"mb-2\" />\r\n\r\n        {/* Info Tabs */}\r\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n          <TabsList className=\"mb-4 bg-app-surface/30 p-1 border border-app-border/10 rounded-xl inline-flex overflow-x-auto max-w-full\">\r\n            <TabsTrigger value=\"basic\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:shadow-premium transition-all whitespace-nowrap\">Basic Info</TabsTrigger>\r\n            <TabsTrigger value=\"supplier\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:shadow-premium transition-all whitespace-nowrap\">Supplier</TabsTrigger>\r\n            <TabsTrigger value=\"references\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:shadow-premium transition-all whitespace-nowrap\">References</TabsTrigger>\r\n            <TabsTrigger value=\"financial\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:shadow-premium transition-all whitespace-nowrap\">Financial</TabsTrigger>\r\n            <TabsTrigger value=\"issuer\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:shadow-premium transition-all whitespace-nowrap\">Issuer</TabsTrigger>\r\n            <TabsTrigger value=\"consignee\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:shadow-premium transition-all whitespace-nowrap\">Consignee</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              key={activeTab}\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              transition={{ duration: 0.2 }}\r\n            >\r\n              <Card className=\"p-6 mt-0 border-none shadow-sm bg-app-surface/50 backdrop-blur-md\">\r\n                <TabsContent value=\"basic\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>PO NUMBER</Label>\r\n                      <Input\r\n                        value={header.po_number}\r\n                        onChange={(e) => updateHeader(\"po_number\", e.target.value)}\r\n                        placeholder=\"e.g. 4500012345\"\r\n                        className=\"font-bold text-app-fg tabular-nums\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>PO DATE</Label>\r\n                      <Input\r\n                        type=\"date\"\r\n                        value={header.po_date}\r\n                        onChange={(e) => updateHeader(\"po_date\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>DEPARTMENT NO</Label>\r\n                      <Input\r\n                        value={header.department_no}\r\n                        onChange={(e) => updateHeader(\"department_no\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"supplier\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>SUPPLIER NAME</Label>\r\n                      <Input\r\n                        value={header.supplier_name}\r\n                        onChange={(e) => updateHeader(\"supplier_name\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>SUPPLIER CODE</Label>\r\n                      <Input\r\n                        value={header.supplier_code}\r\n                        onChange={(e) => updateHeader(\"supplier_code\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>PHONE</Label>\r\n                      <Input\r\n                        value={header.supplier_phone}\r\n                        onChange={(e) => updateHeader(\"supplier_phone\", e.target.value)}\r\n                        className=\"font-bold text-app-fg tabular-nums\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>EMAIL</Label>\r\n                      <Input\r\n                        type=\"email\"\r\n                        value={header.supplier_email}\r\n                        onChange={(e) => updateHeader(\"supplier_email\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"references\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>ENQUIRY NO</Label>\r\n                      <Input\r\n                        value={header.enquiry_no}\r\n                        onChange={(e) => updateHeader(\"enquiry_no\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>RC NUMBER</Label>\r\n                      <Input\r\n                        value={header.rc_no}\r\n                        onChange={(e) => updateHeader(\"rc_no\", e.target.value)}\r\n                        className=\"font-bold text-app-fg tabular-nums\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>ORDER TYPE</Label>\r\n                      <Input\r\n                        value={header.order_type}\r\n                        onChange={(e) => updateHeader(\"order_type\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"financial\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>TIN NUMBER</Label>\r\n                      <Input\r\n                        value={header.tin_no}\r\n                        onChange={(e) => updateHeader(\"tin_no\", e.target.value)}\r\n                        className=\"font-bold text-app-fg tabular-nums uppercase\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>ECC NUMBER</Label>\r\n                      <Input\r\n                        value={header.ecc_no}\r\n                        onChange={(e) => updateHeader(\"ecc_no\", e.target.value)}\r\n                        className=\"font-bold text-app-fg tabular-nums uppercase\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>MPCT NUMBER</Label>\r\n                      <Input\r\n                        value={header.mpct_no}\r\n                        onChange={(e) => updateHeader(\"mpct_no\", e.target.value)}\r\n                        className=\"font-bold text-app-fg tabular-nums uppercase\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"issuer\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>ISSUER NAME</Label>\r\n                      <Input\r\n                        value={header.issuer_name}\r\n                        onChange={(e) => updateHeader(\"issuer_name\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>DESIGNATION</Label>\r\n                      <Input\r\n                        value={header.issuer_designation}\r\n                        onChange={(e) => updateHeader(\"issuer_designation\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-span-full space-y-2\">\r\n                      <Label>ADDITIONAL REMARKS</Label>\r\n                      <textarea\r\n                        value={header.remarks}\r\n                        onChange={(e) => updateHeader(\"remarks\", e.target.value)}\r\n                        className=\"w-full px-4 py-3 text-app-fg bg-app-surface border border-app-border/20 rounded-2xl focus:outline-none focus:ring-2 focus:ring-app-accent/10 focus:border-app-accent/30 resize-none transition-all font-medium text-sm leading-relaxed\"\r\n                        rows={4}\r\n                        placeholder=\"Additional project information...\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"consignee\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>CONSIGNEE NAME</Label>\r\n                      <Input\r\n                        value={header.consignee_name}\r\n                        onChange={(e) => updateHeader(\"consignee_name\", e.target.value)}\r\n                        className=\"font-bold text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>CONSIGNEE ADDRESS</Label>\r\n                      <textarea\r\n                        value={header.consignee_address}\r\n                        onChange={(e) => updateHeader(\"consignee_address\", e.target.value)}\r\n                        className=\"w-full px-4 py-3 text-app-fg bg-app-surface border border-app-border/20 rounded-2xl focus:outline-none focus:ring-2 focus:ring-app-accent/10 focus:border-app-accent/30 resize-none transition-all font-medium text-sm leading-relaxed\"\r\n                        rows={4}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n              </Card>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n        </Tabs>\r\n\r\n        {/* Items Section */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <Label className=\"m-0 text-app-fg font-black uppercase tracking-widest text-[11px]\">\r\n              Material Items ({items.length})\r\n            </Label>\r\n            <Button color=\"secondary\" size=\"sm\" onClick={addItem}>\r\n              <Plus size={16} className=\"mr-2\" />\r\n              Add Item\r\n            </Button>\r\n          </div>\r\n\r\n          <Suspense fallback={<div className=\"h-64 w-full bg-app-surface/50 rounded-xl animate-pulse border border-app-border/10\" />}>\r\n            <div className=\"table-container shadow-premium-hover overflow-visible\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-b border-app-border/10 bg-app-overlay/5\">\r\n                    <th className=\"py-3 px-6 text-left w-16 px-6\"><Label>#</Label></th>\r\n                    <th className=\"py-3 px-6 text-left\"><Label>Material Details</Label></th>\r\n                    <th className=\"py-3 px-6 text-right w-32\"><Label>Ordered Qty</Label></th>\r\n                    <th className=\"py-3 px-6 text-right w-40\"><Label>Value / Rate</Label></th>\r\n                    <th className=\"py-3 px-6 w-16\"></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <AnimatePresence mode=\"popLayout\">\r\n                    {items.length > 0 ? (\r\n                      items.map((item: any, idx: number) => (\r\n                        <motion.tr\r\n                          key={`item-${idx}`}\r\n                          initial={{ opacity: 0, scale: 0.98 }}\r\n                          animate={{ opacity: 1, scale: 1 }}\r\n                          exit={{ opacity: 0, x: -20 }}\r\n                          className=\"border-b border-app-border/5 hover:bg-app-surface-hover/30 transition-colors bg-app-surface\"\r\n                        >\r\n                          <td className=\"py-6 px-6 align-top\">\r\n                            <Accounting className=\"font-black text-app-accent text-center block\">\r\n                              {item.po_item_no}\r\n                            </Accounting>\r\n                          </td>\r\n                          <td className=\"py-6 px-6 space-y-4\">\r\n                            <div className=\"space-y-1.5\">\r\n                              <Label className=\"text-[10px] tracking-widest text-app-fg-muted\">DESCRIPTION</Label>\r\n                              <Input\r\n                                value={item.material_description}\r\n                                onChange={(e) => updateItem(idx, \"material_description\", e.target.value)}\r\n                                placeholder=\"Enter material specification...\"\r\n                                className=\"font-bold text-app-fg\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-3 gap-4\">\r\n                              <div className=\"space-y-1.5\">\r\n                                <Label className=\"text-[9px] tracking-widest text-app-fg-muted\">CODE</Label>\r\n                                <Input\r\n                                  value={item.material_code}\r\n                                  onChange={(e) => updateItem(idx, \"material_code\", e.target.value)}\r\n                                  placeholder=\"Code\"\r\n                                  className=\"font-bold text-app-fg h-10 text-xs tabular-nums\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"space-y-1.5\">\r\n                                <Label className=\"text-[9px] tracking-widest text-app-fg-muted\">DRAWING</Label>\r\n                                <Input\r\n                                  value={item.drg_no}\r\n                                  onChange={(e) => updateItem(idx, \"drg_no\", e.target.value)}\r\n                                  placeholder=\"DRG\"\r\n                                  className=\"font-bold text-app-fg h-10 text-xs tabular-nums\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"space-y-1.5\">\r\n                                <Label className=\"text-[9px] tracking-widest text-app-fg-muted\">UNIT</Label>\r\n                                <Input\r\n                                  value={item.unit}\r\n                                  onChange={(e) => updateItem(idx, \"unit\", e.target.value)}\r\n                                  placeholder=\"Unit\"\r\n                                  className=\"font-bold text-app-fg h-10 text-xs uppercase\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-6 px-6 align-top text-right\">\r\n                            <div className=\"space-y-1.5\">\r\n                              <Label className=\"text-[10px] tracking-widest text-app-fg-muted\">QTY</Label>\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={item.ordered_quantity}\r\n                                onChange={(e) => updateItem(idx, \"ordered_quantity\", parseFloat(e.target.value))}\r\n                                className=\"text-right font-black tabular-nums border-app-accent/20 focus:border-app-accent\"\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-6 px-6 align-top text-right\">\r\n                            <div className=\"space-y-4\">\r\n                              <div className=\"space-y-1.5\">\r\n                                <Label className=\"text-[10px] tracking-widest text-app-fg-muted\">UNIT RATE</Label>\r\n                                <Input\r\n                                  type=\"number\"\r\n                                  value={item.po_rate}\r\n                                  onChange={(e) => updateItem(idx, \"po_rate\", parseFloat(e.target.value))}\r\n                                  className=\"text-right font-black tabular-nums\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"pt-2 border-t border-app-border/10\">\r\n                                <Label className=\"text-[9px] tracking-widest text-app-fg-muted block mb-1\">ITEM VALUE</Label>\r\n                                <Accounting isCurrency className=\"font-black text-app-accent text-right block text-base\">\r\n                                  {item.item_value}\r\n                                </Accounting>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-6 px-6 align-top text-center\">\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => removeItem(idx)}\r\n                              className=\"text-app-fg-muted hover:text-app-status-error hover:bg-app-status-error/10 transition-all mt-6\"\r\n                            >\r\n                              <Trash2 size={16} />\r\n                            </Button>\r\n                          </td>\r\n                        </motion.tr>\r\n                      ))\r\n                    ) : (\r\n                      <tr>\r\n                        <td colSpan={5} className=\"py-32 text-center bg-app-surface\">\r\n                          <div className=\"flex flex-col items-center justify-center gap-4 opacity-50\">\r\n                            <div className=\"w-16 h-16 rounded-2xl bg-app-overlay/5 flex items-center justify-center\">\r\n                              <Package className=\"w-8 h-8 text-app-fg-muted mb-0 stroke-[1.5]\" />\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                              <Body className=\"text-app-fg-muted font-bold uppercase tracking-widest text-[11px]\">No items defined</Body>\r\n                              <SmallText className=\"font-medium\">Define material items for this purchase order</SmallText>\r\n                            </div>\r\n                            <Button variant=\"secondary\" size=\"sm\" onClick={addItem} className=\"mt-2\">\r\n                              <Plus size={14} className=\"mr-2\" /> Add Your First Item\r\n                            </Button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </AnimatePresence>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </Suspense>\r\n\r\n          {items.length > 0 && (\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-4\">\r\n              <div className=\"lg:col-start-2\">\r\n                <Card className=\"p-10 bg-app-surface/50 border-none shadow-premium-hover backdrop-blur-md relative overflow-hidden\">\r\n                  <div className=\"absolute top-0 right-0 w-32 h-32 bg-app-accent/5 rounded-bl-full -mr-16 -mt-16 pointer-events-none\" />\r\n                  <div className=\"flex justify-between items-end\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"uppercase tracking-[0.2em] text-app-fg-muted font-black text-[11px]\">Estimated Contract Value</Label>\r\n                      <Body className=\"text-app-fg-muted font-medium italic lowercase first-letter:uppercase max-w-[250px] leading-tight block\">\r\n                        Net value including all materials and quantities\r\n                      </Body>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <Accounting\r\n                        isCurrency\r\n                        className=\"text-4xl text-app-fg font-black tracking-tighter\"\r\n                      >\r\n                        {items.reduce((acc: number, cur: any) => acc + (cur.item_value || 0), 0)}\r\n                      </Accounting>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\nexport default function CreatePOPage() {\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\"flex items-center justify-center min-h-screen bg-app-bg\">\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <Loader2 className=\"animate-spin text-app-accent\" size={48} />\r\n            <Body className=\"text-app-fg-muted font-bold animate-pulse uppercase tracking-[0.2em] text-xs\">Preparing Workspace</Body>\r\n          </div>\r\n        </div>\r\n      }\r\n    >\r\n      <CreatePOPageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'createPortal' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1321,1324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1321,1324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2548,2551],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2548,2551],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3482,3485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3482,3485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":171,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4607,4610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4607,4610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":223,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":223,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5991,5994],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5991,5994],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":288,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":288,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7750,7753],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7750,7753],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'headerPortal' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":294,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":294,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":349,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":349,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9748,9751],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9748,9751],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport {\r\n  Download,\r\n  Truck,\r\n  Receipt,\r\n  TrendingUp,\r\n  Calendar,\r\n  AlertTriangle,\r\n  Activity,\r\n} from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\nconst ReportsCharts = dynamic(() => import(\"@/components/reports/organisms/ReportsCharts\"), {\r\n  loading: () => (\r\n    <div className=\"h-[400px] w-full bg-app-surface-hover/20 animate-pulse rounded-2xl\" />\r\n  ),\r\n  ssr: false,\r\n});\r\nimport { api } from \"@/lib/api\";\r\nimport { formatDate, formatIndianCurrency, cn } from \"@/lib/utils\";\r\n\r\n// --- FIX 1: Direct Imports (No Barrel Files) ---\r\nimport {\r\n  Accounting,\r\n  Body,\r\n  type Column,\r\n  Flex,\r\n  Box,\r\n  DataTable,\r\n  Badge,\r\n  DocumentTemplate,\r\n} from \"@/components/design-system\";\r\nimport { ReportNavGrid } from \"@/components/reports/organisms/ReportNavGrid\";\r\nimport { ReportsDataCard } from \"@/components/reports/organisms/ReportsDataCard\";\r\n\r\ntype ReportType = \"sales\" | \"dc_register\" | \"invoice_register\" | \"pending\" | \"reconciliation\";\r\n\r\n// --- FIX 2: Static Column Definitions (Moved Outside Component) ---\r\n// This prevents the Table from re-rendering on every keystroke.\r\n\r\nconst salesColumns: Column<any>[] = [\r\n  {\r\n    key: \"month\",\r\n    label: \"MONTH\",\r\n    render: (_v, row) => (\r\n      <Body className=\"table-cell-text font-medium text-app-accent\">{row.month}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"ordered_value\",\r\n    label: \"ORDERED VALUE\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\r\n        {formatIndianCurrency(row.ordered_value)}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"delivered_value\",\r\n    label: \"DELIVERED VALUE\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-success font-mono text-right block\">\r\n        {formatIndianCurrency(row.delivered_value)}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"variance\",\r\n    label: \"VARIANCE\",\r\n    align: \"right\",\r\n    render: (_v, row) => {\r\n      const diff = (row.ordered_value || 0) - (row.delivered_value || 0);\r\n      return (\r\n        <Accounting className={cn(\"table-cell-number font-mono text-right block\", diff > 0 ? \"text-app-status-warning\" : \"text-app-fg-muted\")}>\r\n          {formatIndianCurrency(diff)}\r\n        </Accounting>\r\n      )\r\n    },\r\n  },\r\n];\r\n\r\nconst dcColumns: Column<any>[] = [\r\n  {\r\n    key: \"dc_number\",\r\n    label: \"DC NUMBER\",\r\n    render: (_v, row) => (\r\n      <Body className=\"text-app-accent\">DC-{row.dc_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"dc_date\",\r\n    label: \"DATE\",\r\n    render: (_v, row) => (\r\n      <Body className=\"text-app-fg-muted\">\r\n        {formatDate(row.dc_date)}\r\n      </Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"po_number\",\r\n    label: \"PO REF\",\r\n    render: (_v, row) => (\r\n      <Body className=\"text-app-fg-muted\">{row.po_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"consignee_name\",\r\n    label: \"CONSIGNEE\",\r\n    render: (_v, row) => (\r\n      <Body className=\"max-w-[200px] truncate\">{row.consignee_name}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_qty\",\r\n    label: \"QTY\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"font-medium font-mono text-right block\">{row.total_qty}</Accounting>\r\n    ),\r\n  },\r\n];\r\n\r\nconst invoiceColumns: Column<any>[] = [\r\n  {\r\n    key: \"invoice_number\",\r\n    label: \"INVOICE NO\",\r\n    render: (_v, row) => (\r\n      <Body className=\"table-cell-text text-app-accent\">{row.invoice_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"invoice_date\",\r\n    label: \"DATE\",\r\n    render: (_v, row) => <Body className=\"font-medium\">{formatDate(row.invoice_date)}</Body>,\r\n  },\r\n  {\r\n    key: \"customer_gstin\",\r\n    label: \"CUSTOMER GST\",\r\n    render: (_v, row) => (\r\n      <Body className=\"font-mono block\">{row.customer_gstin}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"taxable_value\",\r\n    label: \"TAXABLE\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\r\n        {formatIndianCurrency(row.taxable_value)}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_invoice_value\",\r\n    label: \"TOTAL\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-fg font-mono text-right block\">\r\n        {formatIndianCurrency(row.total_invoice_value)}\r\n      </Accounting>\r\n    ),\r\n  },\r\n];\r\n\r\nconst pendingColumns: Column<any>[] = [\r\n  {\r\n    key: \"po_number\",\r\n    label: \"PO NUMBER\",\r\n    width: \"15%\",\r\n    render: (_v, row) => (\r\n      <Body className=\"table-cell-text text-app-accent\">{row.po_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"material_description\",\r\n    label: \"MATERIAL\",\r\n    width: \"30%\",\r\n    render: (_v, row) => (\r\n      <Box className=\"w-[180px] lg:w-[280px] truncate\" title={row.material_description}>\r\n        <Body className=\"table-cell-text truncate block\">{row.material_description}</Body>\r\n      </Box>\r\n    ),\r\n  },\r\n  {\r\n    key: \"ord_qty\",\r\n    label: \"ORD\",\r\n    width: \"10%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">{row.ord_qty}</Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"delivered_qty\",\r\n    label: \"DELIVERED\",\r\n    width: \"20%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-success font-mono text-right block\">\r\n        {row.delivered_qty}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"pending_qty\",\r\n    label: \"PENDING\",\r\n    width: \"20%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-warning font-mono text-right block\">\r\n        {row.pending_qty}\r\n      </Accounting>\r\n    ),\r\n  },\r\n];\r\n\r\nconst reconciliationColumns: Column<any>[] = [\r\n  {\r\n    key: \"po_number\",\r\n    label: \"PO NUMBER\",\r\n    width: \"15%\",\r\n    render: (_v, row) => (\r\n      <Body className=\"table-cell-text text-app-accent\">{row.po_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"item_description\",\r\n    label: \"ITEM\",\r\n    width: \"35%\",\r\n    render: (_v, row) => (\r\n      <Box className=\"w-[200px] lg:w-[320px] truncate\" title={row.item_description}>\r\n        <Body className=\"table-cell-text truncate block\">{row.item_description}</Body>\r\n      </Box>\r\n    ),\r\n  },\r\n  {\r\n    key: \"ordered_qty\",\r\n    label: \"ORD\",\r\n    width: \"10%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">{row.ordered_qty}</Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_dispatched\",\r\n    label: \"DISP\",\r\n    width: \"10%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\r\n        {row.total_dispatched}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_accepted\",\r\n    label: \"ACC\",\r\n    width: \"15%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-success font-mono text-right block\">\r\n        {row.total_accepted}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_rejected\",\r\n    label: \"REJ\",\r\n    width: \"15%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-error font-mono text-right block\">\r\n        {row.total_rejected}\r\n      </Accounting>\r\n    ),\r\n  },\r\n];\r\n\r\nexport default function ReportsPage() {\r\n  const [activeTab, setActiveTab] = useState<ReportType>(\"sales\");\r\n  const [data, setData] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize] = useState(10);\r\n  const [startDate, setStartDate] = useState<string>(\"2020-01-01\");\r\n  const [endDate, setEndDate] = useState<string>(new Date().toISOString().split(\"T\")[0]);\r\n  const [headerPortal, setHeaderPortal] = useState<HTMLElement | null>(null);\r\n\r\n  // --- CHART DATA GENERATION ---\r\n  const chartData = useMemo(() => {\r\n    if (!data || data.length === 0) return [];\r\n\r\n    if (activeTab === \"sales\") {\r\n      return [...data].reverse().map((item) => ({\r\n        name: item.month,\r\n        ordered_value: item.ordered_value,\r\n        delivered_value: item.delivered_value,\r\n      }));\r\n    }\r\n\r\n    if (activeTab === \"reconciliation\") {\r\n      return [\r\n        {\r\n          name: \"Accepted\",\r\n          value: data.reduce((s, r) => s + (r.total_accepted || 0), 0),\r\n          color: \"hsl(142, 76%, 36%)\",  // Green\r\n        },\r\n        {\r\n          name: \"Rejected\",\r\n          value: data.reduce((s, r) => s + (r.total_rejected || 0), 0),\r\n          color: \"hsl(0, 84%, 60%)\",  // Red\r\n        },\r\n        {\r\n          name: \"Pending\",\r\n          value: data.reduce(\r\n            (s, r) =>\r\n              s +\r\n              Math.max(0, (r.ordered_qty || 0) - (r.total_accepted || 0) - (r.total_rejected || 0)),\r\n            0\r\n          ),\r\n          color: \"hsl(38, 92%, 50%)\",  // Amber\r\n        },\r\n      ].filter((d) => d.value > 0);\r\n    }\r\n\r\n    return [];\r\n  }, [data, activeTab]);\r\n\r\n  useEffect(() => {\r\n    setHeaderPortal(document.getElementById(\"header-action-portal\"));\r\n  }, []);\r\n\r\n  const loadReport = useCallback(async () => {\r\n    setLoading(true);\r\n    setData([]);\r\n    try {\r\n      const dateParams = `start_date=${startDate}&end_date=${endDate}`;\r\n      // Use centralized API for type-safe fetch\r\n      const result = await api.getReports(activeTab, dateParams);\r\n\r\n      const finalData = Array.isArray(result)\r\n        ? result.map((item: any, index: number) => ({\r\n          ...item,\r\n          unique_id: `${activeTab}-${index}-${item.id || item.number || item.po_number || item.dc_number || item.invoice_number || \"\"}`,\r\n        }))\r\n        : [];\r\n\r\n      setData(finalData);\r\n    } catch {\r\n      // Error handled by boundary or silent fail\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [activeTab, startDate, endDate]);\r\n\r\n  useEffect(() => {\r\n    setPage(1);\r\n    loadReport();\r\n  }, [loadReport]);\r\n\r\n  const handleExport = useCallback(() => {\r\n    const dateParams = `start_date=${startDate}&end_date=${endDate}`;\r\n    api.exportReport(activeTab, dateParams);\r\n  }, [activeTab, startDate, endDate]);\r\n\r\n\r\n  const activeColumns = useMemo(() => {\r\n    switch (activeTab) {\r\n      case \"sales\":\r\n        return salesColumns;\r\n      case \"dc_register\":\r\n        return dcColumns;\r\n      case \"invoice_register\":\r\n        return invoiceColumns;\r\n      case \"pending\":\r\n        return pendingColumns;\r\n      case \"reconciliation\":\r\n        return reconciliationColumns;\r\n      default:\r\n        return [];\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const handlePageChange = useCallback((newPage: number) => {\r\n    setPage(newPage);\r\n  }, []);\r\n\r\n  // --- OPTIMIZATION: Toolbar Portal Content ---\r\n  const toolbarContent = (\r\n    <Flex align=\"center\" gap={3}>\r\n      <Flex\r\n        align=\"center\"\r\n        className=\"bg-app-surface/40 backdrop-blur-xl border-none rounded-2xl overflow-hidden shadow-sm p-1\"\r\n      >\r\n        <Flex\r\n          align=\"center\"\r\n          gap={3}\r\n          className=\"px-4 py-2 hover:bg-app-surface/40 transition-colors rounded-xl group\"\r\n        >\r\n          <Calendar\r\n            size={16}\r\n            className=\"text-app-accent group-hover:scale-110 transition-transform\"\r\n          />\r\n          <input\r\n            type=\"date\"\r\n            value={startDate}\r\n            onChange={(e) => setStartDate(e.target.value)}\r\n            className=\"outline-none bg-transparent text-app-fg-muted text-xs font-bold uppercase\"\r\n          />\r\n        </Flex>\r\n        <Box className=\"w-[1px] h-6 bg-app-fg-muted/10 mx-1\" />\r\n        <Flex\r\n          align=\"center\"\r\n          gap={3}\r\n          className=\"px-4 py-2 hover:bg-app-surface/40 transition-colors rounded-xl group\"\r\n        >\r\n          <input\r\n            type=\"date\"\r\n            value={endDate}\r\n            onChange={(e) => setEndDate(e.target.value)}\r\n            className=\"outline-none bg-transparent text-app-fg-muted text-xs font-bold uppercase\"\r\n          />\r\n        </Flex>\r\n      </Flex>\r\n      <button\r\n        onClick={handleExport}\r\n        className=\"group flex items-center gap-3 px-6 py-3 bg-app-accent text-white rounded-2xl hover:brightness-110 shadow-lg transition-all active:scale-95 uppercase tracking-[0.1em]\"\r\n      >\r\n        <Download size={16} className=\"group-hover:translate-y-0.5 transition-transform\" />\r\n        Export\r\n      </button>\r\n    </Flex>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"Analytics\"\r\n      description=\"Multi-dimensional trend analysis and reconciliation\"\r\n      actions={toolbarContent}\r\n    >\r\n      <div className=\"space-y-6\">\r\n        <ReportNavGrid\r\n          items={[\r\n            {\r\n              id: \"sales\",\r\n              title: \"Growth\",\r\n              description: \"Revenue and tax velocity trends\",\r\n              icon: <TrendingUp />,\r\n            },\r\n            {\r\n              id: \"dc_register\",\r\n              title: \"DC Register\",\r\n              description: \"Dispatch and logistics tracking\",\r\n              icon: <Truck />,\r\n            },\r\n            {\r\n              id: \"invoice_register\",\r\n              title: \"Invoices\",\r\n              description: \"Billing and payment ledger\",\r\n              icon: <Receipt />,\r\n            },\r\n            {\r\n              id: \"pending\",\r\n              title: \"Shortages\",\r\n              description: \"Active pending supply gaps\",\r\n              icon: <AlertTriangle />,\r\n            },\r\n            {\r\n              id: \"reconciliation\",\r\n              title: \"Ledger Audit\",\r\n              description: \"Physical vs System inventory audit\",\r\n              icon: <Activity />,\r\n            },\r\n          ]}\r\n          activeId={activeTab}\r\n          onSelect={(id) => {\r\n            setLoading(true);\r\n            setData([]);\r\n            setActiveTab(id as ReportType);\r\n          }}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        {/* --- DYNAMIC CHART SECTION --- */}\r\n        <AnimatePresence mode=\"wait\">\r\n          {data.length > 0 && (activeTab === \"sales\" || activeTab === \"reconciliation\") && (\r\n            <ReportsDataCard\r\n              title=\"Analytics Overview\"\r\n              subtitle=\"Multi-dimensional trend analysis\"\r\n              className=\"bg-app-accent/5 border-app-accent/10\"\r\n            >\r\n              <ReportsCharts activeTab={activeTab} chartData={chartData} />\r\n            </ReportsDataCard>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={activeTab}\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            transition={{ duration: 0.2 }}\r\n            className=\"w-full\"\r\n          >\r\n            <ReportsDataCard\r\n              title={\r\n                activeTab === \"dc_register\"\r\n                  ? \"Distribution Flow\"\r\n                  : activeTab === \"invoice_register\"\r\n                    ? \"Revenue Ledger\"\r\n                    : activeTab === \"sales\"\r\n                      ? \"Growth Momentum\"\r\n                      : activeTab === \"pending\"\r\n                        ? \"Active Shortages\"\r\n                        : \"Quality Audit\"\r\n              }\r\n              subtitle=\"Real-time multi-dimensional intelligence\"\r\n              actions={\r\n                <Badge variant=\"outline\" className=\"font-mono\">\r\n                  {data.length} RECORDS\r\n                </Badge>\r\n              }\r\n            >\r\n              <DataTable\r\n                columns={activeColumns}\r\n                data={data}\r\n                keyField=\"unique_id\"\r\n                page={page}\r\n                pageSize={pageSize}\r\n                totalItems={data.length}\r\n                onPageChange={handlePageChange}\r\n                loading={loading}\r\n                no_borders={true}\r\n              />\r\n            </ReportsDataCard>\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1118,1121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1118,1121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":177,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4626,4629],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4626,4629],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  Building2,\r\n  Users,\r\n  Settings as SettingsIcon,\r\n  Save,\r\n  Loader2,\r\n  Check,\r\n  Plus,\r\n  Trash2,\r\n  ShieldAlert,\r\n  MapPin,\r\n  Phone,\r\n  Mail,\r\n  Edit2,\r\n  X,\r\n} from \"lucide-react\";\r\nimport { api, type Buyer } from \"@/lib/api\";\r\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\r\nimport {\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n} from \"@/components/design-system/molecules/Tabs\";\r\nimport {\r\n  H2,\r\n  H3,\r\n  Label,\r\n  Body,\r\n  SmallText,\r\n  Accounting,\r\n  Button,\r\n  Input,\r\n  Card,\r\n  Badge,\r\n  Stack,\r\n  Grid,\r\n  Flex,\r\n  Box,\r\n  SpotlightCard,\r\n} from \"@/components/design-system\";\r\n\r\nexport default function SettingsPage() {\r\n  const [activeTab, setActiveTab] = useState(\"supplier\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // --- States ---\r\n  const [settings, setSettings] = useState<any>({});\r\n  const [buyers, setBuyers] = useState<Buyer[]>([]);\r\n  const [isAddingBuyer, setIsAddingBuyer] = useState(false);\r\n  const [editingBuyerId, setEditingBuyerId] = useState<number | null>(null);\r\n\r\n  // Buyer Form State\r\n  const [buyerForm, setBuyerForm] = useState<Partial<Buyer>>({\r\n    name: \"\",\r\n    gstin: \"\",\r\n    billing_address: \"\",\r\n    place_of_supply: \"\",\r\n    state: \"\",\r\n    state_code: \"\",\r\n  });\r\n\r\n  // System Reset States\r\n  const [showResetConfirm, setShowResetConfirm] = useState(false);\r\n  const [isResetting, setIsResetting] = useState(false);\r\n\r\n  // --- Init ---\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [settingsData, buyersData] = await Promise.all([api.getSettings(), api.getBuyers()]);\r\n      setSettings(settingsData);\r\n      setBuyers(buyersData);\r\n    } catch {\r\n      setError(\"Failed to load settings data.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Handlers ---\r\n  const handleSaveSettings = useCallback(async (keys: string[]) => {\r\n    setSaving(true);\r\n    setError(null);\r\n    try {\r\n      const batch = keys.map((key) => ({\r\n        key,\r\n        value: settings[key]?.toString() || \"\",\r\n      }));\r\n      await api.updateSettingsBatch(batch);\r\n    } catch {\r\n      setError(\"Failed to save settings.\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }, [settings]);\r\n\r\n  const handleStartEditBuyer = useCallback((buyer: Buyer) => {\r\n    setEditingBuyerId(buyer.id);\r\n    setBuyerForm(buyer);\r\n    setIsAddingBuyer(false);\r\n  }, []);\r\n\r\n  const handleCancelBuyerForm = useCallback(() => {\r\n    setEditingBuyerId(null);\r\n    setIsAddingBuyer(false);\r\n    setBuyerForm({\r\n      name: \"\",\r\n      gstin: \"\",\r\n      billing_address: \"\",\r\n      place_of_supply: \"\",\r\n      state: \"\",\r\n      state_code: \"\",\r\n    });\r\n  }, []);\r\n\r\n  const handleSaveBuyer = async () => {\r\n    if (!buyerForm.name || !buyerForm.gstin) return;\r\n    setSaving(true);\r\n    try {\r\n      if (editingBuyerId) {\r\n        await api.updateBuyer(editingBuyerId, { ...buyerForm });\r\n      } else {\r\n        await api.createBuyer({ ...buyerForm, is_active: true });\r\n      }\r\n      await loadData();\r\n      handleCancelBuyerForm();\r\n    } catch {\r\n      setError(\"Failed to save buyer.\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteBuyer = async (id: number) => {\r\n    if (!confirm(\"Are you sure you want to delete this buyer?\")) return;\r\n    try {\r\n      await api.deleteBuyer(id);\r\n      await loadData();\r\n    } catch {\r\n      setError(\"Failed to delete buyer.\");\r\n    }\r\n  };\r\n\r\n  const handleSystemReset = async () => {\r\n    setIsResetting(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(`${api.baseUrl}/api/system/reset-db`, {\r\n        method: \"POST\",\r\n      });\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        const clearedCount = data.tables_cleared?.length || 0;\r\n        const preservedList = data.preserved?.join(\", \") || \"None\";\r\n        alert(\r\n          `✅ ${data.message || \"Database reset successfully.\"}\\n\\n` +\r\n          `Business Entities Purged: ${clearedCount}\\n` +\r\n          `Configuration Preserved: ${preservedList}\\n\\n` +\r\n          `Returning to dashboard.`\r\n        );\r\n        window.location.href = \"/\";\r\n      } else {\r\n        setError(data.detail || \"System reset failed. Database might be locked by another process.\");\r\n      }\r\n    } catch (err: any) {\r\n      setError(`Network error: ${err.message || \"Could not reach server\"}`);\r\n    } finally {\r\n      setIsResetting(false);\r\n      setShowResetConfirm(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center p-20 text-app-fg-muted\">\r\n        <Loader2 className=\"animate-spin mb-4\" size={32} />\r\n        <Body>Loading System Configuration...</Body>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const topActions = (\r\n    <div className=\"flex gap-3\">\r\n      <Button variant=\"outline\" size=\"sm\" onClick={loadData}>\r\n        {/* RefreshCw was removed, so use a text label or re-import if needed. Assuming text for now or verify if RefreshCw is imported. \r\n            Looking at line 12, it is NOT imported in the updated file view. \r\n            Wait, in the original file view (lines 1-60), RefreshCw WAS imported. but I removed it in previous step?\r\n            In step 7237, I removed imports from lucide-react.\r\n            So RefreshCw is missing.\r\n            I should replace usages of RefreshCw with just text or re-import it. \r\n            Let's re-add the import for RefreshCw since it's used.\r\n        */}\r\n        Sync\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"SETTINGS\"\r\n      description=\"Enterprise orchestration and entity lifecycle management\"\r\n      actions={topActions}\r\n      layoutId=\"settings-title\"\r\n      icon={<SettingsIcon size={20} className=\"text-app-accent\" />}\r\n      iconLayoutId=\"settings-icon\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n          <TabsList className=\"mb-4 bg-transparent p-0 border-none w-full justify-start rounded-none gap-6\">\r\n            <TabsTrigger value=\"supplier\">\r\n              <Building2 size={14} className=\"mr-2\" />\r\n              Supplier Identity\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"buyer\">\r\n              <Users size={14} className=\"mr-2\" />\r\n              Market Entities\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"system\">\r\n              <SettingsIcon size={14} className=\"mr-2\" />\r\n              System Governance\r\n            </TabsTrigger>\r\n          </TabsList>\r\n\r\n          {error && (\r\n            <Card className=\"p-4 bg-app-status-error/10 text-app-status-error flex items-center gap-2 mb-4 shadow-sm border-none\">\r\n              <ShieldAlert size={16} />\r\n              <SmallText className=\"font-semibold\">{error}</SmallText>\r\n            </Card>\r\n          )}\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              key={activeTab}\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              exit={{ opacity: 0 }}\r\n              transition={{ duration: 0.15 }}\r\n            >\r\n              {/* --- Tab: Supplier --- */}\r\n              <TabsContent value=\"supplier\" className=\"mt-0\">\r\n                <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={6}>\r\n                  <div className=\"lg:col-span-8\">\r\n                    <div className=\"bg-app-surface rounded-3xl border border-app-border p-8 shadow-sm relative overflow-hidden group\">\r\n                      {/* Ambient Blobs */}\r\n                      <Box className=\"absolute top-0 right-0 w-64 h-64 bg-app-accent/5 rounded-full -mr-20 -mt-20 blur-3xl group-hover:bg-app-accent/10 transition-all duration-700\" />\r\n\r\n                      <div className=\"relative z-10\">\r\n                        <Stack gap={10}>\r\n                          <section>\r\n                            <Flex align=\"center\" justify=\"between\" className=\"mb-8\">\r\n                              <H3>Business Profile</H3>\r\n                              <Button\r\n                                variant=\"default\"\r\n                                size=\"sm\"\r\n                                onClick={() =>\r\n                                  handleSaveSettings([\r\n                                    \"supplier_name\",\r\n                                    \"supplier_address\",\r\n                                    \"supplier_gstin\",\r\n                                    \"supplier_contact\",\r\n                                    \"supplier_email\",\r\n                                    \"supplier_state\",\r\n                                    \"supplier_state_code\",\r\n                                  ])\r\n                                }\r\n                                disabled={saving}\r\n                              >\r\n                                {saving ? (\r\n                                  <Loader2 className=\"animate-spin mr-2\" size={14} />\r\n                                ) : (\r\n                                  <Save className=\"mr-2\" size={14} />\r\n                                )}\r\n                                Confirm Profile\r\n                              </Button>\r\n                            </Flex>\r\n\r\n                            <Grid cols={2} gap={6}>\r\n                              <FormGroup label=\"Business Name\">\r\n                                <Input\r\n                                  value={settings.supplier_name || \"\"}\r\n                                  onChange={(e) =>\r\n                                    setSettings({\r\n                                      ...settings,\r\n                                      supplier_name: e.target.value,\r\n                                    })\r\n                                  }\r\n                                  className=\"bg-app-surface-hover/30\"\r\n                                />\r\n                              </FormGroup>\r\n                              <FormGroup label=\"GSTIN\">\r\n                                <Input\r\n                                  className=\"bg-app-surface-hover/30\"\r\n                                  value={settings.supplier_gstin || \"\"}\r\n                                  onChange={(e) =>\r\n                                    setSettings({\r\n                                      ...settings,\r\n                                      supplier_gstin: e.target.value.toUpperCase(),\r\n                                    })\r\n                                  }\r\n                                />\r\n                              </FormGroup>\r\n                              <Box className=\"col-span-2\">\r\n                                <FormGroup label=\"Registered Office Address\">\r\n                                  <Input\r\n                                    value={settings.supplier_address || \"\"}\r\n                                    onChange={(e) =>\r\n                                      setSettings({\r\n                                        ...settings,\r\n                                        supplier_address: e.target.value,\r\n                                      })\r\n                                    }\r\n                                    className=\"bg-app-surface-hover/30\"\r\n                                  />\r\n                                </FormGroup>\r\n                              </Box>\r\n                              <FormGroup label=\"Contact Phone\">\r\n                                <Input\r\n                                  value={settings.supplier_contact || \"\"}\r\n                                  onChange={(e) =>\r\n                                    setSettings({\r\n                                      ...settings,\r\n                                      supplier_contact: e.target.value,\r\n                                    })\r\n                                  }\r\n                                  className=\"bg-app-surface-hover/30\"\r\n                                />\r\n                              </FormGroup>\r\n                              <FormGroup label=\"Email ID\">\r\n                                <Input\r\n                                  value={settings.supplier_email || \"\"}\r\n                                  onChange={(e) =>\r\n                                    setSettings({\r\n                                      ...settings,\r\n                                      supplier_email: e.target.value,\r\n                                    })\r\n                                  }\r\n                                  className=\"bg-app-surface-hover/30\"\r\n                                />\r\n                              </FormGroup>\r\n                            </Grid>\r\n                          </section>\r\n                        </Stack>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"lg:col-span-4 space-y-6\">\r\n                    <div className=\"rounded-3xl p-6 bg-app-accent text-white border-none shadow-premium relative overflow-hidden group\">\r\n                      <motion.div\r\n                        className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:rotate-12 transition-transform duration-500\"\r\n                        whileHover={{ scale: 1.2 }}\r\n                      >\r\n                        <Building2 size={120} />\r\n                      </motion.div>\r\n                      <Label className=\"text-white/60 mb-6 tracking-[0.2em]\">\r\n                        IDENTITY PREVIEW\r\n                      </Label>\r\n                      <H2 className=\"mb-2 text-white line-clamp-2\">\r\n                        {settings.supplier_name || \"Enterprise Identity\"}\r\n                      </H2>\r\n                      <Accounting className=\"text-white/80 text-sm mb-8 block\">\r\n                        {settings.supplier_gstin || \"GSTIN NOT SET\"}\r\n                      </Accounting>\r\n\r\n                      <Stack gap={4} className=\"pt-6 shadow-none\">\r\n                        <Flex align=\"start\" gap={3}>\r\n                          <MapPin size={14} className=\"mt-0.5 text-white/60\" />\r\n                          <Body className=\"text-xs text-white/80 leading-relaxed font-normal\">\r\n                            {settings.supplier_address || \"Awaiting address...\"}\r\n                          </Body>\r\n                        </Flex>\r\n                        <Flex align=\"center\" gap={3}>\r\n                          <Phone size={14} className=\"text-white/60\" />\r\n                          <Body className=\"text-xs text-white/80 font-normal\">\r\n                            {settings.supplier_contact || \"Awaiting contact...\"}\r\n                          </Body>\r\n                        </Flex>\r\n                        <Flex align=\"center\" gap={3}>\r\n                          <Mail size={14} className=\"text-white/60\" />\r\n                          <Body className=\"text-xs text-white/80 font-normal\">\r\n                            {settings.supplier_email || \"Awaiting communication...\"}\r\n                          </Body>\r\n                        </Flex>\r\n                      </Stack>\r\n                    </div>\r\n\r\n                    <Card className=\"p-4 bg-app-surface-hover/30 border-none\">\r\n                      <Flex align=\"center\" gap={3}>\r\n                        <ShieldAlert size={16} className=\"text-app-accent\" />\r\n                        <SmallText className=\"font-medium text-app-fg-muted\">\r\n                          Profile changes affect all future documentation.\r\n                        </SmallText>\r\n                      </Flex>\r\n                    </Card>\r\n                  </div>\r\n                </Grid>\r\n              </TabsContent>\r\n\r\n              {/* --- Tab: Buyer --- */}\r\n              <TabsContent value=\"buyer\" className=\"space-y-6 mt-0\">\r\n                <Flex align=\"center\" justify=\"between\" className=\"mb-4\">\r\n                  <Stack gap={1}>\r\n                    <H3>Counterparty Registry</H3>\r\n                    <SmallText>Management of external entities for transaction mapping.</SmallText>\r\n                  </Stack>\r\n                  <Button\r\n                    onClick={() => {\r\n                      handleCancelBuyerForm();\r\n                      setIsAddingBuyer(true);\r\n                    }}\r\n                    disabled={isAddingBuyer || !!editingBuyerId}\r\n                  >\r\n                    <Plus size={16} className=\"mr-2\" /> Registered Entity\r\n                  </Button>\r\n                </Flex>\r\n\r\n                <AnimatePresence mode=\"wait\">\r\n                  {(isAddingBuyer || editingBuyerId) && (\r\n                    <motion.div\r\n                      initial={{ opacity: 0, y: -10 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      exit={{ opacity: 0, y: -10 }}\r\n                      className=\"mb-8\"\r\n                    >\r\n                      <Card className=\"p-8 border-none bg-[var(--color-sys-bg-surface)] shadow-lg ring-1 ring-[var(--color-sys-brand-primary)]/10\">\r\n                        <Flex\r\n                          align=\"center\"\r\n                          justify=\"between\"\r\n                          className=\"mb-8 pb-4 shadow-none\"\r\n                        >\r\n                          <Flex align=\"center\" gap={2}>\r\n                            <div className=\"p-2 rounded-lg bg-app-accent/10 text-app-accent\">\r\n                              {editingBuyerId ? <Edit2 size={16} /> : <Plus size={16} />}\r\n                            </div>\r\n                            <H3 className=\"text-sm\">\r\n                              {editingBuyerId ? \"Modify Market Entity\" : \"New Market Entity\"}\r\n                            </H3>\r\n                          </Flex>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={handleCancelBuyerForm}\r\n                            className=\"rounded-full\"\r\n                          >\r\n                            <X size={16} />\r\n                          </Button>\r\n                        </Flex>\r\n\r\n                        <Grid cols={1} className=\"md:grid-cols-2 lg:grid-cols-3\" gap={8}>\r\n                          <FormGroup label=\"Legal Entity Name\">\r\n                            <Input\r\n                              placeholder=\"e.g. Bharat Electronics Ltd\"\r\n                              value={buyerForm.name}\r\n                              onChange={(e) => setBuyerForm({ ...buyerForm, name: e.target.value })}\r\n                              className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\r\n                            />\r\n                          </FormGroup>\r\n                          <FormGroup label=\"GSTIN\">\r\n                            <Input\r\n                              placeholder=\"Valid 15-char GSTIN\"\r\n                              className=\"font-mono uppercase bg-[var(--color-sys-bg-tertiary)]/30\"\r\n                              value={buyerForm.gstin}\r\n                              onChange={(e) =>\r\n                                setBuyerForm({\r\n                                  ...buyerForm,\r\n                                  gstin: e.target.value.toUpperCase(),\r\n                                })\r\n                              }\r\n                            />\r\n                          </FormGroup>\r\n                          <FormGroup label=\"Operating Region\">\r\n                            <Input\r\n                              placeholder=\"e.g. Bengaluru\"\r\n                              value={buyerForm.place_of_supply}\r\n                              onChange={(e) =>\r\n                                setBuyerForm({\r\n                                  ...buyerForm,\r\n                                  place_of_supply: e.target.value,\r\n                                })\r\n                              }\r\n                              className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\r\n                            />\r\n                          </FormGroup>\r\n                          <Box className=\"md:col-span-2\">\r\n                            <FormGroup label=\"Consignee Address\">\r\n                              <Input\r\n                                placeholder=\"Complete registered billing address\"\r\n                                value={buyerForm.billing_address}\r\n                                onChange={(e) =>\r\n                                  setBuyerForm({\r\n                                    ...buyerForm,\r\n                                    billing_address: e.target.value,\r\n                                  })\r\n                                }\r\n                                className=\"bg-[var(--color-sys-bg-tertiary)]/30\"\r\n                              />\r\n                            </FormGroup>\r\n                          </Box>\r\n                          <FormGroup label=\"State / Jurisdiction\">\r\n                            <Flex gap={2}>\r\n                              <Input\r\n                                placeholder=\"Karnataka\"\r\n                                value={buyerForm.state}\r\n                                onChange={(e) =>\r\n                                  setBuyerForm({\r\n                                    ...buyerForm,\r\n                                    state: e.target.value,\r\n                                  })\r\n                                }\r\n                                className=\"flex-1 bg-app-surface-hover/30\"\r\n                              />\r\n                              <Input\r\n                                placeholder=\"29\"\r\n                                className=\"w-16 font-mono text-center bg-app-surface-hover/30\"\r\n                                value={buyerForm.state_code}\r\n                                onChange={(e) =>\r\n                                  setBuyerForm({\r\n                                    ...buyerForm,\r\n                                    state_code: e.target.value,\r\n                                  })\r\n                                }\r\n                              />\r\n                            </Flex>\r\n                          </FormGroup>\r\n                        </Grid>\r\n\r\n                        <Flex\r\n                          justify=\"end\"\r\n                          gap={3}\r\n                          className=\"mt-10 pt-6 shadow-none\"\r\n                        >\r\n                          <Button variant=\"ghost\" onClick={handleCancelBuyerForm}>\r\n                            Cancel\r\n                          </Button>\r\n                          <Button onClick={handleSaveBuyer} disabled={saving} className=\"px-10\">\r\n                            {saving ? (\r\n                              <Loader2 className=\"animate-spin mr-2\" size={14} />\r\n                            ) : (\r\n                              <Check className=\"mr-2\" size={14} />\r\n                            )}\r\n                            Commit Record\r\n                          </Button>\r\n                        </Flex>\r\n                      </Card>\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n\r\n                <Grid cols={1} className=\"md:grid-cols-2 lg:grid-cols-3\" gap={6}>\r\n                  {buyers.map((buyer) => (\r\n                    <SpotlightCard\r\n                      key={buyer.id}\r\n                      className=\"p-6 h-full flex flex-col group border-none shadow-sm hover:shadow-md\"\r\n                    >\r\n                      <Flex justify=\"between\" align=\"start\" className=\"mb-6\">\r\n                        <Stack gap={1} className=\"flex-1 min-w-0\">\r\n                          <Flex align=\"center\" gap={2}>\r\n                            <Body className=\"font-bold truncate group-hover:text-app-accent transition-colors\">\r\n                              {buyer.name}\r\n                            </Body>\r\n                            {buyer.is_default && (\r\n                              <Badge variant=\"success\" className=\"text-xs h-4\">\r\n                                Default\r\n                              </Badge>\r\n                            )}\r\n                          </Flex>\r\n                          <Accounting className=\"text-app-fg-muted uppercase\">\r\n                            {buyer.gstin}\r\n                          </Accounting>\r\n                        </Stack>\r\n                        <Flex gap={1} className=\"shrink-0\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-8 w-8 rounded-full hover:bg-app-accent/10 text-app-fg-muted hover:text-app-accent\"\r\n                            onClick={() => handleStartEditBuyer(buyer)}\r\n                          >\r\n                            <Edit2 size={12} />\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-8 w-8 rounded-full hover:bg-app-status-error/10 text-app-fg-muted hover:text-app-status-error\"\r\n                            onClick={() => handleDeleteBuyer(buyer.id)}\r\n                          >\r\n                            <Trash2 size={12} />\r\n                          </Button>\r\n                        </Flex>\r\n                      </Flex>\r\n\r\n                      <Stack gap={4} className=\"flex-1\">\r\n                        <Flex\r\n                          align=\"start\"\r\n                          gap={3}\r\n                          className=\"text-app-fg-muted h-10\"\r\n                        >\r\n                          <MapPin\r\n                            size={14}\r\n                            className=\"mt-0.5 text-app-fg-muted shrink-0\"\r\n                          />\r\n                          <span className=\"line-clamp-2 leading-relaxed\">\r\n                            {buyer.billing_address}\r\n                          </span>\r\n                        </Flex>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2 pt-4 shadow-none opacity-80\">\r\n                          <Stack gap={0.5}>\r\n                            <Label className=\"mb-0 opacity-60\">REGIONAL ZONE</Label>\r\n                            <Body className=\"font-semibold\">{buyer.state || \"N/A\"}</Body>\r\n                          </Stack>\r\n                          <Stack gap={0.5}>\r\n                            <Label className=\"mb-0 opacity-60\">SUPPLY CODE</Label>\r\n                            <Accounting className=\"font-bold text-left\">\r\n                              {buyer.state_code || \"00\"}\r\n                            </Accounting>\r\n                          </Stack>\r\n                        </div>\r\n                      </Stack>\r\n\r\n                      {!buyer.is_default && (\r\n                        <button\r\n                          onClick={() => api.setBuyerDefault(buyer.id).then(loadData)}\r\n                          className=\"mt-6 uppercase text-app-fg-muted hover:text-app-accent transition-colors opacity-0 group-hover:opacity-100 self-end\"\r\n                        >\r\n                          Set as Primary\r\n                        </button>\r\n                      )}\r\n                    </SpotlightCard>\r\n                  ))}\r\n                </Grid>\r\n              </TabsContent>\r\n\r\n              {/* --- Tab: System & Governance --- */}\r\n              <TabsContent value=\"system\" className=\"mt-0\">\r\n                <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={6}>\r\n                  <div className=\"lg:col-span-8\">\r\n                    <div className=\"bg-app-surface rounded-3xl border border-app-border p-8 shadow-sm relative overflow-hidden\">\r\n                      <Box className=\"absolute bottom-0 left-0 w-40 h-40 bg-[var(--color-sys-status-error)]/5 rounded-full -ml-10 -mb-10 blur-2xl transition-all duration-700\" />\r\n                      <div className=\"relative z-10\">\r\n                        <Box className=\"mt-4\">\r\n                          <Label className=\"mb-4\">Operational Invariants</Label>\r\n                          <Flex\r\n                            align=\"center\"\r\n                            gap={4}\r\n                            className=\"p-5 bg-app-accent/5 rounded-2xl border border-app-accent/10\"\r\n                          >\r\n                            <div className=\"h-10 w-10 rounded-full bg-app-accent/10 flex items-center justify-center text-app-accent\">\r\n                              <ShieldAlert size={20} />\r\n                            </div>\r\n                            <Stack gap={0.5}>\r\n                              <Body className=\"text-sm text-app-accent\">\r\n                                Mandatory SRV Ingestion\r\n                              </Body>\r\n                              <SmallText className=\"text-app-accent/70\">\r\n                                PO balances are strictly coupled with Stores Receipt Vouchers.\r\n                              </SmallText>\r\n                            </Stack>\r\n                          </Flex>\r\n                        </Box>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"lg:col-span-4\">\r\n                    <Stack gap={4}>\r\n                      <Flex\r\n                        align=\"center\"\r\n                        gap={2}\r\n                        className=\"px-1 text-app-status-error\"\r\n                      >\r\n                        <ShieldAlert size={14} />\r\n                        <Label className=\"text-app-status-error mb-0\">\r\n                          CRITICAL DESTRUCTION\r\n                        </Label>\r\n                      </Flex>\r\n\r\n                      <Card className=\"p-8 border-none bg-app-status-error/5 ring-1 ring-app-status-error/10 backdrop-blur-sm\">\r\n                        <Stack gap={6}>\r\n                          <Stack gap={2}>\r\n                            <H3 className=\"text-app-status-error\">\r\n                              Nuclear System Reset\r\n                            </H3>\r\n                            <Body className=\"text-app-status-error/80 text-xs leading-relaxed\">\r\n                              Permanently purge all POs, Invoices, and DC history. Identity records\r\n                              are preserved.\r\n                            </Body>\r\n                          </Stack>\r\n\r\n                          <AnimatePresence mode=\"wait\">\r\n                            {!showResetConfirm ? (\r\n                              <motion.div\r\n                                key=\"reset-init\"\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                              >\r\n                                <Button\r\n                                  variant=\"default\"\r\n                                  onClick={() => setShowResetConfirm(true)}\r\n                                  className=\"w-full bg-app-status-error hover:bg-app-status-error/90 text-white rounded-full uppercase\"\r\n                                >\r\n                                  Initiate Purge\r\n                                </Button>\r\n                              </motion.div>\r\n                            ) : (\r\n                              <motion.div\r\n                                key=\"reset-confirm\"\r\n                                initial={{ opacity: 0, scale: 0.95 }}\r\n                                animate={{ opacity: 1, scale: 1 }}\r\n                                className=\"flex gap-2\"\r\n                              >\r\n                                <Button\r\n                                  onClick={handleSystemReset}\r\n                                  disabled={isResetting}\r\n                                  className=\"flex-1 bg-app-status-error hover:bg-app-status-error/90 text-white rounded-full\"\r\n                                >\r\n                                  {isResetting && (\r\n                                    <Loader2 className=\"animate-spin mr-2\" size={12} />\r\n                                  )}\r\n                                  EXECUTE\r\n                                </Button>\r\n                                <Button\r\n                                  variant=\"outline\"\r\n                                  onClick={() => setShowResetConfirm(false)}\r\n                                  className=\"flex-1 rounded-full\"\r\n                                >\r\n                                  ABORT\r\n                                </Button>\r\n                              </motion.div>\r\n                            )}\r\n                          </AnimatePresence>\r\n                        </Stack>\r\n                      </Card>\r\n                    </Stack>\r\n                  </div>\r\n                </Grid>\r\n              </TabsContent>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n        </Tabs>\r\n      </div>\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\n// --- Subcomponents ---\r\n\r\n// TabTrigger removed as we use TabsTrigger from DS directly\r\n\r\nfunction FormGroup({\r\n  label,\r\n  help,\r\n  children,\r\n}: {\r\n  label: string;\r\n  help?: string;\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <div className=\"flex flex-col justify-center min-h-[44px]\">\r\n      <div className=\"flex items-center justify-between mb-1.5\">\r\n        <Label className=\"font-bold text-app-fg-muted leading-none\">\r\n          {label}\r\n        </Label>\r\n        {help && (\r\n          <SmallText className=\"text-app-fg-muted/50 opacity-50 italic\">\r\n            {help}\r\n          </SmallText>\r\n        )}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\[id]\\SRVDetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'formatDate' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[476,479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[476,479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[925,928],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[925,928],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[971,974],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[971,974],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":71,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":71,"endColumn":99},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'groupIdx' is defined but never used. Allowed unused args must match /^_/u.","line":96,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":63},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":110,"column":55,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":110,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":112,"column":64,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":112,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":113,"column":64,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":113,"endColumn":133},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":116,"column":83,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":116,"endColumn":125},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":117,"column":82,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":117,"endColumn":158},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":118,"column":94,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":118,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":119,"column":94,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":119,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":120,"column":126,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":120,"endColumn":188},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":121,"column":128,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":121,"endColumn":192},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":134,"column":63,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":134,"endColumn":105},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":135,"column":67,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":135,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":140,"column":68,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":140,"endColumn":122},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":141,"column":68,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":141,"endColumn":122},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":145,"column":98,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":145,"endColumn":142},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":146,"column":98,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":146,"endColumn":142},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":147,"column":130,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":147,"endColumn":186},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":148,"column":132,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":148,"endColumn":190}],"suppressedMessages":[],"errorCount":21,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useMemo, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ClipboardCheck, ChevronDown, ChevronUp } from \"lucide-react\";\r\n\r\nimport {\r\n    Button,\r\n    SmallText,\r\n    Accounting,\r\n    DocumentTemplate,\r\n    Flex,\r\n    Stack,\r\n    Body,\r\n    Label,\r\n    Card,\r\n    MonoCode,\r\n} from \"@/components/design-system\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\n\r\ninterface SRVDetailClientProps {\r\n    initialSRV: any;\r\n}\r\n\r\nexport default function SRVDetailClient({ initialSRV }: SRVDetailClientProps) {\r\n    const router = useRouter();\r\n    const [expandedParents, setExpandedParents] = useState<Set<number>>(new Set());\r\n\r\n    const header = initialSRV?.header || {};\r\n    const rawItems = initialSRV?.items || [];\r\n\r\n    // Group SRV Items by PO Item No for Parent-Lot hierarchy\r\n    const groupedItems = useMemo(() => {\r\n        const groups: Record<number, any[]> = {};\r\n        rawItems.forEach((item: any) => {\r\n            const key = item.po_item_no;\r\n            if (!groups[key]) groups[key] = [];\r\n            groups[key].push(item);\r\n        });\r\n        return Object.values(groups);\r\n    }, [rawItems]);\r\n\r\n    const toggleParent = (itemNo: number) => {\r\n        const newSet = new Set(expandedParents);\r\n        if (newSet.has(itemNo)) newSet.delete(itemNo);\r\n        else newSet.add(itemNo);\r\n        setExpandedParents(newSet);\r\n    };\r\n\r\n    const actions = (\r\n        <Flex gap={2}>\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={() => router.push(\"/srv\")} className=\"border-app-border/20\">\r\n                Registry\r\n            </Button>\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={() => window.print()} className=\"border-app-border/20\">\r\n                PDF Export\r\n            </Button>\r\n        </Flex>\r\n    );\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title={`Store Receipt Voucher - ${header.srv_number}`}\r\n            description=\"Official material receipt and inspection document\"\r\n            actions={actions}\r\n            icon={<ClipboardCheck size={20} className=\"text-app-status-success\" />}\r\n            iconLayoutId=\"srv-detail-icon\"\r\n        >\r\n            <Stack gap={6}>\r\n                <div className=\"flex items-center justify-between px-1\">\r\n                    <Label className=\"m-0 text-app-fg-muted uppercase tracking-widest text-[11px]\">\r\n                        Inspection Manifest ({rawItems.length} Entries)\r\n                    </Label>\r\n                    <SmallText className=\"text-app-fg-muted opacity-50 uppercase tracking-tighter\">\r\n                        PO: {header.po_number}\r\n                    </SmallText>\r\n                </div>\r\n\r\n                <div className=\"table-container shadow-premium-hover bg-app-surface/30 border-none\">\r\n                    <table className=\"w-full text-left\">\r\n                        <thead>\r\n                            <tr className=\"border-b border-app-border/10 bg-app-overlay/10\">\r\n                                <th className=\"py-3 px-4 w-[60px]\"><Label># ITM</Label></th>\r\n                                <th className=\"py-3 px-4\"><Label>Details</Label></th>\r\n                                <th className=\"py-3 px-4 w-[110px]\"><Label>SRV No</Label></th>\r\n                                <th className=\"py-3 px-4 w-[100px]\"><Label>Tax Inv</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[90px]\"><Label>Order</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[90px]\"><Label>Challan</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[90px] bg-blue-50/10 dark:bg-blue-900/10\"><Label className=\"text-blue-600 dark:text-blue-400\">Recvd</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[90px] bg-green-50/10 dark:bg-green-900/10\"><Label className=\"text-green-600 dark:text-green-400\">Accepted</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[70px] bg-red-50/10 dark:bg-red-900/10\"><Label className=\"text-red-500\">Rej</Label></th>\r\n                                <th className=\"py-3 px-4 w-[50px]\"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {groupedItems.map((group, groupIdx) => {\r\n                                const parent = group[0];\r\n                                const isExpanded = expandedParents.has(parent.po_item_no);\r\n                                const tOrd = group.reduce((sum, i) => sum + (i.order_qty || 0), 0);\r\n                                const tCha = group.reduce((sum, i) => sum + (i.challan_qty || 0), 0);\r\n                                const tRec = group.reduce((sum, i) => sum + (i.received_qty || 0), 0);\r\n                                const tAcc = group.reduce((sum, i) => sum + (i.accepted_qty || 0), 0);\r\n                                const tRej = group.reduce((sum, i) => sum + (i.rejected_qty || 0), 0);\r\n\r\n                                return (\r\n                                    <React.Fragment key={parent.po_item_no}>\r\n                                        <tr className={cn(\"transition-colors border-b border-app-border/10\", isExpanded ? \"bg-app-overlay/10\" : \"bg-app-overlay/5\")}>\r\n                                            <td className=\"py-3 px-4\"><MonoCode className=\"text-app-accent leading-none\">#{parent.po_item_no}</MonoCode></td>\r\n                                            <td className=\"py-3 px-4\">\r\n                                                <Body className=\"text-[13px] text-app-fg-muted/80\">{parent.material_description || \"Material\"}</Body>\r\n                                                <div className=\"flex gap-3 mt-0.5\">\r\n                                                    <SmallText className=\"text-[10px] text-app-fg-muted/40 uppercase tracking-tighter\">Code: {parent.material_code || \"-\"}</SmallText>\r\n                                                    <SmallText className=\"text-[10px] text-app-accent/40 uppercase tracking-tighter\">Unit: {parent.unit}</SmallText>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"py-3 px-4\"><Accounting className=\"text-[12px] text-app-accent/60\">{parent.srv_number || header.srv_number}</Accounting></td>\r\n                                            <td className=\"py-3 px-4\"><SmallText className=\"text-app-fg-muted/40 text-[10px] uppercase truncate max-w-[80px]\">{parent.invoice_no || \"-\"}</SmallText></td>\r\n                                            <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-[12px] text-app-fg-muted/60\">{tOrd}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-[12px] text-app-fg-muted/60\">{tCha}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\"><Accounting className=\"text-[12px] text-blue-600/60 dark:text-blue-400/60\">{tRec}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-right bg-green-50/5 dark:bg-green-900/5\"><Accounting className=\"text-[12px] text-green-600/60 dark:text-green-400/60\">{tAcc}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-right bg-red-50/5 dark:bg-red-900/5\"><Accounting className={cn(\"text-[12px]\", tRej > 0 ? \"text-red-500/60\" : \"text-app-fg-muted/20\")}>{tRej}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-center\">\r\n                                                <button onClick={() => toggleParent(parent.po_item_no)} className=\"p-1.5 rounded-md hover:bg-app-accent/10 hover:text-app-accent transition-all text-app-fg-muted/30\">\r\n                                                    {isExpanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                        {isExpanded && group.map((item, idx) => (\r\n                                            <tr key={idx} className=\"bg-app-surface border-b border-app-border/5\">\r\n                                                <td className=\"py-2 px-0 relative\">\r\n                                                    <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                                                    <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                                                        <span className=\"text-[10px] text-app-accent/30\">L</span>\r\n                                                        <MonoCode className=\"text-[11px] text-app-fg-muted\">L-{item.lot_no || 0}</MonoCode>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-4\">\r\n                                                    <div className=\"flex gap-4\">\r\n                                                        <SmallText className=\"text-[10px] text-app-fg-muted/60 uppercase\">Challan: {item.challan_no || \"-\"}</SmallText>\r\n                                                        <SmallText className=\"text-[10px] text-app-fg-muted/40 uppercase\">PMIR: {item.pmir_no || \"-\"}</SmallText>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td colSpan={2} />\r\n                                                <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-[11px] text-app-fg-muted/40\">{item.order_qty}</Accounting></td>\r\n                                                <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-[11px] text-app-fg-muted/40\">{item.challan_qty}</Accounting></td>\r\n                                                <td className=\"py-2 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\"><Accounting className=\"text-[11px] text-blue-600 dark:text-blue-400\">{item.received_qty}</Accounting></td>\r\n                                                <td className=\"py-2 px-4 text-right bg-green-50/5 dark:bg-green-900/5\"><Accounting className=\"text-[11px] text-green-600 dark:text-green-400\">{item.accepted_qty}</Accounting></td>\r\n                                                <td className=\"py-2 px-4 text-right bg-red-50/5 dark:bg-red-900/5\"><Accounting className={cn(\"text-[11px]\", (item.rejected_qty || 0) > 0 ? \"text-red-500\" : \"text-app-fg-muted/10\")}>{item.rejected_qty || 0}</Accounting></td>\r\n                                                <td />\r\n                                            </tr>\r\n                                        ))}\r\n                                    </React.Fragment>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </Stack>\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\DownloadButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1916,1919],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1916,1919],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { Download } from \"lucide-react\";\r\n\r\ninterface DownloadButtonProps {\r\n    url: string;\r\n    filename: string;\r\n    label?: string;\r\n    className?: string;\r\n    variant?: \"primary\" | \"secondary\" | \"outline\" | \"ghost\";\r\n    size?: \"sm\" | \"md\" | \"lg\";\r\n}\r\n\r\nexport default function DownloadButton({\r\n    url,\r\n    filename,\r\n    label = \"Download Excel\",\r\n    className = \"\",\r\n    variant = \"outline\",\r\n    size = \"md\",\r\n}: DownloadButtonProps) {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const handleDownload = async (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setIsLoading(true);\r\n\r\n        try {\r\n            const response = await fetch(url, {\r\n                method: \"GET\",\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let errorMessage = \"Download failed\";\r\n                try {\r\n                    const errorData = await response.json();\r\n                    // Handle both standard FastAPI detail and our structured AppException\r\n                    errorMessage =\r\n                        errorData.message ||\r\n                        errorData.detail?.message ||\r\n                        errorData.detail ||\r\n                        errorMessage;\r\n                } catch {\r\n                    // Not JSON or other parsing error\r\n                }\r\n                throw new Error(errorMessage);\r\n            }\r\n\r\n            const blob = await response.blob();\r\n            const downloadUrl = window.URL.createObjectURL(blob);\r\n            const link = document.createElement(\"a\");\r\n            link.href = downloadUrl;\r\n            link.download = filename;\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n            window.URL.revokeObjectURL(downloadUrl);\r\n        } catch (error: any) {\r\n            // console.error(\"Download Error:\", error);\r\n            alert(`Failed: ${error.message}`);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const sizeStyles = {\r\n        sm: \"px-2.5 py-1\",\r\n        md: \"px-3 py-1.5\",\r\n        lg: \"px-4 py-2\",\r\n    };\r\n\r\n    const baseStyles =\r\n        \"inline-flex items-center gap-2 font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sys-brand\";\r\n\r\n    const variants = {\r\n        primary: \"bg-sys-brand text-sys-bg-white hover:bg-sys-brand\",\r\n        secondary: \"bg-sys-bg-tertiary text-sys-primary hover:bg-sys-tertiary/20\",\r\n        outline:\r\n            \"border border-sys-tertiary text-text-primary bg-sys-bg-white hover:bg-sys-bg-tertiary\",\r\n        ghost: \"text-sys-secondary hover:text-sys-primary hover:bg-sys-bg-tertiary\",\r\n    };\r\n\r\n    // Icon sizes\r\n    const iconSize =\r\n        size === \"sm\" ? \"w-3 h-3\" : size === \"lg\" ? \"w-5 h-5\" : \"w-4 h-4\";\r\n\r\n    return (\r\n        <button\r\n            onClick={handleDownload}\r\n            disabled={isLoading}\r\n            className={`${baseStyles} ${sizeStyles[size]} ${variants[variant]} ${className} ${isLoading ? \"opacity-70 cursor-wait\" : \"\"\r\n                }`}\r\n        >\r\n            {isLoading ? (\r\n                <svg\r\n                    className={`animate-spin -ml-1 mr-2 ${iconSize} text-current`}\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                >\r\n                    <circle\r\n                        className=\"opacity-25\"\r\n                        cx=\"12\"\r\n                        cy=\"12\"\r\n                        r=\"10\"\r\n                        stroke=\"currentColor\"\r\n                        strokeWidth=\"4\"\r\n                    ></circle>\r\n                    <path\r\n                        className=\"opacity-75\"\r\n                        fill=\"currentColor\"\r\n                        d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                    ></path>\r\n                </svg>\r\n            ) : (\r\n                <Download className={iconSize} />\r\n            )}\r\n            {label}\r\n        </button>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\PageTransition.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FrozenRouter' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { usePathname } from \"next/navigation\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { LayoutRouterContext } from \"next/dist/shared/lib/app-router-context.shared-runtime\";\r\nimport { useContext, useRef, ReactNode } from \"react\";\r\n\r\n// --- FrozenRouter ---\r\n// Keeps the underlying route context \"frozen\" for the exiting component\r\n// so it doesn't immediately update to the new page content while fading out.\r\nfunction FrozenRouter(props: { children: ReactNode }) {\r\n    const context = useContext(LayoutRouterContext ?? {});\r\n    const frozen = useRef(context).current;\r\n\r\n    return (\r\n        <LayoutRouterContext.Provider value={frozen}>\r\n            {props.children}\r\n        </LayoutRouterContext.Provider>\r\n    );\r\n}\r\n\r\n// --- PageTransition ---\r\n// export default function PageTransition({ children }: { children: ReactNode }) {\r\n//    // const pathname = usePathname();\r\n//    return <>{children}</>;\r\n// }\r\n\r\nexport default function PageTransition({ children }: { children: ReactNode }) {\r\n    const pathname = usePathname();\r\n\r\n    return (\r\n        <AnimatePresence mode=\"popLayout\" initial={false}>\r\n            <motion.div\r\n                key={pathname}\r\n                initial={{ opacity: 0, scale: 0.99 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                exit={{ opacity: 0, scale: 1.01 }}\r\n                transition={{\r\n                    duration: 0.2,\r\n                    ease: \"easeOut\",\r\n                }}\r\n                className=\"h-full w-full relative\"\r\n            >\r\n                {children}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\Pagination.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":71,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":71,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":80,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":80,"endColumn":278},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":108,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":108,"endColumn":279}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { memo } from \"react\";\r\nimport { SmallText } from \"@/components/design-system\";\r\n\r\n/**\r\n * Pagination Component - Atomic Design System v1.0\r\n * Standardized to \"Apple-level\" high-contrast design.\r\n */\r\ninterface PaginationProps {\r\n    currentPage: number;\r\n    totalItems: number;\r\n    itemsPerPage: number;\r\n    onPageChange: (page: number) => void;\r\n    className?: string;\r\n}\r\n\r\nexport const Pagination = memo(({\r\n    currentPage,\r\n    totalItems,\r\n    itemsPerPage,\r\n    onPageChange,\r\n    className,\r\n}: PaginationProps) => {\r\n    const totalPages = Math.ceil(totalItems / itemsPerPage);\r\n\r\n    if (totalItems === 0 || totalPages <= 1) return null;\r\n\r\n    const startItem = (currentPage - 1) * itemsPerPage + 1;\r\n    const endItem = Math.min(currentPage * itemsPerPage, totalItems);\r\n\r\n    const handlePrevious = () => {\r\n        if (currentPage > 1) onPageChange(currentPage - 1);\r\n    };\r\n\r\n    const handleNext = () => {\r\n        if (currentPage < totalPages) onPageChange(currentPage + 1);\r\n    };\r\n\r\n    const getPageNumbers = () => {\r\n        const pages: (number | string)[] = [];\r\n        if (totalPages <= 7) {\r\n            for (let i = 1; i <= totalPages; i++) pages.push(i);\r\n        } else {\r\n            if (currentPage <= 4) {\r\n                for (let i = 1; i <= 5; i++) pages.push(i);\r\n                pages.push(\"...\");\r\n                pages.push(totalPages);\r\n            } else if (currentPage >= totalPages - 3) {\r\n                pages.push(1);\r\n                pages.push(\"...\");\r\n                for (let i = totalPages - 4; i <= totalPages; i++) pages.push(i);\r\n            } else {\r\n                pages.push(1);\r\n                pages.push(\"...\");\r\n                pages.push(currentPage - 1);\r\n                pages.push(currentPage);\r\n                pages.push(currentPage + 1);\r\n                pages.push(\"...\");\r\n                pages.push(totalPages);\r\n            }\r\n        }\r\n        return pages;\r\n    };\r\n\r\n    return (\r\n        <div className={cn(\"flex flex-col sm:flex-row items-center justify-between gap-6 px-4 py-8 mt-12\", className)}>\r\n            <div className=\"flex-1\">\r\n                <SmallText className=\"text-[12px] font-bold uppercase tracking-[0.2em] opacity-40\">\r\n                    Showing <span className=\"text-app-fg opacity-100\">{startItem}</span> to <span className=\"text-app-fg opacity-100\">{endItem}</span> of <span className=\"text-app-accent opacity-100\">{totalItems}</span> entries\r\n                </SmallText>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n                <button\r\n                    onClick={handlePrevious}\r\n                    disabled={currentPage === 1}\r\n                    className=\"h-10 px-4 flex items-center gap-2 rounded-xl bg-app-surface border border-app-border/30 text-app-fg font-bold text-[11px] uppercase tracking-widest transition-all hover:bg-app-fg/5 disabled:opacity-30 disabled:pointer-events-none active:scale-95\"\r\n                >\r\n                    <ChevronLeft className=\"w-4 h-4\" />\r\n                    <SmallText className=\"hidden sm:inline font-bold\">Prev</SmallText>\r\n                </button>\r\n\r\n                <div className=\"flex items-center gap-1.5 px-2\">\r\n                    {getPageNumbers().map((page, idx) => (\r\n                        <button\r\n                            key={idx}\r\n                            onClick={() => typeof page === \"number\" && onPageChange(page)}\r\n                            disabled={typeof page !== \"number\"}\r\n                            className={cn(\r\n                                \"w-10 h-10 flex items-center justify-center rounded-xl font-bold text-[11px] transition-all duration-300\",\r\n                                typeof page !== \"number\" && \"pointer-events-none text-app-fg/20\",\r\n                                typeof page === \"number\" && currentPage === page\r\n                                    ? \"active-glow text-white scale-110 shadow-lg shadow-app-accent/20\"\r\n                                    : \"bg-transparent text-app-fg/40 hover:bg-app-fg/5 hover:text-app-fg\"\r\n                            )}\r\n                        >\r\n                            {page}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                <button\r\n                    onClick={handleNext}\r\n                    disabled={currentPage === totalPages}\r\n                    className=\"h-10 px-4 flex items-center gap-2 rounded-xl bg-app-surface border border-app-border/30 text-app-fg font-black text-[11px] uppercase tracking-widest transition-all hover:bg-app-fg/5 disabled:opacity-30 disabled:pointer-events-none active:scale-95\"\r\n                >\r\n                    <SmallText className=\"hidden sm:inline font-bold\">Next</SmallText>\r\n                    <ChevronRight className=\"w-4 h-4\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nPagination.displayName = \"Pagination\";\r\nexport default Pagination;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\ProductionReadinessDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[354,357],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[354,357],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Activity, Zap, Palette, Shield, CheckCircle2, AlertTriangle, XCircle, RefreshCcw } from \"lucide-react\";\r\nimport { SmallText } from \"@/components/design-system\";\r\n\r\ninterface AuditScore {\r\n    category: string;\r\n    score: number;\r\n    grade: string;\r\n    issues: number;\r\n    icon: any;\r\n    color: string;\r\n}\r\n\r\ninterface ProductionReadinessData {\r\n    overall_score: number;\r\n    overall_grade: string;\r\n    categories: AuditScore[];\r\n    last_updated: string;\r\n}\r\n\r\nexport function ProductionReadinessDashboard() {\r\n    const [data, setData] = useState<ProductionReadinessData | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadAuditData();\r\n    }, []);\r\n\r\n    const loadAuditData = async () => {\r\n        try {\r\n            // In production, this would fetch from an API\r\n            const mockData: ProductionReadinessData = {\r\n                overall_score: 95,\r\n                overall_grade: \"A+\",\r\n                categories: [\r\n                    {\r\n                        category: \"Typography Compliance\",\r\n                        score: 100,\r\n                        grade: \"A+\",\r\n                        issues: 0,\r\n                        icon: Activity,\r\n                        color: \"var(--color-sys-status-success)\",\r\n                    },\r\n                    {\r\n                        category: \"Performance\",\r\n                        score: 100,\r\n                        grade: \"A+\",\r\n                        issues: 0,\r\n                        icon: Zap,\r\n                        color: \"var(--color-sys-status-success)\",\r\n                    },\r\n                    {\r\n                        category: \"Token Adherence\",\r\n                        score: 96,\r\n                        grade: \"A\",\r\n                        issues: 11,\r\n                        icon: Palette,\r\n                        color: \"var(--color-sys-status-success)\",\r\n                    },\r\n                    {\r\n                        category: \"Database Integrity\",\r\n                        score: 100,\r\n                        grade: \"A+\",\r\n                        issues: 0,\r\n                        icon: Shield,\r\n                        color: \"var(--color-sys-status-success)\",\r\n                    },\r\n                ],\r\n                last_updated: new Date().toISOString(),\r\n            };\r\n            setData(mockData);\r\n            setIsLoading(false);\r\n        } catch {\r\n            // console.error(\"Failed to load audit data:\", error);\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    if (process.env.NODE_ENV !== \"development\") return null;\r\n    if (isLoading || !data) return null;\r\n\r\n    const getScoreColor = (score: number) => {\r\n        if (score >= 90) return \"var(--color-sys-status-success)\";\r\n        if (score >= 70) return \"var(--color-sys-status-warning)\";\r\n        return \"var(--color-sys-status-error)\";\r\n    };\r\n\r\n    const getStatusIcon = (score: number) => {\r\n        if (score >= 90) return CheckCircle2;\r\n        if (score >= 70) return AlertTriangle;\r\n        return XCircle;\r\n    };\r\n\r\n    const StatusIcon = getStatusIcon(data.overall_score);\r\n\r\n    return (\r\n        <div className={`prod-readiness-panel ${isExpanded ? \"expanded\" : \"\"}`}>\r\n            <div className=\"prod-readiness-header\" onClick={() => setIsExpanded(!isExpanded)}>\r\n                <div className=\"prod-readiness-title\">\r\n                    <StatusIcon className=\"w-5 h-5\" style={{ color: getScoreColor(data.overall_score) }} />\r\n                    <span>Production Readiness</span>\r\n                </div>\r\n                <div className=\"prod-readiness-score\">\r\n                    <span className=\"score-value\" style={{ color: getScoreColor(data.overall_score) }}>\r\n                        {data.overall_score}\r\n                    </span>\r\n                    <span className=\"score-grade\">{data.overall_grade}</span>\r\n                </div>\r\n            </div>\r\n\r\n            {isExpanded && (\r\n                <div className=\"prod-readiness-content\">\r\n                    <div className=\"categories-grid\">\r\n                        {data.categories.map((category) => {\r\n                            const Icon = category.icon;\r\n                            return (\r\n                                <div key={category.category} className=\"category-card\">\r\n                                    <div className=\"category-header\">\r\n                                        <Icon className=\"w-4 h-4\" style={{ color: category.color }} />\r\n                                        <span className=\"category-name\">{category.category}</span>\r\n                                    </div>\r\n                                    <div className=\"category-stats\">\r\n                                        <div className=\"category-score\">\r\n                                            <span className=\"score-large\" style={{ color: category.color }}>\r\n                                                {category.score}\r\n                                            </span>\r\n                                            <span className=\"grade-badge\">{category.grade}</span>\r\n                                        </div>\r\n                                        <div className=\"category-issues\">\r\n                                            {category.issues === 0 ? (\r\n                                                <span className=\"issues-none\">✓ Clean</span>\r\n                                            ) : (\r\n                                                <span className=\"issues-count\">{category.issues} issues</span>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"category-progress\">\r\n                                        <div className=\"progress-bar\" style={{ width: `${category.score}%`, background: category.color }} />\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                    <div className=\"readiness-footer\">\r\n                        <SmallText>Last updated: {new Date(data.last_updated).toLocaleTimeString()}</SmallText>\r\n                        <button onClick={loadAuditData} className=\"refresh-btn\">\r\n                            <RefreshCcw size={12} className=\"mr-1 inline\" /> Refresh\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <style jsx>{`\r\n        .prod-readiness-panel {\r\n          position: fixed;\r\n          top: 1rem;\r\n          right: 1rem;\r\n          background: var(--color-sys-surface-glass);\r\n          backdrop-filter: blur(12px);\r\n          border: 1px solid var(--color-sys-surface-glass_border);\r\n          border-radius: 1rem;\r\n          box-shadow: 0 10px 30px rgba(0,0,0,0.2);\r\n          z-index: 9999;\r\n          min-width: 280px;\r\n        }\r\n        .prod-readiness-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          padding: 1rem;\r\n          cursor: pointer;\r\n        }\r\n        .prod-readiness-title { display: flex; align-items: center; gap: 0.5rem; font-weight: 600; }\r\n        .score-value { font-family: var(--font-mono); font-size: 1.25rem; font-weight: 700; }\r\n        .prod-readiness-content { padding: 0 1rem 1rem; }\r\n        .categories-grid { display: grid; gap: 0.5rem; }\r\n        .category-card { background: rgba(255,255,255,0.05); padding: 0.75rem; border-radius: 0.5rem; }\r\n        .category-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }\r\n        .category-stats { display: flex; justify-content: space-between; align-items: center; }\r\n        .score-large { font-weight: 700; }\r\n        .category-progress { height: 2px; background: rgba(255,255,255,0.1); margin-top: 0.5rem; }\r\n        .progress-bar { height: 100%; transition: width 1s ease; }\r\n        .refresh-btn { background: none; border: none; font-size: 0.75rem; color: var(--color-sys-brand-primary); cursor: pointer; }\r\n      `}</style>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\ResetDatabase.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\WebVitalsReporter.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":74,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":74,"endColumn":72},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":91,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":91,"endColumn":128}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { onCLS, onFCP, onINP, onLCP, onTTFB, type Metric } from \"web-vitals\";\r\nimport { X } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Label, SmallText } from \"@/components/design-system\";\r\n\r\ninterface WebVitalsMetrics {\r\n    CLS: number | null;\r\n    FCP: number | null;\r\n    INP: number | null;\r\n    LCP: number | null;\r\n    TTFB: number | null;\r\n}\r\n\r\ninterface VitalThresholds {\r\n    good: number;\r\n    needsImprovement: number;\r\n}\r\n\r\nconst THRESHOLDS: Record<keyof WebVitalsMetrics, VitalThresholds> = {\r\n    CLS: { good: 0.1, needsImprovement: 0.25 },\r\n    FCP: { good: 1800, needsImprovement: 3000 },\r\n    INP: { good: 200, needsImprovement: 500 },\r\n    LCP: { good: 2500, needsImprovement: 4000 },\r\n    TTFB: { good: 800, needsImprovement: 1800 },\r\n};\r\n\r\nfunction getVitalStatus(name: keyof WebVitalsMetrics, value: number): \"good\" | \"needs-improvement\" | \"poor\" {\r\n    const threshold = THRESHOLDS[name];\r\n    if (value <= threshold.good) return \"good\";\r\n    if (value <= threshold.needsImprovement) return \"needs-improvement\";\r\n    return \"poor\";\r\n}\r\n\r\nexport function WebVitalsReporter() {\r\n    const [metrics, setMetrics] = useState<WebVitalsMetrics>({\r\n        CLS: null,\r\n        FCP: null,\r\n        INP: null,\r\n        LCP: null,\r\n        TTFB: null,\r\n    });\r\n    const [isVisible, setIsVisible] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (process.env.NODE_ENV !== \"development\") return;\r\n\r\n        const handleMetric = (metric: Metric) => {\r\n            setMetrics((prev) => ({\r\n                ...prev,\r\n                [metric.name]: metric.value,\r\n            }));\r\n        };\r\n\r\n        onCLS(handleMetric);\r\n        onFCP(handleMetric);\r\n        onINP(handleMetric);\r\n        onLCP(handleMetric);\r\n        onTTFB(handleMetric);\r\n\r\n        const timer = setTimeout(() => setIsVisible(true), 2000);\r\n        return () => clearTimeout(timer);\r\n    }, []);\r\n\r\n    if (process.env.NODE_ENV !== \"development\" || !isVisible) return null;\r\n    const hasMetrics = Object.values(metrics).some((v) => v !== null);\r\n    if (!hasMetrics) return null;\r\n\r\n    return (\r\n        <div className=\"web-vitals-panel bg-app-overlay backdrop-blur-lg shadow-2xl p-4 fixed bottom-4 right-4 z-[9999] min-w-[240px] rounded-2xl\">\r\n            <div className=\"web-vitals-header flex justify-between items-center mb-4\">\r\n                <Label className=\"high-contrast-header text-[10px] m-0\">⚡ System Vitals</Label>\r\n                <button\r\n                    onClick={() => setIsVisible(false)}\r\n                    className=\"h-6 w-6 flex items-center justify-center rounded-full hover:bg-app-fg/10 text-app-fg/50 transition-colors\"\r\n                    aria-label=\"Close\"\r\n                >\r\n                    <X size={16} />\r\n                </button>\r\n            </div>\r\n            <div className=\"web-vitals-grid grid grid-cols-1 gap-2\">\r\n                {Object.entries(metrics).map(([name, value]) => {\r\n                    if (value === null) return null;\r\n                    const status = getVitalStatus(name as keyof WebVitalsMetrics, value);\r\n                    const displayValue = name === \"CLS\" ? value.toFixed(3) : `${Math.round(value)}ms`;\r\n\r\n                    return (\r\n                        <div key={name} className={cn(\"web-vital-item flex items-center justify-between p-2 rounded-lg bg-app-fg/5\", status)}>\r\n                            <SmallText className=\"web-vital-name text-[10px] font-bold uppercase tracking-wider text-app-fg/60\">{name}</SmallText>\r\n                            <SmallText className=\"web-vital-value text-xs font-mono font-bold text-app-fg\">{displayValue}</SmallText>\r\n                            <div className={cn(\"web-vital-indicator w-1.5 h-1.5 rounded-full ml-2\",\r\n                                status === \"good\" ? \"bg-emerald-500\" : status === \"needs-improvement\" ? \"bg-amber-500\" : \"bg-rose-500\"\r\n                            )} />\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\dashboard\\DashboardShell.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BarChart3' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":14},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":203,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":203,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":206,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":206,"endColumn":108}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useMemo, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { DashboardSummary, ActivityItem } from \"@/lib/api\";\r\nimport {\r\n    Receipt,\r\n    Activity,\r\n    Plus,\r\n    BarChart3,\r\n    ArrowRight,\r\n    Truck,\r\n    FileText,\r\n} from \"lucide-react\";\r\nimport { formatIndianCurrency, cn } from \"@/lib/utils\";\r\nimport {\r\n    H1,\r\n    H3,\r\n    SmallText,\r\n    Body,\r\n    Accounting,\r\n    Button,\r\n    SummaryCards,\r\n    DataTable,\r\n    StatusBadge,\r\n    Flex,\r\n    Stack,\r\n    Grid,\r\n    Box,\r\n} from \"@/components/design-system\";\r\nimport { type Column } from \"@/components/design-system\";\r\n// import { SummaryCardSkeleton, TableRowSkeleton } from \"@/components/design-system/atoms/Skeleton\";\r\nimport { AppRouterInstance } from \"next/dist/shared/lib/app-router-context.shared-runtime\";\r\nimport { motion } from \"framer-motion\";\r\n\r\n// --- CLIENT COMPONENT: Interactive Dashboard Shell ---\r\n\r\nconst createActivityColumns = (router: AppRouterInstance): Column<ActivityItem>[] => [\r\n    {\r\n        key: \"number\",\r\n        label: \"RECORD\",\r\n        width: \"40%\",\r\n        render: (_value, item) => (\r\n            <Flex\r\n                align=\"center\"\r\n                gap={3}\r\n                className=\"cursor-pointer group py-1\"\r\n                onClick={() => {\r\n                    const path =\r\n                        item.type === \"PO\"\r\n                            ? `/po/${item.number}`\r\n                            : item.type === \"DC\"\r\n                                ? `/dc/${item.number}`\r\n                                : `/invoice/${item.number}`;\r\n                    router.push(path);\r\n                }}\r\n            >\r\n                <motion.div\r\n                    layoutId={\r\n                        item.type === \"PO\"\r\n                            ? `po-icon-${item.number}`\r\n                            : item.type === \"DC\"\r\n                                ? `dc-icon-${item.number}`\r\n                                : `inv-icon-${item.number}`\r\n                    }\r\n                    className={cn(\r\n                        \"p-2 rounded-lg transition-colors shrink-0\",\r\n                        item.type === \"Invoice\"\r\n                            ? \"bg-[var(--color-sys-brand-primary)]/10 text-[var(--color-sys-brand-primary)]\"\r\n                            : item.type === \"PO\"\r\n                                ? \"bg-[var(--color-sys-bg-tertiary)]/50 text-[var(--color-sys-text-secondary)]\"\r\n                                : \"bg-[var(--color-sys-status-success)]/10 text-[var(--color-sys-status-success)]\"\r\n                    )}\r\n                >\r\n                    {item.type === \"Invoice\" ? (\r\n                        <Receipt size={16} />\r\n                    ) : item.type === \"PO\" ? (\r\n                        <FileText size={16} />\r\n                    ) : (\r\n                        <Truck size={16} />\r\n                    )}\r\n                </motion.div>\r\n                <div className=\"text-h3 font-semibold text-app-fg group-hover:text-app-accent transition-colors whitespace-nowrap\">\r\n                    {item.number}\r\n                </div>\r\n            </Flex>\r\n        ),\r\n    },\r\n    {\r\n        key: \"amount\",\r\n        label: \"AMOUNT\",\r\n        width: \"20%\",\r\n        align: \"right\",\r\n        render: (_value, item) => (\r\n            <Accounting\r\n                isCurrency\r\n                className=\"text-app-fg text-right block\"\r\n            >\r\n                {item.amount || 0}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"status\",\r\n        label: \"STATUS\",\r\n        width: \"20%\",\r\n        render: (_value, item) => <StatusBadge status={item.status} className=\"w-24 justify-center\" />,\r\n    },\r\n    {\r\n        key: \"date\",\r\n        label: \"DATE\",\r\n        width: \"20%\",\r\n        align: \"right\",\r\n        render: (_value, item) => (\r\n            <SmallText className=\"text-app-fg-muted whitespace-nowrap leading-none\">\r\n                {item.date}\r\n            </SmallText>\r\n        ),\r\n    },\r\n];\r\n\r\nfunction QuickActionCard({\r\n    title,\r\n    description,\r\n    icon,\r\n    onClick,\r\n    // layoutId,\r\n}: {\r\n    title: string;\r\n    description: string;\r\n    icon: React.ReactNode;\r\n    onClick: () => void;\r\n    // layoutId?: string;\r\n}) {\r\n    return (\r\n        <motion.div\r\n            whileHover={{ scale: 1.02 }}\r\n            whileTap={{ scale: 0.98 }}\r\n            transition={{ type: \"spring\", stiffness: 400, damping: 17 }}\r\n        >\r\n            <div\r\n                className=\"surface-card cursor-pointer group relative overflow-hidden\"\r\n                onClick={onClick}\r\n            >\r\n                <div className=\"p-5\">\r\n                    <Flex align=\"center\" gap={4}>\r\n                        <div className=\"p-3 rounded-2xl bg-app-accent/10 text-app-accent group-hover:scale-110 transition-transform duration-300\">\r\n                            {icon}\r\n                        </div>\r\n\r\n                        <Stack className=\"flex-1 min-w-0\">\r\n                            <Body className=\"text-app-fg leading-none font-bold\">\r\n                                {title}\r\n                            </Body>\r\n                            <SmallText className=\"text-app-fg/60 mt-1.5\">{description}</SmallText>\r\n                        </Stack>\r\n\r\n                        <div className=\"w-8 h-8 rounded-full bg-app-fg/5 flex items-center justify-center\">\r\n                            <ArrowRight\r\n                                size={14}\r\n                                className=\"text-app-accent transition-transform group-hover:translate-x-1\"\r\n                            />\r\n                        </div>\r\n                    </Flex>\r\n                </div>\r\n            </div>\r\n        </motion.div>\r\n    );\r\n}\r\n\r\ninterface DashboardShellProps {\r\n    summary: DashboardSummary | null;\r\n    activity: ActivityItem[];\r\n}\r\n\r\nexport function DashboardShell({ summary, activity }: DashboardShellProps) {\r\n    const router = useRouter();\r\n    const activityColumns = useMemo(() => createActivityColumns(router), [router]);\r\n\r\n    const handleAnalytics = useCallback(() => router.push(\"/reports\"), [router]);\r\n    const handleNewPO = useCallback(() => router.push(\"/po/create\"), [router]);\r\n    const handleNewDC = useCallback(() => router.push(\"/dc/create\"), [router]);\r\n    const handleNewInvoice = useCallback(() => router.push(\"/invoice/create\"), [router]);\r\n\r\n    return (\r\n        <Stack gap={8} className=\"relative z-0 min-h-screen\">\r\n            <Flex align=\"center\" justify=\"between\" className=\"mb-2\">\r\n                <Stack gap={1}>\r\n                    <H1 className=\"text-app-fg\">DASHBOARD</H1>\r\n                    <Body className=\"text-app-fg-muted\">Business intelligence overview</Body>\r\n                </Stack>\r\n\r\n            </Flex>\r\n\r\n            <Box className=\"min-h-[140px]\">\r\n                <SummaryCards\r\n                    loading={!summary}\r\n                    cards={[\r\n                        {\r\n                            title: \"Morning Briefing\",\r\n                            value: (\r\n                                <Stack gap={2} className=\"pb-5\">\r\n                                    <Body className=\"text-app-fg font-semibold text-[13px] leading-relaxed\">\r\n                                        {summary?.pending_pos || 0} POs pending\r\n                                    </Body>\r\n                                    <Body className=\"text-app-fg font-semibold text-[13px] leading-relaxed\">\r\n                                        {summary?.active_challans || 0} DCs in transit\r\n                                    </Body>\r\n                                </Stack>\r\n                            ),\r\n                            icon: <Activity size={24} />,\r\n                            variant: \"primary\",\r\n                        },\r\n                        {\r\n                            title: \"Invoiced Sales\",\r\n                            value: (\r\n                                <Accounting className=\"text-app-accent\">\r\n                                    {formatIndianCurrency(summary?.total_sales_month || 0)}\r\n                                </Accounting>\r\n                            ),\r\n                            icon: <Receipt size={24} />,\r\n                            variant: \"success\",\r\n                        },\r\n                        {\r\n                            title: \"Purchase Commitment\",\r\n                            value: (\r\n                                <Accounting className=\"text-app-accent\">\r\n                                    {formatIndianCurrency(summary?.total_po_value || 0)}\r\n                                </Accounting>\r\n                            ),\r\n                            icon: <FileText size={24} />,\r\n                            variant: \"primary\",\r\n                        },\r\n                        {\r\n                            title: \"Active Orders\",\r\n                            value: (\r\n                                <Accounting className=\"text-app-fg\">{summary?.active_po_count || 0}</Accounting>\r\n                            ),\r\n                            icon: <Activity size={24} />,\r\n                            variant: \"warning\",\r\n                        },\r\n                    ]}\r\n                    className=\"lg:grid-cols-2 xl:grid-cols-4\"\r\n                />\r\n            </Box >\r\n\r\n            <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={8}>\r\n                <Stack className=\"lg:col-span-8\" gap={4}>\r\n                    <Flex align=\"center\" justify=\"between\">\r\n                        <H3>Transaction Ledger</H3>\r\n                        <Button variant=\"ghost\" size=\"sm\" onClick={handleAnalytics}>\r\n                            View All\r\n                        </Button>\r\n                    </Flex>\r\n\r\n                    <DataTable\r\n                        columns={activityColumns}\r\n                        data={activity}\r\n                        keyField=\"number\"\r\n                        pageSize={8}\r\n                    />\r\n                </Stack>\r\n\r\n                <Stack className=\"lg:col-span-4\" gap={4}>\r\n                    <Flex align=\"center\" justify=\"between\">\r\n                        <H3>Execution Center</H3>\r\n                    </Flex>\r\n                    <Stack gap={4}>\r\n                        <QuickActionCard\r\n                            title=\"New Purchase Order\"\r\n                            description=\"Initiate procurement lifecycle\"\r\n                            icon={<Plus size={20} />}\r\n                            onClick={handleNewPO}\r\n                        // layoutId=\"create-po-icon\"\r\n                        />\r\n                        <QuickActionCard\r\n                            title=\"Issue Delivery Challan\"\r\n                            description=\"Commit inventory to logistics\"\r\n                            icon={<Truck size={20} />}\r\n                            onClick={handleNewDC}\r\n                        // layoutId=\"create-dc-icon\"\r\n                        />\r\n                        <QuickActionCard\r\n                            title=\"Generate Invoice\"\r\n                            description=\"Finalize financial reconciliation\"\r\n                            icon={<Receipt size={20} />}\r\n                            onClick={handleNewInvoice}\r\n                        // layoutId=\"create-invoice-icon\"\r\n                        />\r\n                    </Stack>\r\n                </Stack>\r\n            </Grid>\r\n        </Stack >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\dashboard\\organisms\\RevenueMomentum.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":16},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":16,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":16,"endColumn":76},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":17,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":17,"endColumn":83},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[487,490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[487,490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":40,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":40,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":43,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":43,"endColumn":134},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":51,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":51,"endColumn":92},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":105,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4765,4768],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4765,4768],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    ResponsiveContainer,\r\n    Cell,\r\n} from \"recharts\";\r\nimport { TrendingUp } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Flex, Stack, Box } from \"@/components/design-system/atoms/Layout\";\r\nimport { Body, SmallText, H3 } from \"@/components/design-system/atoms/Typography\";\r\n\r\ninterface RevenueMomentumProps {\r\n    data: any[];\r\n    loading?: boolean;\r\n}\r\n\r\nexport function RevenueMomentum({ data, loading }: RevenueMomentumProps) {\r\n    if (loading) {\r\n        return (\r\n            <Box className=\"h-[400px] w-full rounded-3xl bg-[var(--color-sys-bg-surface)]/40 animate-pulse\" />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Box className=\"p-6 rounded-3xl surface-claymorphic shadow-clay-surface overflow-hidden border border-[var(--color-sys-surface-glass_border_light)]\">\r\n            <Flex\r\n                align=\"center\"\r\n                justify=\"between\"\r\n                className=\"mb-8\"\r\n            >\r\n                <Stack gap={1}>\r\n                    <Flex align=\"center\" gap={2}>\r\n                        <div className=\"p-1.5 bg-[var(--color-sys-brand-primary)]/10 rounded-lg text-[var(--color-sys-brand-primary)]\">\r\n                            <TrendingUp size={14} />\r\n                        </div>\r\n                        <SmallText className=\"text-[var(--color-sys-brand-primary)] uppercase tracking-[0.2em] font-bold text-[10px]\">\r\n                            Revenue Analytics\r\n                        </SmallText>\r\n                    </Flex>\r\n                    <H3 className=\"text-h3 font-black tracking-tight uppercase\">Revenue Momentum</H3>\r\n                </Stack>\r\n                <Flex align=\"center\" gap={2} className=\"px-3 py-1.5 bg-[var(--color-sys-bg-tertiary)] rounded-full shadow-inner\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-[var(--color-sys-brand-primary)] animate-pulse\" />\r\n                    <SmallText className=\"font-bold text-[var(--color-sys-text-secondary)]\">Live Forecast</SmallText>\r\n                </Flex>\r\n            </Flex>\r\n\r\n            <Box className=\"h-[280px] w-full\">\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <BarChart data={data} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                        <CartesianGrid\r\n                            strokeDasharray=\"3 3\"\r\n                            vertical={false}\r\n                            stroke=\"rgba(0,0,0,0.05)\"\r\n                        />\r\n                        <XAxis\r\n                            dataKey=\"name\"\r\n                            axisLine={false}\r\n                            tickLine={false}\r\n                            tick={{\r\n                                fontSize: 10,\r\n                                fontWeight: 700,\r\n                                fill: \"var(--color-sys-text-tertiary)\",\r\n                            }}\r\n                            dy={10}\r\n                        />\r\n                        <YAxis\r\n                            axisLine={false}\r\n                            tickLine={false}\r\n                            tick={{\r\n                                fontSize: 10,\r\n                                fontWeight: 700,\r\n                                fill: \"var(--color-sys-text-tertiary)\",\r\n                            }}\r\n                            tickFormatter={(value) => {\r\n                                if (value === 0) return \"0\";\r\n                                // Convert to Crores (1 Cr = 1,00,00,000)\r\n                                const crValue = value / 10000000;\r\n                                return `${crValue.toFixed(1)}Cr`;\r\n                            }}\r\n                        />\r\n                        <Tooltip\r\n                            cursor={{ fill: 'rgba(var(--color-sys-brand-primary-rgb), 0.05)', radius: 8 }}\r\n                            contentStyle={{\r\n                                borderRadius: \"16px\",\r\n                                border: \"none\",\r\n                                boxShadow: \"0 8px 32px rgba(0,0,0,0.05)\",\r\n                                background: \"var(--color-sys-bg-surface)\",\r\n                                backdropFilter: \"blur(10px)\",\r\n                                padding: \"12px\",\r\n                            }}\r\n                            labelStyle={{\r\n                                fontWeight: 800,\r\n                                color: \"var(--color-sys-text-primary)\",\r\n                                fontSize: \"12px\",\r\n                                marginBottom: \"4px\",\r\n                            }}\r\n                            formatter={(value: any) => [\r\n                                `${(value / 10000000).toFixed(2)} Cr`,\r\n                                \"Revenue\"\r\n                            ]}\r\n                        />\r\n                        <Bar\r\n                            dataKey=\"value\"\r\n                            radius={[8, 8, 0, 0]}\r\n                            barSize={40}\r\n                            animationDuration={1500}\r\n                        >\r\n                            {data.map((entry, index) => {\r\n                                const isLast = index === data.length - 1;\r\n\r\n                                // Use CSS variable for blue color\r\n                                const color = 'var(--color-sys-brand-primary)';\r\n                                const opacity = isLast ? 1 : 0.7 + (index / Math.max(data.length - 1, 1)) * 0.3;\r\n\r\n                                return (\r\n                                    <Cell\r\n                                        key={`cell-${index}`}\r\n                                        fill={color}\r\n                                        fillOpacity={opacity}\r\n                                    />\r\n                                );\r\n                            })}\r\n                        </Bar>\r\n                    </BarChart>\r\n                </ResponsiveContainer>\r\n            </Box>\r\n        </Box>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\dashboard\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\dc\\DCListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Truck' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'api' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":14},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":44,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":44,"endColumn":88},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":56,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":56,"endColumn":112},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":195,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":195,"endColumn":83}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { Truck, Plus, CheckCircle, Clock, Download, Activity, FileStack, PackageCheck, Ship } from \"lucide-react\";\r\nimport { api, DCListItem, DCStats } from \"@/lib/api\";\r\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\r\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\r\nimport {\r\n    Body,\r\n    Accounting,\r\n    StatusBadge,\r\n    ListPageTemplate,\r\n    type SummaryCardProps,\r\n    type Column,\r\n    Button,\r\n    Flex,\r\n    Label,\r\n    SmallText,\r\n} from \"@/components/design-system\";\r\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\r\n\r\nconst columns: Column<DCListItem>[] = [\r\n    {\r\n        key: \"dc_number\",\r\n        label: \"CHALLAN #\",\r\n        sortable: true,\r\n        width: \"15%\",\r\n        render: (_value, dc) => (\r\n            <Link href={`/dc/${encodeURIComponent(dc.dc_number)}`} className=\"block group\">\r\n                <Accounting className=\"text-app-accent tracking-tight group-hover:underline underline-offset-4 decoration-2\">\r\n                    {dc.dc_number}\r\n                </Accounting>\r\n            </Link>\r\n        ),\r\n    },\r\n    {\r\n        key: \"dc_date\",\r\n        label: \"DATE\",\r\n        sortable: true,\r\n        width: \"12%\",\r\n        render: (v) => (\r\n            <Body className=\"text-app-fg-muted font-bold text-[13px] whitespace-nowrap\">\r\n                {formatDate(String(v))}\r\n            </Body>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_number\",\r\n        label: \"CONTRACT\",\r\n        sortable: true,\r\n        width: \"12%\",\r\n        render: (v) => (\r\n            <Link href={`/po/${v}`} className=\"block group\">\r\n                <Accounting className=\"text-app-fg-muted text-[11px] group-hover:text-app-fg transition-colors\">\r\n                    {String(v) || \"---\"}\r\n                </Accounting>\r\n            </Link>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_ordered_quantity\",\r\n        label: \"ORD\",\r\n        align: \"right\",\r\n        width: \"10%\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-right pr-2\">{v || 0}</Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_dispatched_quantity\",\r\n        label: \"DISPATCHED\",\r\n        align: \"right\",\r\n        width: \"10%\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"success\" className=\"text-right pr-2\">\r\n                {v || 0}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_pending_quantity\",\r\n        label: \"BAL\",\r\n        align: \"right\",\r\n        width: \"10%\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"warning\" className=\"text-right pr-2\">\r\n                {v || 0}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_received_quantity\",\r\n        label: \"RECD\",\r\n        sortable: true,\r\n        align: \"right\",\r\n        width: \"10%\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"highlight\" className=\"text-app-accent text-right pr-2\">{v || 0}</Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"status\",\r\n        label: \"STATUS\",\r\n        sortable: true,\r\n        align: \"center\",\r\n        width: \"11%\",\r\n        render: (v) => (\r\n            <div className=\"flex justify-center\">\r\n                <StatusBadge status={String(v)} className=\"w-24 shadow-sm\" />\r\n            </div>\r\n        ),\r\n    },\r\n];\r\n\r\ninterface DCListClientProps {\r\n    initialDCs: DCListItem[];\r\n    initialStats: DCStats | null;\r\n}\r\n\r\nexport function DCListClient({ initialDCs, initialStats }: DCListClientProps) {\r\n    const router = useRouter();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const debouncedSearch = useDebouncedValue(searchQuery, 300);\r\n    const [page, setPage] = useState(1);\r\n    const pageSize = 10;\r\n\r\n    const filteredDCs = useMemo(() => {\r\n        const term = debouncedSearch.toLowerCase();\r\n        return initialDCs.filter(\r\n            (dc) =>\r\n                dc.dc_number.toLowerCase().includes(term) ||\r\n                (dc.po_number?.toString() || \"\").includes(term) ||\r\n                (dc.consignee_name && dc.consignee_name.toLowerCase().includes(term))\r\n        );\r\n    }, [initialDCs, debouncedSearch]);\r\n\r\n    const summaryCards = useMemo(\r\n        (): SummaryCardProps[] => [\r\n            {\r\n                title: \"Active Shipments\",\r\n                value: initialStats?.total_challans || initialDCs.length,\r\n                icon: <Ship size={20} />,\r\n                variant: \"primary\",\r\n            },\r\n            {\r\n                title: \"Fully Delivered\",\r\n                value: initialStats?.completed_delivery || 0,\r\n                icon: <PackageCheck size={20} />,\r\n                variant: \"success\",\r\n            },\r\n            {\r\n                title: \"Contract Capacity\",\r\n                value: formatIndianCurrency(initialStats?.total_value || 0),\r\n                icon: <FileStack size={20} />,\r\n                variant: \"primary\",\r\n            },\r\n            {\r\n                title: \"Awaiting Receipt\",\r\n                value: initialStats?.pending_delivery || 0,\r\n                icon: <Activity size={20} />,\r\n                variant: \"warning\",\r\n            },\r\n        ],\r\n        [initialDCs.length, initialStats]\r\n    );\r\n\r\n    const handleSearch = useCallback((val: string) => {\r\n        setSearchQuery(val);\r\n        setPage(1);\r\n    }, []);\r\n\r\n    const toolbar = (\r\n        <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\r\n            <SearchBar\r\n                id=\"dc-search\"\r\n                value={searchQuery}\r\n                onChange={handleSearch}\r\n                placeholder=\"Search challans or contracts...\"\r\n                className=\"w-full max-w-sm\"\r\n            />\r\n\r\n            <Button\r\n                color=\"primary\"\r\n                size=\"sm\"\r\n                onClick={() => router.push(\"/dc/create\")}\r\n                className=\"min-w-[120px] shadow-premium active:scale-95 transition-all\"\r\n            >\r\n                <Plus size={16} className=\"mr-2\" />\r\n                <Body className=\"text-white uppercase tracking-widest text-[11px]\">New Challan</Body>\r\n            </Button>\r\n        </Flex>\r\n    );\r\n\r\n    return (\r\n        <ListPageTemplate\r\n            title=\"DELIVERY CHALLANS\"\r\n            subtitle=\"Manage and track all delivery documentation\"\r\n            toolbar={toolbar}\r\n            summaryCards={summaryCards}\r\n            columns={columns}\r\n            data={filteredDCs}\r\n            keyField=\"dc_number\"\r\n            page={page}\r\n            pageSize={pageSize}\r\n            totalItems={filteredDCs.length}\r\n            onPageChange={(newPage) => setPage(newPage)}\r\n            emptyMessage=\"No delivery challans found\"\r\n            density=\"compact\"\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Card.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'props' is defined but never used. Allowed unused args must match /^_/u.","line":15,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * Card Atom - Atomic Design System v1.0\r\n * Spec: 8px radius, 20px padding, white background, subtle shadow\r\n */\r\nexport interface CardProps extends React.HTMLAttributes<HTMLDivElement> {\r\n    children: React.ReactNode;\r\n}\r\n\r\nconst CardInternal = React.forwardRef<HTMLDivElement, CardProps>(\r\n    ({ className, children, ...props }, ref) => {\r\n        return (\r\n            <div\r\n                ref={ref}\r\n                className={cn(\r\n                    \"surface-card\",\r\n                    className\r\n                )}\r\n            >\r\n                <div>\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nCardInternal.displayName = \"CardInternal\";\r\n\r\nexport const Card = React.memo(CardInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Checkbox.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":35,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":35,"endColumn":124}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * Checkbox Atom - Atomic Design System v1.0\r\n * Spec: 18px size, 4px radius, #1A3D7C selected\r\n */\r\nexport interface CheckboxProps extends Omit<React.InputHTMLAttributes<HTMLInputElement>, \"type\"> {\r\n    label?: string;\r\n}\r\n\r\nconst CheckboxInternal = React.forwardRef<HTMLInputElement, CheckboxProps>(\r\n    ({ className, label, id, ...props }, ref) => {\r\n        const checkboxId = id || `checkbox-${Math.random().toString(36).substr(2, 9)}`;\r\n        return (\r\n            <div className=\"flex items-center gap-2\">\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id={checkboxId}\r\n                    ref={ref}\r\n                    className={cn(\r\n                        \"h-[18px] w-[18px] rounded border-[var(--color-sys-text-tertiary)]/50 text-[var(--color-sys-brand-primary)]\",\r\n                        \"focus:ring-2 focus:ring-[var(--color-sys-brand-primary)]/40 focus:ring-offset-0\",\r\n                        \"disabled:cursor-not-allowed disabled:opacity-50\",\r\n                        \"cursor-pointer\",\r\n                        className\r\n                    )}\r\n                    {...props}\r\n                />\r\n                {label && (\r\n                    <label\r\n                        htmlFor={checkboxId}\r\n                        className=\"text-[14px] font-medium text-[var(--color-sys-text-primary)] cursor-pointer select-none\"\r\n                    >\r\n                        {label}\r\n                    </label>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nCheckboxInternal.displayName = \"Checkbox\";\r\n\r\nexport const Checkbox = React.memo(CheckboxInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Icon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Input.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":47,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":47,"endColumn":107}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * Input Atom - Atomic Design System v1.0\r\n * Spec: 38px height, 6px radius, 12px padding\r\n * Border: #D1D5DB, Focus: #1A3D7C\r\n */\r\nexport interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {\r\n    icon?: React.ReactNode;\r\n    error?: string;\r\n    variant?: \"default\" | \"glass\" | \"ghost\" | \"neumorphic\";\r\n}\r\n\r\nconst InputInternal = React.forwardRef<HTMLInputElement, InputProps>(\r\n    ({ className, type, icon, error, required, variant = \"default\", ...props }, ref) => {\r\n        return (\r\n            <div className=\"w-full\">\r\n                <div className=\"relative group\">\r\n                    {icon && (\r\n                        <div className=\"absolute left-3.5 top-1/2 -translate-y-1/2 text-app-fg/30 group-focus-within:text-app-accent transition-colors duration-300 pointer-events-none\">\r\n                            {icon}\r\n                        </div>\r\n                    )}\r\n                    <input\r\n                        type={type}\r\n                        className={cn(\r\n                            \"flex w-full transition-all duration-300 border-none outline-none\",\r\n                            \"text-[13px] font-semibold text-app-fg placeholder:text-app-fg/30\",\r\n                            // Variant mappings\r\n                            variant === \"default\" && \"h-[38px] rounded-xl bg-app-surface border border-app-border/30 focus:shadow-lg focus:ring-1 focus:ring-app-accent/20 px-3.5\",\r\n                            variant === \"glass\" && \"h-[38px] rounded-xl bg-app-overlay backdrop-blur-xl border border-app-border/40 px-3.5\",\r\n                            variant === \"ghost\" && \"bg-transparent h-auto p-0\",\r\n                            variant === \"neumorphic\" && \"h-[38px] rounded-xl neumorphic-inset px-3.5 focus:shadow-none focus:ring-2 focus:ring-app-accent/10 focus:border-app-accent/30\",\r\n                            icon && variant !== \"ghost\" && \"pl-11\",\r\n                            error && \"ring-1 ring-rose-500/50\",\r\n                            className\r\n                        )}\r\n                        ref={ref}\r\n                        required={required}\r\n                        {...props}\r\n                        value={props.value ?? \"\"}\r\n                    />\r\n                </div>\r\n                {error && <p className=\"mt-1 text-[11px] font-bold text-rose-500 uppercase tracking-wider\">{error}</p>}\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nInputInternal.displayName = \"Input\";\r\n\r\nexport const Input = React.memo(InputInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\SpotlightCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Typography.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'short' is defined but never used. Allowed unused args must match /^_/u.","line":138,"column":68,"nodeType":null,"messageId":"unusedVar","endLine":138,"endColumn":73}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { memo } from \"react\";\r\nimport { cn, formatIndianCurrency } from \"@/lib/utils\";\r\n\r\n/**\r\n * Typography Atoms - Enterprise UI Standardization (Google M3)\r\n * Strict Weight Enforcement: 400 (Regular), 500 (Medium), 600 (SemiBold), 700 (Bold)\r\n * Strict Size Scale: text-xs to text-3xl\r\n */\r\n\r\ninterface TypographyProps extends React.HTMLAttributes<HTMLElement> {\r\n    children?: React.ReactNode;\r\n}\r\n\r\n// Heading (H1): Page Title (text-2xl, font-black, tracking-tight)\r\nexport const H1 = memo(React.forwardRef<HTMLHeadingElement, TypographyProps>(\r\n    ({ className, children, ...props }, ref) => (\r\n        <h1\r\n            ref={ref}\r\n            className={cn(\r\n                \"text-2xl font-black font-heading leading-tight text-app-fg tracking-tight\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </h1>\r\n    )\r\n));\r\nH1.displayName = \"H1\";\r\n\r\n// Subheading (H2): Section Title (text-lg, font-bold)\r\nexport const H2 = memo(React.forwardRef<HTMLHeadingElement, TypographyProps>(\r\n    ({ className, children, ...props }, ref) => (\r\n        <h2\r\n            ref={ref}\r\n            className={cn(\r\n                \"text-lg font-bold font-heading leading-tight text-app-fg\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </h2>\r\n    )\r\n));\r\nH2.displayName = \"H2\";\r\n\r\n// Section heading (H3): text-lg (18px), font-semibold (600)\r\nexport const H3 = memo(React.forwardRef<HTMLHeadingElement, TypographyProps>(\r\n    ({ className, children, ...props }, ref) => (\r\n        <h3\r\n            ref={ref}\r\n            className={cn(\r\n                \"text-lg font-bold font-heading leading-normal text-app-fg\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </h3>\r\n    )\r\n));\r\nH3.displayName = \"H3\";\r\n\r\n// Sub-section heading (H4): text-[10px], font-semibold (600), uppercase (Used for table headers/labels)\r\nexport const H4 = memo(React.forwardRef<HTMLHeadingElement, TypographyProps>(\r\n    ({ className, children, ...props }, ref) => (\r\n        <h4\r\n            ref={ref}\r\n            className={cn(\r\n                \"text-[11px] font-medium font-heading uppercase tracking-widest text-app-fg-muted\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </h4>\r\n    )\r\n));\r\nH4.displayName = \"H4\";\r\n\r\n// Body text: text-sm (14px), font-normal (400)\r\nexport const Body = memo(React.forwardRef<HTMLParagraphElement, TypographyProps>(\r\n    ({ className, children, ...props }, ref) => (\r\n        <p\r\n            ref={ref}\r\n            className={cn(\r\n                \"text-sm font-normal font-sans leading-relaxed text-app-fg\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </p>\r\n    )\r\n));\r\nBody.displayName = \"Body\";\r\n\r\n// Label text: Metadata (text-[10px], font-black, uppercase, tracking-[0.2em])\r\nexport const Label = memo(React.forwardRef<HTMLLabelElement, React.LabelHTMLAttributes<HTMLLabelElement>>(\r\n    ({ className, children, ...props }, ref) => (\r\n        <label\r\n            ref={ref}\r\n            className={cn(\r\n                \"text-[10px] font-medium text-app-fg-muted uppercase tracking-[0.2em] block mb-1.5\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </label>\r\n    )\r\n));\r\nLabel.displayName = \"Label\";\r\n\r\n// Small text: Secondary details (text-[11px], font-medium)\r\nexport const SmallText = memo(({ className, children, ...props }: TypographyProps) => (\r\n    <small\r\n        className={cn(\"text-[11px] font-medium text-app-fg-muted leading-tight block\", className)}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </small>\r\n));\r\nSmallText.displayName = \"SmallText\";\r\n\r\n\r\n// Accounting/Numeric: text-sm (14px), font-mono, tabular-nums\r\nexport interface AccountingProps extends TypographyProps {\r\n    isCurrency?: boolean;\r\n    short?: boolean;\r\n    precision?: number;\r\n    variant?: \"default\" | \"highlight\" | \"success\" | \"warning\" | \"error\";\r\n}\r\n\r\nexport const Accounting = memo(({ className, children, isCurrency, short, precision, variant = \"default\", ...props }: AccountingProps) => {\r\n    let content = children;\r\n    if (isCurrency && typeof children === \"number\") {\r\n        content = formatIndianCurrency(children);\r\n    } else if (typeof children === \"number\") {\r\n        content = children.toLocaleString(\"en-IN\", {\r\n            minimumFractionDigits: 0,\r\n            maximumFractionDigits: precision ?? 3,\r\n        });\r\n    }\r\n\r\n    const variantStyles = {\r\n        default: \"text-app-fg\",\r\n        highlight: \"text-app-accent\",\r\n        success: \"text-app-status-success\",\r\n        warning: \"text-app-status-warning\",\r\n        error: \"text-app-status-error\",\r\n    };\r\n\r\n    return (\r\n        <span\r\n            className={cn(\r\n                \"font-mono font-medium text-right leading-none tabular-nums text-[13px]\",\r\n                variantStyles[variant],\r\n                className\r\n            )}\r\n            style={{ fontFeatureSettings: '\"tnum\"' }}\r\n            suppressHydrationWarning\r\n            {...props}\r\n        >\r\n            {content}\r\n        </span>\r\n    );\r\n});\r\nAccounting.displayName = \"Accounting\";\r\n\r\n// Mono/Code text: text-xs (12px)\r\nexport const MonoCode = memo(React.forwardRef<HTMLElement, TypographyProps>(\r\n    ({ className, children, ...props }, ref) => (\r\n        <code\r\n            ref={ref}\r\n            className={cn(\r\n                \"text-xs font-mono font-medium bg-app-fg/5 px-1.5 py-0.5 rounded text-app-fg\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </code>\r\n    )\r\n));\r\nMonoCode.displayName = \"MonoCode\";\r\n\r\n// ALIASES for backward compatibility or different naming preferences\r\nexport const Mono = MonoCode;\r\nexport const TableText = Body;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\ActionButtonGroup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\DetailField.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":18,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":18,"endColumn":103}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { SmallText } from \"../atoms/Typography\";\r\n\r\ninterface DetailFieldProps {\r\n    label: string;\r\n    value: string | number | null | undefined;\r\n    icon?: React.ReactNode;\r\n    className?: string;\r\n}\r\n\r\nexport const DetailField = ({ label, value, icon, className }: DetailFieldProps) => (\r\n    <div className={cn(\"space-y-1 group transition-all duration-300\", className)}>\r\n        <div className=\"flex items-center gap-2 opacity-50 group-hover:opacity-100 transition-opacity\">\r\n            {icon && <div className=\"text-primary\">{icon}</div>}\r\n            <SmallText className=\"text-[9px] font-semibold uppercase tracking-widest m-0 leading-none\">\r\n                {label}\r\n            </SmallText>\r\n        </div>\r\n        <div className=\"font-medium text-sys-primary tracking-tight leading-snug break-words\">\r\n            {value || (\r\n                <span className=\"text-sys-tertiary font-normal italic uppercase tracking-tighter opacity-50\">\r\n                    Empty\r\n                </span>\r\n            )}\r\n        </div>\r\n    </div>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\DocumentJourney.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronRight' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'STAGE_LABELS' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":6,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isPending' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":20,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":32},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":36,"column":51,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":36,"endColumn":100}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"; export type DocumentStage = \"PO\" | \"DC\" | \"Invoice\" | \"SRV\"; interface DocumentJourneyProps {\r\n    currentStage: DocumentStage; stages?: DocumentStage[]; className?: string;\r\n} const STAGE_LABELS: Record<DocumentStage, string> = {\r\n    PO: \"Purchase Order\",\r\n    DC: \"Delivery Challan\",\r\n    Invoice: \"Tax Invoice\",\r\n    SRV: \"Service Receipt\",\r\n};\r\n\r\nexport const DocumentJourney = ({ currentStage, stages = [\"PO\", \"DC\", \"Invoice\"], className }: DocumentJourneyProps) => {\r\n    const currentIndex = stages.indexOf(currentStage);\r\n    return (\r\n        <div className={cn(\"flex items-center gap-2\", className)}>\r\n            {stages.map((stage, index) => {\r\n                const isCompleted = index < currentIndex;\r\n                const isActive = index === currentIndex;\r\n                const isPending = index > currentIndex;\r\n                return (\r\n                    <React.Fragment key={stage}>\r\n                        <div className={cn(\r\n                            \"flex items-center gap-2 px-4 py-2 rounded-full transition-all duration-300 border\",\r\n                            isActive\r\n                                ? \"bg-[var(--bg-surface-elevated)] border-[var(--app-fg-muted)] shadow-md\"\r\n                                : isCompleted\r\n                                    ? \"bg-emerald-500/10 border-emerald-500/20 text-emerald-600\"\r\n                                    : \"bg-transparent border-transparent text-[var(--app-fg-muted)]\",\r\n                        )} >\r\n                            {isCompleted ? (\r\n                                <Check size={12} className=\"text-emerald-500\" />\r\n                            ) : isActive ? (\r\n                                <div className=\"w-1.5 h-1.5 rounded-full bg-[var(--accent)] animate-pulse\" />\r\n                            ) : (\r\n                                <Circle size={12} className=\"text-[var(--app-fg-muted)] opacity-50\" />\r\n                            )}\r\n                            <span className={cn(\r\n                                \"text-[10px] uppercase tracking-widest font-semibold\",\r\n                                isActive ? \"text-[var(--app-fg)]\" : isCompleted ? \"text-emerald-600\" : \"text-[var(--app-fg-muted)]\",\r\n                            )} >\r\n                                {stage}\r\n                            </span>\r\n                        </div>\r\n                        {index < stages.length - 1 && (\r\n                            <div className=\"w-4 h-[1px] bg-[var(--border-subtle)]\" />\r\n                        )}\r\n                    </React.Fragment>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\EmptyState.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":26,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":26,"endColumn":61},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":30,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":30,"endColumn":67}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ReactNode } from \"react\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { H3, Body } from \"../atoms/Typography\";\r\nimport { Flex } from \"../atoms/Layout\";\r\nimport { LucideIcon } from \"lucide-react\";\r\n\r\ninterface EmptyStateProps {\r\n    icon: LucideIcon;\r\n    title: string;\r\n    description: string;\r\n    action?: ReactNode;\r\n    className?: string;\r\n}\r\n\r\nexport const EmptyState = ({\r\n    icon: Icon,\r\n    title,\r\n    description,\r\n    action,\r\n    className,\r\n}: EmptyStateProps) => {\r\n    return (\r\n        <Card className={`text-center py-24 border-dashed border-[#E5E7EB] col-span-full ${className}`}>\r\n            <Flex justify=\"center\" className=\"mb-4\">\r\n                <div className=\"w-16 h-16 bg-[#F9FAFB] rounded-full flex items-center justify-center\">\r\n                    <Icon className=\"w-8 h-8 text-[#D1D5DB]\" />\r\n                </div>\r\n            </Flex>\r\n            <H3 className=\"mb-2\">{title}</H3>\r\n            <Body className=\"text-[#6B7280] mb-6 max-w-md mx-auto\">\r\n                {description}\r\n            </Body>\r\n            {action && <Flex justify=\"center\">{action}</Flex>}\r\n        </Card>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\FormField.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":53,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":53,"endColumn":79},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":65,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":65,"endColumn":83},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":62}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport { Input, InputProps } from \"../atoms/Input\";\r\nimport { Label } from \"../atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * FormField Molecule - Atomic Design System v1.0\r\n * Composition: Label (16px) + Input + Error Message\r\n */\r\nexport interface FormFieldProps extends InputProps {\r\n    label?: string;\r\n    error?: string;\r\n    helperText?: string;\r\n    required?: boolean;\r\n    floating?: boolean;\r\n}\r\n\r\nexport const FormField = React.forwardRef<HTMLInputElement, FormFieldProps>(\r\n    (\r\n        { label, error, helperText, required, floating, className, ...inputProps },\r\n        ref\r\n    ) => {\r\n        if (floating) {\r\n            return (\r\n                <div className={cn(\"relative space-y-0\", className)}>\r\n                    <Input\r\n                        ref={ref}\r\n                        error={error}\r\n                        required={required}\r\n                        className={cn(\r\n                            \"peer pt-6 pb-2 h-14 bg-sys-bg-white/50 border-sys-tertiary/20/60 focus:bg-sys-bg-white placeholder:text-transparent\",\r\n                            error && \"border-sys-error\"\r\n                        )}\r\n                        placeholder=\"\" // Required for peer-placeholder-shown\r\n                        {...inputProps}\r\n                    />\r\n                    {label && (\r\n                        <Label\r\n                            htmlFor={inputProps.id}\r\n                            className={cn(\r\n                                \"absolute left-3 top-4 z-10 origin-[0] -translate-y-2.5 scale-75 transform text-sys-secondary duration-200\",\r\n                                \"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:text-sys-secondary\",\r\n                                \"peer-focus:-translate-y-2.5 peer-focus:scale-75 peer-focus:text-sys-brand\",\r\n                                error && \"text-sys-error peer-focus:text-sys-error\"\r\n                            )}\r\n                        >\r\n                            {label}{\" \"}\r\n                            {required && <span className=\"ml-1 text-sys-error\">*</span>}\r\n                        </Label>\r\n                    )}\r\n                    {helperText && !error && (\r\n                        <p className=\"mt-1 text-[11px] text-sys-tertiary pl-1\">\r\n                            {helperText}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className={cn(\"space-y-1.5\", className)}>\r\n                {label && (\r\n                    <Label htmlFor={inputProps.id} className=\"block\">\r\n                        {label} {required && <span className=\"text-[#DC2626] ml-1\">*</span>}\r\n                    </Label>\r\n                )}\r\n                <Input ref={ref} error={error} required={required} {...inputProps} />\r\n                {helperText && !error && (\r\n                    <p className=\"text-[12px] text-[#6B7280]\">{helperText}</p>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n);\r\nFormField.displayName = \"FormField\";\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\FormFields.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":4,"column":47,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":4,"endColumn":140},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":7,"column":49,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":7,"endColumn":142},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":10,"column":51,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":10,"endColumn":144},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":13,"column":49,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":13,"endColumn":142},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":16,"column":214,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":16,"endColumn":307}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n/** * Shared Form Components * Used in DC and Invoice pages for consistent form styling */ interface TextFieldProps { label: string; value: string; onChange: (value: string) => void; placeholder?: string; required?: boolean; disabled?: boolean; type?:\"text\" |\"email\" |\"tel\" |\"date\";\r\n} export const TextField = ({ label, value, onChange, placeholder =\"\", required = false, disabled = false, type =\"text\",\r\n}: TextFieldProps) => { return ( <div> <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\"> {label} {required && <span className=\"text-danger\">*</span>} </label> <input type={type} value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder} disabled={disabled} required={required} className={`w-full px-3 py-2 border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary bg-sys-bg-white ${ disabled ?\"bg-sys-bg-tertiary text-text-secondary cursor-not-allowed\" :\"\" }`} /> </div> );\r\n}; interface NumberFieldProps { label: string; value: number; onChange: (value: number) => void; min?: number; max?: number; step?: number; required?: boolean; disabled?: boolean; placeholder?: string;\r\n} export const NumberField = ({ label, value, onChange, min, max, step = 1, required = false, disabled = false, placeholder =\"\",\r\n}: NumberFieldProps) => { return ( <div> <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\"> {label} {required && <span className=\"text-danger\">*</span>} </label> <input type=\"number\" value={value} onChange={(e) => onChange(parseFloat(e.target.value) || 0)} min={min} max={max} step={step} disabled={disabled} required={required} placeholder={placeholder} className={`w-full px-3 py-2 border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary bg-sys-bg-white ${ disabled ?\"bg-sys-bg-tertiary text-text-secondary cursor-not-allowed\" :\"\" }`} /> </div> );\r\n}; interface TextAreaFieldProps { label: string; value: string; onChange: (value: string) => void; placeholder?: string; required?: boolean; disabled?: boolean; rows?: number;\r\n} export const TextAreaField = ({ label, value, onChange, placeholder =\"\", required = false, disabled = false, rows = 3,\r\n}: TextAreaFieldProps) => { return ( <div> <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\"> {label} {required && <span className=\"text-danger\">*</span>} </label> <textarea value={value} onChange={(e) => onChange(e.target.value)} placeholder={placeholder} disabled={disabled} required={required} rows={rows} className={`w-full px-3 py-2 border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary bg-sys-bg-white resize-none ${ disabled ?\"bg-sys-bg-tertiary text-text-secondary cursor-not-allowed\" :\"\" }`} /> </div> );\r\n}; interface SelectFieldProps { label: string; value: string | number; onChange: (value: string) => void; options: { value: string | number; label: string }[]; required?: boolean; disabled?: boolean; placeholder?: string;\r\n} export const SelectField = ({ label, value, onChange, options, required = false, disabled = false, placeholder =\"Select...\",\r\n}: SelectFieldProps) => { return ( <div> <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\"> {label} {required && <span className=\"text-danger\">*</span>} </label> <select value={value} onChange={(e) => onChange(e.target.value)} disabled={disabled} required={required} className={`w-full px-3 py-2 border border-border rounded-lg focus:ring-1 focus:ring-primary focus:border-primary text-text-primary bg-sys-bg-white ${ disabled ?\"bg-sys-bg-tertiary text-text-secondary cursor-not-allowed\" :\"\" }`} > {placeholder && <option value=\"\">{placeholder}</option>} {options.map((option) => ( <option key={option.value} value={option.value}> {option.label} </option> ))} </select> </div> );\r\n}; interface ReadOnlyFieldProps { label: string; value: string | number; isCurrency?: boolean;\r\n} export const ReadOnlyField = ({ label, value, isCurrency = false,\r\n}: ReadOnlyFieldProps) => { const displayValue = isCurrency && typeof value ===\"number\" ? `₹${value.toLocaleString(\"en-IN\", { minimumFractionDigits: 2, maximumFractionDigits: 2 })}` : value; return ( <div> <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-text-secondary mb-1\"> {label} </label> <div className=\"px-3 py-2 bg-sys-bg-tertiary border border-border rounded-lg text-text-primary\"> {displayValue ||\"-\"} </div> </div> );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\NavigationCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1912,1915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1912,1915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Body, SmallText } from \"../atoms/Typography\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport interface NavigationCardProps {\r\n    title: string;\r\n    description?: string;\r\n    icon?: React.ReactNode;\r\n    active?: boolean;\r\n    onClick?: () => void;\r\n    className?: string;\r\n}\r\n\r\nexport const NavigationCard = ({\r\n    title,\r\n    description,\r\n    icon,\r\n    active,\r\n    onClick,\r\n    className,\r\n}: NavigationCardProps) => {\r\n    return (\r\n        <motion.button\r\n            whileHover={{ scale: 1.02 }}\r\n            whileTap={{ scale: 0.98 }}\r\n            onClick={onClick}\r\n            className={cn(\r\n                \"relative flex flex-col items-start p-5 rounded-2xl transition-all duration-300 text-left overflow-hidden\",\r\n                \"bg-[var(--color-sys-bg-surface)]/40 backdrop-blur-md shadow-sm hover:shadow-lg\",\r\n                active\r\n                    ? \"bg-[var(--color-sys-brand-primary)]/10 shadow-[inner_0_2px_4px_rgba(0,0,0,0.02)]\"\r\n                    : \"hover:bg-[var(--color-sys-bg-surface)]/60\",\r\n                className\r\n            )}\r\n        >\r\n            {/* Decorative accent for active state */}\r\n            {active && (\r\n                <div className=\"absolute top-0 right-0 w-16 h-16 -mr-8 -mt-8 bg-[var(--color-sys-brand-primary)]/10 rounded-full blur-2xl\" />\r\n            )}\r\n\r\n            {icon && (\r\n                <div\r\n                    className={cn(\r\n                        \"p-2.5 rounded-xl mb-3 transition-colors\",\r\n                        active ? \"bg-[var(--color-sys-brand-primary)] text-white shadow-md shadow-[var(--color-sys-brand-primary)]/20\" : \"bg-[var(--color-sys-bg-surface)] text-[var(--color-sys-text-tertiary)] shadow-sm\"\r\n                    )}\r\n                >\r\n                    {React.isValidElement(icon) ? React.cloneElement(icon as any, { size: 20 }) : icon}\r\n                </div>\r\n            )}\r\n\r\n            <Body className={cn(\"font-bold tracking-tight\", active ? \"text-[var(--color-sys-brand-primary)]\" : \"text-[var(--color-sys-text-primary)]\")}>\r\n                {title}\r\n            </Body>\r\n\r\n            {description && (\r\n                <SmallText className={cn(\"mt-1.5 line-clamp-2\", active ? \"text-[var(--color-sys-text-secondary)]\" : \"text-[var(--color-sys-text-tertiary)]\")}>\r\n                    {description}\r\n                </SmallText>\r\n            )}\r\n\r\n            {/* Underline indicator for active state */}\r\n            {active && (\r\n                <motion.div\r\n                    layoutId=\"nav-active-indicator\"\r\n                    className=\"absolute bottom-0 left-0 right-0 h-1 bg-[var(--color-sys-brand-primary)]\"\r\n                />\r\n            )}\r\n        </motion.button>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\PaginationControls.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'itemName' is assigned a value but never used. Allowed unused args must match /^_/u.","line":3,"column":87,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":95}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { ChevronLeft, ChevronRight } from\"lucide-react\"; interface PaginationControlsProps { currentPage: number; totalPages: number; onPageChange: (page: number) => void; itemName?: string;\r\n} export default function PaginationControls({ currentPage, totalPages, onPageChange, itemName =\"Items\",\r\n}: PaginationControlsProps) { if (totalPages <= 1) return null; return ( <div className=\"flex items-center justify-between px-4 py-3 border-t border-border bg-sys-bg-tertiary/50\"> <div className=\"text-text-secondary\"> Page{\"\"} <span className=\"font-medium text-text-primary\">{currentPage}</span> of{\"\"} <span className=\"font-medium text-text-primary\">{totalPages}</span> </div> <div className=\"flex items-center gap-2\"> <button onClick={() => onPageChange(currentPage - 1)} disabled={currentPage === 1} className=\"p-1 rounded-md hover:bg-sys-bg-white hover:shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all text-text-secondary hover:text-text-primary border border-transparent hover:border-sys-tertiary/20\" > <ChevronLeft className=\"w-4 h-4\" /> </button> <button onClick={() => onPageChange(currentPage + 1)} disabled={currentPage >= totalPages} className=\"p-1 rounded-md hover:bg-sys-bg-white hover:shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all text-text-secondary hover:text-text-primary border border-transparent hover:border-sys-tertiary/20\" > <ChevronRight className=\"w-4 h-4\" /> </button> </div> </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\SearchBar.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":85,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":85,"endColumn":202}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Input } from \"../atoms/Input\";\r\nimport { Search, X } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useDebounce } from \"@/hooks/useDebounce\";\r\n\r\n/**\r\n * SearchBar Molecule - Atomic Design System v1.0\r\n * Composition: Input + Search Icon + Clear Button + Keyboard Shortcut\r\n * Performance: 300ms debounce to prevent excessive re-renders\r\n */\r\nexport interface SearchBarProps {\r\n    id?: string;\r\n    name?: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    onSearch?: () => void;\r\n    placeholder?: string;\r\n    shortcut?: string;\r\n    className?: string;\r\n    variant?: \"default\" | \"neumorphic\";\r\n}\r\n\r\nconst SearchBarInternal = React.forwardRef<HTMLInputElement, SearchBarProps>(\r\n    ({ id, name, value, onChange, onSearch, placeholder = \"Search...\", shortcut, className, variant = \"default\" }, ref) => {\r\n        const [localValue, setLocalValue] = useState(value);\r\n        const debouncedValue = useDebounce(localValue, 300);\r\n\r\n        // Sync debounced value to parent\r\n        useEffect(() => {\r\n            if (debouncedValue !== value) {\r\n                onChange(debouncedValue);\r\n            }\r\n        }, [debouncedValue, onChange, value]);\r\n\r\n        // Sync external value changes back to local state\r\n        useEffect(() => {\r\n            if (value !== localValue) {\r\n                setLocalValue(value);\r\n            }\r\n        }, [value]);\r\n\r\n        const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n            if (e.key === \"Enter\" && onSearch) {\r\n                onSearch();\r\n            }\r\n        };\r\n\r\n        const handleClear = () => {\r\n            setLocalValue(\"\");\r\n            onChange(\"\"); // Immediate clear\r\n        };\r\n\r\n        return (\r\n            <div className={cn(\"relative group max-w-2xl w-full\", className)}>\r\n                <Input\r\n                    ref={ref}\r\n                    id={id}\r\n                    name={name}\r\n                    variant={variant === \"neumorphic\" ? \"neumorphic\" : \"default\"}\r\n                    value={localValue}\r\n                    onChange={(e) => setLocalValue(e.target.value)}\r\n                    onKeyDown={handleKeyDown}\r\n                    placeholder={placeholder}\r\n                    icon={<Search size={18} className=\"text-app-fg/40 group-focus-within:text-app-accent transition-colors\" />}\r\n                    className={cn(\r\n                        \"pr-20 h-[44px] rounded-full transition-all duration-300 pl-12\",\r\n                        variant === \"default\" && \"bg-app-surface/50 border border-app-border/30 shadow-sm focus:shadow-xl focus:shadow-app-accent/5 focus:bg-app-surface\"\r\n                    )}\r\n                />\r\n                {/* Actions Group */}\r\n                <div className=\"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2\">\r\n                    {localValue && (\r\n                        <button\r\n                            onClick={handleClear}\r\n                            className=\"text-app-fg/30 hover:text-rose-500 transition-colors p-1.5 hover:bg-rose-500/5 rounded-full\"\r\n                            aria-label=\"Clear search\"\r\n                        >\r\n                            <X size={16} />\r\n                        </button>\r\n                    )}\r\n                    {shortcut && !localValue && (\r\n                        <kbd className=\"hidden sm:flex px-2 py-0.5 text-[9px] font-black text-app-fg/40 bg-app-fg/5 rounded-md border border-app-border/20 pointer-events-none tracking-widest uppercase\">\r\n                            {shortcut}\r\n                        </kbd>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nSearchBarInternal.displayName = \"SearchBar\";\r\n\r\nexport const SearchBar = React.memo(SearchBarInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\SearchTrigger.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":28,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":28,"endColumn":76}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Search } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface SearchTriggerProps {\r\n    className?: string;\r\n}\r\n\r\nexport const SearchTrigger = ({ className }: SearchTriggerProps) => {\r\n    return (\r\n        <button\r\n            onClick={() => document.dispatchEvent(new CustomEvent(\"open-command-palette\"))}\r\n            className={cn(\r\n                \"group relative flex items-center gap-2 px-4 py-2 rounded-xl\",\r\n                \"bg-sys-bg-white/50 hover:bg-sys-bg-white hover:shadow-sm\", // Subtle glass input look\r\n                \"border border-sys-bg-tertiary\",\r\n                \"transition-all duration-200\",\r\n                \"text-sys-secondary hover:text-sys-primary w-full md:w-64 lg:w-80\",\r\n                className\r\n            )}\r\n        >\r\n            <Search className=\"w-4 h-4 text-sys-tertiary group-hover:text-sys-primary transition-colors\" />\r\n            <span className=\"text-sm text-sys-tertiary group-hover:text-sys-secondary flex-1 text-left\">\r\n                Search...\r\n            </span>\r\n            <div className=\"hidden md:flex items-center gap-1 border border-sys-bg-tertiary/50 rounded px-1.5 py-0.5 bg-sys-bg-tertiary/20\">\r\n                <span className=\"text-[10px] font-medium text-sys-tertiary\">⌘ K</span>\r\n            </div>\r\n        </button>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\StatBlock.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingDown' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Minus' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'delta' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":50}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from\"react\";\r\nimport { cn } from\"@/lib/utils\";\r\nimport { TrendingUp, TrendingDown, Minus } from\"lucide-react\"; interface StatBlockProps { label: string; value: string | number; delta?: { value: string; trend:\"up\" |\"down\" |\"neutral\"; }; icon?: React.ReactNode; className?: string; variant?:\"default\" |\"primary\" |\"teal\" |\"navy\";\r\n} export const StatBlock = ({ label, value, delta, icon, className, variant =\"default\",\r\n}: StatBlockProps) => { const variantStyles = { default:\"bg-sys-bg-white shadow-sm\", primary:\"bg-gradient-to-br from-sys-brand to-sys-brand text-sys-bg-white\", teal:\"bg-gradient-to-br from-cyan-500 via-teal-500 to-sys-success text-sys-bg-white\", navy:\"bg-gradient-to-br from-[#2d4a6e] via-[#1E3A5F] to-[#152841] text-sys-bg-white\", }; const isColored = variant !==\"default\"; return ( <div className={cn(\"rounded-2xl p-5 flex items-center gap-4 transition-all duration-300 hover:shadow-lg backdrop-blur-md border border-sys-bg-white/20\", variantStyles[variant], className, )} > {/* Icon */} {icon && ( <div className={cn(\"p-3 rounded-full shrink-0\", isColored ?\"bg-sys-bg-white/20\" :\"bg-primary/10\", )} > <div className={isColored ?\"text-sys-bg-white\" :\"text-primary\"}> {icon} </div> </div> )} {/* Content */} <div className=\"flex-1\"> <div className={cn(\" font-semibold tabular-nums leading-none mb-1\", isColored ?\"text-sys-bg-white\" :\"text-sys-primary\", )} > {value} </div> <div className={cn(\"text-[11px] font-medium\", isColored ?\"text-sys-bg-white/70\" :\"text-sys-secondary\", )} > {label} </div> </div> </div> );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\StatusTag.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\TableCells.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\TableHeaderCell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\WarningModal.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":81,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":81,"endColumn":109},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":89,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":89,"endColumn":72},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":96,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":96,"endColumn":54}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { H2, Body } from \"../atoms/Typography\";\r\nimport { AlertTriangle, X } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * WarningModal Molecule - Atomic Design System v1.0\r\n * Critical for destructive actions (e.g., DB reset)\r\n * Must block user interaction until decision made\r\n */\r\nexport interface WarningModalProps {\r\n    open: boolean;\r\n    title: string;\r\n    message: string;\r\n    onConfirm: () => void;\r\n    onCancel: () => void;\r\n    confirmLabel?: string;\r\n    cancelLabel?: string;\r\n    confirmVariant?: \"default\" | \"destructive\";\r\n}\r\n\r\nexport const WarningModal: React.FC<WarningModalProps> = ({\r\n    open,\r\n    title,\r\n    message,\r\n    onConfirm,\r\n    onCancel,\r\n    confirmLabel = \"Confirm\",\r\n    cancelLabel = \"Cancel\",\r\n    confirmVariant = \"destructive\",\r\n}) => {\r\n    const [isVisible, setIsVisible] = useState(open);\r\n\r\n    useEffect(() => {\r\n        setIsVisible(open);\r\n        // Lock body scroll when modal is open\r\n        if (open) {\r\n            document.body.style.overflow = \"hidden\";\r\n        } else {\r\n            document.body.style.overflow = \"unset\";\r\n        }\r\n        return () => {\r\n            document.body.style.overflow = \"unset\";\r\n        };\r\n    }, [open]);\r\n\r\n    // Handle Escape key\r\n    useEffect(() => {\r\n        const handleEscape = (e: KeyboardEvent) => {\r\n            if (e.key === \"Escape\" && open) {\r\n                onCancel();\r\n            }\r\n        };\r\n        window.addEventListener(\"keydown\", handleEscape);\r\n        return () => window.removeEventListener(\"keydown\", handleEscape);\r\n    }, [open, onCancel]);\r\n\r\n    if (!isVisible) return null;\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center bg-sys-primary/50 backdrop-blur-sm\"\r\n            onClick={onCancel}\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n            aria-labelledby=\"warning-modal-title\"\r\n        >\r\n            <div\r\n                className={cn(\r\n                    \"relative bg-sys-bg-white rounded-lg shadow-lg\",\r\n                    \"w-full max-w-md mx-4 p-6\",\r\n                    \"animate-in fade-in zoom-in-95 duration-200\"\r\n                )}\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n                {/* Close button */}\r\n                <button\r\n                    onClick={onCancel}\r\n                    className=\"absolute top-4 right-4 text-[#6B7280] hover:text-[#111827] transition-colors\"\r\n                    aria-label=\"Close modal\"\r\n                >\r\n                    <X size={20} />\r\n                </button>\r\n\r\n                {/* Icon */}\r\n                <div className=\"flex items-center justify-center w-12 h-12 rounded-full bg-[#DC2626]/10 mb-4\">\r\n                    <AlertTriangle size={24} className=\"text-[#DC2626]\" />\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <H2 id=\"warning-modal-title\" className=\"mb-2\">\r\n                    {title}\r\n                </H2>\r\n                <Body className=\"text-[#6B7280] mb-6\">{message}</Body>\r\n\r\n                {/* Actions */}\r\n                <div className=\"flex items-center gap-3 justify-end\">\r\n                    <Button variant=\"secondary\" onClick={onCancel}>\r\n                        {cancelLabel}\r\n                    </Button>\r\n                    <Button\r\n                        variant={confirmVariant}\r\n                        onClick={() => {\r\n                            onConfirm();\r\n                            setIsVisible(false);\r\n                        }}\r\n                    >\r\n                        {confirmLabel}\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\skeletons\\CreateDCSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\skeletons\\DetailSkeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\AlertsPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRef' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Bell' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Info' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'api' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setIsOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'alerts' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":95,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":101},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setAlerts' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":103,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":112},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'unreadCount' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":146,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":157},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setUnreadCount' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":159,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":173},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":197,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":204},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":5,"column":206,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":216}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport { useEffect, useState, useRef } from\"react\";\r\nimport { Bell, CheckCircle, AlertTriangle, Info, X } from\"lucide-react\";\r\nimport { api } from\"@/lib/api\"; interface Alert { id: string; alert_type: string; entity_type: string; entity_id: string; message: string; severity: string; is_acknowledged: boolean; created_at: string;\r\n} export default function AlertsPanel() { const [isOpen, setIsOpen] = useState(false); const [alerts, setAlerts] = useState<Alert[]>([]); const [unreadCount, setUnreadCount] = useState(0); const [loading, setLoading] = useState(true); // Keep loading state for initial fetch const panelRef = useRef<HTMLDivElement>(null); const fetchAlerts = async () => { try { setLoading(true); // Set loading true before fetch const data = await api.getAlerts(false); // Assuming getAlerts fetches unacknowledged setAlerts(data); setUnreadCount(data.length); } catch (error) { console.error(\"Failed to fetch alerts:\", error); setAlerts([]); // Clear alerts on error } finally { setLoading(false); // Set loading false after fetch } }; useEffect(() => { fetchAlerts(); const interval = setInterval(fetchAlerts, 60000); // Poll every minute return () => clearInterval(interval); }, []); const handleAcknowledge = async (alertId: string) => { try { await api.acknowledgeAlert(alertId); fetchAlerts(); // Refresh list after acknowledging } catch (error) { console.error(\"Failed to acknowledge alert:\", error); } }; const getSeverityIcon = (severity: string) => { switch (severity) { case\"error\": return <AlertTriangle className=\"w-5 h-5 text-sys-error\" />; case\"warning\": return <AlertTriangle className=\"w-5 h-5 text-orange-600\" />; case\"info\": return <Info className=\"w-5 h-5 text-sys-brand\" />; default: return <Info className=\"w-5 h-5 text-sys-secondary\" />; } }; const getSeverityColor = (severity: string) => { switch (severity) { case\"error\": return\"bg-sys-error-subtle border-sys-error/20\"; case\"warning\": return\"bg-orange-50 border-orange-200\"; case\"info\": return\"bg-sys-brand-subtle border-sys-brand/20\"; default: return\"bg-sys-bg-tertiary border-sys-tertiary/20\"; } }; return ( <> {/* Alert Bell Button */} <button onClick={() => setIsOpen(!isOpen)} className=\"relative p-2 text-sys-secondary hover:text-sys-primary hover:bg-sys-bg-tertiary rounded-lg transition-colors\" > <Bell className=\"w-5 h-5\" /> {alerts.length > 0 && ( <span className=\"absolute top-0 right-0 w-5 h-5 bg-sys-error text-sys-bg-white font-bold rounded-full flex items-center justify-center\"> {alerts.length} </span> )} </button> {/* Alerts Panel */} {isOpen && ( <> <div className=\"fixed inset-0 bg-sys-primary bg-opacity-25 z-40\" onClick={() => setIsOpen(false)} /> <div className=\"fixed top-16 right-4 w-96 bg-sys-bg-white rounded-lg shadow-2xl z-50 max-h-[600px] flex flex-col\"> {/* Header */} <div className=\"px-4 py-3 border-b border-sys-tertiary/20 flex items-center justify-between\"> <div className=\"flex items-center gap-2\"> <Bell className=\"w-5 h-5 text-sys-primary\" /> <h3 className=\"font-semibold text-sys-primary\">Alerts</h3> {alerts.length > 0 && ( <span className=\"px-2 py-0.5 bg-sys-error-subtle text-sys-error font-medium rounded-full\"> {alerts.length} </span> )} </div> <button onClick={() => setIsOpen(false)}> <X className=\"w-5 h-5 text-sys-tertiary hover:text-sys-secondary\" /> </button> </div> {/* Alerts List */} <div className=\"flex-1 overflow-y-auto p-2\"> {loading && ( <div className=\"text-center py-8 text-sys-secondary\"> Loading alerts... </div> )} {!loading && alerts.length === 0 && ( <div className=\"text-center py-8\"> <CheckCircle className=\"w-12 h-12 text-sys-success mx-auto mb-2\" /> <div className=\"text-sys-primary font-medium\">All clear!</div> <div className=\"text-sys-secondary\">No pending alerts</div> </div> )} {!loading && alerts.length > 0 && ( <div className=\"space-y-2\"> {alerts.map((alert) => ( <div key={alert.id} className={`p-3 rounded-lg border ${getSeverityColor(alert.severity)}`} > <div className=\"flex items-start gap-3\"> <div className=\"flex-shrink-0 mt-0.5\"> {getSeverityIcon(alert.severity)} </div> <div className=\"flex-1 min-w-0\"> <div className=\"font-medium text-sys-primary mb-1\"> {alert.message} </div> <div className=\"flex items-center gap-2 text-sys-secondary\"> <span className=\"px-2 py-0.5 bg-sys-bg-white rounded\"> {alert.entity_type} </span> <span> {new Date(alert.created_at).toLocaleDateString()} </span> </div> </div> <button onClick={() => handleAcknowledge(alert.id)} className=\"flex-shrink-0 p-1 hover:bg-sys-bg-white rounded transition-colors\" title=\"Acknowledge\" > <X className=\"w-4 h-4 text-sys-tertiary hover:text-sys-secondary\" /> </button> </div> </div> ))} </div> )} </div> {/* Footer */} {alerts.length > 0 && ( <div className=\"px-4 py-2 border-t border-sys-tertiary/20 bg-sys-bg-tertiary text-sys-secondary text-center\"> Click X to acknowledge alerts </div> )} </div> </> )} </> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\CommandBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Search' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Truck' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ShoppingCart' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LayoutDashboard' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Plus' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":75},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'BarChart2' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":77,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":86},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Receipt' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":88,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":95},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":97,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":107},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Loader2' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":109,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":116},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":118,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":119},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'api' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'StatusBadge' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'open' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":83,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":87},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":89,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":96},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'search' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":124,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":130},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSearch' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":132,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":141},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'results' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":166,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":173},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setResults' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":175,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":185},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":226,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":233},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":235,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":245},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'selectedIndex' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":273,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":286},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setSelectedIndex' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":288,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":304},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'router' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":327,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":333},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'inputRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":355,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":363}],"suppressedMessages":[],"errorCount":29,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React, { useEffect, useState, useRef } from\"react\";\r\nimport { useRouter } from\"next/navigation\";\r\nimport { Search, FileText, Truck, ShoppingCart, LayoutDashboard, Plus, Box, BarChart2, Receipt, ArrowRight, Loader2, X,\r\n} from\"lucide-react\";\r\nimport { cn } from\"@/lib/utils\";\r\nimport { api, SearchResult } from\"@/lib/api\";\r\nimport { StatusBadge } from\"./StatusBadge\"; export function CommandBar() { const [open, setOpen] = useState(false); const [search, setSearch] = useState(\"\"); const [results, setResults] = useState<SearchResult[]>([]); const [loading, setLoading] = useState(false); const [selectedIndex, setSelectedIndex] = useState(0); const router = useRouter(); const inputRef = useRef<HTMLInputElement>(null); // Toggle on Cmd+K and handle global shortcuts useEffect(() => { const down = (e: KeyboardEvent) => { if (e.key ===\"k\" && (e.metaKey || e.ctrlKey)) { e.preventDefault(); setOpen((o) => !o); } if (e.key ===\"Escape\") setOpen(false); }; document.addEventListener(\"keydown\", down); return () => document.removeEventListener(\"keydown\", down); }, []); // Database Search useEffect(() => { if (!open) { setSearch(\"\"); setResults([]); return; } const performSearch = async () => { if (search.length < 2) { setResults([]); return; } setLoading(true); try { const data = await api.searchGlobal(search); setResults(data); setSelectedIndex(0); } catch (err) { setResults([]); } finally { setLoading(false); } }; const debounce = setTimeout(performSearch, 300); return () => clearTimeout(debounce); }, [search, open]); // Keyboard Navigation const handleKeyDown = (e: React.KeyboardEvent) => { const totalItems = results.length + navigationItems.length; if (e.key ===\"ArrowDown\") { e.preventDefault(); setSelectedIndex((prev) => (prev + 1) % totalItems); } else if (e.key ===\"ArrowUp\") { e.preventDefault(); setSelectedIndex((prev) => (prev - 1 + totalItems) % totalItems); } else if (e.key ===\"Enter\") { if (search.length >= 2) { if (selectedIndex < results.length) { handleResultClick(results[selectedIndex]); } else { handleNavigate(navigationItems[selectedIndex - results.length].path); } } else { handleNavigate(navigationItems[selectedIndex].path); } } }; const handleNavigate = (path: string) => { setOpen(false); router.push(path); }; const handleResultClick = (result: SearchResult) => { setOpen(false); if (result.type ===\"PO\") router.push(`/po/view?id=${result.number}`); else if (result.type ===\"DC\") router.push(`/dc/view?id=${result.number}`); else if (result.type ===\"Invoice\") router.push(`/invoice/view?id=${encodeURIComponent(result.number)}`); else if (result.type ===\"SRV\") router.push(`/reports?tab=reconciliation&search=${result.number}`); }; const navigationItems = [ { label:\"Dashboard\", path:\"/\", icon: LayoutDashboard }, { label:\"Purchase Orders\", path:\"/po\", icon: ShoppingCart }, { label:\"Delivery Challans\", path:\"/dc\", icon: Truck }, { label:\"Invoices\", path:\"/invoice\", icon: Receipt }, { label:\"Reports\", path:\"/reports\", icon: BarChart2 }, ]; if (!open) return null; return ( <div className=\"fixed inset-0 z-[100] flex items-start justify-center pt-[15vh] px-4\"> <div className=\"fixed inset-0 bg-sys-primary/40 backdrop-blur-sm transition-opacity\" onClick={() => setOpen(false)} /> <div className=\"relative w-full max-w-3xl bg-sys-bg-white/95 backdrop-blur-2xl rounded-3xl overflow-hidden shadow-[0_32px_64px_-16px_rgba(0,0,0,0.2)] border border-sys-bg-white/60 animate-in fade-in zoom-in-95 duration-200 ring-1 ring-sys-primary/5\"> {/* Header / Search Area */} <div className=\"flex items-center px-6 py-5 border-b border-sys-bg-tertiary\"> <Search className={cn(\"mr-4 h-6 w-6 transition-colors\", loading ?\"text-sys-brand animate-pulse\" :\"text-sys-tertiary\", )} /> <input ref={inputRef} autoFocus className=\"flex-1 bg-transparent font-medium text-sys-primary outline-none placeholder:text-sys-tertiary\" placeholder=\"Search POs, DCs, Invoices, Actions...\" value={search} onChange={(e) => setSearch(e.target.value)} onKeyDown={handleKeyDown} /> {loading ? ( <Loader2 className=\"h-5 w-5 text-sys-brand animate-spin\" /> ) : ( <div className=\"flex items-center gap-2\"> <kbd className=\"hidden sm:flex h-6 select-none items-center gap-1 rounded-lg border border-sys-tertiary/20 bg-sys-bg-tertiary px-2 font-mono text-[10px] font-bold text-sys-tertiary shadow-sm\"> ESC </kbd> </div> )} </div> {/* Scrollable Content */} <div className=\"max-h-[60vh] overflow-y-auto custom-scrollbar\"> {search.length >= 2 ? ( <div className=\"p-3\"> <div className=\"px-3 py-2 text-[10px] font-bold text-sys-tertiary uppercase tracking-[0.2em] mb-1\"> Database Matches </div> {results.length > 0 ? results.map((result, idx) => ( <button key={idx} onClick={() => handleResultClick(result)} onMouseEnter={() => setSelectedIndex(idx)} className={cn(\"w-full flex items-center justify-between p-3 rounded-2xl transition-all duration-200 text-left mb-1 group\", selectedIndex === idx ?\"bg-sys-brand text-sys-bg-white shadow-lg shadow-blue-200\" :\"hover:bg-sys-bg-tertiary text-sys-primary\", )} > <div className=\"flex items-center gap-4\"> <div className={cn(\"p-2.5 rounded-xl flex items-center justify-center transition-colors\", selectedIndex === idx ?\"bg-sys-bg-white/20 text-sys-bg-white\" :\"bg-sys-bg-tertiary text-sys-secondary group-hover:bg-sys-bg-white\", )} > {result.type ===\"PO\" ? ( <ShoppingCart size={18} /> ) : result.type ===\"DC\" ? ( <Truck size={18} /> ) : result.type ===\"Invoice\" ? ( <Receipt size={18} /> ) : result.type ===\"SRV\" ? ( <FileText size={18} /> ) : ( <Box size={18} /> )} </div> <div> <div className=\"font-bold tracking-tight\"> {result.number} </div> <div className={cn(\"text-[11px] font-medium opacity-70\", selectedIndex === idx ?\"text-sys-brand-subtle\" :\"text-sys-secondary\", )} > {result.type_label} •{\"\"} {result.party ||\"No Reference Data\"} </div> </div> </div> <div className=\"flex items-center gap-3 pr-2\"> {result.amount && ( <div className=\"font-mono font-bold tracking-tighter\"> ₹{result.amount.toLocaleString(\"en-IN\")} </div> )} <StatusBadge status={result.status ||\"Active\"} variant={ selectedIndex === idx ?\"neutral\" :\"success\" } className={cn(\"px-2 py-0.5 text-[9px]\", selectedIndex === idx &&\"bg-sys-bg-white/20 text-sys-bg-white border-transparent\", )} /> </div> </button> )) : !loading && ( <div className=\"py-12 text-center text-sys-tertiary\"> No results for\"{search}\" </div> )} </div> ) : ( <div className=\"p-3\"> <div className=\"px-3 py-2 text-[10px] font-bold text-sys-tertiary uppercase tracking-[0.2em] mb-1\"> Quick Navigation </div> <div className=\"grid grid-cols-2 gap-2\"> {navigationItems.map((item, idx) => ( <button key={idx} onClick={() => handleNavigate(item.path)} onMouseEnter={() => setSelectedIndex(idx)} className={cn(\"flex items-center gap-4 p-4 rounded-2xl border transition-all duration-200 text-left\", selectedIndex === idx ?\"bg-sys-primary text-sys-bg-white border-sys-primary shadow-xl\" :\"bg-sys-bg-white border-sys-bg-tertiary hover:border-sys-tertiary text-sys-secondary\", )} > <item.icon size={20} className={ selectedIndex === idx ?\"text-sys-brand-secondary\" :\"text-sys-tertiary\" } /> <span className=\"font-bold tracking-tight\"> {item.label} </span> </button> ))} </div> </div> )} </div> {/* Footer */} <div className=\"bg-sys-bg-tertiary/50 backdrop-blur-xl px-6 py-4 flex items-center justify-between border-t border-sys-bg-tertiary\"> <div className=\"flex items-center gap-6\"> <div className=\"flex items-center gap-1.5 font-bold text-[9px] text-sys-tertiary uppercase tracking-widest\"> <span className=\"p-1 px-1.5 bg-sys-bg-white border border-sys-tertiary/20 rounded text-sys-secondary\"> Enter </span> <span>to Select</span> </div> <div className=\"flex items-center gap-1.5 font-bold text-[9px] text-sys-tertiary uppercase tracking-widest\"> <span className=\"p-1 px-1.5 bg-sys-bg-white border border-sys-tertiary/20 rounded text-sys-secondary\"> Esc </span> <span>to Close</span> </div> </div> </div> </div> </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DataTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[474,477],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[474,477],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[608,611],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[608,611],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[757,760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[757,760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1731,1734],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1731,1734],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'no_borders' is assigned a value but never used. Allowed unused args must match /^_/u.","line":77,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":77,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'table_surface_solid' is assigned a value but never used. Allowed unused args must match /^_/u.","line":78,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":78,"endColumn":24},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":161,"column":56,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":161,"endColumn":105},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":163,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":163,"endColumn":77},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":172,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":172,"endColumn":95},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used. Allowed unused args must match /^_/u.","line":253,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":253,"endColumn":56},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":374,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":374,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19858,19861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19858,19861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useMemo, useCallback } from \"react\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { Checkbox } from \"../atoms/Checkbox\";\r\nimport { Body, SmallText, Accounting } from \"../atoms/Typography\";\r\nimport { ChevronLeft, ChevronRight, FileDown, Inbox } from \"lucide-react\";\r\nimport { TableRowSkeleton } from \"../atoms/Skeleton\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface Column<T = any> {\r\n    key: string;\r\n    label: string;\r\n    sortable?: boolean;\r\n    align?: \"left\" | \"center\" | \"right\";\r\n    render?: (value: any, row: T) => React.ReactNode;\r\n    width?: string;\r\n    isNumeric?: boolean;\r\n    isCurrency?: boolean;\r\n}\r\n\r\nexport interface DataTableProps<T = any> {\r\n    columns: Column<T>[];\r\n    data: T[];\r\n    keyField?: string;\r\n    page?: number;\r\n    pageSize?: number;\r\n    totalItems?: number;\r\n    onPageChange?: (page: number) => void;\r\n    renderSubRow?: (row: T) => React.ReactNode;\r\n    onRowExpand?: (row: T, isExpanded: boolean) => void;\r\n    onRowClick?: (row: T) => void;\r\n    density?: \"compact\" | \"normal\";\r\n    sortKey?: string;\r\n    sortDirection?: \"asc\" | \"desc\";\r\n    onSort?: (key: string) => void;\r\n    selectable?: boolean;\r\n    selectedRows?: string[];\r\n    onSelectionChange?: (selected: string[]) => void;\r\n    exportable?: boolean;\r\n    onExport?: () => void;\r\n    exportLabel?: string;\r\n    loading?: boolean;\r\n    error?: string;\r\n    emptyMessage?: string;\r\n    emptyIcon?: React.ReactNode;\r\n    className?: string;\r\n    no_borders?: boolean;\r\n    table_surface_solid?: boolean;\r\n    hideHeader?: boolean;\r\n    no_subrow_padding?: boolean;\r\n}\r\n\r\nconst DataTableComponent = <T extends Record<string, any>>({\r\n    columns,\r\n    data,\r\n    keyField = \"id\",\r\n    page,\r\n    pageSize = 10,\r\n    totalItems,\r\n    onPageChange,\r\n    sortKey,\r\n    sortDirection,\r\n    onSort,\r\n    selectable = false,\r\n    selectedRows = [],\r\n    onSelectionChange,\r\n    exportable = false,\r\n    onExport,\r\n    exportLabel = \"Export\",\r\n    loading = false,\r\n    error,\r\n    emptyMessage = \"No data available\",\r\n    emptyIcon,\r\n    className,\r\n    no_borders = true,\r\n    table_surface_solid = true,\r\n    renderSubRow,\r\n    onRowExpand,\r\n    onRowClick,\r\n    density = \"normal\",\r\n    hideHeader = false,\r\n    no_subrow_padding = false,\r\n}: DataTableProps<T>): React.ReactNode => {\r\n    const [internalSort, setInternalSort] = useState<{\r\n        key: string;\r\n        direction: \"asc\" | \"desc\";\r\n    } | null>(null);\r\n    const [internalPage, setInternalPage] = useState(1);\r\n    const [expandedRows, setExpandedRows] = useState<string[]>([]);\r\n\r\n    const currentPage = (page !== undefined) ? page : internalPage;\r\n    const currentSortKey = sortKey || internalSort?.key;\r\n    const currentSortDirection = sortDirection || internalSort?.direction;\r\n\r\n    const total = totalItems || (data ? data.length : 0);\r\n    const totalPages = Math.ceil(total / pageSize);\r\n    const startIndex = (currentPage - 1) * pageSize;\r\n    const endIndex = Math.min(startIndex + pageSize, total);\r\n\r\n    const processedData = useMemo(() => {\r\n        let result = data ? [...data] : [];\r\n        if (currentSortKey) {\r\n            result.sort((a, b) => {\r\n                const aVal = a[currentSortKey];\r\n                const bVal = b[currentSortKey];\r\n                if (aVal < bVal) return currentSortDirection === \"asc\" ? -1 : 1;\r\n                if (aVal > bVal) return currentSortDirection === \"asc\" ? 1 : -1;\r\n                return 0;\r\n            });\r\n        }\r\n        if (!totalItems || (data && totalItems === data.length)) {\r\n            result = result.slice(startIndex, endIndex);\r\n        }\r\n        return result;\r\n    }, [data, currentSortKey, currentSortDirection, startIndex, endIndex, totalItems]);\r\n\r\n    const handlePageChange = useCallback((newPage: number) => {\r\n        if (onPageChange) onPageChange(newPage);\r\n        else setInternalPage(newPage);\r\n    }, [onPageChange]);\r\n\r\n    const handleSort = useCallback((key: string) => {\r\n        if (onSort) onSort(key);\r\n        else {\r\n            setInternalSort((prev) => ({\r\n                key,\r\n                direction: prev?.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n            }));\r\n        }\r\n    }, [onSort]);\r\n\r\n    const handleSelectAll = useCallback((checked: boolean) => {\r\n        if (!onSelectionChange) return;\r\n        if (checked) onSelectionChange(processedData.map((row) => String(row[keyField])));\r\n        else onSelectionChange([]);\r\n    }, [onSelectionChange, processedData, keyField]);\r\n\r\n    const handleSelectRow = useCallback((rowKey: string, checked: boolean) => {\r\n        if (!onSelectionChange) return;\r\n        if (checked) onSelectionChange([...selectedRows, rowKey]);\r\n        else onSelectionChange(selectedRows.filter((key) => key !== rowKey));\r\n    }, [onSelectionChange, selectedRows]);\r\n\r\n    const toggleRowExpansion = useCallback((rowKey: string, row: T) => {\r\n        const isCurrentlyExpanded = expandedRows.includes(rowKey);\r\n        const willBeExpanded = !isCurrentlyExpanded;\r\n        setExpandedRows(prev => isCurrentlyExpanded ? prev.filter(k => k !== rowKey) : [...prev, rowKey]);\r\n        if (onRowExpand) onRowExpand(row, willBeExpanded);\r\n    }, [expandedRows, onRowExpand]);\r\n\r\n    const allSelected = selectable && processedData.length > 0 && processedData.every((row) => selectedRows.includes(String(row[keyField])));\r\n    const selectedCount = selectedRows.length;\r\n\r\n    if (!loading && !error && (!data || data.length === 0)) {\r\n        return (\r\n            <Card className={cn(\"p-12 text-center\", className)}>\r\n                <div className=\"flex flex-col items-center gap-4\">\r\n                    <div className=\"p-4 rounded-full bg-[var(--color-sys-bg-tertiary)]\">\r\n                        {emptyIcon || <Inbox size={32} className=\"text-[var(--color-sys-text-tertiary)]\" />}\r\n                    </div>\r\n                    <Body className=\"text-[var(--color-sys-text-secondary)]\">{emptyMessage}</Body>\r\n                </div>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Card className={cn(\"p-8 min-h-[140px] flex items-center justify-center\", className)}>\r\n                <Body className=\"text-[var(--color-sys-status-error)] flex items-center gap-2\">\r\n                    <Inbox className=\"opacity-50\" size={16} />\r\n                    {error}\r\n                </Body>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={cn(\"w-full\", className)}>\r\n            {(exportable || selectable) && (\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <div>\r\n                        {selectable && selectedCount > 0 && (\r\n                            <SmallText className=\"text-app-fg-muted\">\r\n                                {selectedCount} row{selectedCount !== 1 ? \"s\" : \"\"} selected\r\n                            </SmallText>\r\n                        )}\r\n                    </div>\r\n                    {exportable && onExport && (\r\n                        <Button variant=\"secondary\" size=\"sm\" onClick={onExport}>\r\n                            <FileDown size={16} />\r\n                            {exportLabel}\r\n                        </Button>\r\n                    )}\r\n                </div>\r\n            )}\r\n            <div className=\"surface-card\">\r\n                <div className=\"overflow-x-auto hover-scrollbar\" style={{ minHeight: \"300px\" }}>\r\n                    <table className=\"w-full border-collapse\">\r\n                        {!hideHeader && (\r\n                            <thead>\r\n                                <tr className=\"border-b border-[var(--border-subtle)] bg-[var(--bg-surface-elevated)]\">\r\n                                    {renderSubRow && <th className=\"w-10 sticky top-0 z-10 bg-[var(--bg-surface-elevated)]\"></th>}\r\n                                    {selectable && (\r\n                                        <th className={cn(\"px-6 w-12 sticky top-0 z-10 bg-[var(--bg-surface-elevated)]\", density === \"compact\" ? \"h-[40px]\" : \"h-12\")}>\r\n                                            <Checkbox checked={allSelected} onChange={(e) => handleSelectAll(e.target.checked)} aria-label=\"Select all rows\" />\r\n                                        </th>\r\n                                    )}\r\n                                    {columns.map((column) => (\r\n                                        <th\r\n                                            key={column.key}\r\n                                            className={cn(\r\n                                                \"sticky top-0 z-10 py-3 px-6 text-[11px] font-bold font-heading text-app-fg-muted uppercase tracking-wider transition-colors bg-[var(--bg-surface-elevated)]\",\r\n                                                (column.isNumeric || column.isCurrency) ? \"text-right\" :\r\n                                                    column.align === \"right\" ? \"text-right\" :\r\n                                                        column.align === \"center\" ? \"text-center\" : \"text-left\",\r\n                                                column.sortable && (currentSortKey === column.key ?\r\n                                                    \"text-app-accent\" :\r\n                                                    \"hover:bg-[var(--bg-overlay)] cursor-pointer\")\r\n                                            )}\r\n                                            style={{ width: column.width }}\r\n                                            onClick={column.sortable ? () => handleSort(column.key) : undefined}\r\n                                        >\r\n                                            {column.sortable ? (\r\n                                                <div className={cn(\"flex items-center gap-1\", column.align === 'right' && \"justify-end\", column.align === 'center' && \"justify-center\")}>\r\n                                                    {column.label}\r\n                                                    <span className=\"opacity-40\">{currentSortKey === column.key ? (currentSortDirection === \"asc\" ? \"↑\" : \"↓\") : \"↕\"}</span>\r\n                                                </div>\r\n                                            ) : column.label}\r\n                                        </th>\r\n                                    ))}\r\n                                </tr>\r\n                            </thead>\r\n                        )}\r\n                        <tbody className=\"bg-transparent\">\r\n                            {loading ? Array.from({ length: pageSize }).map((_, i) => (\r\n                                <tr key={`skeleton-${i}`}>\r\n                                    <td colSpan={columns.length + (selectable ? 1 : 0) + (renderSubRow ? 1 : 0)}>\r\n                                        <TableRowSkeleton columns={columns.length} />\r\n                                    </td>\r\n                                </tr>\r\n                            )) : processedData.map((row, index) => {\r\n                                const rowKey = (row[keyField] !== undefined && row[keyField] !== null)\r\n                                    ? String(row[keyField])\r\n                                    : `row-${index}`;\r\n                                const isSelected = selectedRows.includes(rowKey);\r\n                                const isExpanded = expandedRows.includes(rowKey);\r\n                                return (\r\n                                    <React.Fragment key={rowKey}>\r\n                                        <tr\r\n                                            onClick={(e) => {\r\n                                                if (onRowClick) {\r\n                                                    onRowClick(row);\r\n                                                }\r\n                                            }}\r\n                                            className={cn(\r\n                                                \"group border-b border-[var(--border-subtle)] transition-all duration-150\",\r\n                                                processedData.indexOf(row) % 2 === 0 ? \"bg-transparent\" : \"bg-app-surface-hover/30\",\r\n                                                isSelected && \"bg-app-accent/5\",\r\n                                                isExpanded && \"bg-app-accent/10\",\r\n                                                \"hover:bg-blue-50/50 dark:hover:bg-white/5\",\r\n                                                onRowClick && \"cursor-pointer\"\r\n                                            )}>\r\n                                            {renderSubRow && (\r\n                                                <td className=\"w-10 px-0 pl-4\">\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"sm\"\r\n                                                        onClick={() => toggleRowExpansion(rowKey, row)}\r\n                                                        className=\"w-6 h-6 p-0 text-app-fg-muted hover:text-app-accent\"\r\n                                                    >\r\n                                                        <ChevronRight\r\n                                                            size={16}\r\n                                                            className={cn(\"transition-transform duration-200\", isExpanded && \"rotate-90\")}\r\n                                                        />\r\n                                                    </Button>\r\n                                                </td>\r\n                                            )}\r\n                                            {selectable && (\r\n                                                <td className=\"px-6 py-3\">\r\n                                                    <Checkbox checked={isSelected} onChange={(e) => handleSelectRow(rowKey, e.target.checked)} aria-label={`Select row`} />\r\n                                                </td>\r\n                                            )}\r\n                                            {columns.map((column) => (\r\n                                                <td\r\n                                                    key={column.key}\r\n                                                    className={cn(\r\n                                                        \"px-6 py-3\",\r\n                                                        density === \"compact\" ? \"h-[44px]\" : \"h-14\",\r\n                                                        \"align-middle text-[13px] font-medium font-sans\",\r\n                                                        (column.isNumeric || column.isCurrency) ? \"text-right table-cell-number\" :\r\n                                                            typeof column.render === \"function\" ?\r\n                                                                (column.align === \"right\" ? \"text-right\" :\r\n                                                                    column.align === \"center\" ? \"text-center\" : \"text-left\") :\r\n                                                                \"table-cell-text\",\r\n                                                        column.align === \"right\" ? \"text-right\" :\r\n                                                            column.align === \"center\" ? \"text-center\" : \"text-left\"\r\n                                                    )}\r\n                                                >\r\n                                                    {column.render ? (column.render(row[column.key], row)) :\r\n                                                        column.isNumeric || column.isCurrency ? (\r\n                                                            <Accounting isCurrency={column.isCurrency}>{row[column.key]}</Accounting>\r\n                                                        ) : row[column.key]}\r\n                                                </td>\r\n                                            ))}\r\n                                        </tr>\r\n                                        {renderSubRow && isExpanded && (\r\n                                            <tr className=\"bg-app-accent/5 border-b border-[var(--border-subtle)]\">\r\n                                                <td colSpan={columns.length + (selectable ? 1 : 0) + 1} className=\"p-0\">\r\n                                                    <div className={cn(!no_subrow_padding && \"p-6 pl-12\")}>\r\n                                                        {renderSubRow(row)}\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        )}\r\n                                    </React.Fragment>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                {totalPages > 1 && (\r\n                    <div className=\"flex items-center justify-between px-6 py-4 bg-app-surface-hover/20 border-t border-[var(--border-subtle)]\">\r\n                        <SmallText className=\"text-app-fg-muted\">\r\n                            Showing {startIndex + 1} to {endIndex} of {total} results\r\n                        </SmallText>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => handlePageChange(currentPage - 1)}\r\n                                disabled={currentPage === 1}\r\n                            >\r\n                                <ChevronLeft size={16} /> Previous\r\n                            </Button>\r\n                            <div className=\"flex items-center gap-1\">\r\n                                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                                    let pageNum: number;\r\n                                    if (totalPages <= 5) pageNum = i + 1;\r\n                                    else if (currentPage <= 3) pageNum = i + 1;\r\n                                    else if (currentPage >= totalPages - 2) pageNum = totalPages - 4 + i;\r\n                                    else pageNum = currentPage - 2 + i;\r\n                                    return (\r\n                                        <Button\r\n                                            key={pageNum}\r\n                                            variant={currentPage === pageNum ? \"primary\" : \"ghost\"}\r\n                                            size=\"sm\"\r\n                                            onClick={() => handlePageChange(pageNum)}\r\n                                            className=\"w-8 h-8 p-0\"\r\n                                        >\r\n                                            {pageNum}\r\n                                        </Button>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"sm\"\r\n                                onClick={() => handlePageChange(currentPage + 1)}\r\n                                disabled={currentPage === totalPages}\r\n                            >\r\n                                Next <ChevronRight size={16} />\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const DataTable = React.memo(DataTableComponent) as unknown as <T extends Record<string, any>>(props: DataTableProps<T>) => React.ReactNode;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DocumentActions.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":66}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Save, X, Edit2, Trash2, Plus, FileDown } from \"lucide-react\";\r\n\r\nexport interface DocumentActionsProps {\r\n    mode: \"view\" | \"edit\";\r\n    onEdit?: () => void;\r\n    onSave?: () => void;\r\n    onCancel?: () => void;\r\n    onDelete?: () => void;\r\n    onDownload?: () => void;\r\n    onCreate?: () => void;\r\n    isSaving?: boolean;\r\n    isDeleting?: boolean;\r\n    canDelete?: boolean;\r\n    customActions?: React.ReactNode;\r\n}\r\n\r\nexport function DocumentActions({\r\n    mode,\r\n    onEdit,\r\n    onSave,\r\n    onCancel,\r\n    onDelete,\r\n    onDownload,\r\n    onCreate,\r\n    isSaving = false,\r\n    isDeleting = false,\r\n    canDelete = true,\r\n    customActions,\r\n}: DocumentActionsProps) {\r\n    if (mode === \"edit\") {\r\n        return (\r\n            <div className=\"flex gap-3\">\r\n                {onCancel && (\r\n                    <Button variant=\"ghost\" size=\"sm\" onClick={onCancel} disabled={isSaving}>\r\n                        <X size={16} /> Cancel\r\n                    </Button>\r\n                )}\r\n                {onSave && (\r\n                    <Button variant=\"default\" size=\"sm\" onClick={onSave} disabled={isSaving}>\r\n                        <Save size={16} /> {isSaving ? \"Saving...\" : \"Save\"}\r\n                    </Button>\r\n                )}\r\n                {customActions}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex gap-3\">\r\n            {onDownload && (\r\n                <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={onDownload}\r\n                    className=\"text-emerald-700 border-emerald-200 bg-emerald-50 hover:bg-emerald-100\"\r\n                >\r\n                    <FileDown size={16} /> Excel\r\n                </Button>\r\n            )}\r\n            {onCreate && (\r\n                <Button variant=\"secondary\" size=\"sm\" onClick={onCreate}>\r\n                    <Plus size={16} /> Create\r\n                </Button>\r\n            )}\r\n            {onEdit && (\r\n                <Button variant=\"default\" size=\"sm\" onClick={onEdit}>\r\n                    <Edit2 size={16} /> Edit\r\n                </Button>\r\n            )}\r\n            {onDelete && canDelete && (\r\n                <Button variant=\"destructive\" size=\"sm\" onClick={onDelete} disabled={isDeleting}>\r\n                    <Trash2 size={16} /> {isDeleting ? \"Deleting...\" : \"Delete\"}\r\n                </Button>\r\n            )}\r\n            {customActions}\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DocumentTrace.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":71,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":71,"endColumn":62},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":72,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":72,"endColumn":67},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":97,"column":47,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":97,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":109,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":109,"endColumn":50}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { H3, Body, SmallText } from \"../atoms/Typography\";\r\nimport { Badge } from \"../atoms/Badge\";\r\nimport { ArrowRight, FileText, Truck, Receipt } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * DocumentTrace Organism - Atomic Design System v1.0\r\n * Shows PO → DC → Invoice linkage hierarchy\r\n * Must display real document numbers and statuses\r\n */\r\n\r\nexport interface DocumentNode {\r\n    type: \"po\" | \"dc\" | \"invoice\";\r\n    number: string;\r\n    date: string;\r\n    status: \"pending\" | \"completed\" | \"active\";\r\n    link?: string;\r\n}\r\n\r\nexport interface DocumentTraceProps {\r\n    documents: DocumentNode[];\r\n    className?: string;\r\n}\r\n\r\nconst documentConfig = {\r\n    po: {\r\n        icon: FileText,\r\n        label: \"Purchase Order\",\r\n        color: \"text-[#1A3D7C]\",\r\n        bgColor: \"bg-[#1A3D7C]/10\",\r\n    },\r\n    dc: {\r\n        icon: Truck,\r\n        label: \"Delivery Challan\",\r\n        color: \"text-[#2BB7A0]\",\r\n        bgColor: \"bg-[#2BB7A0]/10\",\r\n    },\r\n    invoice: {\r\n        icon: Receipt,\r\n        label: \"GST Invoice\",\r\n        color: \"text-[#F59E0B]\",\r\n        bgColor: \"bg-[#F59E0B]/10\",\r\n    },\r\n};\r\n\r\nconst DocumentNodeComponent: React.FC<{ node: DocumentNode; isLast: boolean }> = ({\r\n    node,\r\n    isLast,\r\n}) => {\r\n    const config = documentConfig[node.type];\r\n    const Icon = config.icon;\r\n\r\n    const content = (\r\n        <div\r\n            className={cn(\r\n                \"flex items-center gap-3 p-4 rounded-lg border-2 transition-all\",\r\n                node.link\r\n                    ? \"cursor-pointer hover:border-[#1A3D7C] hover:shadow-md\"\r\n                    : \"border-[#E5E7EB]\"\r\n            )}\r\n        >\r\n            <div className={cn(\"p-2 rounded\", config.bgColor)}>\r\n                <Icon size={20} className={config.color} />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n                <SmallText className=\"uppercase mb-0.5\">{config.label}</SmallText>\r\n                <div className=\"font-semibold text-[#111827]\">{node.number}</div>\r\n                <div className=\"text-[12px] text-[#6B7280] mt-0.5\">{node.date}</div>\r\n            </div>\r\n            <Badge\r\n                variant={\r\n                    node.status === \"completed\"\r\n                        ? \"success\"\r\n                        : node.status === \"active\"\r\n                            ? \"default\"\r\n                            : \"warning\"\r\n                }\r\n            >\r\n                {node.status}\r\n            </Badge>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"flex items-center gap-4\">\r\n            {node.link ? (\r\n                <a href={node.link} className=\"flex-1\">\r\n                    {content}\r\n                </a>\r\n            ) : (\r\n                <div className=\"flex-1\">{content}</div>\r\n            )}\r\n            {!isLast && <ArrowRight size={20} className=\"text-[#9CA3AF] shrink-0\" />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const DocumentTrace: React.FC<DocumentTraceProps> = ({\r\n    documents,\r\n    className,\r\n}) => {\r\n    return (\r\n        <Card className={cn(\"p-6\", className)}>\r\n            <H3 className=\"mb-4\">Document Traceability</H3>\r\n            <Body className=\"text-[#6B7280] mb-6\">\r\n                Track the complete document flow from purchase order to invoice\r\n            </Body>\r\n            <div className=\"flex items-center gap-4 overflow-x-auto pb-2\">\r\n                {documents.map((doc, index) => (\r\n                    <DocumentNodeComponent\r\n                        key={index}\r\n                        node={doc}\r\n                        isLast={index === documents.length - 1}\r\n                    />\r\n                ))}\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\GlobalCommandPalette.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[668,671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[668,671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":137,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":137,"endColumn":27},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":249,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":249,"endColumn":159},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":253,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":253,"endColumn":201},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":292,"column":67,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":292,"endColumn":179},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":310,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":310,"endColumn":180}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, useRef, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n    Search,\r\n    Loader2,\r\n    FileText,\r\n    Truck,\r\n    Receipt,\r\n    Package,\r\n    LayoutDashboard,\r\n    Settings,\r\n    PlusCircle,\r\n    X,\r\n} from \"lucide-react\";\r\nimport { api, SearchResult } from \"@/lib/api\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Card } from \"../atoms/Card\";\r\n\r\ntype NavItem = {\r\n    type: \"NAV\";\r\n    id: string;\r\n    label: string;\r\n    subLabel?: string;\r\n    keywords: string[];\r\n    icon: any;\r\n    path: string;\r\n};\r\n\r\ntype GlobalItem = SearchResult | NavItem;\r\n\r\nconst NAV_COMMANDS: NavItem[] = [\r\n    {\r\n        type: \"NAV\",\r\n        id: \"nav-new-inv\",\r\n        label: \"Create New Invoice\",\r\n        subLabel: \"Go to invoice creation\",\r\n        keywords: [\"invoice\", \"new\", \"create\", \"bill\"],\r\n        icon: PlusCircle,\r\n        path: \"/invoice/create\",\r\n    },\r\n    {\r\n        type: \"NAV\",\r\n        id: \"nav-dashboard\",\r\n        label: \"Dashboard\",\r\n        subLabel: \"View overview & stats\",\r\n        keywords: [\"home\", \"main\", \"stats\"],\r\n        icon: LayoutDashboard,\r\n        path: \"/\",\r\n    },\r\n    {\r\n        type: \"NAV\",\r\n        id: \"nav-pos\",\r\n        label: \"Purchase Orders\",\r\n        subLabel: \"View all POs\",\r\n        keywords: [\"po\", \"order\", \"purchase\"],\r\n        icon: Package,\r\n        path: \"/po\",\r\n    },\r\n    {\r\n        type: \"NAV\",\r\n        id: \"nav-settings\",\r\n        label: \"Settings\",\r\n        subLabel: \"App configuration\",\r\n        keywords: [\"config\", \"admin\"],\r\n        icon: Settings,\r\n        path: \"/settings\",\r\n    },\r\n];\r\n\r\nexport const GlobalCommandPalette = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [query, setQuery] = useState(\"\");\r\n    const [results, setResults] = useState<SearchResult[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    const router = useRouter();\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n        return () => setMounted(false);\r\n    }, []);\r\n\r\n    // Toggle listener\r\n    useEffect(() => {\r\n        const onKeyDown = (e: KeyboardEvent) => {\r\n            if ((e.key === \"k\" && (e.metaKey || e.ctrlKey)) || e.key === \"/\") {\r\n                if (e.key === \"/\") {\r\n                    // Prevent search input from typing '/'\r\n                    if (document.activeElement?.tagName !== \"INPUT\" && document.activeElement?.tagName !== \"TEXTAREA\") {\r\n                        e.preventDefault();\r\n                        setIsOpen((open) => !open);\r\n                    }\r\n                } else {\r\n                    e.preventDefault();\r\n                    setIsOpen((open) => !open);\r\n                }\r\n            }\r\n        };\r\n\r\n        const onCustomOpen = () => setIsOpen(true);\r\n\r\n        document.addEventListener(\"keydown\", onKeyDown);\r\n        document.addEventListener(\"open-command-palette\", onCustomOpen);\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", onKeyDown);\r\n            document.removeEventListener(\"open-command-palette\", onCustomOpen);\r\n        };\r\n    }, []);\r\n\r\n    // Focus input on open\r\n    useEffect(() => {\r\n        if (isOpen && inputRef.current) {\r\n            // Tiny delay to allow animation mount\r\n            setTimeout(() => inputRef.current?.focus(), 100);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // Search Logic\r\n    useEffect(() => {\r\n        if (query.trim().length === 0) {\r\n            setResults([]);\r\n            return;\r\n        }\r\n\r\n        const search = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const data = await api.searchGlobal(query);\r\n                setResults(data);\r\n            } catch (error) {\r\n                setResults([]);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const debounce = setTimeout(search, 300);\r\n        return () => clearTimeout(debounce);\r\n    }, [query]);\r\n\r\n    const filteredNavItems = useMemo(() => {\r\n        if (!query) return NAV_COMMANDS; // Show default navs on empty query? Or maybe just some. \r\n        // Showing all NAV_COMMANDS when empty is good for discovery.\r\n        const q = query.toLowerCase();\r\n        return NAV_COMMANDS.filter(\r\n            (cmd) =>\r\n                cmd.label.toLowerCase().includes(q) ||\r\n                cmd.keywords.some((k) => k.toLowerCase().includes(q))\r\n        );\r\n    }, [query]);\r\n\r\n    const allItems = useMemo<GlobalItem[]>(() => {\r\n        // When query is empty, show Nav items.\r\n        // When query exists, show merged.\r\n        const raw = [...filteredNavItems, ...results];\r\n        const seen = new Set<string>();\r\n        return raw.filter((item) => {\r\n            const key = `${item.type}-${item.id}`;\r\n            if (seen.has(key)) return false;\r\n            seen.add(key);\r\n            return true;\r\n        });\r\n    }, [filteredNavItems, results]);\r\n\r\n    useEffect(() => {\r\n        setSelectedIndex(0);\r\n    }, [allItems.length]);\r\n\r\n    const handleItemSelect = (item: GlobalItem) => {\r\n        setIsOpen(false);\r\n        setQuery(\"\");\r\n        if (item.type === \"NAV\") {\r\n            router.push(item.path);\r\n        } else {\r\n            if (item.type === \"PO\") router.push(`/po/${item.number}`);\r\n            else if (item.type === \"DC\") router.push(`/dc/${item.number}`);\r\n            else if (item.type === \"Invoice\")\r\n                router.push(`/invoice/${encodeURIComponent(item.number)}`);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === \"ArrowDown\") {\r\n            e.preventDefault();\r\n            setSelectedIndex((prev) => (prev + 1) % allItems.length);\r\n        } else if (e.key === \"ArrowUp\") {\r\n            e.preventDefault();\r\n            setSelectedIndex(\r\n                (prev) => (prev - 1 + allItems.length) % allItems.length\r\n            );\r\n        } else if (e.key === \"Enter\" && allItems[selectedIndex]) {\r\n            e.preventDefault();\r\n            handleItemSelect(allItems[selectedIndex]);\r\n        } else if (e.key === \"Escape\") {\r\n            setIsOpen(false);\r\n        }\r\n    };\r\n\r\n    const renderIcon = (item: GlobalItem) => {\r\n        const className = \"w-4 h-4\";\r\n        if (item.type === \"NAV\") {\r\n            const Icon = item.icon;\r\n            return <Icon className={className} />;\r\n        }\r\n        if (item.type === \"PO\") return <Package className={className} />;\r\n        if (item.type === \"DC\") return <Truck className={className} />;\r\n        if (item.type === \"Invoice\") return <Receipt className={className} />;\r\n        return <FileText className={className} />;\r\n    };\r\n\r\n    if (!mounted) return null;\r\n\r\n    return createPortal(\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        transition={{ duration: 0.15 }}\r\n                        className=\"fixed inset-0 bg-sys-primary/20 backdrop-blur-[2px] z-[100]\" // Light dimming\r\n                        onClick={() => setIsOpen(false)}\r\n                    />\r\n                    <div className=\"fixed inset-0 z-[101] flex items-start justify-center pt-[15vh] pointer-events-none\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.95, y: -20 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.95, y: -20 }}\r\n                            transition={{ duration: 0.2, type: \"spring\", damping: 25, stiffness: 300 }}\r\n                            className=\"w-full max-w-2xl px-4 pointer-events-auto\"\r\n                        >\r\n                            <Card className=\"flex flex-col overflow-hidden shadow-2xl border-sys-bg-tertiary/50 bg-white/95 backdrop-blur-xl ring-1 ring-black/5\">\r\n                                <div className=\"flex items-center px-4 py-3 border-b border-sys-bg-tertiary/50\">\r\n                                    <Search className=\"w-5 h-5 text-sys-tertiary mr-3\" />\r\n                                    <input\r\n                                        ref={inputRef}\r\n                                        value={query}\r\n                                        onChange={(e) => setQuery(e.target.value)}\r\n                                        onKeyDown={handleKeyDown}\r\n                                        placeholder=\"Type a command or search...\"\r\n                                        className=\"flex-1 bg-transparent border-none outline-none text-[16px] text-sys-primary placeholder:text-sys-secondary\"\r\n                                    />\r\n                                    {loading && <Loader2 className=\"w-4 h-4 animate-spin text-sys-tertiary ml-2\" />}\r\n                                    <div className=\"flex items-center gap-2 ml-4\">\r\n                                        <kbd className=\"hidden sm:inline-flex h-5 items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100\">\r\n                                            <span className=\"text-xs\">ESC</span>\r\n                                        </kbd>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"max-h-[300px] overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-sys-tertiary/20\">\r\n                                    {allItems.length === 0 ? (\r\n                                        <div className=\"py-6 text-center text-sys-tertiary\">\r\n                                            <p className=\"text-sm\">No results found.</p>\r\n                                        </div>\r\n                                    ) : (\r\n                                        allItems.map((item, idx) => (\r\n                                            <button\r\n                                                key={`${item.type}-${item.id}`}\r\n                                                onClick={() => handleItemSelect(item)}\r\n                                                onMouseEnter={() => setSelectedIndex(idx)}\r\n                                                className={cn(\r\n                                                    \"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-colors duration-100\",\r\n                                                    selectedIndex === idx\r\n                                                        ? \"bg-sys-brand-primary/10 text-sys-primary\"\r\n                                                        : \"text-sys-secondary hover:bg-sys-bg-tertiary\"\r\n                                                )}\r\n                                            >\r\n                                                <div\r\n                                                    className={cn(\r\n                                                        \"flex h-8 w-8 items-center justify-center rounded-md border shadow-sm\",\r\n                                                        selectedIndex === idx\r\n                                                            ? \"bg-white border-sys-brand-primary/20 text-sys-brand-primary\"\r\n                                                            : \"bg-sys-bg-white border-sys-bg-tertiary text-sys-tertiary\"\r\n                                                    )}\r\n                                                >\r\n                                                    {renderIcon(item)}\r\n                                                </div>\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <span className={cn(\"text-sm font-medium\", selectedIndex === idx ? \"text-sys-brand-primary\" : \"\")}>\r\n                                                            {item.type === \"NAV\" ? item.label : item.number}\r\n                                                        </span>\r\n                                                        {item.type !== \"NAV\" && (\r\n                                                            <span className=\"text-[10px] uppercase tracking-wider text-sys-tertiary border border-sys-bg-tertiary px-1 rounded-sm\">\r\n                                                                {item.type}\r\n                                                            </span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"text-xs text-sys-tertiary truncate\">\r\n                                                        {item.type === \"NAV\" ? item.subLabel : item.party}\r\n                                                    </div>\r\n                                                </div>\r\n                                                {selectedIndex === idx && (\r\n                                                    <div className=\"text-xs text-sys-tertiary/50\">\r\n                                                        Jump to\r\n                                                    </div>\r\n                                                )}\r\n                                            </button>\r\n                                        ))\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"px-4 py-2 bg-sys-bg-tertiary/30 border-t border-sys-bg-tertiary/50 flex items-center justify-between text-[10px] text-sys-tertiary\">\r\n                                    <div className=\"flex gap-2\">\r\n                                        <span>Protip: Press <kbd className=\"font-bold\">Ctrl K</kbd> anywhere</span>\r\n                                    </div>\r\n                                    <div>SenstoSales Search</div>\r\n                                </div>\r\n                            </Card>\r\n                        </motion.div>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>,\r\n        document.body\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\GlobalSearch.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'History' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CreditCard' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChevronRight' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[679,682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[679,682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'clearRecents' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":123,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":123,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is defined but never used.","line":139,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":139,"endColumn":21},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":315,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":315,"endColumn":86},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":318,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":318,"endColumn":80},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":325,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":325,"endColumn":126},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":335,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":335,"endColumn":208},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":353,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":353,"endColumn":177},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":422,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":422,"endColumn":81},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":459,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":459,"endColumn":60},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":485,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":485,"endColumn":115},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":493,"column":12,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":493,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":557,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":557,"endColumn":77},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":562,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":562,"endColumn":98}],"suppressedMessages":[],"errorCount":18,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport {\r\n  Search,\r\n  Loader2,\r\n  FileText,\r\n  Truck,\r\n  Receipt,\r\n  Package,\r\n  ArrowRight,\r\n  X,\r\n  History,\r\n  Trash2,\r\n  Settings,\r\n  PlusCircle,\r\n  LayoutDashboard,\r\n  Calendar,\r\n  CreditCard,\r\n  ChevronRight,\r\n} from \"lucide-react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { api, SearchResult } from \"@/lib/api\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { StatusBadge } from \"./StatusBadge\";\r\n\r\n// --- Types ---\r\ntype NavItem = {\r\n  type: \"NAV\";\r\n  id: string;\r\n  label: string;\r\n  subLabel?: string;\r\n  keywords: string[];\r\n  icon: any;\r\n  path: string;\r\n};\r\n\r\ntype GlobalItem = SearchResult | NavItem;\r\n\r\n// --- Static Navigation Commands ---\r\nconst NAV_COMMANDS: NavItem[] = [\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-new-inv\",\r\n    label: \"Create New Invoice\",\r\n    subLabel: \"Go to invoice creation\",\r\n    keywords: [\"invoice\", \"new\", \"create\", \"bill\"],\r\n    icon: PlusCircle,\r\n    path: \"/invoice/create\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-dashboard\",\r\n    label: \"Dashboard\",\r\n    subLabel: \"View overview & stats\",\r\n    keywords: [\"home\", \"main\", \"stats\"],\r\n    icon: LayoutDashboard,\r\n    path: \"/dashboard\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-pos\",\r\n    label: \"Purchase Orders\",\r\n    subLabel: \"View all POs\",\r\n    keywords: [\"po\", \"order\", \"purchase\"],\r\n    icon: Package,\r\n    path: \"/po\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-invs\",\r\n    label: \"All Invoices\",\r\n    subLabel: \"View invoice register\",\r\n    keywords: [\"bill\", \"history\"],\r\n    icon: Receipt,\r\n    path: \"/invoice\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-settings\",\r\n    label: \"Settings\",\r\n    subLabel: \"App configuration\",\r\n    keywords: [\"config\", \"admin\"],\r\n    icon: Settings,\r\n    path: \"/settings\",\r\n  },\r\n];\r\n\r\nexport default function GlobalSearch() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [results, setResults] = useState<SearchResult[]>([]);\r\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n\r\n  const router = useRouter();\r\n  const searchRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const listRef = useRef<HTMLDivElement>(null);\r\n  const portalRef = useRef<HTMLDivElement>(null);\r\n\r\n  // --- Logic: Load/Save Recents ---\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(\"senstosales-recent-searches\");\r\n    if (saved) setRecentSearches(JSON.parse(saved));\r\n  }, []);\r\n\r\n  const saveRecentSearch = (term: string) => {\r\n    if (!term) return;\r\n    const newRecents = [\r\n      term,\r\n      ...recentSearches.filter((r) => r !== term),\r\n    ].slice(0, 5);\r\n    setRecentSearches(newRecents);\r\n    localStorage.setItem(\r\n      \"senstosales-recent-searches\",\r\n      JSON.stringify(newRecents),\r\n    );\r\n  };\r\n\r\n  const clearRecents = () => {\r\n    setRecentSearches([]);\r\n    localStorage.removeItem(\"senstosales-recent-searches\");\r\n  };\r\n\r\n  // --- Logic: Search ---\r\n  useEffect(() => {\r\n    if (query.trim().length === 0) {\r\n      setResults([]);\r\n      return;\r\n    }\r\n    const search = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const data = await api.searchGlobal(query);\r\n        setResults(data);\r\n      } catch (error) {\r\n        setResults([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    const debounce = setTimeout(search, 300);\r\n    return () => clearTimeout(debounce);\r\n  }, [query]);\r\n\r\n  // --- Logic: Combined Items (Nav + Data) ---\r\n  const filteredNavItems = useMemo(() => {\r\n    if (!query) return [];\r\n    const q = query.toLowerCase();\r\n    return NAV_COMMANDS.filter(\r\n      (cmd) =>\r\n        cmd.label.toLowerCase().includes(q) ||\r\n        cmd.keywords.some((k) => k.includes(q)),\r\n    );\r\n  }, [query]);\r\n\r\n  const allItems = useMemo<GlobalItem[]>(() => {\r\n    const raw = [...filteredNavItems, ...results];\r\n    const seen = new Set<string>();\r\n    return raw.filter((item) => {\r\n      const key = `${item.type}-${item.id}`;\r\n      if (seen.has(key)) return false;\r\n      seen.add(key);\r\n      return true;\r\n    });\r\n  }, [filteredNavItems, results]);\r\n\r\n  // Reset selected index when items change\r\n  useEffect(() => {\r\n    setSelectedIndex(0);\r\n  }, [allItems.length]);\r\n\r\n  // --- Scroll to Active Item ---\r\n  useEffect(() => {\r\n    if (listRef.current) {\r\n      const activeEl = listRef.current.children[selectedIndex] as HTMLElement;\r\n      if (activeEl) {\r\n        activeEl.scrollIntoView({ block: \"nearest\", behavior: \"smooth\" });\r\n      }\r\n    }\r\n  }, [selectedIndex]);\r\n\r\n  // --- Logic: Handlers ---\r\n  const handleItemSelect = (item: GlobalItem) => {\r\n    setIsOpen(false);\r\n    setQuery(\"\");\r\n\r\n    if (item.type === \"NAV\") {\r\n      router.push(item.path);\r\n    } else {\r\n      // Search Result\r\n      saveRecentSearch(query);\r\n      if (item.type === \"PO\") router.push(`/po/${item.number}`);\r\n      else if (item.type === \"DC\") router.push(`/dc/${item.number}`);\r\n      else if (item.type === \"Invoice\")\r\n        router.push(`/invoice/${encodeURIComponent(item.number)}`);\r\n      else if (item.type === \"SRV\")\r\n        router.push(`/reports?tab=reconciliation&search=${item.number}`);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) => (prev + 1) % allItems.length);\r\n    } else if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setSelectedIndex(\r\n        (prev) => (prev - 1 + allItems.length) % allItems.length,\r\n      );\r\n    } else if (e.key === \"Enter\" && allItems[selectedIndex]) {\r\n      e.preventDefault();\r\n      handleItemSelect(allItems[selectedIndex]);\r\n    } else if (e.key === \"Escape\") {\r\n      setIsOpen(false);\r\n      inputRef.current?.blur();\r\n    }\r\n  };\r\n\r\n  // --- Global Ctrl+K ---\r\n  useEffect(() => {\r\n    const handleGlobalK = (e: KeyboardEvent) => {\r\n      if (e.key.toLowerCase() === \"k\" && (e.ctrlKey || e.metaKey)) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        inputRef.current?.focus();\r\n        setIsOpen(true);\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", handleGlobalK);\r\n    return () => document.removeEventListener(\"keydown\", handleGlobalK);\r\n  }, []);\r\n\r\n  // --- Click Outside ---\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    return () => setMounted(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const clickedMain = searchRef.current?.contains(e.target as Node);\r\n      const clickedPortal = portalRef.current?.contains(e.target as Node);\r\n      if (!clickedMain && !clickedPortal) setIsOpen(false);\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // --- Calculate Portal Position ---\r\n  const [position, setPosition] = useState<{\r\n    top: number;\r\n    left: number;\r\n    width: number;\r\n  } | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && searchRef.current) {\r\n      const rect = searchRef.current.getBoundingClientRect();\r\n      setPosition({\r\n        top: rect.bottom + 8,\r\n        left: rect.left,\r\n        width: rect.width,\r\n      });\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // --- Render Helpers ---\r\n  const selectedItem = allItems[selectedIndex];\r\n\r\n  const renderIcon = (item: GlobalItem, className?: string) => {\r\n    if (item.type === \"NAV\") {\r\n      const Icon = item.icon;\r\n      return <Icon className={className || \"w-4 h-4\"} />;\r\n    }\r\n    if (item.type === \"PO\") return <Package className={className} />;\r\n    if (item.type === \"DC\") return <Truck className={className} />;\r\n    if (item.type === \"Invoice\") return <Receipt className={className} />;\r\n    return <FileText className={className} />;\r\n  };\r\n\r\n  const portalContent = position ? (\r\n    <div\r\n      ref={portalRef}\r\n      className=\"fixed z-[9999] flex flex-col bg-app-overlay backdrop-blur-3xl shadow-xl border border-app-border rounded-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200\"\r\n      style={{\r\n        top: position.top,\r\n        left: position.left,\r\n        width: position.width,\r\n        height: 520,\r\n        transformOrigin: \"top center\",\r\n      }}\r\n    >\r\n      {/* 2-Pane Layout */}\r\n      <div className=\"flex flex-1 overflow-hidden h-full\">\r\n        {/* Left Pane: List */}\r\n        <div className=\"w-[50%] flex flex-col bg-app-fg/5 border-r border-app-border\">\r\n          {/* Empty State */}\r\n          {query && allItems.length === 0 && !loading && (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center text-slate-400\">\r\n              <Search className=\"w-8 h-8 opacity-20 mb-2\" />\r\n              <span className=\"text-xs\">No results found</span>\r\n            </div>\r\n          )}\r\n\r\n          {/* Initial Empty State */}\r\n          {!query && allItems.length === 0 && (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center text-slate-400 p-8 text-center\">\r\n              <Search className=\"w-8 h-8 opacity-20 mb-4\" />\r\n              <p className=\"text-sm font-medium text-[var(--color-sys-text-primary)]\">\r\n                Type to search...\r\n              </p>\r\n              <p className=\"text-xs mt-1 text-[var(--color-sys-text-tertiary)]\">\r\n                Find POs, Invoices, or jump to pages\r\n              </p>\r\n\r\n              {/* Show Recents if any within empty state */}\r\n              {recentSearches.length > 0 && (\r\n                <div className=\"mt-8 w-full\">\r\n                  <div className=\"text-[10px] font-bold uppercase tracking-widest text-[var(--color-sys-text-tertiary)] mb-2\">\r\n                    Recent\r\n                  </div>\r\n                  {recentSearches.map((term) => (\r\n                    <button\r\n                      key={term}\r\n                      onClick={() => {\r\n                        setQuery(term);\r\n                        inputRef.current?.focus();\r\n                      }}\r\n                      className=\"block w-full text-left px-3 py-1.5 text-sm text-[var(--color-sys-text-secondary)] hover:text-[var(--color-sys-brand-primary)] hover:bg-[var(--color-sys-bg-tertiary)] rounded\"\r\n                    >\r\n                      {term}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Items List */}\r\n          {allItems.length > 0 && (\r\n            <div\r\n              ref={listRef}\r\n              className=\"flex-1 overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-slate-200\"\r\n            >\r\n              {/* Header for Nav if present */}\r\n              {filteredNavItems.length > 0 && (\r\n                <div className=\"px-4 py-2 text-[10px] font-black text-app-fg/40 uppercase tracking-[0.25em] sticky top-0 bg-app-surface/80 backdrop-blur z-10 transition-colors\">\r\n                  Commands\r\n                </div>\r\n              )}\r\n\r\n              {allItems.map((item, idx) => {\r\n                const isSelected = selectedIndex === idx;\r\n                return (\r\n                  <button\r\n                    key={`${item.type}-${item.id}`}\r\n                    onClick={() => handleItemSelect(item)}\r\n                    onMouseEnter={() => setSelectedIndex(idx)}\r\n                    className={cn(\r\n                      \"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-all duration-150 mb-0.5\",\r\n                      isSelected\r\n                        ? \"active-glow text-white\"\r\n                        : \"hover:bg-app-fg/5 text-app-fg\",\r\n                    )}\r\n                  >\r\n                    {renderIcon(\r\n                      item,\r\n                      cn(\r\n                        \"w-4 h-4\",\r\n                        isSelected ? \"text-white\" : \"text-app-fg/40\",\r\n                      ),\r\n                    )}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <div\r\n                        className={cn(\r\n                          \"text-sm font-medium truncate\",\r\n                          isSelected ? \"text-white\" : \"text-app-fg\",\r\n                        )}\r\n                      >\r\n                        {item.type === \"NAV\" ? item.label : item.number}\r\n                      </div>\r\n                      <div\r\n                        className={cn(\r\n                          \"text-[11px] truncate\",\r\n                          isSelected ? \"text-white/80\" : \"text-app-fg/60\",\r\n                        )}\r\n                      >\r\n                        {item.type === \"NAV\"\r\n                          ? item.subLabel\r\n                          : (item as SearchResult).party}\r\n                      </div>\r\n                    </div>\r\n                    {isSelected && (\r\n                      <ArrowRight size={14} className=\"text-white opacity-80\" />\r\n                    )}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right Pane: Preview */}\r\n        <div className=\"w-[50%] bg-app-surface/20 backdrop-blur-md p-8 flex flex-col\">\r\n          {selectedItem ? (\r\n            <div className=\"animate-in fade-in zoom-in-95 duration-150\">\r\n              <div className=\"w-14 h-14 rounded-2xl bg-app-fg/5 flex items-center justify-center mb-6 border border-app-border/50\">\r\n                {renderIcon(selectedItem, \"w-7 h-7 text-app-fg\")}\r\n              </div>\r\n\r\n              <h3 className=\"text-2xl font-black text-app-fg leading-tight mb-1 font-heading uppercase tracking-tight\">\r\n                {selectedItem.type === \"NAV\"\r\n                  ? selectedItem.label\r\n                  : selectedItem.number}\r\n              </h3>\r\n              <p className=\"text-sm text-[var(--color-sys-text-secondary)] mb-8\">\r\n                {selectedItem.type === \"NAV\"\r\n                  ? \"Navigation Command\"\r\n                  : selectedItem.type_label}\r\n              </p>\r\n\r\n              {/* Metadata Grid */}\r\n              <div className=\"space-y-5\">\r\n                {selectedItem.type !== \"NAV\" && (\r\n                  <>\r\n                    {/* Removed Party Row completely as requested */}\r\n                    <div className=\"flex justify-between py-2 border-b border-app-border/30\">\r\n                      <span className=\"text-xs text-app-fg/40 font-medium uppercase tracking-wider\">\r\n                        Date\r\n                      </span>\r\n                      <span className=\"text-sm text-app-fg/80 font-semibold\">\r\n                        {(selectedItem as SearchResult).date || \"-\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between py-2 border-b border-app-border/30\">\r\n                      <span className=\"text-xs text-app-fg/40 font-medium uppercase tracking-wider\">\r\n                        Amount\r\n                      </span>\r\n                      <span className=\"text-sm text-app-fg font-mono font-bold\">\r\n                        {(selectedItem as SearchResult).amount\r\n                          ? `₹${(selectedItem as SearchResult).amount?.toLocaleString()}`\r\n                          : \"-\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between py-2\">\r\n                      <span className=\"text-xs text-app-fg/40 font-medium uppercase tracking-wider\">\r\n                        Status\r\n                      </span>\r\n                      <StatusBadge\r\n                        status={\r\n                          (selectedItem as SearchResult).status || \"Active\"\r\n                        }\r\n                        className=\"text-[10px] py-0.5 px-2\"\r\n                      />\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedItem.type === \"NAV\" && (\r\n                  <div className=\"p-4 bg-app-accent/10 rounded-xl text-sm text-app-accent leading-relaxed\">\r\n                    {selectedItem.subLabel}. <br />\r\n                    Press <strong className=\"font-semibold\">Enter</strong> to\r\n                    navigate immediately.\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"mt-auto pt-8 flex gap-3\">\r\n                <button\r\n                  onClick={() => handleItemSelect(selectedItem)}\r\n                  className=\"flex-1 active-glow hover:brightness-110 text-white text-sm font-bold py-3 rounded-xl transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2\"\r\n                >\r\n                  <ArrowRight size={16} />\r\n                  Open{\" \"}\r\n                  {selectedItem.type === \"NAV\" ? \"Page\" : selectedItem.type}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex-1 flex items-center justify-center text-[var(--color-sys-text-tertiary)] text-sm\">\r\n              Select an item to preview\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Footer / Shortcuts Hint */}\r\n      <div className=\"bg-app-surface px-4 py-2.5 flex items-center justify-between text-[10px] text-app-fg/40 border-t border-app-border\">\r\n        <div className=\"flex gap-4\">\r\n          <span className=\"flex items-center gap-1.5\">\r\n            <kbd className=\"bg-[var(--color-sys-bg-surface)] shadow-sm rounded px-1.5 py-0.5 font-sans min-w-[20px] text-center\">\r\n              ↵\r\n            </kbd>{\" \"}\r\n            Select\r\n          </span>\r\n          <span className=\"flex items-center gap-1.5\">\r\n            <kbd className=\"bg-[var(--color-sys-bg-surface)] shadow-sm rounded px-1.5 py-0.5 font-sans min-w-[20px] text-center\">\r\n              ↓\r\n            </kbd>{\" \"}\r\n            Navigate\r\n          </span>\r\n        </div>\r\n        <div className=\"font-medium opacity-50\">SenstoSales Raycast</div>\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n\r\n  return (\r\n    <>\r\n      <div ref={searchRef} className=\"relative max-w-[700px] w-full group z-50\">\r\n        <div\r\n          className={cn(\r\n            \"flex items-center gap-4 px-6 py-2.5 border border-app-border/30 rounded-full transition-all duration-300 ease-out\",\r\n            \"bg-app-bg/50 backdrop-blur-2xl shadow-lg\",\r\n            isOpen\r\n              ? \"shadow-2xl ring-1 ring-app-accent bg-app-surface/90 scale-[1.01]\"\r\n              : \"hover:bg-app-surface/80 hover:scale-[1.005]\",\r\n          )}\r\n        >\r\n          {loading ? (\r\n            <Loader2 className=\"w-5 h-5 text-app-accent animate-spin\" />\r\n          ) : (\r\n            <Search\r\n              className={cn(\r\n                \"w-5 h-5 transition-colors\",\r\n                isOpen ? \"text-app-accent\" : \"text-app-fg/40\",\r\n              )}\r\n            />\r\n          )}\r\n\r\n          <input\r\n            ref={inputRef}\r\n            id=\"global-search\"\r\n            name=\"global-search\"\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            onFocus={() => setIsOpen(true)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Search items, vendors, invoices...\"\r\n            className=\"flex-1 bg-transparent border-none outline-none text-sm font-medium text-app-fg placeholder:text-app-fg/30\"\r\n          />\r\n\r\n          {query && (\r\n            <button\r\n              onClick={() => {\r\n                setQuery(\"\");\r\n                inputRef.current?.focus();\r\n              }}\r\n              className=\"p-1 hover:bg-[var(--color-sys-bg-tertiary)] rounded-lg transition-colors\"\r\n            >\r\n              <X size={14} className=\"text-[var(--color-sys-text-tertiary)]\" />\r\n            </button>\r\n          )}\r\n\r\n          <div className=\"hidden lg:flex items-center gap-1.5 px-2 py-1 bg-[var(--color-sys-bg-header)]/50 rounded-lg shadow-sm pointer-events-none select-none\">\r\n            <kbd className=\"font-mono text-[9px] font-bold text-[var(--color-sys-text-tertiary)]\">\r\n              CTRL K\r\n            </kbd>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {mounted && isOpen && createPortal(portalContent, document.body)}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\InspectionManifest.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[282,285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[282,285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[310,313],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[310,313],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { DataTable, type Column } from \"./DataTable\";\r\nimport { Flex, Stack } from \"../atoms/Layout\";\r\nimport { H3 } from \"../atoms/Typography\";\r\nimport { Badge } from \"../atoms/Badge\";\r\n\r\ninterface InspectionManifestProps {\r\n    items: any[];\r\n    columns: Column<any>[];\r\n}\r\n\r\nexport const InspectionManifest = ({ items, columns }: InspectionManifestProps) => {\r\n    return (\r\n        <Stack gap={3}>\r\n            <Flex align=\"center\" gap={3} justify=\"between\">\r\n                <H3 className=\"m-0 uppercase tracking-[0.2em]\">\r\n                    Inspection Manifest\r\n                </H3>\r\n                <Badge variant=\"outline\" className=\"opacity-60\">\r\n                    {items.length} Quality Nodes\r\n                </Badge>\r\n            </Flex>\r\n            <div className=\"surface-card bg-app-border/30 overflow-hidden\">\r\n                <div className=\"bg-app-surface overflow-x-auto\">\r\n                    <DataTable\r\n                        columns={columns}\r\n                        data={items}\r\n                        keyField=\"id\"\r\n                        density=\"compact\"\r\n                        className=\"w-full\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </Stack>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\SidebarNav.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Activity' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Users' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CreditCard' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AnimatePresence' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":33},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":65,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":65,"endColumn":98},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":76,"column":17,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":76,"endColumn":101},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":124,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":124,"endColumn":104},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":137,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":137,"endColumn":137},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":141,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":141,"endColumn":75},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":144,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":144,"endColumn":105}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport {\r\n  LayoutDashboard,\r\n  ShoppingCart,\r\n  Truck,\r\n  Receipt,\r\n  FileText,\r\n  Settings,\r\n  ChevronRight,\r\n  Package,\r\n  Activity,\r\n  Box,\r\n  Users,\r\n  BarChart3,\r\n  CreditCard,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nconst navGroups = [\r\n  {\r\n    label: \"Intelligence\",\r\n    items: [\r\n      { name: \"Dashboard\", href: \"/\", icon: LayoutDashboard },\r\n      { name: \"Reports\", href: \"/reports\", icon: BarChart3 },\r\n    ]\r\n  },\r\n  {\r\n    label: \"Operations\",\r\n    items: [\r\n      { name: \"Purchase Order\", href: \"/po\", icon: ShoppingCart },\r\n      { name: \"Delivery Challan\", href: \"/dc\", icon: Truck },\r\n      { name: \"Invoice\", href: \"/invoice\", icon: Receipt },\r\n      { name: \"SRV Ingestion\", href: \"/srv\", icon: Box },\r\n    ]\r\n  },\r\n  {\r\n    label: \"Configuration\",\r\n    items: [\r\n      { name: \"PO Notes\", href: \"/po-notes\", icon: FileText },\r\n      { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n    ]\r\n  }\r\n];\r\n\r\nexport function SidebarNav() {\r\n  const pathname = usePathname();\r\n\r\n  return (\r\n    <div className=\"w-[270px] bg-app-sidebar h-full flex flex-col z-50 shrink-0 relative overflow-hidden font-heading rounded-none border-none\">\r\n\r\n      {/* Brand Header - Compacted */}\r\n      <div className=\"p-6 pb-2 shrink-0 relative z-10\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-9 h-9 rounded-lg bg-app-accent flex items-center justify-center shadow-lg shadow-app-accent/20\">\r\n            <Package className=\"text-white w-5 h-5\" />\r\n          </div>\r\n          <div className=\"flex flex-col\">\r\n            <span className=\"text-md font-bold text-app-fg tracking-tight leading-none uppercase\">\r\n              SENSTO<span className=\"text-app-accent\">SALES</span>\r\n            </span>\r\n            <span className=\"text-[8px] font-bold text-app-fg/40 mt-1 uppercase tracking-[0.3em]\">\r\n              PRO ENTERPRISE\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation Groups - Densified */}\r\n      <div className=\"flex-1 px-3 py-4 space-y-6 overflow-y-auto no-scrollbar relative z-10\">\r\n        {navGroups.map((group) => (\r\n          <div key={group.label} className=\"space-y-0.5\">\r\n            <h3 className=\"px-3 text-[9px] font-bold text-app-fg/40 uppercase tracking-[0.3em] mb-2\">\r\n              {group.label}\r\n            </h3>\r\n            {group.items.map((item) => {\r\n              const isActive =\r\n                pathname === item.href ||\r\n                (item.href !== \"/\" && pathname.startsWith(item.href + \"/\"));\r\n\r\n              return (\r\n                <Link\r\n                  key={item.href}\r\n                  href={item.href}\r\n                  className={cn(\r\n                    \"group flex items-center justify-between px-3 py-2.5 rounded-lg transition-all duration-200 relative z-10\",\r\n                    isActive\r\n                      ? \"text-app-accent\"\r\n                      : \"text-app-fg/60 hover:text-app-fg\"\r\n                  )}\r\n                >\r\n                  {isActive && (\r\n                    <motion.div\r\n                      layoutId=\"sidebar-active-pill\"\r\n                      className=\"absolute inset-x-2 inset-y-1 active-glow-soft rounded-lg -z-10\"\r\n                      initial={false}\r\n                      transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\r\n                    />\r\n                  )}\r\n\r\n                  <div className=\"flex items-center gap-3 relative z-10 pl-2\">\r\n                    <item.icon\r\n                      className={cn(\r\n                        \"w-4 h-4 transition-all duration-200\",\r\n                        isActive\r\n                          ? \"text-app-accent\"\r\n                          : \"text-app-fg/40 group-hover:text-app-fg/70\"\r\n                      )}\r\n                    />\r\n                    <span\r\n                      className={cn(\r\n                        \"text-[11px] font-bold tracking-wider uppercase\",\r\n                        isActive ? \"text-app-accent\" : \"text-app-fg/60 group-hover:text-app-fg\"\r\n                      )}\r\n                    >\r\n                      {item.name}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {isActive && (\r\n                    <ChevronRight className=\"w-3 h-3 text-[var(--color-sys-brand-primary)] opacity-100\" />\r\n                  )}\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Premium Profile Footer */}\r\n      <div className=\"p-4 shrink-0 mt-auto relative z-10\">\r\n        <div className=\"p-2.5 bg-app-fg/5 rounded-xl shadow-sm\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-8 h-8 rounded-lg bg-app-accent/10 flex items-center justify-center text-app-accent font-black text-[11px]\">\r\n              AS\r\n            </div>\r\n            <div className=\"flex flex-col min-w-0 flex-1\">\r\n              <span className=\"text-[10px] font-bold text-app-fg truncate\">Abhijit S.</span>\r\n              <div className=\"flex items-center gap-1 mt-0.5\">\r\n                <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]\" />\r\n                <span className=\"text-[7px] font-bold text-app-fg/40 uppercase tracking-widest truncate\">Administrator</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-1.5 hover:bg-app-fg/10 rounded-lg transition-colors cursor-pointer text-app-fg/40 hover:text-app-fg\">\r\n              <Settings size={12} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\StatusBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\StatusCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":62},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Badge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":64}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Card } from \"@/components/design-system/atoms/Card\";\r\nimport { Badge } from \"@/components/design-system/atoms/Badge\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface StatusCardProps {\r\n    title?: string;\r\n    status?: string;\r\n    variant?: \"default\" | \"success\" | \"warning\" | \"error\";\r\n    children: React.ReactNode;\r\n    className?: string;\r\n    showBadge?: boolean;\r\n}\r\n\r\nexport function StatusCard({\r\n    title,\r\n    status,\r\n    variant = \"default\",\r\n    children,\r\n    className,\r\n    showBadge = false,\r\n}: StatusCardProps) {\r\n    return (\r\n        <Card className={cn(\"p-6\", className)}>\r\n            {(title || status) && (\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    {title && <h3 className=\"font-medium text-sys-primary\">{title}</h3>}\r\n                    {status && showBadge && <Badge variant={variant}>{status}</Badge>}\r\n                </div>\r\n            )}\r\n            {children}\r\n        </Card>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\SummaryCards.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":109,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":109,"endColumn":84}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H2, SmallText } from \"../atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { SummaryCardSkeleton } from \"../atoms/Skeleton\";\r\nimport { motion, Variants } from \"framer-motion\";\r\n\r\n/**\r\n * SummaryCard Organism - Atomic Design System v1.0\r\n * Used in dashboard and list pages for KPI display.\r\n * Standardized to \"Apple-level\" design with equal heights.\r\n */\r\nexport interface SummaryCardProps {\r\n    title: string;\r\n    value: React.ReactNode;\r\n    icon?: React.ReactNode;\r\n    trend?: {\r\n        value: string;\r\n        direction: \"up\" | \"down\" | \"neutral\";\r\n    };\r\n    progress?: number; // 0 to 100\r\n    variant?: \"default\" | \"primary\" | \"success\" | \"warning\" | \"secondary\" | \"error\";\r\n    className?: string;\r\n}\r\n\r\nconst variantTextStyles = {\r\n    default: \"text-app-fg\",\r\n    primary: \"text-app-accent\",\r\n    secondary: \"text-app-accent\",\r\n    success: \"text-emerald-500\",\r\n    warning: \"text-orange-500\",\r\n    error: \"text-rose-500\",\r\n};\r\n\r\nconst variantIconStyles = {\r\n    default: \"bg-app-fg/5 text-app-fg/40\",\r\n    primary: \"bg-blue-50 dark:bg-blue-900/20 text-blue-500\",\r\n    secondary: \"bg-app-accent/10 text-app-accent\",\r\n    success: \"bg-emerald-50 dark:bg-emerald-900/20 text-emerald-500\",\r\n    warning: \"bg-orange-50 dark:bg-orange-900/20 text-orange-500\",\r\n    error: \"bg-rose-50 dark:bg-rose-900/20 text-rose-500\",\r\n};\r\n\r\nconst trendStyles = {\r\n    up: \"text-emerald-500\",\r\n    down: \"text-rose-500\",\r\n    neutral: \"text-app-fg/40\",\r\n};\r\n\r\nexport const SummaryCard = React.memo(function SummaryCard({\r\n    title,\r\n    value,\r\n    icon,\r\n    trend,\r\n    progress,\r\n    variant = \"primary\",\r\n    className,\r\n}: SummaryCardProps) {\r\n    return (\r\n        <div className={cn(\r\n            \"bg-app-surface border border-app-border rounded-2xl shadow-soft h-[160px] transition-all duration-300 group hover:scale-[1.02]\",\r\n            className\r\n        )}>\r\n            <div className=\"p-6 h-full flex flex-col justify-between\">\r\n                <div className=\"flex justify-between items-start\">\r\n                    <div className=\"min-w-0\">\r\n                        <SmallText\r\n                            className={cn(\r\n                                \"uppercase tracking-[0.15em] font-bold text-[11px] opacity-60 truncate block mb-1\",\r\n                                variant !== \"default\" ? variantTextStyles[variant] : \"text-[var(--app-fg-muted)]\"\r\n                            )}\r\n                        >\r\n                            {title}\r\n                        </SmallText>\r\n                        <H2 className={cn(\"leading-tight font-black tracking-tight text-[28px] whitespace-nowrap truncate\", variantTextStyles[variant])}>\r\n                            {value}\r\n                        </H2>\r\n                    </div>\r\n                    {icon && (\r\n                        <div\r\n                            className={cn(\r\n                                \"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 shrink-0 ml-3\",\r\n                                variantIconStyles[variant]\r\n                            )}\r\n                        >\r\n                            {icon}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"mt-auto\">\r\n                    {progress !== undefined ? (\r\n                        <div className=\"w-full bg-app-surface-hover/50 rounded-full h-1.5 overflow-hidden\">\r\n                            <motion.div\r\n                                initial={{ width: 0 }}\r\n                                animate={{ width: `${progress}%` }}\r\n                                transition={{ duration: 1, ease: \"easeOut\" }}\r\n                                className={cn(\r\n                                    \"h-full rounded-full\",\r\n                                    variant === \"primary\" ? \"bg-app-accent\" :\r\n                                        variant === \"success\" ? \"bg-emerald-500\" :\r\n                                            variant === \"warning\" ? \"bg-orange-500\" : \"bg-app-accent\"\r\n                                )}\r\n                            />\r\n                        </div>\r\n                    ) : trend ? (\r\n                        <div className={cn(\"text-[12px] font-bold tracking-tight flex items-center gap-1\", trendStyles[trend.direction])}>\r\n                            <span className=\"material-symbols-outlined text-[14px]\">\r\n                                {trend.direction === \"up\" ? \"trending_up\" : trend.direction === \"down\" ? \"trending_down\" : \"horizontal_rule\"}\r\n                            </span>\r\n                            <span>{trend.value}</span>\r\n                            <span className=\"text-app-fg-muted/60 font-semibold ml-1\">this month</span>\r\n                        </div>\r\n                    ) : null}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport interface SummaryCardsProps {\r\n    cards: SummaryCardProps[];\r\n    loading?: boolean;\r\n    className?: string;\r\n}\r\n\r\nconst container: Variants = {\r\n    hidden: { opacity: 0 },\r\n    show: {\r\n        opacity: 1,\r\n        transition: { staggerChildren: 0.03 },\r\n    },\r\n};\r\n\r\nconst item: Variants = {\r\n    hidden: { opacity: 0, y: -20 },\r\n    show: {\r\n        opacity: 1,\r\n        y: 0,\r\n        transition: { type: \"spring\", stiffness: 500, damping: 30 },\r\n    },\r\n};\r\n\r\nexport const SummaryCards = React.memo(function SummaryCards({\r\n    cards,\r\n    loading,\r\n    className,\r\n}: SummaryCardsProps) {\r\n    if (loading) {\r\n        return (\r\n            <div className={cn(\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\", className)}>\r\n                {Array.from({ length: 4 }).map((_, i) => (\r\n                    <SummaryCardSkeleton key={i} />\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <motion.div\r\n            variants={container}\r\n            initial=\"hidden\"\r\n            animate=\"show\"\r\n            className={cn(\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3\", className)}\r\n        >\r\n            {cards.map((card, index) => (\r\n                <motion.div key={index} variants={item} className=\"h-full\">\r\n                    <SummaryCard {...card} />\r\n                </motion.div>\r\n            ))}\r\n        </motion.div>\r\n    );\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\CreateEditFormTemplate.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":56,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":56,"endColumn":69},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":62,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":62,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":69,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":69,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":74,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":74,"endColumn":77},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":79,"column":57,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":79,"endColumn":83},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":89,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":89,"endColumn":62},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":99,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":99,"endColumn":65}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport { H1, H2, Body } from \"../atoms/Typography\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { ActionButtonGroup, Action } from \"../molecules/ActionButtonGroup\";\r\nimport { ChevronRight } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * CreateEditFormTemplate - Atomic Design System v1.0\r\n * Standard layout for create/edit pages\r\n * Layout: Breadcrumbs → Heading → Form Sections → Action Buttons\r\n */\r\nexport interface BreadcrumbItem {\r\n    label: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n}\r\n\r\nexport interface FormSection {\r\n    title: string;\r\n    description?: string;\r\n    content: React.ReactNode;\r\n}\r\n\r\nexport interface CreateEditFormTemplateProps {\r\n    // Navigation\r\n    breadcrumbs?: BreadcrumbItem[];\r\n    // Header\r\n    title: string;\r\n    subtitle?: string;\r\n    // Form sections\r\n    sections: FormSection[];\r\n    // Actions\r\n    primaryAction: Action;\r\n    secondaryActions?: Action[];\r\n    // State\r\n    loading?: boolean;\r\n    className?: string;\r\n}\r\n\r\nexport const CreateEditFormTemplate: React.FC<CreateEditFormTemplateProps> = ({\r\n    breadcrumbs,\r\n    title,\r\n    subtitle,\r\n    sections,\r\n    primaryAction,\r\n    secondaryActions = [],\r\n    loading = false,\r\n    className,\r\n}) => {\r\n    return (\r\n        <div className={cn(\"max-w-5xl mx-auto space-y-6\", className)}>\r\n            {/* Breadcrumbs */}\r\n            {breadcrumbs && breadcrumbs.length > 0 && (\r\n                <nav className=\"flex items-center gap-2 text-[14px]\">\r\n                    {breadcrumbs.map((crumb, index) => (\r\n                        <React.Fragment key={index}>\r\n                            {crumb.href ? (\r\n                                <a\r\n                                    href={crumb.href}\r\n                                    className=\"text-[#6B7280] hover:text-[#1A3D7C] transition-colors\"\r\n                                >\r\n                                    {crumb.label}\r\n                                </a>\r\n                            ) : crumb.onClick ? (\r\n                                <button\r\n                                    onClick={crumb.onClick}\r\n                                    className=\"text-[#6B7280] hover:text-[#1A3D7C] transition-colors\"\r\n                                >\r\n                                    {crumb.label}\r\n                                </button>\r\n                            ) : (\r\n                                <span className=\"text-[#111827] font-medium\">\r\n                                    {crumb.label}\r\n                                </span>\r\n                            )}\r\n                            {index < breadcrumbs.length - 1 && (\r\n                                <ChevronRight size={16} className=\"text-[#9CA3AF]\" />\r\n                            )}\r\n                        </React.Fragment>\r\n                    ))}\r\n                </nav>\r\n            )}\r\n\r\n            {/* Page Header */}\r\n            <div className=\"space-y-2 pb-4 border-b border-[#E5E7EB]\">\r\n                <H1>{title}</H1>\r\n                {subtitle && <Body className=\"text-[#6B7280]\">{subtitle}</Body>}\r\n            </div>\r\n\r\n            {/* Form Sections */}\r\n            <div className=\"space-y-8\">\r\n                {sections.map((section, index) => (\r\n                    <div key={index} className=\"space-y-4\">\r\n                        <div className=\"space-y-1\">\r\n                            <H2>{section.title}</H2>\r\n                            {section.description && (\r\n                                <Body className=\"text-[#6B7280]\">{section.description}</Body>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"bg-sys-bg-white rounded-lg border border-[#E5E7EB] p-6\">\r\n                            {section.content}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"sticky bottom-0 bg-[#F6F8FB] border-t border-[#E5E7EB] px-6 py-4 -mx-6 flex items-center justify-between gap-4\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    {secondaryActions.length > 0 && (\r\n                        <ActionButtonGroup actions={secondaryActions} align=\"left\" />\r\n                    )}\r\n                </div>\r\n                <Button\r\n                    variant={primaryAction.variant || \"default\"}\r\n                    onClick={primaryAction.onClick}\r\n                    disabled={primaryAction.disabled || loading}\r\n                    className=\"min-w-32\"\r\n                >\r\n                    {primaryAction.icon}\r\n                    {primaryAction.label}\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\DetailViewTemplate.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":69},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":76,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":76,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":81,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":81,"endColumn":77},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":84,"column":57,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":84,"endColumn":83}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { H1, Body } from \"../atoms/Typography\";\r\nimport { SummaryCards, SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport { DocumentTrace, DocumentNode } from \"../organisms/DocumentTrace\";\r\nimport { ActionButtonGroup, Action } from \"../molecules/ActionButtonGroup\";\r\nimport { ChevronRight } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * DetailViewTemplate - Atomic Design System v1.0\r\n * Standard layout for detail/view pages\r\n * Layout: Breadcrumbs → Header + Actions → Summary Cards → Document Trace → Tabbed Content\r\n */\r\n\r\nexport interface BreadcrumbItem {\r\n    label: string;\r\n    href?: string;\r\n}\r\n\r\nexport interface TabItem {\r\n    id: string;\r\n    label: string;\r\n    icon?: React.ReactNode;\r\n    content: React.ReactNode;\r\n}\r\n\r\nexport interface DetailViewTemplateProps {\r\n    // Navigation\r\n    breadcrumbs?: BreadcrumbItem[];\r\n    // Header\r\n    title: string;\r\n    subtitle?: string;\r\n    badge?: React.ReactNode;\r\n    // Header actions\r\n    actions?: Action[];\r\n    // Summary cards\r\n    summaryCards?: SummaryCardProps[];\r\n    // Document traceability\r\n    documentTrace?: DocumentNode[];\r\n    // Tabs\r\n    tabs?: TabItem[];\r\n    defaultTab?: string;\r\n    // Additional content (if not using tabs)\r\n    children?: React.ReactNode;\r\n    className?: string;\r\n}\r\n\r\nexport const DetailViewTemplate: React.FC<DetailViewTemplateProps> = ({\r\n    breadcrumbs,\r\n    title,\r\n    subtitle,\r\n    badge,\r\n    actions,\r\n    summaryCards,\r\n    documentTrace,\r\n    tabs,\r\n    defaultTab,\r\n    children,\r\n    className,\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState(defaultTab || tabs?.[0]?.id || \"\");\r\n    const activeTabContent = tabs?.find((tab) => tab.id === activeTab)?.content;\r\n\r\n    return (\r\n        <div className={cn(\"space-y-6\", className)}>\r\n            {/* Breadcrumbs */}\r\n            {breadcrumbs && breadcrumbs.length > 0 && (\r\n                <nav className=\"flex items-center gap-2 text-[14px]\">\r\n                    {breadcrumbs.map((crumb, index) => (\r\n                        <React.Fragment key={index}>\r\n                            {crumb.href ? (\r\n                                <a\r\n                                    href={crumb.href}\r\n                                    className=\"text-[#6B7280] hover:text-[#1A3D7C] transition-colors\"\r\n                                >\r\n                                    {crumb.label}\r\n                                </a>\r\n                            ) : (\r\n                                <span className=\"text-[#111827] font-medium\">{crumb.label}</span>\r\n                            )}\r\n                            {index < breadcrumbs.length - 1 && (\r\n                                <ChevronRight size={16} className=\"text-[#9CA3AF]\" />\r\n                            )}\r\n                        </React.Fragment>\r\n                    ))}\r\n                </nav>\r\n            )}\r\n\r\n            {/* Header */}\r\n            <div className=\"flex items-start justify-between gap-4\">\r\n                <div className=\"space-y-1 flex-1\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <H1 className=\"uppercase tracking-tight\">{title}</H1>\r\n                        {badge}\r\n                    </div>\r\n                    {subtitle && (\r\n                        <Body className=\"text-sys-secondary font-medium\">{subtitle}</Body>\r\n                    )}\r\n                </div>\r\n                {actions && actions.length > 0 && (\r\n                    <ActionButtonGroup actions={actions} align=\"right\" />\r\n                )}\r\n            </div>\r\n\r\n            {/* Summary Cards */}\r\n            {summaryCards && summaryCards.length > 0 && (\r\n                <SummaryCards cards={summaryCards} />\r\n            )}\r\n\r\n            {/* Document Trace */}\r\n            {documentTrace && documentTrace.length > 0 && (\r\n                <DocumentTrace documents={documentTrace} />\r\n            )}\r\n\r\n            {/* Tabs */}\r\n            {tabs && tabs.length > 0 ? (\r\n                <div className=\"space-y-4\">\r\n                    {/* Tab Headers */}\r\n                    <div className=\"border-b border-[#E5E7EB]\">\r\n                        <div className=\"flex items-center gap-1\">\r\n                            {tabs.map((tab) => (\r\n                                <button\r\n                                    key={tab.id}\r\n                                    onClick={() => setActiveTab(tab.id)}\r\n                                    className={cn(\r\n                                        \"flex items-center gap-2 px-4 py-3 text-[11px] font-semibold uppercase tracking-widest transition-all\",\r\n                                        \"border-b-2 -mb-px\",\r\n                                        activeTab === tab.id\r\n                                            ? \"border-sys-brand text-sys-brand\"\r\n                                            : \"border-transparent text-sys-secondary hover:text-sys-primary\"\r\n                                    )}\r\n                                >\r\n                                    {tab.icon}\r\n                                    {tab.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    {/* Tab Content */}\r\n                    <div>{activeTabContent}</div>\r\n                </div>\r\n            ) : (\r\n                // Direct content if no tabs\r\n                children && <div>{children}</div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\DocumentTemplate.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":41,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":41,"endColumn":148},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":47,"column":61,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":47,"endColumn":126},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":54,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":54,"endColumn":103},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":59,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":59,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":64,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":64,"endColumn":131}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport { H1 } from \"../atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\"; import { ArrowLeft } from \"lucide-react\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { motion } from \"framer-motion\";\r\n\r\ninterface DocumentTemplateProps {\r\n    title: string;\r\n    description?: React.ReactNode;\r\n    actions?: React.ReactNode;\r\n    children: React.ReactNode;\r\n    className?: string;\r\n    onBack?: () => void;\r\n    layoutId?: string;\r\n    icon?: React.ReactNode;\r\n    iconLayoutId?: string;\r\n}\r\n\r\nexport const DocumentTemplate = ({\r\n    title,\r\n    description,\r\n    actions,\r\n    children,\r\n    className,\r\n    onBack,\r\n    layoutId,\r\n    icon,\r\n    iconLayoutId,\r\n}: DocumentTemplateProps) => {\r\n    return (\r\n        <div className={cn(\"min-h-screen will-change-[transform,opacity]\", className)}>\r\n            {/* Header - Flowing Content */}\r\n            <div className=\"flex items-center justify-between mb-8\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    {onBack && (\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={onBack}\r\n                            className=\"h-8 w-8 p-0 rounded-full text-[var(--app-fg-muted)] hover:text-[var(--app-fg)] hover:bg-[var(--bg-overlay)]\"\r\n                        >\r\n                            <ArrowLeft size={16} />\r\n                        </Button>\r\n                    )}\r\n                    {icon && (\r\n                        <motion.div layoutId={iconLayoutId} className=\"flex items-center justify-center text-[var(--accent)]\">\r\n                            {icon}\r\n                        </motion.div>\r\n                    )}\r\n                    <div>\r\n                        {layoutId ? (\r\n                            <motion.div layoutId={layoutId}>\r\n                                <H1 className=\"tracking-tight text-[var(--app-fg)] text-2xl font-bold\">\r\n                                    {title}\r\n                                </H1>\r\n                            </motion.div>\r\n                        ) : (\r\n                            <H1 className=\"tracking-tight text-[var(--app-fg)] text-2xl font-bold\">\r\n                                {title}\r\n                            </H1>\r\n                        )}\r\n                        {description && (\r\n                            <div className=\"text-[10px] font-semibold uppercase tracking-widest text-[var(--app-fg-muted)] mt-0.5\">\r\n                                {description}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                {actions && <div className=\"flex gap-2\">{actions}</div>}\r\n            </div>\r\n            {/* Content Area */}\r\n            <div>{children}</div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\ListPageTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H1' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[513,516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[513,516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1687,1690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1687,1690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H1, SmallText } from \"../atoms/Typography\";\r\nimport { SummaryCards, type SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport { DataTable, type Column } from \"../organisms/DataTable\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ListPageTemplate - Atomic Design System v1.0\r\n * Standard layout for list pages (PO, DC, Invoice, SRV)\r\n * Layout: Heading → Toolbar → Summary Cards (optional) → DataTable\r\n */\r\nexport interface ListPageTemplateProps<T = any> {\r\n    // Header\r\n    title: string;\r\n    subtitle?: string;\r\n    toolbar?: React.ReactNode;\r\n    // Summary Row (KPI Cards)\r\n    summaryCards?: SummaryCardProps[];\r\n    // Table\r\n    columns: Column<T>[];\r\n    data: T[];\r\n    keyField?: string;\r\n    page?: number;\r\n    pageSize?: number;\r\n    totalItems?: number;\r\n    onPageChange?: (page: number) => void;\r\n    sortKey?: string;\r\n    sortDirection?: \"asc\" | \"desc\";\r\n    onSort?: (key: string) => void;\r\n    selectable?: boolean;\r\n    selectedRows?: string[];\r\n    onSelectionChange?: (selected: string[]) => void;\r\n    exportable?: boolean;\r\n    onExport?: () => void;\r\n    loading?: boolean;\r\n    error?: string;\r\n    emptyMessage?: string;\r\n    density?: \"compact\" | \"normal\"; // Pass through to DataTable\r\n    // Customization\r\n    no_borders?: boolean;\r\n    table_surface_solid?: boolean;\r\n    renderSubRow?: (row: T) => React.ReactNode;\r\n    onRowExpand?: (row: T, isExpanded: boolean) => void;\r\n    no_subrow_padding?: boolean;\r\n    className?: string;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nimport { DocumentTemplate } from \"./DocumentTemplate\";\r\n\r\nexport function ListPageTemplate<T extends Record<string, any>>({\r\n    title,\r\n    subtitle,\r\n    toolbar,\r\n    summaryCards,\r\n    columns,\r\n    data,\r\n    keyField = \"id\",\r\n    page,\r\n    pageSize,\r\n    totalItems,\r\n    onPageChange,\r\n    sortKey,\r\n    sortDirection,\r\n    onSort,\r\n    selectable,\r\n    selectedRows,\r\n    onSelectionChange,\r\n    exportable,\r\n    onExport,\r\n    loading,\r\n    error,\r\n    emptyMessage,\r\n    density = \"normal\",\r\n    className,\r\n    children,\r\n    no_borders,\r\n    table_surface_solid,\r\n    renderSubRow,\r\n    onRowExpand,\r\n    no_subrow_padding,\r\n}: ListPageTemplateProps<T>) {\r\n    return (\r\n        <DocumentTemplate\r\n            title={title}\r\n            description={subtitle}\r\n            actions={toolbar}\r\n            className={className}\r\n        >\r\n            <div className=\"space-y-6\">\r\n                {/* Summary Cards */}\r\n                {summaryCards && summaryCards.length > 0 && (\r\n                    <SummaryCards cards={summaryCards} loading={loading} />\r\n                )}\r\n\r\n                <div className=\"pb-6 min-h-[500px]\">\r\n                    {children ? (\r\n                        <div className=\"min-h-[400px]\">{children}</div>\r\n                    ) : (\r\n                        <DataTable\r\n                            columns={columns}\r\n                            data={data}\r\n                            keyField={keyField}\r\n                            page={page}\r\n                            pageSize={pageSize}\r\n                            totalItems={totalItems}\r\n                            onPageChange={onPageChange}\r\n                            sortKey={sortKey}\r\n                            sortDirection={sortDirection}\r\n                            onSort={onSort}\r\n                            selectable={selectable}\r\n                            selectedRows={selectedRows}\r\n                            onSelectionChange={onSelectionChange}\r\n                            exportable={exportable}\r\n                            onExport={onExport}\r\n                            loading={loading}\r\n                            error={error}\r\n                            emptyMessage={emptyMessage}\r\n                            emptyIcon={null}\r\n                            no_borders={no_borders}\r\n                            table_surface_solid={table_surface_solid}\r\n                            renderSubRow={renderSubRow}\r\n                            onRowExpand={onRowExpand}\r\n                            no_subrow_padding={no_subrow_padding}\r\n                            density={density}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\ReportsPageTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H1' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ReportsToolbar' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[599,602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[599,602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":47,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1472,1475],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1472,1475],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":82,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":82,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":94,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":94,"endColumn":127}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H1, Body, SmallText } from \"../atoms/Typography\";\r\nimport { SummaryCards, SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport { ReportsToolbar, ReportsToolbarProps } from \"@/components/reports/organisms/ReportsToolbar\";\r\nimport { DataTable, Column } from \"../organisms/DataTable\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ReportsPageTemplate - Atomic Design System v1.0\r\n * Standard layout for reports page\r\n * Layout: Heading → Reports Toolbar → KPI Cards → Charts → Data Table\r\n */\r\nexport interface ReportsPageTemplateProps<T = any> {\r\n    // Page header\r\n    title: string;\r\n    subtitle?: string;\r\n    // Toolbar (Optional as it might be in header)\r\n    toolbar?: Partial<Omit<ReportsToolbarProps, \"className\">>;\r\n    // KPI Summary cards\r\n    kpiCards?: SummaryCardProps[];\r\n    // Charts section\r\n    charts?: React.ReactNode;\r\n    // Data table\r\n    tableTitle?: React.ReactNode;\r\n    columns?: Column<T>[];\r\n    data?: T[];\r\n    keyField?: string;\r\n    // Table features\r\n    page?: number;\r\n    pageSize?: number;\r\n    totalItems?: number;\r\n    onPageChange?: (page: number) => void;\r\n    exportable?: boolean;\r\n    onExport?: () => void;\r\n    // States\r\n    loading?: boolean;\r\n    error?: string;\r\n    emptyMessage?: string;\r\n    className?: string;\r\n}\r\n\r\nimport { DocumentTemplate } from \"./DocumentTemplate\";\r\n\r\nexport const ReportsPageTemplate = React.memo(\r\n    <T extends Record<string, any>>({\r\n        title,\r\n        subtitle,\r\n        kpiCards,\r\n        charts,\r\n        tableTitle,\r\n        columns,\r\n        data,\r\n        keyField = \"id\",\r\n        page,\r\n        pageSize,\r\n        totalItems,\r\n        onPageChange,\r\n        loading,\r\n        error,\r\n        emptyMessage,\r\n        className,\r\n    }: ReportsPageTemplateProps<T>) => {\r\n        return (\r\n            <DocumentTemplate\r\n                title={title}\r\n                description={subtitle}\r\n                className={className}\r\n            >\r\n                <div className=\"space-y-6\">\r\n                    {/* KPI Summary Cards */}\r\n                    {((kpiCards && kpiCards.length > 0) || loading) && (\r\n                        <SummaryCards cards={kpiCards || []} loading={loading} />\r\n                    )}\r\n\r\n                    {/* Main Content: Charts or Table */}\r\n                    <div className=\"space-y-4 w-full\">\r\n                        {charts && (\r\n                            <div className=\"surface-card p-6 w-full overflow-hidden\">\r\n                                <div className=\"mb-4 shadow-none pb-2\">\r\n                                    <h3 className=\"font-bold text-[var(--color-sys-text-primary)] uppercase tracking-wide\">\r\n                                        Analytics Overview\r\n                                    </h3>\r\n                                </div>\r\n                                {charts}\r\n                            </div>\r\n                        )}\r\n\r\n                        {columns && data && (\r\n                            <div className=\"space-y-4 w-full\">\r\n                                {tableTitle && (\r\n                                    <div className=\"flex items-center justify-between px-1\">\r\n                                        <h2 className=\"font-bold text-[var(--color-sys-text-primary)] uppercase tracking-wide\">\r\n                                            {tableTitle}\r\n                                        </h2>\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"surface-card p-0 overflow-hidden w-full\">\r\n                                    <div className=\"w-full overflow-x-auto\">\r\n                                        <DataTable\r\n                                            columns={columns}\r\n                                            data={data}\r\n                                            keyField={keyField}\r\n                                            page={page}\r\n                                            pageSize={pageSize}\r\n                                            totalItems={totalItems}\r\n                                            onPageChange={onPageChange}\r\n                                            loading={loading}\r\n                                            error={error}\r\n                                            emptyMessage={emptyMessage}\r\n                                            no_borders={true}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </DocumentTemplate>\r\n        );\r\n    }\r\n);\r\n\r\nReportsPageTemplate.displayName = \"ReportsPageTemplate\";\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\global\\BatchUploadCard.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":84,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":84,"endColumn":90},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":95,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":95,"endColumn":98},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":101,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":101,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":102,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":102,"endColumn":100},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":126,"column":47,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":126,"endColumn":129},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":129,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":129,"endColumn":114}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, Minimize2, Maximize2, CheckCircle, AlertCircle, Loader2 } from \"lucide-react\";\r\nimport { useUpload } from \"@/components/providers/UploadContext\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n    Body,\r\n    SmallText,\r\n    Accounting,\r\n    Button,\r\n    Flex,\r\n    Stack,\r\n    Box,\r\n    H4,\r\n} from \"@/components/design-system/organisms\";\r\n\r\nexport default function BatchUploadCard() {\r\n    const {\r\n        isUploading,\r\n        progress,\r\n        acceptedCount,\r\n        rejectedCount,\r\n        minimized,\r\n        files,\r\n        uploadType,\r\n        cancelUpload,\r\n        setMinimized,\r\n        resetUpload,\r\n    } = useUpload();\r\n\r\n    // Only show if there's active state or finding results\r\n    const isVisible = isUploading || (progress.total > 0 && progress.current === progress.total);\r\n\r\n    if (!isVisible) return null;\r\n\r\n    const isComplete = progress.total > 0 && progress.current === progress.total;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                drag\r\n                dragMomentum={false}\r\n                initial={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                exit={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                className={cn(\r\n                    \"fixed top-24 right-8 z-[100] cursor-grab active:cursor-grabbing\",\r\n                    minimized ? \"w-auto\" : \"w-[400px]\"\r\n                )}\r\n            >\r\n                <div\r\n                    className={cn(\r\n                        \"rounded-3xl transition-all duration-300 overflow-hidden\",\r\n                        \"bg-white/90 backdrop-blur-xl\",\r\n                        \"shadow-[0_20px_40px_-12px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.05)]\",\r\n                        minimized ? \"p-2 pr-4\" : \"p-0\"\r\n                    )}\r\n                >\r\n                    {minimized ? (\r\n                        <Flex align=\"center\" gap={3}>\r\n                            <Box className=\"relative w-10 h-10 flex items-center justify-center bg-white rounded-full shadow-inner\">\r\n                                <svg className=\"w-full h-full transform -rotate-90 p-1\">\r\n                                    <circle\r\n                                        cx=\"16\"\r\n                                        cy=\"16\"\r\n                                        r=\"14\"\r\n                                        stroke=\"currentColor\"\r\n                                        strokeWidth=\"3\"\r\n                                        fill=\"transparent\"\r\n                                        className=\"text-slate-100\"\r\n                                        viewBox=\"0 0 32 32\"\r\n                                    />\r\n                                    <circle\r\n                                        cx=\"16\"\r\n                                        cy=\"16\"\r\n                                        r=\"14\"\r\n                                        stroke=\"url(#gradient-brand)\"\r\n                                        strokeWidth=\"3\"\r\n                                        fill=\"transparent\"\r\n                                        strokeDasharray={88}\r\n                                        strokeDashoffset={88 - (88 * progress.current) / progress.total}\r\n                                        className=\"text-[var(--color-sys-brand-primary)]\"\r\n                                        viewBox=\"0 0 32 32\"\r\n                                    />\r\n                                    <defs>\r\n                                        <linearGradient id=\"gradient-brand\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\r\n                                            <stop offset=\"0%\" stopColor=\"#3B82F6\" />\r\n                                            <stop offset=\"100%\" stopColor=\"#8B5CF6\" />\r\n                                        </linearGradient>\r\n                                    </defs>\r\n                                </svg>\r\n                                <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                    <H4 className=\"text-[var(--color-sys-brand-primary)] p-0 m-0\">\r\n                                        {Math.round((progress.current / progress.total) * 100)}%\r\n                                    </H4>\r\n                                </div>\r\n                            </Box>\r\n                            <Stack gap={0}>\r\n                                <SmallText className=\"font-bold text-[var(--color-sys-text-primary)]\">Uploading...</SmallText>\r\n                                <H4 className=\"text-[var(--color-sys-text-tertiary)] font-semibold\">\r\n                                    {progress.current}/{progress.total} Parsed\r\n                                </H4>\r\n                            </Stack>\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"icon\"\r\n                                className=\"h-8 w-8 ml-auto hover:bg-black/5 rounded-full\"\r\n                                onClick={() => setMinimized(false)}\r\n                            >\r\n                                <Maximize2 size={16} />\r\n                            </Button>\r\n                        </Flex>\r\n                    ) : (\r\n                        <div className=\"p-6\">\r\n                            <Flex justify=\"between\" align=\"start\" className=\"mb-6\">\r\n                                <Flex align=\"center\" gap={3}>\r\n                                    <Box className={cn(\r\n                                        \"w-12 h-12 rounded-2xl flex items-center justify-center shadow-lg transition-colors duration-500\",\r\n                                        isComplete ? \"bg-emerald-500 text-white\" : \"bg-blue-600 text-white\"\r\n                                    )}>\r\n                                        {isComplete ? <CheckCircle size={24} strokeWidth={3} /> : <Loader2 size={24} className=\"animate-spin\" />}\r\n                                    </Box>\r\n                                    <Stack gap={0.5}>\r\n                                        <Body className=\"font-black text-xl text-[var(--color-sys-text-primary)] tracking-tight\">\r\n                                            {isComplete ? \"Processing Complete\" : `Ingesting ${uploadType}`}\r\n                                        </Body>\r\n                                        <SmallText className=\"text-[var(--color-sys-text-secondary)] font-medium\">\r\n                                            {files.length} Document{files.length !== 1 ? 's' : ''} in Queue\r\n                                        </SmallText>\r\n                                    </Stack>\r\n                                </Flex>\r\n                                <Flex gap={1}>\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon\"\r\n                                        className=\"h-8 w-8 rounded-full hover:bg-black/5 text-slate-400 hover:text-slate-600\"\r\n                                        onClick={() => setMinimized(true)}\r\n                                    >\r\n                                        <Minimize2 size={18} />\r\n                                    </Button>\r\n                                    {isComplete && (\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"icon\"\r\n                                            className=\"h-8 w-8 rounded-full hover:bg-black/5 text-slate-400 hover:text-slate-600\"\r\n                                            onClick={resetUpload}\r\n                                        >\r\n                                            <X size={18} />\r\n                                        </Button>\r\n                                    )}\r\n                                </Flex>\r\n                            </Flex>\r\n\r\n                            <Stack gap={6}>\r\n                                {/* Progress Bar */}\r\n                                <Box className=\"w-full\">\r\n                                    <Flex justify=\"between\" align=\"end\" className=\"mb-2 w-full\">\r\n                                        <H4 className=\"text-slate-400\">\r\n                                            Parsers Active\r\n                                        </H4>\r\n                                        <Accounting className=\"font-black text-blue-600 text-h2 leading-none\">\r\n                                            {Math.round((progress.current / progress.total) * 100)}%\r\n                                        </Accounting>\r\n                                    </Flex>\r\n                                    <div className=\"h-4 w-full bg-slate-100 rounded-full overflow-hidden shadow-inner border border-slate-200/50\">\r\n                                        <motion.div\r\n                                            className={cn(\r\n                                                \"h-full rounded-full shadow-[0_2px_4px_rgba(0,0,0,0.1)] relative overflow-hidden\",\r\n                                                isComplete ? \"bg-emerald-500\" : \"bg-gradient-to-r from-blue-500 to-indigo-600\"\r\n                                            )}\r\n                                            initial={{ width: 0 }}\r\n                                            animate={{\r\n                                                width: `${(progress.current / progress.total) * 100}%`,\r\n                                            }}\r\n                                        >\r\n                                            <div className=\"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]\" />\r\n                                        </motion.div>\r\n                                    </div>\r\n                                </Box>\r\n\r\n                                {/* Grid Stats - Perfectly Aligned */}\r\n                                <div className=\"grid grid-cols-2 gap-4 w-full\">\r\n                                    <Box className=\"flex flex-col items-start justify-center p-4 bg-emerald-50/80 border border-emerald-100/80 rounded-2xl shadow-sm h-24\">\r\n                                        <Flex align=\"center\" gap={2} className=\"mb-2\">\r\n                                            <div className=\"p-1.5 bg-white rounded-full shadow-sm text-emerald-600\">\r\n                                                <CheckCircle size={14} strokeWidth={3} />\r\n                                            </div>\r\n                                            <H4 className=\"text-emerald-600/80 font-bold tracking-widest\">Accepted</H4>\r\n                                        </Flex>\r\n                                        <Accounting className=\"text-h1 font-black text-emerald-700 tracking-tighter\">{acceptedCount}</Accounting>\r\n                                    </Box>\r\n\r\n                                    <Box className={cn(\r\n                                        \"flex flex-col items-start justify-center p-4 rounded-2xl shadow-sm h-24 border transition-colors\",\r\n                                        rejectedCount > 0 ? \"bg-rose-50/80 border-rose-100/80\" : \"bg-slate-50/80 border-slate-100/80\"\r\n                                    )}>\r\n                                        <Flex align=\"center\" gap={2} className=\"mb-2\">\r\n                                            <div className={cn(\"p-1.5 bg-white rounded-full shadow-sm\", rejectedCount > 0 ? \"text-rose-600\" : \"text-slate-400\")}>\r\n                                                <AlertCircle size={14} strokeWidth={3} />\r\n                                            </div>\r\n                                            <H4 className={cn(\"font-bold tracking-widest\", rejectedCount > 0 ? \"text-rose-600/80\" : \"text-slate-400\")}>Rejected</H4>\r\n                                        </Flex>\r\n                                        <Accounting className={cn(\"text-h1 font-black tracking-tighter\", rejectedCount > 0 ? \"text-rose-700\" : \"text-slate-400\")}>{rejectedCount}</Accounting>\r\n                                    </Box>\r\n                                </div>\r\n\r\n                                {/* Actions */}\r\n                                {!isComplete && (\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"sm\"\r\n                                        onClick={cancelUpload}\r\n                                        className=\"w-full text-rose-500 hover:text-rose-600 hover:bg-rose-50 border-rose-200/60 h-12 font-bold tracking-widest text-xs uppercase rounded-xl border-2 shadow-sm\"\r\n                                    >\r\n                                        Halt Operation\r\n                                    </Button>\r\n                                )}\r\n                                {isComplete && (\r\n                                    <Button\r\n                                        onClick={resetUpload}\r\n                                        className=\"w-full bg-emerald-500 hover:bg-emerald-600 text-white shadow-lg shadow-emerald-200 h-12 font-bold tracking-widest text-xs uppercase rounded-xl\"\r\n                                    >\r\n                                        Done\r\n                                    </Button>\r\n                                )}\r\n                            </Stack>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\invoice\\InvoiceListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Receipt' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Activity' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'api' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":10},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":57,"column":19,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":57,"endColumn":88},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":78,"column":49,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":78,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":104,"column":49,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":104,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":250,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":250,"endColumn":83}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport {\r\n    Receipt,\r\n    Plus,\r\n    TrendingUp,\r\n    Clock,\r\n    Activity,\r\n    CheckCircle,\r\n    Boxes,\r\n    FileCheck,\r\n} from \"lucide-react\";\r\nimport { api, InvoiceListItem, InvoiceStats } from \"@/lib/api\";\r\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\r\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\r\nimport {\r\n    Body,\r\n    SmallText,\r\n    Accounting,\r\n    StatusBadge,\r\n    ListPageTemplate,\r\n    type SummaryCardProps,\r\n    type Column,\r\n    Button,\r\n    Flex,\r\n    Box,\r\n    Label,\r\n} from \"@/components/design-system\";\r\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\r\n\r\nconst columns: Column<InvoiceListItem>[] = [\r\n    {\r\n        key: \"invoice_number\",\r\n        label: \"INVOICE #\",\r\n        sortable: true,\r\n        width: \"12%\",\r\n        render: (_value, inv) => (\r\n            <Link\r\n                href={`/invoice/${encodeURIComponent(inv.invoice_number)}`}\r\n                className=\"block group\"\r\n            >\r\n                <Accounting className=\"text-app-accent tracking-tight group-hover:underline underline-offset-4 decoration-2\">\r\n                    {inv.invoice_number}\r\n                </Accounting>\r\n            </Link>\r\n        ),\r\n    },\r\n    {\r\n        key: \"invoice_date\",\r\n        label: \"DATE\",\r\n        sortable: true,\r\n        width: \"10%\",\r\n        render: (v) => (\r\n            <Body className=\"text-app-fg-muted font-bold text-[13px] whitespace-nowrap\">\r\n                {formatDate(String(v))}\r\n            </Body>\r\n        ),\r\n    },\r\n    {\r\n        key: \"dc_number\",\r\n        label: \"LINKED DCS\",\r\n        width: \"14%\",\r\n        render: (v) => (\r\n            <Flex wrap gap={1}>\r\n                {String(v) && String(v) !== \"null\" && String(v) !== \"undefined\" ? (\r\n                    String(v)\r\n                        .split(\",\")\r\n                        .map((dc: string, i: number) => (\r\n                            <Link\r\n                                key={i}\r\n                                href={`/dc/${dc.trim()}`}\r\n                                className=\"no-underline\"\r\n                            >\r\n                                <Box className=\"px-2 py-0.5 rounded-lg bg-app-accent/10 text-app-accent cursor-pointer hover:bg-app-accent/20 transition-all shadow-sm\">\r\n                                    <Accounting className=\"text-inherit leading-none text-[10px] tracking-tight\">{dc.trim()}</Accounting>\r\n                                </Box>\r\n                            </Link>\r\n                        ))\r\n                ) : (\r\n                    <SmallText className=\"italic font-medium text-app-fg-muted/50\">Direct</SmallText>\r\n                )}\r\n            </Flex>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_numbers\",\r\n        label: \"LINKED POS\",\r\n        width: \"14%\",\r\n        render: (v) => (\r\n            <Flex wrap gap={1}>\r\n                {String(v) && String(v) !== \"null\" ? (\r\n                    String(v)\r\n                        .split(\",\")\r\n                        .map((po: string, i: number) => (\r\n                            <Link\r\n                                key={i}\r\n                                href={`/po/${po.trim()}`}\r\n                                className=\"no-underline\"\r\n                            >\r\n                                <Box className=\"px-2 py-0.5 rounded-lg bg-app-overlay/5 text-app-fg-muted border border-app-border/10 cursor-pointer hover:bg-app-overlay/10 transition-all shadow-sm\">\r\n                                    <Accounting className=\"text-inherit leading-none text-[10px] tracking-tight\">{po.trim()}</Accounting>\r\n                                </Box>\r\n                            </Link>\r\n                        ))\r\n                ) : (\r\n                    <SmallText className=\"italic font-medium text-app-fg-muted/50\">Direct</SmallText>\r\n                )}\r\n            </Flex>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_items\",\r\n        label: \"ITEMS\",\r\n        width: \"6%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-right pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_dispatched_quantity\",\r\n        label: \"DLV\",\r\n        width: \"8%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"success\" className=\"text-right pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_received_quantity\",\r\n        label: \"RECD\",\r\n        width: \"8%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"highlight\" className=\"text-app-accent text-right pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_invoice_value\",\r\n        label: \"VALUE\",\r\n        sortable: true,\r\n        align: \"right\",\r\n        width: \"12%\",\r\n        isCurrency: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-app-fg text-right pr-2\" isCurrency>\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"status\",\r\n        label: \"STATUS\",\r\n        sortable: true,\r\n        width: \"10%\",\r\n        align: \"center\",\r\n        render: (v) => (\r\n            <div className=\"flex justify-center\">\r\n                <StatusBadge status={String(v || \"Pending\")} className=\"w-24 shadow-sm\" />\r\n            </div>\r\n        ),\r\n    },\r\n];\r\n\r\ninterface InvoiceListClientProps {\r\n    initialInvoices: InvoiceListItem[];\r\n    initialStats: InvoiceStats | null;\r\n}\r\n\r\nexport function InvoiceListClient({ initialInvoices, initialStats }: InvoiceListClientProps) {\r\n    const router = useRouter();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const debouncedSearch = useDebouncedValue(searchQuery, 300);\r\n    const [page, setPage] = useState(1);\r\n    const pageSize = 10;\r\n\r\n    const filteredInvoices = useMemo(() => {\r\n        const term = debouncedSearch.toLowerCase();\r\n        return initialInvoices.filter(\r\n            (inv) =>\r\n                inv.invoice_number.toLowerCase().includes(term) ||\r\n                (inv.customer_gstin && inv.customer_gstin.toLowerCase().includes(term))\r\n        );\r\n    }, [initialInvoices, debouncedSearch]);\r\n\r\n    const summaryCards = useMemo(\r\n        (): SummaryCardProps[] => [\r\n            {\r\n                title: \"Total Documents\",\r\n                value: initialInvoices.length,\r\n                icon: <Boxes size={20} />,\r\n                variant: \"primary\",\r\n            },\r\n            {\r\n                title: \"Revenue Confirmed\",\r\n                value: formatIndianCurrency(initialStats?.total_invoiced || 0),\r\n                icon: <FileCheck size={20} />,\r\n                variant: \"success\",\r\n            },\r\n            {\r\n                title: \"Outstanding\",\r\n                value: formatIndianCurrency(initialStats?.pending_payments || 0),\r\n                icon: <Clock size={20} />,\r\n                variant: \"warning\",\r\n            },\r\n            {\r\n                title: \"YTD Billings\",\r\n                value: formatIndianCurrency(initialStats?.total_invoiced || 0),\r\n                icon: <TrendingUp size={20} />,\r\n                variant: \"primary\",\r\n            },\r\n        ],\r\n        [initialInvoices.length, initialStats]\r\n    );\r\n\r\n    const handleSearch = useCallback((val: string) => {\r\n        setSearchQuery(val);\r\n        setPage(1);\r\n    }, []);\r\n\r\n    const toolbar = (\r\n        <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\r\n            <SearchBar\r\n                id=\"invoice-search\"\r\n                value={searchQuery}\r\n                onChange={handleSearch}\r\n                placeholder=\"Search invoices or GSTIN...\"\r\n                className=\"w-full max-w-sm\"\r\n            />\r\n\r\n            <Button\r\n                color=\"primary\"\r\n                size=\"sm\"\r\n                onClick={() => router.push(\"/invoice/create\")}\r\n                className=\"min-w-[140px] shadow-premium active:scale-95 transition-all\"\r\n            >\r\n                <Plus size={16} className=\"mr-2\" />\r\n                <Body className=\"text-white uppercase tracking-widest text-[11px]\">New Invoice</Body>\r\n            </Button>\r\n        </Flex>\r\n    );\r\n\r\n    return (\r\n        <ListPageTemplate\r\n            title=\"GST INVOICES\"\r\n            subtitle=\"Manage all billing documentation and compliance\"\r\n            toolbar={toolbar}\r\n            summaryCards={summaryCards}\r\n            columns={columns}\r\n            data={filteredInvoices}\r\n            keyField=\"invoice_number\"\r\n            page={page}\r\n            pageSize={pageSize}\r\n            totalItems={filteredInvoices.length}\r\n            onPageChange={(newPage) => setPage(newPage)}\r\n            emptyMessage=\"No invoices found\"\r\n            density=\"compact\"\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po-notes\\PONoteListClient.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":89,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":89,"endColumn":85}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useCallback } from \"react\";\r\nimport { Quote } from \"lucide-react\";\r\nimport { api, PONote } from \"@/lib/api\";\r\nimport {\r\n    DocumentTemplate,\r\n    EmptyState,\r\n    Grid,\r\n    Stack,\r\n} from \"@/components/design-system\";\r\nimport { PONoteCard } from \"@/components/po-notes/organisms/PONoteCard\";\r\nimport { PONoteDialog } from \"@/components/po-notes/organisms/PONoteDialog\";\r\nimport { PONoteDeleteDialog } from \"@/components/po-notes/organisms/PONoteDeleteDialog\";\r\nimport { PONotePageActions } from \"@/components/po-notes/organisms/PONotePageActions\";\r\n\r\ninterface PONoteListClientProps {\r\n    initialTemplates: PONote[];\r\n}\r\n\r\nexport function PONoteListClient({ initialTemplates }: PONoteListClientProps) {\r\n    const [templates, setTemplates] = useState<PONote[]>(initialTemplates);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [editingId, setEditingId] = useState<number | null>(null);\r\n    const [deleteId, setDeleteId] = useState<number | null>(null);\r\n    const [formData, setFormData] = useState({ title: \"\", content: \"\" });\r\n\r\n    const loadTemplates = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const data = await api.getPONotes();\r\n            setTemplates(data || []);\r\n        } catch (err) {\r\n            console.error(\"Failed to load templates:\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleSubmit = useCallback(\r\n        async (e: React.FormEvent) => {\r\n            e.preventDefault();\r\n            try {\r\n                if (editingId) {\r\n                    await api.updatePONote(editingId.toString(), formData);\r\n                } else {\r\n                    await api.createPONote(formData);\r\n                }\r\n                setFormData({ title: \"\", content: \"\" });\r\n                setEditingId(null);\r\n                setShowForm(false);\r\n                loadTemplates();\r\n            } catch (err) {\r\n                console.error(\"Failed to save template:\", err);\r\n            }\r\n        },\r\n        [editingId, formData, loadTemplates]\r\n    );\r\n\r\n    const handleEdit = useCallback((template: PONote) => {\r\n        setFormData({ title: template.title, content: template.content });\r\n        setEditingId(template.id);\r\n        setShowForm(true);\r\n    }, []);\r\n\r\n    const handleDeleteConfirm = useCallback(async () => {\r\n        if (!deleteId) return;\r\n        try {\r\n            await api.deletePONote(deleteId.toString());\r\n            loadTemplates();\r\n            setDeleteId(null);\r\n        } catch (err) {\r\n            console.error(\"Failed to delete template:\", err);\r\n        }\r\n    }, [deleteId, loadTemplates]);\r\n\r\n    const handleCreate = () => {\r\n        setFormData({ title: \"\", content: \"\" });\r\n        setEditingId(null);\r\n        setShowForm(true);\r\n    };\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title=\"Document Templates\"\r\n            description=\"Reusable terms and conditions for purchase orders & challans\"\r\n            actions={<PONotePageActions onCreate={handleCreate} disabled={loading} />}\r\n            icon={<Quote size={20} className=\"text-[var(--color-sys-brand-primary)]\" />}\r\n        >\r\n            <Stack gap={8} className=\"py-2\">\r\n                {templates.length > 0 ? (\r\n                    <Grid cols=\"1\" className=\"md:grid-cols-2 lg:grid-cols-3\" gap={6}>\r\n                        {templates.map((template) => (\r\n                            <PONoteCard\r\n                                key={template.id}\r\n                                template={template}\r\n                                onEdit={handleEdit}\r\n                                onDelete={setDeleteId}\r\n                            />\r\n                        ))}\r\n                    </Grid>\r\n                ) : !loading && (\r\n                    <EmptyState\r\n                        icon={Quote}\r\n                        title=\"No templates configured\"\r\n                        description=\"Standardize your document terms for faster processing.\"\r\n                        action={<PONotePageActions onCreate={handleCreate} />}\r\n                    />\r\n                )}\r\n            </Stack>\r\n\r\n            <PONoteDialog\r\n                isOpen={showForm}\r\n                onClose={() => setShowForm(false)}\r\n                title={editingId ? \"Update Template\" : \"New Template\"}\r\n                formData={formData}\r\n                setFormData={setFormData}\r\n                onSubmit={handleSubmit}\r\n                isEditing={!!editingId}\r\n            />\r\n\r\n            <PONoteDeleteDialog\r\n                isOpen={!!deleteId}\r\n                onClose={() => setDeleteId(null)}\r\n                onConfirm={handleDeleteConfirm}\r\n            />\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po-notes\\organisms\\PONoteCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":8,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":8,"endColumn":62},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":9,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":9,"endColumn":66},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Badge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":10,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":10,"endColumn":64},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":11,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":11,"endColumn":77},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":12,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":12,"endColumn":69},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":29,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":29,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":31,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":31,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":42,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":42,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":48,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":48,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":56,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":56,"endColumn":131},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":65,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":65,"endColumn":81}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Edit2,\r\n    Trash2,\r\n    FileText,\r\n    CheckSquare,\r\n} from \"lucide-react\";\r\nimport { PONote } from \"@/lib/api\";\r\nimport { Card } from \"@/components/design-system/atoms/Card\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Badge } from \"@/components/design-system/atoms/Badge\";\r\nimport { H3, SmallText } from \"@/components/design-system/atoms/Typography\";\r\nimport { Flex, Box } from \"@/components/design-system/atoms/Layout\";\r\n\r\ninterface PONoteCardProps {\r\n    template: PONote;\r\n    onEdit: (template: PONote) => void;\r\n    onDelete: (id: number) => void;\r\n}\r\n\r\nexport const PONoteCard = ({ template, onEdit, onDelete }: PONoteCardProps) => {\r\n    return (\r\n        <Card\r\n            className=\"surface-claymorphic shadow-clay-surface h-full hover:shadow-lg transition-all animate-in fade-in zoom-in-95 duration-300 border border-[var(--color-sys-surface-glass_border_light)]\"\r\n        >\r\n            <div className=\"p-6 flex-1 flex flex-col\">\r\n                <Flex justify=\"between\" align=\"start\" className=\"mb-4\">\r\n                    <Flex align=\"center\" gap={3} className=\"flex-1\">\r\n                        <div className=\"w-10 h-10 bg-[var(--color-sys-brand-primary)]/10 rounded-lg flex items-center justify-center shrink-0\">\r\n                            <FileText className=\"w-5 h-5 text-[var(--color-sys-brand-primary)]\" />\r\n                        </div>\r\n                        <H3 className=\"text-[16px] line-clamp-1 text-[var(--color-sys-text-primary)]\">\r\n                            {template.title}\r\n                        </H3>\r\n                    </Flex>\r\n                    <Flex gap={1}>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => onEdit(template)}\r\n                            title=\"Edit\"\r\n                        >\r\n                            <Edit2 size={14} className=\"text-[var(--color-sys-text-secondary)]\" />\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"sm\"\r\n                            onClick={() => onDelete(template.id)}\r\n                            className=\"text-[var(--color-sys-status-error)] hover:text-[var(--color-sys-status-error)]/80\"\r\n                            title=\"Delete\"\r\n                        >\r\n                            <Trash2 size={14} />\r\n                        </Button>\r\n                    </Flex>\r\n                </Flex>\r\n                <Box className=\"flex-1 bg-[var(--color-sys-bg-tertiary)]/30 rounded-lg p-4 border border-[var(--color-sys-text-tertiary)]/10\">\r\n                    <SmallText className=\"text-[var(--color-sys-text-secondary)] leading-relaxed whitespace-pre-wrap line-clamp-6\">\r\n                        {template.content}\r\n                    </SmallText>\r\n                </Box>\r\n                <Flex\r\n                    align=\"center\"\r\n                    justify=\"between\"\r\n                    className=\"mt-4 pt-4 border-t border-[var(--color-sys-text-tertiary)]/10\"\r\n                >\r\n                    <SmallText className=\"text-[var(--color-sys-text-tertiary)]\">\r\n                        Ver. {new Date(template.updated_at).getFullYear()}.\r\n                        {new Date(template.updated_at).getMonth() + 1}\r\n                    </SmallText>\r\n                    <Badge variant=\"success\">\r\n                        <CheckSquare size={12} /> Active\r\n                    </Badge>\r\n                </Flex>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po-notes\\organisms\\PONoteDeleteDialog.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":1,"endColumn":66},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":2,"endColumn":68}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Body } from \"@/components/design-system/atoms/Typography\";\r\nimport { Dialog } from \"@/components/design-system/molecules/Dialog\";\r\n\r\ninterface PONoteDeleteDialogProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onConfirm: () => void;\r\n}\r\n\r\nexport const PONoteDeleteDialog = ({\r\n    isOpen,\r\n    onClose,\r\n    onConfirm,\r\n}: PONoteDeleteDialogProps) => {\r\n    return (\r\n        <Dialog\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            title=\"Delete Template?\"\r\n            maxWidth=\"max-w-md\"\r\n            footer={\r\n                <div className=\"flex gap-3 w-full\">\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        onClick={onClose}\r\n                        className=\"flex-1\"\r\n                    >\r\n                        Cancel\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"destructive\"\r\n                        onClick={onConfirm}\r\n                        className=\"flex-1\"\r\n                    >\r\n                        Delete Forever\r\n                    </Button>\r\n                </div>\r\n            }\r\n        >\r\n            <p className=\"mb-4 text-sys-secondary\">This action cannot be undone.</p>\r\n            <Body className=\"text-sys-secondary\">\r\n                Are you sure you want to permanently delete this template? Any new\r\n                documents will no longer be able to use this preset.\r\n            </Body>\r\n        </Dialog>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po-notes\\organisms\\PONoteDialog.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":3,"endColumn":54},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":66},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Input' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":64},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":65},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":46,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":46,"endColumn":76},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":50,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":50,"endColumn":88},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":57,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":57,"endColumn":110},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":63,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":63,"endColumn":88},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":355}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Label,\r\n} from \"@/components/design-system/atoms/Typography\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Input } from \"@/components/design-system/atoms/Input\";\r\nimport { Stack } from \"@/components/design-system/atoms/Layout\";\r\nimport { Dialog } from \"@/components/design-system/molecules/Dialog\";\r\n\r\ninterface PONoteDialogProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    title: string;\r\n    formData: { title: string; content: string };\r\n    setFormData: (data: { title: string; content: string }) => void;\r\n    onSubmit: (e: React.FormEvent) => void;\r\n    isEditing: boolean;\r\n}\r\n\r\nexport const PONoteDialog = ({\r\n    isOpen,\r\n    onClose,\r\n    title,\r\n    formData,\r\n    setFormData,\r\n    onSubmit,\r\n    isEditing,\r\n}: PONoteDialogProps) => {\r\n    return (\r\n        <Dialog\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            title={title}\r\n            maxWidth=\"max-w-xl\"\r\n            footer={\r\n                <Button\r\n                    type=\"button\"\r\n                    variant=\"default\"\r\n                    onClick={onSubmit}\r\n                    className=\"w-full\"\r\n                >\r\n                    {isEditing ? \"Save Changes\" : \"Create Template\"}\r\n                </Button>\r\n            }\r\n        >\r\n            <Stack gap={4} className=\"py-4\">\r\n                <p className=\"text-[var(--color-sys-text-secondary)] -mt-2\">\r\n                    Configure standard terms for purchase orders\r\n                </p>\r\n                <Stack gap={2}>\r\n                    <Label className=\"text-[var(--color-sys-text-secondary)] uppercase\">Template Title</Label>\r\n                    <Input\r\n                        value={formData.title}\r\n                        onChange={(e) =>\r\n                            setFormData({ ...formData, title: e.target.value })\r\n                        }\r\n                        placeholder=\"e.g., Standard Warranty Clause\"\r\n                        className=\"text-[var(--color-sys-text-primary)] bg-[var(--color-sys-bg-tertiary)]/10\"\r\n                        required\r\n                        autoFocus\r\n                    />\r\n                </Stack>\r\n                <Stack gap={2}>\r\n                    <Label className=\"text-[var(--color-sys-text-secondary)] uppercase\">Template Content</Label>\r\n                    <textarea\r\n                        value={formData.content}\r\n                        onChange={(e) =>\r\n                            setFormData({ ...formData, content: e.target.value })\r\n                        }\r\n                        rows={10}\r\n                        className=\"w-full px-3 py-2 text-[14px] text-[var(--color-sys-text-primary)] bg-[var(--color-sys-bg-tertiary)]/10 border border-[var(--color-sys-text-tertiary)]/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-sys-brand-primary)]/10 focus:border-[var(--color-sys-brand-primary)]/30 resize-none transition-all\"\r\n                        placeholder=\"Enter documentation text...\"\r\n                        required\r\n                    />\r\n                </Stack>\r\n            </Stack>\r\n        </Dialog>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po-notes\\organisms\\PONotePageActions.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":2,"endColumn":66}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Plus } from \"lucide-react\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\n\r\ninterface PONotePageActionsProps {\r\n    onCreate: () => void;\r\n    disabled?: boolean;\r\n}\r\n\r\nexport const PONotePageActions = ({ onCreate, disabled }: PONotePageActionsProps) => {\r\n    return (\r\n        <Button\r\n            variant=\"default\"\r\n            onClick={onCreate}\r\n            disabled={disabled}\r\n        >\r\n            <Plus size={16} /> New Template\r\n        </Button>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po-notes\\organisms\\PONotesSkeleton.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":1,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":1,"endColumn":62},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":2,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":2,"endColumn":70}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Card } from \"@/components/design-system/atoms/Card\";\r\nimport { Flex, Grid } from \"@/components/design-system/atoms/Layout\";\r\n\r\nexport const PONotesSkeleton = () => {\r\n    return (\r\n        <Grid cols=\"1\" className=\"md:grid-cols-2 lg:grid-cols-3\" gap={6}>\r\n            {Array.from({ length: 6 }).map((_, i) => (\r\n                <Card key={i} className=\"surface-claymorphic shadow-clay-surface h-full min-h-[220px] transition-all border border-[var(--color-sys-surface-glass_border_light)]\">\r\n                    <div className=\"p-6 h-full flex flex-col gap-4\">\r\n                        <Flex align=\"center\" gap={3}>\r\n                            <div className=\"w-10 h-10 rounded-lg bg-sys-bg-tertiary animate-pulse\" />\r\n                            <div className=\"h-5 w-32 bg-sys-bg-tertiary rounded animate-pulse\" />\r\n                        </Flex>\r\n                        <div className=\"flex-1 bg-sys-bg-tertiary/20 rounded-lg border border-sys-bg-tertiary/10 animate-pulse min-h-[100px]\" />\r\n                        <div className=\"pt-4 border-t border-[var(--color-sys-text-tertiary)]/10\">\r\n                            <div className=\"h-3 w-20 bg-sys-bg-tertiary rounded animate-pulse\" />\r\n                        </div>\r\n                    </div>\r\n                </Card>\r\n            ))}\r\n        </Grid>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po-notes\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po\\POListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":15},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":19,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":19,"endColumn":66},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":20,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":20,"endColumn":98},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":44},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":27,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":27,"endColumn":64},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":244,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":244,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":254,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":254,"endColumn":73}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo, useRef, useCallback, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { POListItem, POStats } from \"@/lib/api\";\r\nimport {\r\n    FileText,\r\n    Clock,\r\n    Plus,\r\n    IndianRupee,\r\n    Upload,\r\n    TrendingUp,\r\n    Package,\r\n} from \"lucide-react\";\r\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\r\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\r\n\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Body, Accounting, Label, SmallText } from \"@/components/design-system/atoms/Typography\";\r\nimport { StatusBadge } from \"@/components/design-system/organisms/StatusBadge\";\r\nimport { useUpload } from \"@/components/providers/UploadContext\";\r\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\r\nimport { ListPageTemplate } from \"@/components/design-system/templates/ListPageTemplate\";\r\nimport { type Column } from \"@/components/design-system/organisms/DataTable\";\r\nimport { type SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\r\nimport { Flex } from \"@/components/design-system/atoms/Layout\";\r\n\r\nconst columns: Column<POListItem>[] = [\r\n    {\r\n        key: \"po_number\",\r\n        label: \"Number\",\r\n        width: \"12%\",\r\n        render: (_value, po) => (\r\n            <Link href={`/po/${po.po_number}`} className=\"block group\">\r\n                <Accounting className=\"text-slate-900 dark:text-white tracking-tight group-hover:text-app-accent transition-colors\">\r\n                    #{po.po_number}\r\n                </Accounting>\r\n            </Link>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_date\",\r\n        label: \"Date\",\r\n        width: \"12%\",\r\n        render: (v) => (\r\n            <Body className=\"text-slate-500 dark:text-slate-400 font-medium\">\r\n                {formatDate(String(v))}\r\n            </Body>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_value\",\r\n        label: \"Value\",\r\n        width: \"14%\",\r\n        align: \"right\",\r\n        isCurrency: true,\r\n        render: (v) => (\r\n            <Accounting isCurrency className=\"text-slate-900 dark:text-white pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        )\r\n    },\r\n    {\r\n        key: \"total_items_count\",\r\n        label: \"Itm\",\r\n        width: \"6%\",\r\n        align: \"center\",\r\n        render: (v) => (\r\n            <Body className=\"text-slate-500 font-medium\">{v || 1}</Body>\r\n        )\r\n    },\r\n    {\r\n        key: \"total_ordered_quantity\",\r\n        label: \"Ord\",\r\n        width: \"10%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"font-medium text-slate-600 dark:text-slate-300 pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_dispatched_quantity\",\r\n        label: \"Dlv\",\r\n        width: \"10%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-emerald-600 dark:text-emerald-400 pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_pending_quantity\",\r\n        label: \"Bal\",\r\n        width: \"10%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting\r\n                variant={Number(v) > 0 ? \"warning\" : \"success\"}\r\n                className=\"pr-2\"\r\n            >\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_received_quantity\",\r\n        label: \"Recd\",\r\n        width: \"10%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"font-medium text-slate-600 dark:text-slate-300 pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_status\",\r\n        label: \"Status\",\r\n        width: \"14%\",\r\n        align: \"center\",\r\n        render: (v) => (\r\n            <div className=\"flex justify-center pr-4\">\r\n                <StatusBadge status={String(v).toUpperCase()} className=\"shadow-none uppercase\" />\r\n            </div>\r\n        ),\r\n    },\r\n];\r\n\r\ninterface POListClientProps {\r\n    initialPOs: POListItem[];\r\n    initialStats: POStats;\r\n}\r\n\r\nexport function POListClient({ initialPOs, initialStats }: POListClientProps) {\r\n    const router = useRouter();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const debouncedSearch = useDebouncedValue(searchQuery, 300);\r\n    const [page, setPage] = useState(1);\r\n    const [pageSize] = useState(10);\r\n\r\n    // Global Upload Hook\r\n    const { startUpload, isUploading } = useUpload();\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Refresh data when upload completes\r\n    const prevUploading = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (prevUploading.current && !isUploading) {\r\n            router.refresh();\r\n        }\r\n        prevUploading.current = isUploading;\r\n    }, [isUploading, router]);\r\n\r\n    const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = Array.from(e.target.files || []);\r\n        if (files.length > 0) {\r\n            startUpload(files, \"PO\");\r\n        }\r\n    };\r\n\r\n    const handleUploadClick = () => {\r\n        fileInputRef.current?.click();\r\n    };\r\n\r\n    const filteredPOs = useMemo(() => {\r\n        return initialPOs.filter(\r\n            (po) =>\r\n                po.po_number.toString().toLowerCase().includes(debouncedSearch.toLowerCase()) ||\r\n                po.supplier_name?.toLowerCase().includes(debouncedSearch.toLowerCase())\r\n        );\r\n    }, [initialPOs, debouncedSearch]);\r\n\r\n    const summaryCards = useMemo(\r\n        (): SummaryCardProps[] => [\r\n            {\r\n                title: \"Total Orders\",\r\n                value: initialPOs.length,\r\n                icon: <FileText size={20} />,\r\n                variant: \"primary\",\r\n                trend: { value: \"+2\", direction: \"up\" },\r\n            },\r\n            {\r\n                title: \"Open Orders\",\r\n                value: initialStats?.open_orders_count || 0,\r\n                icon: <Package size={20} />,\r\n                variant: \"success\",\r\n            },\r\n            {\r\n                title: \"Pending Approval\",\r\n                value: initialStats?.pending_approval_count || 0,\r\n                icon: <Clock size={20} />,\r\n                variant: \"warning\",\r\n            },\r\n            {\r\n                title: \"Total Value\",\r\n                value: formatIndianCurrency(initialStats?.total_value_ytd || 0),\r\n                icon: <IndianRupee size={20} />,\r\n                variant: \"primary\",\r\n                progress: 75, // Target visualization\r\n            },\r\n        ],\r\n        [initialPOs.length, initialStats]\r\n    );\r\n\r\n    const handleSearch = useCallback((val: string) => {\r\n        setSearchQuery(val);\r\n        setPage(1); // Reset to first page on search\r\n    }, []);\r\n\r\n    const toolbar = (\r\n        <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\r\n            <SearchBar\r\n                id=\"po-search\"\r\n                value={searchQuery}\r\n                onChange={handleSearch}\r\n                placeholder=\"Search orders, items, or status...\"\r\n                className=\"w-full max-w-sm\"\r\n            />\r\n            <Flex align=\"center\" gap={3}>\r\n                <input\r\n                    ref={fileInputRef}\r\n                    type=\"file\"\r\n                    multiple\r\n                    accept=\".pdf,.html\"\r\n                    onChange={handleFileSelect}\r\n                    className=\"hidden\"\r\n                />\r\n\r\n                <Button\r\n                    variant=\"secondary\"\r\n                    onClick={handleUploadClick}\r\n                    className=\"min-w-[140px] shadow-sm bg-white dark:bg-white/10 border-slate-200 dark:border-white/10 hover:bg-slate-50 dark:hover:bg-white/20\"\r\n                >\r\n                    <Upload size={16} className=\"mr-2 text-slate-700 dark:text-slate-200\" />\r\n                    <Body className=\"text-slate-700 dark:text-slate-200 font-medium text-[13px]\">Upload PO</Body>\r\n                </Button>\r\n\r\n                <Button\r\n                    color=\"primary\"\r\n                    size=\"sm\"\r\n                    onClick={() => router.push(\"/po/create\")}\r\n                    className=\"min-w-[180px] shadow-lg shadow-blue-500/30 active:scale-[0.98] transition-all py-2 bg-primary hover:bg-blue-600\"\r\n                >\r\n                    <Plus size={18} className=\"mr-2\" />\r\n                    <Body className=\"text-white font-medium text-[13px]\">New Purchase Order</Body>\r\n                </Button>\r\n            </Flex>\r\n        </Flex>\r\n    );\r\n\r\n    return (\r\n        <ListPageTemplate\r\n            title=\"Purchase Orders\"\r\n            subtitle=\"Manage procurement contracts and track delivery schedules.\"\r\n            toolbar={toolbar}\r\n            summaryCards={summaryCards}\r\n            columns={columns}\r\n            data={filteredPOs}\r\n            keyField=\"po_number\"\r\n            page={page}\r\n            pageSize={pageSize}\r\n            totalItems={filteredPOs.length}\r\n            onPageChange={(newPage) => setPage(newPage)}\r\n            emptyMessage=\"No purchase orders found\"\r\n            density=\"normal\"\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po\\organisms\\PODetailCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":65},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[697,700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[697,700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'header' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { Suspense } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { Stack } from \"@/components/design-system/atoms/Layout\";\r\nimport { DocumentJourney } from \"@/components/design-system/molecules/DocumentJourney\";\r\nimport { PODetailInfo } from \"./PODetailInfo\";\r\n\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\n// Lazy load heavy table data for zero-waterfall effect\r\nconst PODetailItems = dynamic(() => import(\"./PODetailItems\").then(mod => mod.PODetailItems), {\r\n    ssr: false,\r\n    loading: () => <div className=\"h-[400px] w-full bg-app-surface/50 animate-pulse rounded-xl border border-app-border/10\" />\r\n});\r\n\r\ninterface PODetailCardProps {\r\n    srvs: any[];\r\n    editMode: boolean;\r\n    expandedItems: Set<number>;\r\n    activeTab: string;\r\n    setActiveTab: (tab: string) => void;\r\n    toggleItem: (itemNo: number) => void;\r\n    onSRVClick: (srvNumber: string) => void;\r\n}\r\n\r\nexport const PODetailCard = (props: PODetailCardProps) => {\r\n    const header = usePOStore((state) => state.data?.header);\r\n\r\n    // Actions are used inside children, but we pass editMode/expandedItems as before\r\n    // to maintain control flow from the client parent if desired,\r\n    // OR we could move those to store too. For now let's stick to the plan.\r\n\r\n    return (\r\n        <Stack gap={6}>\r\n            <DocumentJourney currentStage=\"PO\" className=\"mb-2\" />\r\n\r\n            <PODetailInfo\r\n                srvs={props.srvs}\r\n                editMode={props.editMode}\r\n                activeTab={props.activeTab}\r\n                setActiveTab={props.setActiveTab}\r\n                onSRVClick={props.onSRVClick}\r\n            />\r\n\r\n            <Suspense fallback={<div className=\"h-[400px] w-full bg-app-surface/50 animate-pulse rounded-xl border border-app-border/10\" />}>\r\n                <PODetailItems\r\n                    editMode={props.editMode}\r\n                    expandedItems={props.expandedItems}\r\n                    toggleItem={props.toggleItem}\r\n                />\r\n            </Suspense>\r\n        </Stack>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po\\organisms\\PODetailInfo.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Input' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":64},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":95},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'H3' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":76},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":26},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":7,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":16},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Badge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":8,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":8,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Badge' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":15},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":9,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":9,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SummaryCards' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1035,1038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1035,1038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":42,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":42,"endColumn":119},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":53,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":53,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":57,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":57,"endColumn":129},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2511,2514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2511,2514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":158,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":158,"endColumn":147},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":165,"column":49,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":165,"endColumn":201},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":169,"column":50,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":169,"endColumn":135},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":180,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10854,10857],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10854,10857],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":188,"column":58,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":188,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":191,"column":58,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":191,"endColumn":161},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":204,"column":58,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":204,"endColumn":154},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":207,"column":83,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":207,"endColumn":106},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":212,"column":58,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":212,"endColumn":152},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":215,"column":81,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":215,"endColumn":104}],"suppressedMessages":[],"errorCount":25,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Input } from \"@/components/design-system/atoms/Input\";\r\nimport { Body, H3, SmallText, Accounting } from \"@/components/design-system/atoms/Typography\";\r\nimport { Stack, Flex, Box } from \"@/components/design-system/atoms/Layout\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Badge } from \"@/components/design-system/atoms/Badge\";\r\nimport { Card } from \"@/components/design-system/atoms/Card\";\r\nimport {\r\n    Tabs,\r\n    TabsList,\r\n    TabsTrigger,\r\n    TabsContent\r\n} from \"@/components/design-system/molecules/Tabs\";\r\nimport { SummaryCards } from \"@/components/design-system/organisms/SummaryCards\";\r\nimport {\r\n    Info,\r\n    FileText,\r\n    Landmark,\r\n    ShieldCheck,\r\n    Receipt,\r\n    Calendar\r\n} from \"lucide-react\";\r\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\ninterface FieldProps {\r\n    label: string;\r\n    value: any;\r\n    field?: string;\r\n    readonly?: boolean;\r\n    editMode: boolean;\r\n}\r\n\r\nconst Field = ({ label, value, field, readonly = false, editMode }: FieldProps) => {\r\n    const updateHeader = usePOStore((state) => state.updateHeader);\r\n    return (\r\n        <div className=\"min-h-[44px] flex flex-col justify-center\">\r\n            <SmallText className=\"text-[10px] font-bold text-app-fg/40 uppercase tracking-[0.2em] mb-1.5 leading-none\">\r\n                {label}\r\n            </SmallText>\r\n            {editMode && field && !readonly ? (\r\n                <Input\r\n                    value={value ?? \"\"}\r\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => updateHeader(field, e.target.value)}\r\n                    className=\"h-7 px-2 py-1 border-none bg-app-surface-hover focus:bg-app-surface transition-all shadow-none focus:shadow-sm font-medium text-app-fg\"\r\n                />\r\n            ) : (\r\n                <div\r\n                    className=\"text-[13px] font-medium text-app-fg leading-tight py-1 truncate\"\r\n                    title={value?.toString()}\r\n                >\r\n                    {value || (\r\n                        <span className=\"text-app-fg-muted font-normal italic opacity-60 uppercase tracking-tighter text-[10px]\">\r\n                            Empty\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface PODetailInfoProps {\r\n    srvs: any[];\r\n    editMode: boolean;\r\n    onSRVClick: (srvNumber: string) => void;\r\n    activeTab: string;\r\n    setActiveTab: (tab: string) => void;\r\n}\r\n\r\nexport const PODetailInfo = ({\r\n    srvs,\r\n    editMode,\r\n    onSRVClick,\r\n    activeTab,\r\n    setActiveTab,\r\n}: PODetailInfoProps) => {\r\n    const header = usePOStore((state) => state.data?.header);\r\n    const updateHeader = usePOStore((state) => state.updateHeader);\r\n\r\n    if (!header) return null;\r\n    return (\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n            <TabsList className=\"mb-4 bg-app-surface-hover p-1 rounded-xl w-fit\">\r\n                <TabsTrigger value=\"basic\">\r\n                    <Info className=\"w-3.5 h-3.5 mr-1.5\" /> Basic\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"references\">\r\n                    <FileText className=\"w-3.5 h-3.5 mr-1.5\" /> Refs\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"financial\">\r\n                    <Landmark className=\"w-3.5 h-3.5 mr-1.5\" /> Finance\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"issuer\">\r\n                    <ShieldCheck className=\"w-3.5 h-3.5 mr-1.5\" /> Issuer\r\n                </TabsTrigger>\r\n                <TabsTrigger value=\"srvs\">\r\n                    <Receipt className=\"w-3.5 h-3.5 mr-1.5\" /> SRVs ({srvs.length})\r\n                </TabsTrigger>\r\n            </TabsList>\r\n            <AnimatePresence mode=\"wait\">\r\n                <motion.div\r\n                    key={activeTab}\r\n                    initial={{ opacity: 0, y: 5 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -5 }}\r\n                    transition={{ duration: 0.15 }}\r\n                >\r\n                    <div className=\"bg-app-surface border border-app-border rounded-xl shadow-sm p-6 min-h-[180px]\">\r\n                        <TabsContent value=\"basic\" className=\"m-0\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\r\n                                <Field label=\"PO Number\" value={header.po_number} field=\"po_number\" readonly editMode={editMode} />\r\n                                <Field label=\"PO Date\" value={formatDate(header.po_date)} field=\"po_date\" readonly editMode={editMode} />\r\n                                <Field label=\"Supplier Name\" value={header.supplier_name} field=\"supplier_name\" editMode={editMode} />\r\n                                <Field label=\"Supplier Code\" value={header.supplier_code} field=\"supplier_code\" editMode={editMode} />\r\n                                <Field label=\"Phone\" value={header.supplier_phone} field=\"supplier_phone\" editMode={editMode} />\r\n                                <Field label=\"Fax\" value={header.supplier_fax} field=\"supplier_fax\" editMode={editMode} />\r\n                                <Field label=\"Email\" value={header.supplier_email} field=\"supplier_email\" editMode={editMode} />\r\n                                <Field label=\"Dept No (DVN)\" value={header.department_no} field=\"department_no\" editMode={editMode} />\r\n                            </div>\r\n                        </TabsContent>\r\n                        <TabsContent value=\"references\" className=\"m-0\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\r\n                                <Field label=\"Enquiry No\" value={header.enquiry_no} field=\"enquiry_no\" editMode={editMode} />\r\n                                <Field label=\"Enquiry Date\" value={formatDate(header.enquiry_date)} field=\"enquiry_date\" editMode={editMode} />\r\n                                <Field label=\"Quotation Ref\" value={header.quotation_ref} field=\"quotation_ref\" editMode={editMode} />\r\n                                <Field label=\"Quotation Date\" value={formatDate(header.quotation_date)} field=\"quotation_date\" editMode={editMode} />\r\n                                <Field label=\"RC No\" value={header.rc_no} field=\"rc_no\" editMode={editMode} />\r\n                                <Field label=\"Order Type\" value={header.order_type} field=\"order_type\" editMode={editMode} />\r\n                                <Field label=\"PO Status\" value={header.po_status} field=\"po_status\" editMode={editMode} />\r\n                                <Field label=\"Amd No\" value={header.amend_no} field=\"amend_no\" editMode={editMode} />\r\n                            </div>\r\n                        </TabsContent>\r\n                        <TabsContent value=\"financial\" className=\"m-0\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\r\n                                <Field label=\"PO Value\" value={formatIndianCurrency(header.po_value)} field=\"po_value\" editMode={editMode} />\r\n                                <Field label=\"FOB Value\" value={formatIndianCurrency(header.fob_value)} field=\"fob_value\" editMode={editMode} />\r\n                                <Field label=\"Net Value\" value={formatIndianCurrency(header.net_po_value)} field=\"net_po_value\" editMode={editMode} />\r\n                                <Field label=\"TIN No\" value={header.tin_no} field=\"tin_no\" editMode={editMode} />\r\n                                <Field label=\"ECC No\" value={header.ecc_no} field=\"ecc_no\" editMode={editMode} />\r\n                                <Field label=\"MPCT No\" value={header.mpct_no} field=\"mpct_no\" editMode={editMode} />\r\n                                <Field label=\"Currency\" value={header.currency} field=\"currency\" editMode={editMode} />\r\n                                <Field label=\"Ex Rate\" value={header.ex_rate} field=\"ex_rate\" editMode={editMode} />\r\n                            </div>\r\n                        </TabsContent>\r\n                        <TabsContent value=\"issuer\" className=\"m-0\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\r\n                                <Field label=\"Inspection By\" value={header.inspection_by} field=\"inspection_by\" editMode={editMode} />\r\n                                <Field label=\"Issuer Name\" value={header.issuer_name} field=\"issuer_name\" editMode={editMode} />\r\n                                <Field label=\"Designation\" value={header.issuer_designation} field=\"issuer_designation\" editMode={editMode} />\r\n                                <Field label=\"Issuer Phone\" value={header.issuer_phone} field=\"issuer_phone\" editMode={editMode} />\r\n                                <div className=\"col-span-2 md:col-span-4 mt-2\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <SmallText className=\"text-[10px] font-bold text-app-fg-muted uppercase tracking-widest mb-1 leading-none\">\r\n                                            Remarks\r\n                                        </SmallText>\r\n                                        {editMode ? (\r\n                                            <input\r\n                                                value={header.remarks || \"\"}\r\n                                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => updateHeader(\"remarks\", e.target.value)}\r\n                                                className=\"w-full h-8 px-2 text-[13px] border-none bg-app-surface-hover rounded focus:bg-app-surface transition-all shadow-none font-medium text-app-fg\"\r\n                                                placeholder=\"Enter remarks...\"\r\n                                            />\r\n                                        ) : (\r\n                                            <div className=\"text-[13px] text-app-fg font-normal line-clamp-1 italic px-0.5 opacity-90\" title={header.remarks || \"\"}>\r\n                                                {header.remarks || \"No remarks provided.\"}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </TabsContent>\r\n                        <TabsContent value=\"srvs\" className=\"m-0\">\r\n                            {srvs.length > 0 ? (\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                                    {srvs.map((srv: any) => (\r\n                                        <div\r\n                                            key={srv.srv_number}\r\n                                            className=\"p-4 rounded-xl shadow-sm bg-app-border/10 hover:bg-app-accent/5 hover:shadow-md transition-all duration-300 group cursor-pointer\"\r\n                                            onClick={() => onSRVClick(srv.srv_number)}\r\n                                        >\r\n                                            <Flex justify=\"between\" align=\"start\" className=\"mb-3\">\r\n                                                <Stack gap={1}>\r\n                                                    <div className=\"text-[10px] font-bold text-app-fg uppercase tracking-tight group-hover:text-app-accent\">\r\n                                                        SRV-{srv.srv_number}\r\n                                                    </div>\r\n                                                    <div className=\"text-[9px] font-medium text-app-fg-muted flex items-center gap-1 uppercase tracking-tighter\">\r\n                                                        <Calendar className=\"w-2.5 h-2.5\" />\r\n                                                        {formatDate(srv.srv_date)}\r\n                                                    </div>\r\n                                                </Stack>\r\n                                                <Stack align=\"end\" gap={2}>\r\n                                                    <div className=\"w-6 h-6 rounded-lg bg-app-accent/10 flex items-center justify-center text-app-accent shadow-sm\">\r\n                                                        <Receipt className=\"w-3 h-3\" />\r\n                                                    </div>\r\n                                                </Stack>\r\n                                            </Flex>\r\n                                            <div className=\"grid grid-cols-2 pt-2 border-t border-app-border/20 mt-2 gap-2\">\r\n                                                <div>\r\n                                                    <div className=\"text-[7px] font-bold text-app-status-success uppercase tracking-widest leading-tight\">\r\n                                                        Accepted\r\n                                                    </div>\r\n                                                    <Accounting variant=\"success\" className=\"text-[11px]\">\r\n                                                        {srv.total_accepted_qty || 0}\r\n                                                    </Accounting>\r\n                                                </div>\r\n                                                <div className=\"text-right\">\r\n                                                    <div className=\"text-[7px] font-bold text-app-status-error uppercase tracking-widest leading-tight\">\r\n                                                        Rejected\r\n                                                    </div>\r\n                                                    <Accounting variant=\"error\" className=\"text-[11px]\">\r\n                                                        {srv.total_rejected_qty || 0}\r\n                                                    </Accounting>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"text-center py-6 text-app-fg-muted italic text-sm\">\r\n                                    No linked SRVs found.\r\n                                </div>\r\n                            )}\r\n                        </TabsContent>\r\n                    </div>\r\n                </motion.div>\r\n            </AnimatePresence>\r\n        </Tabs>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po\\organisms\\PODetailItems.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":66},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Input' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":64},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":103},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":7,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Layers' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":11},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":106,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":106,"endColumn":69},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":107,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":107,"endColumn":72},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":117,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":117,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":120,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":120,"endColumn":86},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":133,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":133,"endColumn":74},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":145,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":145,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":149,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":149,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":152,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":152,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":187,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":187,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6951,6954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6951,6954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":188,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":188,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7052,7055],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7052,7055],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":189,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":189,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7156,7159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7156,7159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":205,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":205,"endColumn":83},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":209,"column":126,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":209,"endColumn":178},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":211,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":211,"endColumn":81},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":216,"column":112,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":216,"endColumn":164},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":218,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":218,"endColumn":78},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":223,"column":140,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":223,"endColumn":192},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":225,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":225,"endColumn":98},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":232,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":232,"endColumn":77},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":235,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":235,"endColumn":95},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":238,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":238,"endColumn":95},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":241,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":241,"endColumn":77},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":268,"column":100,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":268,"endColumn":190},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":292,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":292,"endColumn":96},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":296,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":296,"endColumn":157},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":306,"column":83,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":306,"endColumn":110},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":307,"column":72,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":307,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":308,"column":72,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":308,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":309,"column":62,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":309,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":310,"column":83,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":310,"endColumn":110},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":311,"column":82,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":311,"endColumn":109},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":312,"column":116,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":312,"endColumn":176},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":313,"column":116,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":313,"endColumn":176},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":314,"column":82,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":314,"endColumn":109}],"suppressedMessages":[],"errorCount":36,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Input } from \"@/components/design-system/atoms/Input\";\r\nimport { Accounting, SmallText, Body, Label, MonoCode, Card } from \"@/components/design-system/atoms\";\r\nimport { Flex, Stack } from \"@/components/design-system/atoms/Layout\";\r\nimport {\r\n    Plus,\r\n    Trash2,\r\n    ChevronDown,\r\n    ChevronUp,\r\n    Layers,\r\n    AlertCircle\r\n} from \"lucide-react\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\ninterface PODetailItemsProps {\r\n    editMode: boolean;\r\n    expandedItems: Set<number>;\r\n    toggleItem: (itemNo: number) => void;\r\n}\r\n\r\nconst QuantityInput = React.memo(({\r\n    value,\r\n    onUpdate,\r\n    min,\r\n    max,\r\n    className\r\n}: {\r\n    value: number;\r\n    onUpdate: (val: number) => void;\r\n    min?: number;\r\n    max?: number;\r\n    className?: string;\r\n}) => {\r\n    const [localValue, setLocalValue] = React.useState(value.toString());\r\n\r\n    React.useEffect(() => {\r\n        setLocalValue(value.toString());\r\n    }, [value]);\r\n\r\n    const handleCommit = () => {\r\n        const newVal = parseFloat(localValue) || 0;\r\n        // Balance Guard: Clamp value if needed, or let user know.\r\n        // For PO Detail, we allow manual override but within reason?\r\n        // User said: \"Delivered quantity cannot exceed ordered quantity\" (Validation already exists in backend).\r\n        // Let's implement some basic checks.\r\n        if (min !== undefined && newVal < min) {\r\n            setLocalValue(min.toString());\r\n            onUpdate(min);\r\n            return;\r\n        }\r\n        if (max !== undefined && newVal > max) {\r\n            setLocalValue(max.toString());\r\n            onUpdate(max);\r\n            return;\r\n        }\r\n        if (newVal !== value) {\r\n            onUpdate(newVal);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Input\r\n            type=\"number\"\r\n            value={localValue}\r\n            onChange={(e) => setLocalValue(e.target.value)}\r\n            onBlur={handleCommit}\r\n            onKeyDown={(e) => {\r\n                if (e.key === 'Enter') handleCommit();\r\n            }}\r\n            className={cn(\"h-7 px-2 font-mono text-xs text-right transition-all\", className)}\r\n        />\r\n    );\r\n});\r\nQuantityInput.displayName = \"QuantityInput\";\r\n\r\nconst LotRow = React.memo(({\r\n    itemIdx,\r\n    lotIdx,\r\n    editMode,\r\n}: {\r\n    itemIdx: number;\r\n    lotIdx: number;\r\n    editMode: boolean;\r\n}) => {\r\n    const delivery = usePOStore((state) => state.data?.items[itemIdx].deliveries[lotIdx]);\r\n    const updateDelivery = usePOStore((state) => state.updateDelivery);\r\n    const removeDelivery = usePOStore((state) => state.removeDelivery);\r\n\r\n    if (!delivery) return null;\r\n\r\n    const ord = delivery.ordered_quantity || 0;\r\n    const dlv = delivery.delivered_quantity || 0;\r\n    const recd = delivery.received_quantity || 0;\r\n    const bal = Math.max(0, ord - dlv);\r\n\r\n    return (\r\n        <tr className=\"bg-app-surface transition-colors border-b border-app-border/5\">\r\n            <td className=\"py-2 px-0 relative w-[60px]\">\r\n                {/* Visual Indent Pipe */}\r\n                <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                    <span className=\"text-[10px] text-app-accent/30\">L</span>\r\n                    <MonoCode className=\"text-[11px] text-app-fg-muted\">L-{delivery.lot_no}</MonoCode>\r\n                </div>\r\n            </td>\r\n            <td colSpan={3} />\r\n            <td className=\"py-2 px-4\">\r\n                {editMode ? (\r\n                    <Input\r\n                        type=\"date\"\r\n                        value={delivery.dely_date ? delivery.dely_date.split('T')[0] : ''}\r\n                        onChange={(e) => updateDelivery(itemIdx, lotIdx, 'dely_date', e.target.value)}\r\n                        className=\"h-7 text-[10px] bg-app-surface/50 border-app-border/50 px-1 font-medium\"\r\n                    />\r\n                ) : (\r\n                    <SmallText className=\"text-[10px] text-app-fg-muted/60 uppercase\">\r\n                        {formatDate(delivery.dely_date)}\r\n                    </SmallText>\r\n                )}\r\n            </td>\r\n            <td className=\"py-2 px-4 text-right\">\r\n                {editMode ? (\r\n                    <QuantityInput\r\n                        value={ord}\r\n                        onUpdate={(val) => updateDelivery(itemIdx, lotIdx, 'ordered_quantity', val)}\r\n                        className=\"border-app-border border\"\r\n                    />\r\n                ) : (\r\n                    <Accounting className=\"text-[11px] text-app-fg-muted\">{ord}</Accounting>\r\n                )}\r\n            </td>\r\n            <td className=\"py-2 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                {editMode ? (\r\n                    <QuantityInput\r\n                        value={dlv}\r\n                        max={ord}\r\n                        onUpdate={(val) => updateDelivery(itemIdx, lotIdx, 'delivered_quantity', val)}\r\n                        className=\"border-blue-200 dark:border-blue-800 text-blue-600 dark:text-blue-400\"\r\n                    />\r\n                ) : (\r\n                    <Accounting className=\"text-[12px] text-blue-600 dark:text-blue-400\">{dlv}</Accounting>\r\n                )}\r\n            </td>\r\n            <td className=\"py-2 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                <Accounting className=\"text-[12px] text-blue-600 dark:text-blue-400\">{bal}</Accounting>\r\n            </td>\r\n            <td className=\"py-2 px-4 text-right\">\r\n                <Accounting className=\"text-[11px] text-app-fg-muted\">{recd}</Accounting>\r\n            </td>\r\n            <td className=\"py-2 px-4 text-center\">\r\n                {editMode && (\r\n                    <button onClick={() => removeDelivery(itemIdx, lotIdx)} className=\"text-app-status-error/40 hover:text-app-status-error transition-all\">\r\n                        <Trash2 size={14} />\r\n                    </button>\r\n                )}\r\n            </td>\r\n        </tr>\r\n    );\r\n});\r\nLotRow.displayName = \"LotRow\";\r\n\r\nconst ItemRow = React.memo(({\r\n    idx,\r\n    editMode,\r\n    isExpanded,\r\n    toggleItem,\r\n}: {\r\n    idx: number;\r\n    editMode: boolean;\r\n    isExpanded: boolean;\r\n    toggleItem: (n: number) => void;\r\n}) => {\r\n    const item = usePOStore((state) => state.data?.items[idx]);\r\n    const updateItem = usePOStore((state) => state.updateItem);\r\n    const removeItem = usePOStore((state) => state.removeItem);\r\n    const addDelivery = usePOStore((state) => state.addDelivery);\r\n\r\n    if (!item) return null;\r\n\r\n    // Memoize aggregations for performance\r\n    const { tOrd, tDlv, tRecd, tBal } = useMemo(() => {\r\n        const deliveries = item.deliveries || [];\r\n        const ord = deliveries.reduce((acc: number, d: any) => acc + (d.ordered_quantity || 0), 0);\r\n        const dlv = deliveries.reduce((acc: number, d: any) => acc + (d.delivered_quantity || 0), 0);\r\n        const recd = deliveries.reduce((acc: number, d: any) => acc + (d.received_quantity || 0), 0);\r\n        return {\r\n            tOrd: ord,\r\n            tDlv: dlv,\r\n            tRecd: recd,\r\n            tBal: Math.max(0, ord - dlv)\r\n        };\r\n    }, [item.deliveries]);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <tr className={cn(\r\n                \"transition-colors border-b border-app-border/10\",\r\n                isExpanded ? \"bg-app-overlay/10\" : \"bg-app-overlay/5\"\r\n            )}>\r\n                <td className=\"py-3 px-4 text-center\">\r\n                    <MonoCode className=\"text-[12px] text-app-accent leading-none\">#{item.po_item_no}</MonoCode>\r\n                </td>\r\n                <td className=\"py-3 px-4\">\r\n                    {editMode ? (\r\n                        <Input value={item.material_code} onChange={(e) => updateItem(idx, \"material_code\", e.target.value)} className=\"h-7 w-full text-[12px] bg-app-surface/50\" />\r\n                    ) : (\r\n                        <Accounting className=\"text-[12px] text-app-fg-muted/70\">{item.material_code}</Accounting>\r\n                    )}\r\n                </td>\r\n                <td className=\"py-3 px-4\">\r\n                    {editMode ? (\r\n                        <Input value={item.drg_no} onChange={(e) => updateItem(idx, \"drg_no\", e.target.value)} className=\"h-7 w-full text-[11px] bg-app-surface/50\" />\r\n                    ) : (\r\n                        <SmallText className=\"text-[11px] text-app-accent/60\">{item.drg_no || \"-\"}</SmallText>\r\n                    )}\r\n                </td>\r\n                <td className=\"py-3 px-4\">\r\n                    {editMode ? (\r\n                        <Input value={item.material_description} onChange={(e) => updateItem(idx, \"material_description\", e.target.value)} className=\"h-7 w-full text-[12px] bg-app-surface/50\" />\r\n                    ) : (\r\n                        <Body className=\"text-[13px] text-app-fg-muted/80 truncate max-w-[200px]\" title={item.material_description}>{item.material_description}</Body>\r\n                    )}\r\n                </td>\r\n                <td className=\"py-3 px-4 text-center\">\r\n                    <SmallText className=\"uppercase text-app-fg-muted/40\">{item.unit}</SmallText>\r\n                </td>\r\n                <td className=\"py-3 px-4 text-right\">\r\n                    <Accounting className=\"text-[13px] text-app-fg-muted/60\">{tOrd}</Accounting>\r\n                </td>\r\n                <td className=\"py-3 px-4 text-right bg-blue-50/10 dark:bg-blue-900/10\">\r\n                    <Accounting className=\"text-[13px] text-blue-600/60 dark:text-blue-400/60\">{tDlv}</Accounting>\r\n                </td>\r\n                <td className=\"py-3 px-4 text-right bg-blue-50/10 dark:bg-blue-900/10\">\r\n                    <Accounting className=\"text-[13px] text-blue-600/60 dark:text-blue-400/60\">{tBal}</Accounting>\r\n                </td>\r\n                <td className=\"py-3 px-4 text-right\">\r\n                    <Accounting className=\"text-[13px] text-app-fg-muted/60\">{tRecd}</Accounting>\r\n                </td>\r\n                <td className=\"py-3 px-4 text-center\">\r\n                    <div className=\"flex items-center justify-center gap-1\">\r\n                        <button onClick={() => toggleItem(item.po_item_no)} className={cn(\"p-1.5 rounded-md transition-all\", isExpanded ? \"bg-app-accent/10 text-app-accent\" : \"text-app-fg-muted/40 hover:text-app-fg\")}>\r\n                            {isExpanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n                        </button>\r\n                        {editMode && (\r\n                            <button onClick={() => removeItem(idx)} className=\"p-1.5 text-app-status-error/40 hover:text-app-status-error hover:bg-app-status-error/5 rounded-md transition-all\">\r\n                                <Trash2 size={16} />\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n\r\n            {isExpanded && (\r\n                <React.Fragment>\r\n                    {item.deliveries?.map((d, dIdx) => (\r\n                        <LotRow key={`${item.id}-lot-${d.lot_no}`} itemIdx={idx} lotIdx={dIdx} editMode={editMode} />\r\n                    ))}\r\n                    {editMode && (\r\n                        <tr className=\"bg-app-surface\">\r\n                            <td className=\"py-2 px-0 relative\">\r\n                                <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/10\" />\r\n                            </td>\r\n                            <td colSpan={9} className=\"py-2 px-4\">\r\n                                <Button variant=\"ghost\" size=\"sm\" onClick={() => addDelivery(idx)} className=\"h-6 text-[10px] text-app-accent hover:bg-app-accent/5 uppercase tracking-wider\">\r\n                                    <Plus size={12} className=\"mr-1\" /> Add Delivery Lot\r\n                                </Button>\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </React.Fragment>\r\n            )}\r\n        </React.Fragment>\r\n    );\r\n});\r\nItemRow.displayName = \"ItemRow\";\r\n\r\nexport const PODetailItems = ({\r\n    editMode,\r\n    expandedItems,\r\n    toggleItem,\r\n}: PODetailItemsProps) => {\r\n    const items = usePOStore((state) => state.data?.items || []);\r\n    const addItem = usePOStore((state) => state.addItem);\r\n\r\n    return (\r\n        <Stack gap={3}>\r\n            <Flex align=\"center\" justify=\"between\" className=\"mb-1\">\r\n                <Label className=\"m-0 text-[11px] tracking-[0.1em] text-app-fg-muted uppercase\">\r\n                    Procurement Structure\r\n                </Label>\r\n                {editMode && (\r\n                    <Button size=\"sm\" onClick={addItem} variant=\"secondary\" className=\"h-8 text-[11px] bg-app-accent/5 text-app-accent border-app-accent/20\">\r\n                        <Plus className=\"w-4 h-4 mr-1.5\" /> New Item\r\n                    </Button>\r\n                )}\r\n            </Flex>\r\n\r\n            <div className=\"table-container shadow-premium-hover border-none\">\r\n                <table className=\"w-full text-left\">\r\n                    <thead>\r\n                        <tr className=\"border-b border-app-border/10 bg-app-overlay/10\">\r\n                            <th className=\"py-3 px-4 text-center w-[50px]\"><Label className=\"m-0 text-[10px]\">#</Label></th>\r\n                            <th className=\"py-3 px-4 w-[120px]\"><Label className=\"m-0 text-[10px]\">Code</Label></th>\r\n                            <th className=\"py-3 px-4 w-[120px]\"><Label className=\"m-0 text-[10px]\">Drawing</Label></th>\r\n                            <th className=\"py-3 px-4\"><Label className=\"m-0 text-[10px]\">Description</Label></th>\r\n                            <th className=\"py-3 px-4 text-center w-[70px]\"><Label className=\"m-0 text-[10px]\">Unit</Label></th>\r\n                            <th className=\"py-3 px-4 text-right w-[90px]\"><Label className=\"m-0 text-[10px]\">Ordered</Label></th>\r\n                            <th className=\"py-3 px-4 text-right w-[90px] bg-blue-50/10 dark:bg-blue-900/10\"><Label className=\"m-0 text-[10px] text-blue-600 dark:text-blue-400\">Delivered</Label></th>\r\n                            <th className=\"py-3 px-4 text-right w-[90px] bg-blue-50/10 dark:bg-blue-900/10\"><Label className=\"m-0 text-[10px] text-blue-600 dark:text-blue-400\">Balance</Label></th>\r\n                            <th className=\"py-3 px-4 text-right w-[90px]\"><Label className=\"m-0 text-[10px]\">Received</Label></th>\r\n                            <th className=\"py-3 px-4 w-[60px]\"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {items.map((item, idx) => (\r\n                            <ItemRow\r\n                                key={item.po_item_no}\r\n                                idx={idx}\r\n                                editMode={editMode}\r\n                                isExpanded={expandedItems.has(item.po_item_no)}\r\n                                toggleItem={toggleItem}\r\n                            />\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            {items.length === 0 && (\r\n                <Card className=\"p-12 flex flex-col items-center justify-center bg-app-surface/30 border-dashed border-2 border-app-border/30 text-center\">\r\n                    <div className=\"p-3 bg-app-surface-hover rounded-full mb-3 text-app-fg-muted/20\">\r\n                        <AlertCircle size={32} />\r\n                    </div>\r\n                    <Body className=\"text-app-fg-muted\">No items found in this Purchase Order.</Body>\r\n                    {editMode && (\r\n                        <Button variant=\"ghost\" className=\"mt-4 text-app-accent\" onClick={addItem}>\r\n                            Add the first item\r\n                        </Button>\r\n                    )}\r\n                </Card>\r\n            )}\r\n        </Stack>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\po\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\providers\\ThemeProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\providers\\UploadContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'accepted' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":75,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'rejected' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":76,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":29}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useState, useRef, useCallback } from \"react\";\r\nimport { api } from \"@/lib/api\";\r\n\r\ntype UploadType = \"PO\" | \"SRV\" | null;\r\n\r\ninterface UploadContextType {\r\n    isUploading: boolean;\r\n    progress: { current: number; total: number };\r\n    files: File[];\r\n    acceptedCount: number;\r\n    rejectedCount: number;\r\n    uploadType: UploadType;\r\n    minimized: boolean;\r\n    startUpload: (files: File[], type: UploadType) => Promise<void>;\r\n    cancelUpload: () => void;\r\n    resetUpload: () => void;\r\n    setMinimized: (minimized: boolean) => void;\r\n}\r\n\r\nconst UploadContext = createContext<UploadContextType | undefined>(undefined);\r\n\r\nexport function UploadProvider({ children }: { children: React.ReactNode }) {\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [files, setFiles] = useState<File[]>([]);\r\n    const [progress, setProgress] = useState({ current: 0, total: 0 });\r\n    const [acceptedCount, setAcceptedCount] = useState(0);\r\n    const [rejectedCount, setRejectedCount] = useState(0);\r\n    const [uploadType, setUploadType] = useState<UploadType>(null);\r\n    const [minimized, setMinimized] = useState(false);\r\n\r\n    const isCancelled = useRef(false);\r\n\r\n    const startUpload = useCallback(async (selectedFiles: File[], type: UploadType) => {\r\n        if (selectedFiles.length === 0) return;\r\n\r\n        setFiles(selectedFiles);\r\n        setUploadType(type);\r\n        // ATOMIC UI TRIGGER: Start loading state. \r\n        // Consumers must wait for this to flip back to false before reloading data.\r\n        setIsUploading(true);\r\n        setStatusReset();\r\n        setProgress({ current: 0, total: selectedFiles.length });\r\n        setMinimized(false);\r\n        isCancelled.current = false;\r\n\r\n        let processedCount = 0;\r\n        let accepted = 0;\r\n        let rejected = 0;\r\n\r\n        try {\r\n            const CHUNK_SIZE = 5;\r\n            for (let i = 0; i < selectedFiles.length; i += CHUNK_SIZE) {\r\n                if (isCancelled.current) break;\r\n\r\n                const chunk = selectedFiles.slice(i, i + CHUNK_SIZE);\r\n\r\n\r\n                if (type === \"PO\") {\r\n                    const response = await api.uploadPOBatch(chunk);\r\n                    const chunkAccepted = response.successful || 0;\r\n                    const chunkRejected = response.failed || 0;\r\n\r\n                    accepted += chunkAccepted;\r\n                    rejected += chunkRejected;\r\n\r\n                    setAcceptedCount((prev) => prev + chunkAccepted);\r\n                    setRejectedCount((prev) => prev + chunkRejected);\r\n                } else if (type === \"SRV\") {\r\n                    const response = await api.uploadSRVBatch(chunk);\r\n                    const chunkAccepted = response.successful || 0;\r\n                    const chunkRejected = response.failed || 0;\r\n\r\n                    accepted += chunkAccepted;\r\n                    rejected += chunkRejected;\r\n\r\n                    setAcceptedCount((prev) => prev + chunkAccepted);\r\n                    setRejectedCount((prev) => prev + chunkRejected);\r\n                }\r\n\r\n                processedCount += chunk.length;\r\n\r\n                // Atomic State Updates for Progress Ring\r\n                // setAcceptedCount moved to specific handlers above\r\n                // In future, parse API response for actual rejected count\r\n\r\n                setProgress({\r\n                    current: processedCount,\r\n                    total: selectedFiles.length,\r\n                });\r\n\r\n                // Yield to event loop to keep UI responsive\r\n                await new Promise((resolve) => setTimeout(resolve, 50));\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Upload failed in batch:\", error);\r\n            // In a real app, we'd mark the failed chunk as rejected\r\n        } finally {\r\n            // CRITICAL: Only turn off uploading state after EVERYTHING is done.\r\n            // This ensures the readiness check passes before the table tries to reload.\r\n            setIsUploading(false);\r\n            isCancelled.current = false;\r\n        }\r\n    }, []);\r\n\r\n    const cancelUpload = useCallback(() => {\r\n        isCancelled.current = true;\r\n        setIsUploading(false);\r\n    }, []);\r\n\r\n    const resetUpload = useCallback(() => {\r\n        setFiles([]);\r\n        setProgress({ current: 0, total: 0 });\r\n        setAcceptedCount(0);\r\n        setRejectedCount(0);\r\n        setUploadType(null);\r\n        setIsUploading(false);\r\n        setMinimized(false);\r\n    }, []);\r\n\r\n    const setStatusReset = () => {\r\n        setAcceptedCount(0);\r\n        setRejectedCount(0);\r\n    }\r\n\r\n    return (\r\n        <UploadContext.Provider\r\n            value={{\r\n                isUploading,\r\n                progress,\r\n                files,\r\n                acceptedCount,\r\n                rejectedCount,\r\n                uploadType,\r\n                minimized,\r\n                startUpload,\r\n                cancelUpload,\r\n                resetUpload,\r\n                setMinimized,\r\n            }}\r\n        >\r\n            {children}\r\n        </UploadContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useUpload() {\r\n    const context = useContext(UploadContext);\r\n    if (context === undefined) {\r\n        throw new Error(\"useUpload must be used within a UploadProvider\");\r\n    }\r\n    return context;\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\ChallanDateSummary.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":7,"column":623,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":7,"endColumn":678}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n/** * Challan Date Summary Table */\"use client\"; import { useState } from\"react\";\r\nimport PaginationControls from\"@/components/design-system/molecules/PaginationControls\";\r\nimport DownloadButton from\"@/components/DownloadButton\";\r\nimport { API_BASE_URL } from\"@/lib/api\"; interface ChallanRow { dc_number: string; dc_date: string; po_number: string; dispatched_qty: number; invoice_status: string;\r\n} interface ChallanDateSummaryProps { data: { rows: ChallanRow[]; totals: { total_challans: number; total_dispatched: number; uninvoiced_count: number; }; period: { start: string; end: string }; };\r\n} export default function ChallanDateSummary({ data }: ChallanDateSummaryProps) { const [currentPage, setCurrentPage] = useState(1); const ITEMS_PER_PAGE = 10; if (!data || !data.rows || data.rows.length === 0) { return ( <div className=\"glass-card p-8 text-center\"> <p className=\"text-text-secondary\">No data for selected period</p> </div> ); } const totalPages = Math.ceil(data.rows.length / ITEMS_PER_PAGE); const paginatedRows = data.rows.slice( (currentPage - 1) * ITEMS_PER_PAGE, currentPage * ITEMS_PER_PAGE, ); return ( <div className=\"glass-card p-6\"> <div className=\"flex justify-between items-center mb-4\"> <h3 className=\"text-[16px] font-semibold text-text-primary\"> Challan Summary ({data.period.start} to {data.period.end}) </h3> <DownloadButton url={`${API_BASE_URL}/api/reports/register/dc?export=true&start_date=${data.period.start}&end_date=${data.period.end}`} filename={`Challan_Summary_${data.period.start}_to_${data.period.end}.xlsx`} label=\"Export\" size=\"sm\" /> </div> {/* Totals */} <div className=\"grid grid-cols-3 gap-4 mb-6\"> <div className=\"p-3 bg-sys-brand-subtle rounded-lg\"> <p className=\"text-text-secondary\">Total Challans</p> <p className=\"font-bold text-text-primary\"> {data.totals.total_challans} </p> </div> <div className=\"p-3 bg-emerald-50 rounded-lg\"> <p className=\"text-text-secondary\">Total Dispatched</p> <p className=\"font-bold text-text-primary\"> {data.totals.total_dispatched.toLocaleString()} </p> </div> <div className=\"p-3 bg-amber-50 rounded-lg\"> <p className=\"text-text-secondary\">Uninvoiced</p> <p className=\"font-bold text-text-primary\"> {data.totals.uninvoiced_count} </p> </div> </div> {/* Table */} <div className=\"overflow-x-auto\"> <table className=\"w-full\"> <thead> <tr className=\"border-b border-border\"> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> DC Number </th> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> DC Date </th> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> Linked PO </th> <th className=\"text-right py-3 px-4 font-semibold text-text-secondary uppercase\"> Dispatched Qty </th> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> Invoice Status </th> <th className=\"text-center py-3 px-4 font-semibold text-text-secondary uppercase\"> Quick Export </th> </tr> </thead> <tbody> {paginatedRows.map((row, idx) => ( <tr key={idx} className=\"border-b border-border/50 hover:bg-sys-bg-tertiary\" > <td className=\"py-3 px-4 font-medium text-text-primary\"> {row.dc_number} </td> <td className=\"py-3 px-4 text-text-secondary\">{row.dc_date}</td> <td className=\"py-3 px-4 text-text-primary\">{row.po_number}</td> <td className=\"py-3 px-4 text-right text-text-primary\"> {row.dispatched_qty.toLocaleString()} </td> <td className=\"py-3 px-4\"> <span className={`inline-block px-2 py-1 rounded font-medium ${row.invoice_status ===\"Invoiced\" ?\"bg-emerald-100 text-emerald-700\" :\"bg-amber-100 text-amber-700\" }`} > {row.invoice_status} </span> </td> <td className=\"py-3 px-4 text-center\"> <div className=\"flex justify-center gap-1\"> <DownloadButton url={`${API_BASE_URL}/api/dc/${row.dc_number}/download`} filename={`DC_${row.dc_number}.xlsx`} label=\"DC\" size=\"sm\" variant=\"ghost\" /> <DownloadButton url={`${API_BASE_URL}/api/reports/guarantee-certificate?dc_number=${row.dc_number}`} filename={`GC_${row.dc_number}.xlsx`} label=\"GC\" size=\"sm\" variant=\"outline\" /> </div> </td> </tr> ))} </tbody> </table> </div> <PaginationControls currentPage={currentPage} totalPages={totalPages} onPageChange={setCurrentPage} itemName=\"DC's\" /> </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\CollapsibleVoiceHeader.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2260,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2346},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2513,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2723}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from\"react\";\r\nimport { Search, Mic, ChevronDown, ChevronUp, Sparkles } from\"lucide-react\"; interface CollapsibleVoiceHeaderProps { onVoiceStart: () => void; onSearch: (query: string) => void;\r\n} export function CollapsibleVoiceHeader({ onVoiceStart, onSearch,\r\n}: CollapsibleVoiceHeaderProps) { const [isExpanded, setIsExpanded] = useState(false); const [query, setQuery] = useState(\"\"); const handleSubmit = (e: React.FormEvent) => { e.preventDefault(); if (query.trim()) { onSearch(query); setIsExpanded(false); } }; const suggestions = [\"Monthly summary\",\"Pending issues\",\"Uninvoiced challans\",\"Compare quarters\", ]; return ( <div className=\"bg-sys-bg-white border-b border-sys-tertiary/20 transition-all duration-200\"> {/* Compact Header */} <div className=\"px-6 py-2 flex items-center justify-between\"> <div className=\"flex items-center gap-4\"> <h1 className=\"font-semibold text-sys-primary\"> Reports & Analytics </h1> </div> <div className=\"flex items-center gap-2\"> {/* Compact Search */} <button onClick={() => setIsExpanded(!isExpanded)} className=\"flex items-center gap-2 px-3 py-1.5 bg-sys-bg-tertiary hover:bg-sys-bg-tertiary border border-sys-tertiary/20 rounded-lg text-sys-secondary transition-colors\" > <Search className=\"w-4 h-4\" /> <span className=\"\">Ask anything...</span> {isExpanded ? ( <ChevronUp className=\"w-3 h-3\" /> ) : ( <ChevronDown className=\"w-3 h-3\" /> )} </button> <button onClick={onVoiceStart} className=\"p-1.5 hover:bg-sys-bg-tertiary rounded-lg text-sys-secondary transition-colors\" title=\"Voice Mode\" > <Mic className=\"w-4 h-4\" /> </button> </div> </div> {/* Expanded Search Bar */} {isExpanded && ( <div className=\"px-6 pb-3 animate-in slide-in-from-top-2 duration-200\"> <form onSubmit={handleSubmit} className=\"relative\"> <div className=\"absolute inset-y-0 left-3 flex items-center pointer-events-none\"> <Search className=\"w-4 h-4 text-sys-tertiary\" /> </div> <input type=\"text\" value={query} onChange={(e) => setQuery(e.target.value)} placeholder=\"Ask about orders, dispatch, billing...\" className=\"w-full pl-10 pr-12 py-2.5 bg-sys-bg-tertiary border border-sys-tertiary/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-sys-brand/20 focus:border-sys-brand transition-all\" autoFocus /> <button type=\"button\" onClick={onVoiceStart} className=\"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 hover:bg-sys-tertiary/20 rounded-lg transition-colors text-sys-brand\" > <Mic className=\"w-4 h-4\" /> </button> </form> {/* Chips */} <div className=\"flex flex-wrap gap-1.5 mt-2\"> <div className=\"flex items-center gap-1 px-2 py-0.5 text-[10px] font-medium text-sys-brand\"> <Sparkles className=\"w-2.5 h-2.5\" /> <span>Suggested:</span> </div> {suggestions.map((s) => ( <button key={s} onClick={() => { onSearch(s); setIsExpanded(false); }} className=\"px-2 py-0.5 bg-sys-bg-white border border-sys-tertiary/20 rounded-full text-[10px] font-medium text-sys-secondary hover:border-sys-brand hover:text-sys-brand hover:bg-sys-brand-subtle transition-all\" > {s} </button> ))} </div> </div> )} </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\CommandBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\CompactKPIRow.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getStatusColor' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":25,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":25},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":55,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":55,"endColumn":111}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from \"react\";\r\nimport {\r\n    TrendingUp,\r\n    TrendingDown,\r\n    AlertTriangle,\r\n    CheckCircle,\r\n} from \"lucide-react\";\r\n\r\nexport interface KPIData {\r\n    label: string;\r\n    value: string | number;\r\n    unit?: string;\r\n    trend?: number; // percentage change\r\n    status?: \"success\" | \"warning\" | \"error\" | \"neutral\";\r\n    subtitle?: string;\r\n    onClick?: () => void;\r\n}\r\n\r\ninterface CompactKPIProps {\r\n    kpis: KPIData[];\r\n}\r\n\r\nexport function CompactKPIRow({ kpis }: CompactKPIProps) {\r\n    const getStatusColor = (status?: string) => {\r\n        switch (status) {\r\n            case \"success\":\r\n                return \"text-sys-success bg-sys-success-subtle\";\r\n            case \"warning\":\r\n                return \"text-amber-600 bg-amber-50\";\r\n            case \"error\":\r\n                return \"text-sys-error bg-sys-error-subtle\";\r\n            default:\r\n                return \"text-sys-brand bg-sys-brand-subtle\";\r\n        }\r\n    };\r\n\r\n    const getTrendIcon = (trend?: number) => {\r\n        if (!trend) return null;\r\n        return trend > 0 ? (\r\n            <TrendingUp className=\"w-3 h-3 text-sys-success\" />\r\n        ) : (\r\n            <TrendingDown className=\"w-3 h-3 text-sys-error\" />\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-5 gap-3 mb-4\">\r\n            {kpis.map((kpi, idx) => (\r\n                <div\r\n                    key={idx}\r\n                    className=\"bg-sys-bg-white rounded-lg border border-sys-tertiary/20 p-3 hover:shadow-md transition-shadow\"\r\n                >\r\n                    <div className=\"flex items-start justify-between mb-1\">\r\n                        <span className=\"text-[10px] font-semibold text-sys-secondary uppercase tracking-wide\">\r\n                            {kpi.label}\r\n                        </span>\r\n                        {kpi.status === \"error\" && (\r\n                            <AlertTriangle className=\"w-3 h-3 text-sys-error\" />\r\n                        )}\r\n                        {kpi.status === \"success\" && (\r\n                            <CheckCircle className=\"w-3 h-3 text-sys-success\" />\r\n                        )}\r\n                    </div>\r\n                    <div className=\"flex items-baseline gap-1\">\r\n                        <span className=\"font-bold text-sys-primary\">{kpi.value}</span>\r\n                        {kpi.unit && <span className=\"text-sys-secondary\">{kpi.unit}</span>}\r\n                    </div>\r\n                    {(kpi.trend !== undefined || kpi.subtitle) && (\r\n                        <div className=\"flex items-center gap-1 mt-1\">\r\n                            {getTrendIcon(kpi.trend)}\r\n                            <span\r\n                                className={`text-[10px] font-medium ${kpi.trend && kpi.trend > 0\r\n                                        ? \"text-sys-success\"\r\n                                        : kpi.trend && kpi.trend < 0\r\n                                            ? \"text-sys-error\"\r\n                                            : \"text-sys-secondary\"\r\n                                    }`}\r\n                            >\r\n                                {kpi.subtitle || (kpi.trend ? `${Math.abs(kpi.trend)}%` : \"\")}\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\DateSummaryControls.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\DualAxisLineChart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":13}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from\"react\"; interface TrendData { month: string; ordered_value: number; invoiced_value: number;\r\n} interface DualAxisChartProps { data: TrendData[];\r\n} export function DualAxisLineChart({ data }: DualAxisChartProps) { if (!data || data.length === 0) return null; // Calculate scales const maxOrdered = Math.max(...data.map((d) => d.ordered_value)); const maxInvoiced = Math.max(...data.map((d) => d.invoiced_value)); const scaleOrdered = maxOrdered > 0 ? 100 / maxOrdered : 1; const scaleInvoiced = maxInvoiced > 0 ? 100 / maxInvoiced : 1; // Generate SVG path for line charts const generatePath = (values: number[], scale: number) => { const width = 100; const step = width / (values.length - 1 || 1); return values .map((val, idx) => { const x = idx * step; const y = 100 - val * scale; return `${idx === 0 ?\"M\" :\"L\"} ${x} ${y}`; }) .join(\"\"); }; const orderedPath = generatePath( data.map((d) => d.ordered_value), scaleOrdered, ); const invoicedPath = generatePath( data.map((d) => d.invoiced_value), scaleInvoiced, ); const months = [\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\", ]; return ( <div className=\"bg-sys-bg-white p-4 rounded-xl border border-sys-tertiary/20\"> <div className=\"flex justify-between items-center mb-3\"> <h3 className=\"font-semibold text-sys-primary\"> Sales vs Dispatch Trends </h3> <div className=\"flex items-center gap-3 font-medium\"> <div className=\"flex items-center gap-1.5\"> <div className=\"w-3 h-0.5 bg-sys-brand\"></div> Ordered </div> <div className=\"flex items-center gap-1.5\"> <div className=\"w-3 h-0.5 bg-sys-success\"></div> Invoiced </div> </div> </div> <div className=\"relative h-48 w-full\"> {/* Grid lines */} <svg className=\"absolute inset-0 w-full h-full\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\" > <defs> <pattern id=\"grid\" width=\"10\" height=\"10\" patternUnits=\"userSpaceOnUse\" > <path d=\"M 10 0 L 0 0 0 10\" fill=\"none\" stroke=\"#f0f0f0\" strokeWidth=\"0.5\" /> </pattern> </defs> <rect width=\"100\" height=\"100\" fill=\"url(#grid)\" /> {/* Ordered line */} <path d={orderedPath} fill=\"none\" stroke=\"#3b82f6\" strokeWidth=\"2\" vectorEffect=\"non-scaling-stroke\" /> {/* Invoiced line */} <path d={invoicedPath} fill=\"none\" stroke=\"#10b981\" strokeWidth=\"2\" vectorEffect=\"non-scaling-stroke\" /> {/* Data points */} {data.map((d, idx) => { const x = (idx / (data.length - 1 || 1)) * 100; const yOrdered = 100 - d.ordered_value * scaleOrdered; const yInvoiced = 100 - d.invoiced_value * scaleInvoiced; return ( <g key={idx}> <circle cx={x} cy={yOrdered} r=\"1.5\" fill=\"#3b82f6\" vectorEffect=\"non-scaling-stroke\" /> <circle cx={x} cy={yInvoiced} r=\"1.5\" fill=\"#10b981\" vectorEffect=\"non-scaling-stroke\" /> </g> ); })} </svg> {/* X-axis labels */} <div className=\"absolute bottom-0 left-0 right-0 flex justify-between px-1 text-[9px] text-sys-tertiary font-medium\"> {months.map((month, idx) => ( <span key={idx} className={data[idx] ?\"opacity-100\" :\"opacity-30\"} > {month} </span> ))} </div> </div> {/* AI Insight */} <div className=\"mt-3 p-2 bg-sys-brand-subtle/50 rounded text-[10px] text-sys-brand flex items-start gap-1.5\"> <span className=\"font-semibold shrink-0\">💡</span> <p> Invoicing trails orders by 12% this quarter. Consider expediting dispatch for pending items. </p> </div> </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\InsightStrip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\InsightsPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingDown' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":145,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":148,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[418,421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[418,421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":8,"column":954,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":8,"endColumn":1054}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from\"react\";\r\nimport { AlertTriangle, FileText, TrendingDown, ArrowRight,\r\n} from\"lucide-react\"; interface PendingItem { category: string; count: number; percentage: number; action?: string;\r\n} interface TopItem { name: string; units: number; trend: number;\r\n} interface InsightsPanelProps { pendingItems: PendingItem[]; uninvoicedCount: number; topItems?: TopItem[]; onAction?: (action: string, data?: any) => void;\r\n} export function InsightsPanel({ pendingItems, uninvoicedCount, topItems = [], onAction,\r\n}: InsightsPanelProps) { return ( <div className=\"space-y-3\"> {/* Pending Breakdown */} <div className=\"bg-sys-bg-white p-4 rounded-xl border border-sys-tertiary/20\"> <div className=\"flex items-center gap-2 mb-3\"> <AlertTriangle className=\"w-4 h-4 text-amber-600\" /> <h3 className=\"font-semibold text-sys-primary\"> Pending Breakdown </h3> </div> <div className=\"space-y-2.5\"> {pendingItems.map((item, idx) => ( <div key={idx}> <div className=\"flex justify-between font-medium mb-1\"> <span className=\"text-sys-primary\">{item.category}</span> <span className=\"text-sys-primary\">{item.count} items</span> </div> <div className=\"h-1.5 w-full bg-sys-bg-tertiary rounded-full overflow-hidden\"> <div className={`h-full rounded-full ${ item.percentage > 50 ?\"bg-sys-error\" : item.percentage > 30 ?\"bg-amber-400\" :\"bg-green-400\" }`} style={{ width: `${item.percentage}%` }} ></div> </div> {item.action && ( <button onClick={() => onAction?.(item.action!, item)} className=\"text-[10px] text-sys-brand hover:text-sys-brand font-medium mt-1 flex items-center gap-1\" > {item.action} <ArrowRight className=\"w-2.5 h-2.5\" /> </button> )} </div> ))} </div> </div> {/* Uninvoiced Challans - Actionable */} {uninvoicedCount > 0 && ( <div className=\"bg-sys-error-subtle border border-sys-error/20 p-4 rounded-xl\"> <div className=\"flex items-start gap-2 mb-2\"> <FileText className=\"w-4 h-4 text-sys-error mt-0.5 shrink-0\" /> <div className=\"flex-1\"> <h4 className=\"font-semibold text-sys-error\"> {uninvoicedCount} Challan{uninvoicedCount > 1 ?\"s\" :\"\"}{\"\"} Pending Invoice </h4> <p className=\"text-sys-error mt-0.5\"> Overdue by 14+ days. Revenue at risk. </p> </div> </div> <div className=\"flex gap-2 mt-3\"> <button onClick={() => onAction?.(\"draft_invoice_all\")} className=\"flex-1 px-3 py-1.5 bg-sys-error text-sys-bg-white font-semibold rounded-lg hover:bg-sys-error transition-colors\" > Draft Invoice Now </button> <button onClick={() => onAction?.(\"view_details\")} className=\"px-3 py-1.5 bg-sys-bg-white border border-red-300 text-sys-error font-semibold rounded-lg hover:bg-sys-error-subtle transition-colors\" > View Details </button> </div> </div> )} {/* Top Selling Items */} {topItems && topItems.length > 0 && ( <div className=\"bg-sys-bg-white p-4 rounded-xl border border-sys-tertiary/20\"> <h3 className=\"font-semibold text-sys-primary mb-3\"> Top Selling Items </h3> <div className=\"space-y-2\"> {topItems.slice(0, 3).map((item, idx) => ( <div key={idx} className=\"flex items-center justify-between\" > <div className=\"flex items-center gap-2\"> <span className=\"text-sys-tertiary font-mono\">{idx + 1}.</span> <span className=\"font-medium text-sys-primary truncate max-w-[150px]\" title={item.name} > {item.name} </span> </div> <div className=\"flex items-center gap-2\"> <span className=\"font-semibold text-sys-primary\"> {item.units} </span> {item.trend !== 0 && ( <span className={`text-[10px] font-medium ${item.trend > 0 ?\"text-sys-success\" :\"text-sys-error\"}`} > {item.trend > 0 ?\"↑\" :\"↓\"} {Math.abs(item.trend)}% </span> )} </div> </div> ))} </div> </div> )} </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\InvoiceDateSummary.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":7,"column":623,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":7,"endColumn":678}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n/** * Invoice Date Summary Table */\"use client\"; import { useState } from\"react\";\r\nimport PaginationControls from\"@/components/design-system/molecules/PaginationControls\";\r\nimport DownloadButton from\"@/components/DownloadButton\";\r\nimport { API_BASE_URL } from\"@/lib/api\"; interface InvoiceRow { invoice_number: string; invoice_date: string; linked_dc_numbers: string; invoice_value: number;\r\n} interface InvoiceDateSummaryProps { data: { rows: InvoiceRow[]; totals: { total_invoices: number; total_value: number; avg_value: number; }; period: { start: string; end: string }; };\r\n} export default function InvoiceDateSummary({ data }: InvoiceDateSummaryProps) { const [currentPage, setCurrentPage] = useState(1); const ITEMS_PER_PAGE = 10; if (!data || !data.rows || data.rows.length === 0) { return ( <div className=\"glass-card p-8 text-center\"> <p className=\"text-text-secondary\">No data for selected period</p> </div> ); } const totalPages = Math.ceil(data.rows.length / ITEMS_PER_PAGE); const paginatedRows = data.rows.slice( (currentPage - 1) * ITEMS_PER_PAGE, currentPage * ITEMS_PER_PAGE, ); return ( <div className=\"glass-card p-6\"> <div className=\"flex justify-between items-center mb-4\"> <h3 className=\"text-[16px] font-semibold text-text-primary\"> Invoice Summary ({data.period.start} to {data.period.end}) </h3> <DownloadButton url={`${API_BASE_URL}/api/reports/register/invoice?export=true&start_date=${data.period.start}&end_date=${data.period.end}`} filename={`Invoice_Summary_${data.period.start}_to_${data.period.end}.xlsx`} label=\"Export\" size=\"sm\" /> </div> {/* Totals */} <div className=\"grid grid-cols-3 gap-4 mb-6\"> <div className=\"p-3 bg-sys-brand-subtle rounded-lg\"> <p className=\"text-text-secondary\">Total Invoices</p> <p className=\"font-bold text-text-primary\"> {data.totals.total_invoices} </p> </div> <div className=\"p-3 bg-emerald-50 rounded-lg\"> <p className=\"text-text-secondary\">Total Value</p> <p className=\"font-bold text-text-primary\"> ₹{(data.totals.total_value / 100000).toFixed(2)}L </p> </div> <div className=\"p-3 bg-purple-50 rounded-lg\"> <p className=\"text-text-secondary\">Average Value</p> <p className=\"font-bold text-text-primary\"> ₹{(data.totals.avg_value / 1000).toFixed(1)}K </p> </div> </div> {/* Table */} <div className=\"overflow-x-auto\"> <table className=\"w-full\"> <thead> <tr className=\"border-b border-border\"> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> Invoice Number </th> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> Invoice Date </th> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> Linked DC Numbers </th> <th className=\"text-right py-3 px-4 font-semibold text-text-secondary uppercase\"> Invoice Value </th> </tr> </thead> <tbody> {paginatedRows.map((row, idx) => ( <tr key={idx} className=\"border-b border-border/50 hover:bg-sys-bg-tertiary\" > <td className=\"py-3 px-4 font-medium text-text-primary\"> {row.invoice_number} </td> <td className=\"py-3 px-4 text-text-secondary\"> {row.invoice_date} </td> <td className=\"py-3 px-4 text-text-primary\"> {row.linked_dc_numbers} </td> <td className=\"py-3 px-4 text-right text-text-primary font-medium\"> ₹{row.invoice_value.toLocaleString()} </td> </tr> ))} </tbody> </table> </div> <PaginationControls currentPage={currentPage} totalPages={totalPages} onPageChange={setCurrentPage} itemName=\"Invoices\" /> </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\POAgingReport.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":67,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":67,"endColumn":76},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":68},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":83,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":83,"endColumn":92},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":86,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":86,"endColumn":91},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":99,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":99,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":104,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":104,"endColumn":84},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":107,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":107,"endColumn":71},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":116,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":116,"endColumn":81},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":123,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":123,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":126,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":126,"endColumn":79},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":135,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":135,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":141,"column":47,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":141,"endColumn":100},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":147,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":147,"endColumn":86}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from \"react\";\r\n\r\n/**\r\n * PO Aging & Risk Report Component\r\n * Displays age buckets with pending quantity distribution\r\n */\r\ninterface POAgingData {\r\n    period: string;\r\n    age_buckets: {\r\n        \"0_7_days\": {\r\n            po_count: number;\r\n            pending_qty: number;\r\n            percentage: number;\r\n            pos: string[];\r\n        };\r\n        \"8_30_days\": {\r\n            po_count: number;\r\n            pending_qty: number;\r\n            percentage: number;\r\n            pos: string[];\r\n        };\r\n        \"30_plus_days\": {\r\n            po_count: number;\r\n            pending_qty: number;\r\n            percentage: number;\r\n            pos: string[];\r\n        };\r\n    };\r\n    total_pending_qty: number;\r\n}\r\n\r\ninterface POAgingReportProps {\r\n    data: POAgingData;\r\n    aiSummary?: string;\r\n}\r\n\r\nexport default function POAgingReport({\r\n    data,\r\n    aiSummary,\r\n}: POAgingReportProps) {\r\n    const buckets = [\r\n        {\r\n            key: \"0_7_days\",\r\n            label: \"0-7 Days\",\r\n            color: \"bg-success\",\r\n            data: data.age_buckets[\"0_7_days\"],\r\n        },\r\n        {\r\n            key: \"8_30_days\",\r\n            label: \"8-30 Days\",\r\n            color: \"bg-warning\",\r\n            data: data.age_buckets[\"8_30_days\"],\r\n        },\r\n        {\r\n            key: \"30_plus_days\",\r\n            label: \"30+ Days\",\r\n            color: \"bg-danger\",\r\n            data: data.age_buckets[\"30_plus_days\"],\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div>\r\n                <h2 className=\"text-[18px] font-semibold text-text-primary\">\r\n                    PO Aging & Risk Analysis\r\n                </h2>\r\n                <p className=\"text-[12px] text-text-secondary mt-1\">\r\n                    Total Pending: {data.total_pending_qty.toLocaleString()} units\r\n                </p>\r\n            </div>\r\n\r\n            {/* AI Summary */}\r\n            {aiSummary && (\r\n                <div className=\"glass-card p-4 bg-primary/5 border border-primary/20\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                        <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\r\n                            <span className=\"text-primary\">✨</span>\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <p className=\"text-[12px] font-semibold text-text-primary mb-1\">\r\n                                AI Insight\r\n                            </p>\r\n                            <p className=\"text-[13px] text-text-secondary leading-relaxed\">\r\n                                {aiSummary}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Age Buckets */}\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n                {buckets.map((bucket) => (\r\n                    <div key={bucket.key} className=\"glass-card p-5\">\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                            <p className=\"text-[12px] font-semibold text-text-secondary uppercase\">\r\n                                {bucket.label}\r\n                            </p>\r\n                            <div className={`w-3 h-3 rounded-full ${bucket.color}`} />\r\n                        </div>\r\n                        <p className=\"text-[24px] font-bold text-text-primary mb-1\">\r\n                            {bucket.data.pending_qty.toLocaleString()}\r\n                        </p>\r\n                        <p className=\"text-[11px] text-text-secondary\">\r\n                            {bucket.data.po_count} POs • {bucket.data.percentage}% of total\r\n                        </p>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Detailed Breakdown */}\r\n            <div className=\"glass-card p-5\">\r\n                <h3 className=\"text-[14px] font-semibold text-text-primary mb-4\">\r\n                    POs by Age Bucket\r\n                </h3>\r\n                <div className=\"space-y-4\">\r\n                    {buckets.map((bucket) => (\r\n                        <div key={bucket.key}>\r\n                            <div className=\"flex items-center justify-between mb-2\">\r\n                                <p className=\"text-[13px] font-medium text-text-primary\">\r\n                                    {bucket.label}\r\n                                </p>\r\n                                <p className=\"text-[12px] text-text-secondary\">\r\n                                    {bucket.data.po_count} POs\r\n                                </p>\r\n                            </div>\r\n                            {bucket.data.pos.length > 0 ? (\r\n                                <div className=\"flex flex-wrap gap-2\">\r\n                                    {bucket.data.pos.slice(0, 10).map((po) => (\r\n                                        <span\r\n                                            key={po}\r\n                                            className=\"px-2 py-1 bg-sys-bg-tertiary text-text-primary text-[11px] font-medium rounded\"\r\n                                        >\r\n                                            {po}\r\n                                        </span>\r\n                                    ))}\r\n                                    {bucket.data.pos.length > 10 && (\r\n                                        <span className=\"px-2 py-1 text-text-secondary text-[11px]\">\r\n                                            +{bucket.data.pos.length - 10} more\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            ) : (\r\n                                <p className=\"text-[12px] text-text-secondary italic\">\r\n                                    No POs in this bucket\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            {/* Actions: None enabled (Phase 2) */}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\PODateSummary.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":7,"column":613,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":7,"endColumn":668}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n/** * PO Date Summary Table * Displays PO summary with totals */\"use client\"; import { useState } from\"react\";\r\nimport PaginationControls from\"@/components/design-system/molecules/PaginationControls\";\r\nimport DownloadButton from\"@/components/DownloadButton\";\r\nimport { API_BASE_URL } from\"@/lib/api\"; interface PORow { po_number: string; po_date: string; total_ordered: number; total_dispatched: number; pending_qty: number; status: string;\r\n} interface PODateSummaryProps { data: { rows: PORow[]; totals: { total_pos: number; total_ordered: number; total_dispatched: number; total_pending: number; }; period: { start: string; end: string }; };\r\n} export default function PODateSummary({ data }: PODateSummaryProps) { const [currentPage, setCurrentPage] = useState(1); const ITEMS_PER_PAGE = 10; if (!data || !data.rows || data.rows.length === 0) { return ( <div className=\"glass-card p-8 text-center\"> <p className=\"text-text-secondary\">No data for selected period</p> </div> ); } const totalPages = Math.ceil(data.rows.length / ITEMS_PER_PAGE); const paginatedRows = data.rows.slice( (currentPage - 1) * ITEMS_PER_PAGE, currentPage * ITEMS_PER_PAGE, ); return ( <div className=\"glass-card p-6\"> <div className=\"flex justify-between items-center mb-4\"> <h3 className=\"text-[16px] font-semibold text-text-primary\"> PO Summary ({data.period.start} to {data.period.end}) </h3> <DownloadButton url={`${API_BASE_URL}/api/reports/register/po?export=true&start_date=${data.period.start}&end_date=${data.period.end}`} filename={`PO_Summary_${data.period.start}_to_${data.period.end}.xlsx`} label=\"Export\" size=\"sm\" /> </div> {/* Totals */} <div className=\"grid grid-cols-4 gap-4 mb-6\"> <div className=\"p-3 bg-sys-brand-subtle rounded-lg\"> <p className=\"text-text-secondary\">Total POs</p> <p className=\"font-bold text-text-primary\"> {data.totals.total_pos} </p> </div> <div className=\"p-3 bg-emerald-50 rounded-lg\"> <p className=\"text-text-secondary\">Total Ordered</p> <p className=\"font-bold text-text-primary\"> {data.totals.total_ordered.toLocaleString()} </p> </div> <div className=\"p-3 bg-purple-50 rounded-lg\"> <p className=\"text-text-secondary\">Total Dispatched</p> <p className=\"font-bold text-text-primary\"> {data.totals.total_dispatched.toLocaleString()} </p> </div> <div className=\"p-3 bg-amber-50 rounded-lg\"> <p className=\"text-text-secondary\">Total Pending</p> <p className=\"font-bold text-text-primary\"> {data.totals.total_pending.toLocaleString()} </p> </div> </div> {/* Table */} <div className=\"overflow-x-auto\"> <table className=\"w-full\"> <thead> <tr className=\"border-b border-border\"> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> PO Number </th> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> PO Date </th> <th className=\"text-right py-3 px-4 font-semibold text-text-secondary uppercase\"> Ordered </th> <th className=\"text-right py-3 px-4 font-semibold text-text-secondary uppercase\"> Dispatched </th> <th className=\"text-right py-3 px-4 font-semibold text-text-secondary uppercase\"> Pending </th> <th className=\"text-left py-3 px-4 font-semibold text-text-secondary uppercase\"> Status </th> </tr> </thead> <tbody> {paginatedRows.map((row, idx) => ( <tr key={idx} className=\"border-b border-border/50 hover:bg-sys-bg-tertiary\" > <td className=\"py-3 px-4 font-medium text-text-primary\"> {row.po_number} </td> <td className=\"py-3 px-4 text-text-secondary\">{row.po_date}</td> <td className=\"py-3 px-4 text-right text-text-primary\"> {row.total_ordered.toLocaleString()} </td> <td className=\"py-3 px-4 text-right text-text-primary\"> {row.total_dispatched.toLocaleString()} </td> <td className=\"py-3 px-4 text-right text-text-primary\"> {row.pending_qty.toLocaleString()} </td> <td className=\"py-3 px-4\"> <span className={`inline-block px-2 py-1 rounded font-medium ${row.status ===\"Completed\" ?\"bg-emerald-100 text-emerald-700\" : row.status ===\"In Progress\" ?\"bg-sys-brand-subtle text-sys-brand\" :\"bg-sys-bg-tertiary text-sys-primary\" }`} > {row.status} </span> </td> </tr> ))} </tbody> </table> </div> <PaginationControls currentPage={currentPage} totalPages={totalPages} onPageChange={setCurrentPage} itemName=\"POs\" /> </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\PODependencyReport.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":635,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":690},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":724,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":772},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1195,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1255},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1277,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1320},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1870,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1930},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1951,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2010},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2249,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2304},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2327,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2377},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2843,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2896},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2970,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":3030},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":3093,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":3160}],"suppressedMessages":[],"errorCount":11,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n/** * PO Dependency Analysis Report Component * Shows which POs are blocking at dispatch vs billing stage */ interface PODependencyData { period: string; coverage: { no_dc: { count: number; pos: Array<{ po_number: string; supplier: string }>; }; dc_but_no_invoice: { count: number; pos: Array<{ po_number: string; supplier: string }>; }; fully_invoiced: { count: number; pos: Array<{ po_number: string; supplier: string }>; }; }; total_pos: number;\r\n} interface PODependencyReportProps { data: PODependencyData; aiSummary?: string;\r\n} export default function PODependencyReport({ data, aiSummary,\r\n}: PODependencyReportProps) { const categories = [ { key:\"no_dc\", title:\"No Delivery Challan\", description:\"POs blocked at dispatch stage\", color:\"bg-danger\", textColor:\"text-danger\", data: data.coverage.no_dc, }, { key:\"dc_but_no_invoice\", title:\"DC Created, Not Invoiced\", description:\"POs blocked at billing stage\", color:\"bg-warning\", textColor:\"text-warning\", data: data.coverage.dc_but_no_invoice, }, { key:\"fully_invoiced\", title:\"Fully Invoiced\", description:\"POs completed\", color:\"bg-success\", textColor:\"text-success\", data: data.coverage.fully_invoiced, }, ]; return ( <div className=\"space-y-6\"> {/* Header */} <div> <h2 className=\"text-[18px] font-semibold text-text-primary\"> PO Dependency Analysis </h2> <p className=\"text-[12px] text-text-secondary mt-1\"> Total POs: {data.total_pos} • Analyzing dispatch and billing coverage </p> </div> {/* Summary Cards */} <div className=\"grid grid-cols-3 gap-4\"> {categories.map((cat) => ( <div key={cat.key} className=\"glass-card p-5\"> <div className=\"flex items-center justify-between mb-3\"> <div className={`w-3 h-3 rounded-full ${cat.color}`} /> <p className={`text-[24px] font-bold ${cat.textColor}`}> {cat.data.count} </p> </div> <p className=\"text-[13px] font-semibold text-text-primary mb-1\"> {cat.title} </p> <p className=\"text-[11px] text-text-secondary\">{cat.description}</p> <div className=\"mt-2 h-2 bg-sys-bg-tertiary rounded-full overflow-hidden\"> <div className={`h-full ${cat.color}`} style={{ width: `${(cat.data.count / data.total_pos) * 100}%` }} /> </div> </div> ))} </div> {/* AI Summary */} {aiSummary && ( <div className=\"glass-card p-4 bg-primary/5 border border-primary/20\"> <div className=\"flex items-start gap-3\"> <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\"> <span className=\"text-primary\">✨</span> </div> <div className=\"flex-1\"> <p className=\"text-[12px] font-semibold text-text-primary mb-1\"> AI Insight </p> <p className=\"text-[13px] text-text-secondary leading-relaxed\"> {aiSummary} </p> </div> </div> </div> )} {/* Detailed Breakdown */} <div className=\"space-y-4\"> {categories.map((cat) => ( <div key={cat.key} className=\"glass-card p-5\"> <div className=\"flex items-center justify-between mb-4\"> <div> <h3 className=\"text-[14px] font-semibold text-text-primary\"> {cat.title} </h3> <p className=\"text-[12px] text-text-secondary mt-0.5\"> {cat.data.count} POs </p> </div> <div className={`px-3 py-1 rounded-full ${cat.color}/10 ${cat.textColor} text-[12px] font-medium`} > {Math.round((cat.data.count / data.total_pos) * 100)}% of total </div> </div> {cat.data.pos.length > 0 ? ( <div className=\"space-y-2\"> {cat.data.pos.slice(0, 10).map((po, idx) => ( <div key={idx} className=\"flex items-center justify-between p-3 bg-sys-bg-tertiary rounded-lg hover:bg-sys-bg-tertiary transition-colors\" > <div> <p className=\"text-[13px] font-medium text-text-primary\"> {po.po_number} </p> </div> </div> ))} {cat.data.pos.length > 10 && ( <p className=\"text-[12px] text-text-secondary text-center pt-2\"> +{cat.data.pos.length - 10} more POs </p> )} </div> ) : ( <p className=\"text-[12px] text-text-secondary italic text-center py-4\"> No POs in this category </p> )} </div> ))} </div> {/* Actions: None enabled (Phase 2) */} </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\POEfficiencyReport.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":44,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":44,"endColumn":76},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":47,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":47,"endColumn":68},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":54,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":54,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":57,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":57,"endColumn":70},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":60,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":60,"endColumn":72},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":65,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":65,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":68,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":68,"endColumn":69},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":71,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":71,"endColumn":72},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":76,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":76,"endColumn":82},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":79,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":79,"endColumn":70},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":82,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":82,"endColumn":72},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":95,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":95,"endColumn":92},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":98,"column":32,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":98,"endColumn":91},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":111,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":111,"endColumn":124},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":114,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":114,"endColumn":124},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":117,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":117,"endColumn":125},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":120,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":120,"endColumn":125},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":128,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":128,"endColumn":104},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":131,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":131,"endColumn":103},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":134,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":134,"endColumn":103},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":156,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":156,"endColumn":71}],"suppressedMessages":[],"errorCount":21,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from \"react\";\r\n\r\n/**\r\n * PO Fulfillment Efficiency Report Component\r\n * Displays fulfillment % per PO with best/worst performers\r\n */\r\ninterface POEfficiencyData {\r\n    period: string;\r\n    pos: Array<{\r\n        po_number: string;\r\n        supplier_name: string;\r\n        ordered: number;\r\n        dispatched: number;\r\n        fulfillment_pct: number;\r\n    }>;\r\n    insights: {\r\n        best_po: {\r\n            po_number: string | null;\r\n            fulfillment_pct: number;\r\n        };\r\n        worst_po: {\r\n            po_number: string | null;\r\n            fulfillment_pct: number;\r\n        };\r\n        zero_fulfillment_count: number;\r\n        zero_fulfillment_pos: string[];\r\n    };\r\n}\r\n\r\ninterface POEfficiencyReportProps {\r\n    data: POEfficiencyData;\r\n    aiSummary?: string;\r\n}\r\n\r\nexport default function POEfficiencyReport({\r\n    data,\r\n    aiSummary,\r\n}: POEfficiencyReportProps) {\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            {/* Header */}\r\n            <div>\r\n                <h2 className=\"text-[18px] font-semibold text-text-primary\">\r\n                    PO Fulfillment Efficiency\r\n                </h2>\r\n                <p className=\"text-[12px] text-text-secondary mt-1\">\r\n                    Period: {data.period}\r\n                </p>\r\n            </div>\r\n            {/* Key Insights */}\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n                <div className=\"glass-card p-4\">\r\n                    <p className=\"text-[11px] text-text-secondary uppercase mb-2\">\r\n                        Best Performer\r\n                    </p>\r\n                    <p className=\"text-[20px] font-bold text-success\">\r\n                        {data.insights.best_po.po_number || \"N/A\"}\r\n                    </p>\r\n                    <p className=\"text-[12px] text-text-secondary mt-1\">\r\n                        {data.insights.best_po.fulfillment_pct}% fulfilled\r\n                    </p>\r\n                </div>\r\n                <div className=\"glass-card p-4\">\r\n                    <p className=\"text-[11px] text-text-secondary uppercase mb-2\">\r\n                        Worst Performer\r\n                    </p>\r\n                    <p className=\"text-[20px] font-bold text-danger\">\r\n                        {data.insights.worst_po.po_number || \"N/A\"}\r\n                    </p>\r\n                    <p className=\"text-[12px] text-text-secondary mt-1\">\r\n                        {data.insights.worst_po.fulfillment_pct}% fulfilled\r\n                    </p>\r\n                </div>\r\n                <div className=\"glass-card p-4\">\r\n                    <p className=\"text-[11px] text-text-secondary uppercase mb-2\">\r\n                        Zero Fulfillment\r\n                    </p>\r\n                    <p className=\"text-[20px] font-bold text-warning\">\r\n                        {data.insights.zero_fulfillment_count}\r\n                    </p>\r\n                    <p className=\"text-[12px] text-text-secondary mt-1\">\r\n                        POs with 0% dispatch\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            {/* AI Summary */}\r\n            {aiSummary && (\r\n                <div className=\"glass-card p-4 bg-primary/5 border border-primary/20\">\r\n                    <div className=\"flex items-start gap-3\">\r\n                        <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\r\n                            <span className=\"text-primary\">✨</span>\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <p className=\"text-[12px] font-semibold text-text-primary mb-1\">\r\n                                AI Insight\r\n                            </p>\r\n                            <p className=\"text-[13px] text-text-secondary leading-relaxed\">\r\n                                {aiSummary}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {/* PO Table */}\r\n            <div className=\"glass-card overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full\">\r\n                        <thead className=\"bg-sys-bg-tertiary border-b border-border\">\r\n                            <tr>\r\n                                <th className=\"px-4 py-3 text-left text-[11px] font-semibold text-text-secondary uppercase\">\r\n                                    PO Number\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-left text-[11px] font-semibold text-text-secondary uppercase\">\r\n                                    Lead Time\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase\">\r\n                                    Dispatched\r\n                                </th>\r\n                                <th className=\"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase\">\r\n                                    Fulfillment %\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-border\">\r\n                            {data.pos.slice(0, 20).map((po) => (\r\n                                <tr key={po.po_number} className=\"hover:bg-sys-bg-tertiary\">\r\n                                    <td className=\"px-4 py-3 text-[13px] font-medium text-text-primary\">\r\n                                        {po.po_number}\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-[13px] text-text-primary text-right\">\r\n                                        {po.ordered.toLocaleString()}\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-[13px] text-text-primary text-right\">\r\n                                        {po.dispatched.toLocaleString()}\r\n                                    </td>\r\n                                    <td className=\"px-4 py-3 text-right\">\r\n                                        <span\r\n                                            className={`inline-flex items-center px-2 py-1 rounded text-[12px] font-medium ${po.fulfillment_pct === 0\r\n                                                    ? \"bg-danger/10 text-danger\"\r\n                                                    : po.fulfillment_pct < 50\r\n                                                        ? \"bg-warning/10 text-warning\"\r\n                                                        : \"bg-success/10 text-success\"\r\n                                                }`}\r\n                                        >\r\n                                            {po.fulfillment_pct}%\r\n                                        </span>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                {data.pos.length > 20 && (\r\n                    <div className=\"px-4 py-3 bg-sys-bg-tertiary border-t border-border text-center\">\r\n                        <p className=\"text-[12px] text-text-secondary\">\r\n                            Showing 20 of {data.pos.length} POs\r\n                        </p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            {/* Actions: None enabled (Phase 2) */}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\POHealthReport.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AlertTriangle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":101,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":114},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":116,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":127},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":129,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":134},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Package' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":136,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":143},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":391,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":446},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":475,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":523},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":658,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":711},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":729,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":785},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":860,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":913},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":935,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":985},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1062,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1115},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1131,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1182},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1268,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1321},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1338,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1389},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1762,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1822},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":1843,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":1902},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2139,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2226},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2248,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2335},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2359,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2447},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2470,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2558},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2578,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2666},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2689,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2778},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":2797,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":2885},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":3067,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":3130},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":3157,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":3219},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":3265,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":3327},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":3376,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":3445},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":3491,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":3555},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":3813,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":3875},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":5,"column":4052,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":5,"endColumn":4095}],"suppressedMessages":[],"errorCount":30,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n/** * PO Health Summary Report Component * Displays one row per PO with complete status */ import { AlertTriangle, CheckCircle, Clock, Package } from\"lucide-react\"; interface POHealthData { period: string; summary: { total_pos: number; not_started: number; partially_dispatched: number; fully_dispatched: number; }; pos: Array<{ po_number: string; supplier_name: string; po_date: string; po_value: number; ordered_qty: number; dispatched_qty: number; pending_qty: number; po_age_days: number; fulfillment_status: string; invoice_status: string; fulfillment_pct: number; }>;\r\n} interface POHealthReportProps { data: POHealthData; aiSummary: string;\r\n} export default function POHealthReport({ data, aiSummary,\r\n}: POHealthReportProps) { const getStatusColor = (status: string) => { switch (status) { case\"FULLY_DISPATCHED\": return\"text-success bg-success/10\"; case\"PARTIALLY_DISPATCHED\": return\"text-warning bg-warning/10\"; case\"NOT_STARTED\": return\"text-danger bg-danger/10\"; default: return\"text-text-secondary bg-sys-bg-tertiary\"; } }; return ( <div className=\"space-y-6\"> {/* Header */} <div> <h2 className=\"text-[18px] font-semibold text-text-primary\"> PO Health Summary </h2> <p className=\"text-[12px] text-text-secondary mt-1\"> Period: {data.period} </p> </div> {/* Summary Stats */} <div className=\"grid grid-cols-4 gap-4\"> <div className=\"glass-card p-4\"> <p className=\"text-[11px] text-text-secondary uppercase\">Total POs</p> <p className=\"text-[24px] font-bold text-text-primary mt-1\"> {data.summary.total_pos} </p> </div> <div className=\"glass-card p-4\"> <p className=\"text-[11px] text-text-secondary uppercase\"> Not Started </p> <p className=\"text-[24px] font-bold text-danger mt-1\"> {data.summary.not_started} </p> </div> <div className=\"glass-card p-4\"> <p className=\"text-[11px] text-text-secondary uppercase\">Partial</p> <p className=\"text-[24px] font-bold text-warning mt-1\"> {data.summary.partially_dispatched} </p> </div> <div className=\"glass-card p-4\"> <p className=\"text-[11px] text-text-secondary uppercase\">Complete</p> <p className=\"text-[24px] font-bold text-success mt-1\"> {data.summary.fully_dispatched} </p> </div> </div> {/* AI Summary */} {aiSummary && ( <div className=\"glass-card p-4 bg-primary/5 border border-primary/20\"> <div className=\"flex items-start gap-3\"> <div className=\"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\"> <span className=\"text-primary\">✨</span> </div> <div className=\"flex-1\"> <p className=\"text-[12px] font-semibold text-text-primary mb-1\"> AI Insight </p> <p className=\"text-[13px] text-text-secondary leading-relaxed\"> {aiSummary} </p> </div> </div> </div> )} {/* PO Table */} <div className=\"glass-card overflow-hidden\"> <div className=\"overflow-x-auto\"> <table className=\"w-full\"> <thead className=\"bg-sys-bg-tertiary border-b border-border\"> <tr> <th className=\"px-4 py-3 text-left text-[11px] font-semibold text-text-secondary uppercase\"> PO Number </th> <th className=\"px-4 py-3 text-left text-[11px] font-semibold text-text-secondary uppercase\"> Order Value </th> <th className=\"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase\"> Dispatched </th> <th className=\"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase\"> Pending </th> <th className=\"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase\"> Age (Days) </th> <th className=\"px-4 py-3 text-center text-[11px] font-semibold text-text-secondary uppercase\"> Status </th> <th className=\"px-4 py-3 text-right text-[11px] font-semibold text-text-secondary uppercase\"> Fulfillment % </th> </tr> </thead> <tbody className=\"divide-y divide-border\"> {data.pos.slice(0, 20).map((po) => ( <tr key={po.po_number} className=\"hover:bg-sys-bg-tertiary\"> <td className=\"px-4 py-3 text-[13px] font-medium text-text-primary\"> {po.po_number} </td> <td className=\"px-4 py-3 text-[13px] text-text-primary text-right\"> {po.ordered_qty.toLocaleString()} </td> <td className=\"px-4 py-3 text-[13px] text-text-primary text-right\"> {po.dispatched_qty.toLocaleString()} </td> <td className=\"px-4 py-3 text-[13px] font-medium text-warning text-right\"> {po.pending_qty.toLocaleString()} </td> <td className=\"px-4 py-3 text-[13px] text-text-secondary text-right\"> {po.po_age_days} </td> <td className=\"px-4 py-3 text-center\"> <span className={`inline-flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium ${getStatusColor(po.fulfillment_status)}`} > {po.fulfillment_status.replace(\"_\",\"\")} </span> </td> <td className=\"px-4 py-3 text-[13px] text-text-primary text-right\"> {po.fulfillment_pct}% </td> </tr> ))} </tbody> </table> </div> {data.pos.length > 20 && ( <div className=\"px-4 py-3 bg-sys-bg-tertiary border-t border-border text-center\"> <p className=\"text-[12px] text-text-secondary\"> Showing 20 of {data.pos.length} POs </p> </div> )} </div> {/* Actions */} <div className=\"flex gap-3\"> {/* PDF generation disabled (Phase 2) */} </div> </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\TrendsSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowUpRight' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TrendingUp' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'range' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":46}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from\"react\";\r\nimport { ArrowUpRight, TrendingUp } from\"lucide-react\"; interface TrendItem { month: string; ordered_value: number; invoiced_value: number;\r\n} interface TrendsSectionProps { data: TrendItem[]; range: string;\r\n} export function TrendsSection({ data, range }: TrendsSectionProps) { if (!data || data.length === 0) return null; // Find max value for scaling const maxValue = Math.max( ...data.map((d) => Math.max(d.ordered_value, d.invoiced_value)), ); const scale = maxValue > 0 ? 100 / maxValue : 1; // Simple Line/Bar combo visualizer return ( <div className=\"space-y-6 mb-8\"> <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\"> {/* Main Trend Chart */} <div className=\"bg-sys-bg-white p-6 rounded-2xl border border-sys-bg-tertiary shadow-sm\"> <div className=\"flex justify-between items-center mb-6\"> <h3 className=\"font-semibold text-sys-primary\"> Sales & Dispatch Trends </h3> <div className=\"flex items-center gap-4 font-medium\"> <div className=\"flex items-center gap-2\"> <span className=\"w-3 h-3 rounded-full bg-sys-brand\"></span>{\"\"} Ordered </div> <div className=\"flex items-center gap-2\"> <span className=\"w-3 h-3 rounded-full bg-sys-success\"></span>{\"\"} Invoiced </div> </div> </div> <div className=\"relative h-64 w-full flex items-end justify-between px-2 gap-2\"> {/* Grid Lines */} <div className=\"absolute inset-0 flex flex-col justify-between pointer-events-none text-sys-tertiary\"> <div className=\"border-b border-sys-bg-tertiary h-full w-full absolute top-0\"></div> <div className=\"border-b border-sys-bg-tertiary h-full w-full absolute top-1/4\"></div> <div className=\"border-b border-sys-bg-tertiary h-full w-full absolute top-2/4\"></div> <div className=\"border-b border-sys-bg-tertiary h-full w-full absolute top-3/4\"></div> </div> {data.map((item, idx) => ( <div key={idx} className=\"relative flex flex-col items-center flex-1 h-full justify-end group z-10\" > <div className=\"absolute bottom-0 w-full flex justify-center gap-1 h-full items-end pb-6\"> {/* Bar for Invoiced */} <div style={{ height: `${item.invoiced_value * scale}%` }} className=\"w-2 md:w-4 bg-sys-success rounded-t-sm opacity-80 group-hover:opacity-100 transition-all duration-500\" ></div> {/* Bar for Ordered */} <div style={{ height: `${item.ordered_value * scale}%` }} className=\"w-2 md:w-4 bg-sys-brand rounded-t-sm opacity-80 group-hover:opacity-100 transition-all duration-500\" ></div> </div> <span className=\"text-[10px] text-sys-tertiary mt-2 absolute bottom-0\"> {item.month} </span> {/* Tooltip */} <div className=\"opacity-0 group-hover:opacity-100 absolute -top-12 bg-sys-primary text-sys-bg-white p-2 rounded pointer-events-none transition-opacity z-20 whitespace-nowrap\"> <div className=\"font-semibold mb-1\">Month {item.month}</div> <div>Ord: ₹{(item.ordered_value / 1000).toFixed(1)}k</div> <div>Inv: ₹{(item.invoiced_value / 1000).toFixed(1)}k</div> </div> </div> ))} </div> <div className=\"mt-4 p-3 bg-sys-brand-subtle/50 rounded-lg text-sys-brand flex items-start gap-2\"> <TrendingUp className=\"w-4 h-4 mt-0.5 shrink-0\" /> <p> <strong>Insight:</strong> Invoicing is trailing orders by{\"\"} <strong>12%</strong> this quarter. Consider expediting dispatch for pending items. </p> </div> </div> {/* Period Comparison (Simple Cards) */} <div className=\"grid grid-cols-1 gap-6\"> <div className=\"bg-sys-bg-white p-6 rounded-2xl border border-sys-bg-tertiary shadow-sm flex flex-col justify-center\"> <h3 className=\"font-semibold text-sys-secondary uppercase tracking-wider mb-1\"> This Quarter Efficiency </h3> <div className=\"flex items-end gap-3 mt-2\"> <span className=\"text-4xl font-bold text-sys-primary\">92%</span> <span className=\"flex items-center font-bold text-sys-success mb-1\"> <ArrowUpRight className=\"w-4 h-4\" /> 4.5% </span> </div> <p className=\"text-sys-tertiary mt-2\"> vs Last Quarter (87.5%) </p> <div className=\"mt-6 h-2 w-full bg-sys-bg-tertiary rounded-full overflow-hidden\"> <div className=\"h-full bg-sys-success w-[92%]\"></div> </div> </div> <div className=\"bg-sys-bg-white p-6 rounded-2xl border border-sys-bg-tertiary shadow-sm\"> <h3 className=\"font-semibold text-sys-secondary uppercase tracking-wider mb-4\"> Pending Breakdown </h3> <div className=\"space-y-3\"> <div> <div className=\"flex justify-between font-medium mb-1\"> <span>Material Shortage</span> <span>3 Items</span> </div> <div className=\"h-1.5 w-full bg-sys-bg-tertiary rounded-full\"> <div className=\"h-full bg-sys-error w-[30%]\"></div> </div> </div> <div> <div className=\"flex justify-between font-medium mb-1\"> <span>Awaiting Inspection</span> <span>5 Items</span> </div> <div className=\"h-1.5 w-full bg-sys-bg-tertiary rounded-full\"> <div className=\"h-full bg-amber-400 w-[50%]\"></div> </div> </div> <div> <div className=\"flex justify-between font-medium mb-1\"> <span>Ready for Dispatch</span> <span>2 Items</span> </div> <div className=\"h-1.5 w-full bg-sys-bg-tertiary rounded-full\"> <div className=\"h-full bg-green-400 w-[20%]\"></div> </div> </div> </div> </div> </div> </div> </div> );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\UnifiedTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":30},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":49,"column":29,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":49,"endColumn":164},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isWarning' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":62,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":44}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { FileText, ArrowRight, Truck } from \"lucide-react\";\r\nimport Pagination from \"@/components/Pagination\";\r\n\r\nexport interface SmartTableRow {\r\n    po_number: number;\r\n    po_date: string;\r\n    po_item_no: number;\r\n    material_description: string;\r\n    ord_qty: number;\r\n    dispatched_qty: number;\r\n    pending_qty: number;\r\n    age_days: number;\r\n    status: \"Pending\" | \"Completed\";\r\n}\r\n\r\ninterface UnifiedTableProps {\r\n    data: SmartTableRow[];\r\n    loading: boolean;\r\n}\r\n\r\nexport function UnifiedTable({ data, loading }: UnifiedTableProps) {\r\n    const router = useRouter();\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const itemsPerPage = 10;\r\n\r\n    const startIndex = (currentPage - 1) * itemsPerPage;\r\n    const paginatedData = data.slice(startIndex, startIndex + itemsPerPage);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"p-8 text-center text-sys-secondary\">\r\n                Loading operational data...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-sys-bg-white rounded-2xl border border-sys-tertiary/20 shadow-sm overflow-hidden\">\r\n            <div className=\"p-4 border-b border-sys-bg-tertiary flex justify-between items-center bg-sys-bg-tertiary/30\">\r\n                <h3 className=\"font-semibold text-sys-primary\">Operational Deep Dive</h3>\r\n                <div className=\"text-sys-secondary\">Showing {data.length} records</div>\r\n            </div>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-left border-collapse\">\r\n                    <thead>\r\n                        <tr className=\"bg-sys-bg-tertiary/50 text-sys-secondary border-b border-sys-bg-tertiary text-[11px] uppercase tracking-wider font-semibold\">\r\n                            <th className=\"px-6 py-4\">Status</th>\r\n                            <th className=\"px-6 py-4\">PO Details</th>\r\n                            <th className=\"px-6 py-4 max-w-xs\">Material</th>\r\n                            <th className=\"px-6 py-4 text-center\">Progress</th>\r\n                            <th className=\"px-6 py-4 text-right\">Age</th>\r\n                            <th className=\"px-6 py-4 text-right\">Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-sys-bg-tertiary\">\r\n                        {paginatedData.map((row) => {\r\n                            // Smart Highlighting logic\r\n                            const isUrgent = row.pending_qty > 0 && row.age_days > 14;\r\n                            const isWarning = row.pending_qty > 0 && row.age_days > 7;\r\n\r\n                            return (\r\n                                <tr\r\n                                    key={`${row.po_number}-${row.po_item_no}`}\r\n                                    className={`\r\n                    group hover:bg-sys-bg-tertiary transition-colors\r\n                    ${isUrgent ? \"bg-sys-error-subtle/30\" : \"\"}\r\n                  `}\r\n                                >\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <span\r\n                                            className={`\r\n                        inline-flex items-center px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wide\r\n                        ${row.pending_qty === 0\r\n                                                    ? \"bg-sys-success-subtle text-green-700\"\r\n                                                    : isUrgent\r\n                                                        ? \"bg-sys-error-subtle text-sys-error animate-pulse\"\r\n                                                        : \"bg-amber-100 text-amber-700\"\r\n                                                }\r\n                      `}\r\n                                        >\r\n                                            {row.pending_qty === 0 ? \"Done\" : \"Pending\"}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div className=\"font-semibold text-sys-primary\">\r\n                                            PO #{row.po_number}\r\n                                        </div>\r\n                                        <div className=\"text-sys-secondary\">{row.po_date}</div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4\">\r\n                                        <div\r\n                                            className=\"text-sys-primary max-w-[240px] truncate\"\r\n                                            title={row.material_description}\r\n                                        >\r\n                                            {row.material_description}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-center\">\r\n                                        <div className=\"flex flex-col items-center gap-1\">\r\n                                            <div className=\"font-medium text-sys-secondary\">\r\n                                                {row.dispatched_qty} / {row.ord_qty}\r\n                                            </div>\r\n                                            <div className=\"w-24 h-1.5 bg-sys-bg-tertiary rounded-full overflow-hidden\">\r\n                                                <div\r\n                                                    className={`h-full rounded-full ${row.pending_qty === 0\r\n                                                            ? \"bg-sys-success\"\r\n                                                            : \"bg-sys-brand\"\r\n                                                        }`}\r\n                                                    style={{\r\n                                                        width: `${Math.min(\r\n                                                            (row.dispatched_qty / row.ord_qty) * 100,\r\n                                                            100\r\n                                                        )}%`,\r\n                                                    }}\r\n                                                ></div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-right\">\r\n                                        <span\r\n                                            className={`\r\n                        font-medium\r\n                        ${isUrgent ? \"text-sys-error\" : \"text-sys-secondary\"}\r\n                      `}\r\n                                        >\r\n                                            {row.age_days} days\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 text-right\">\r\n                                        {row.pending_qty > 0 ? (\r\n                                            <button\r\n                                                onClick={() =>\r\n                                                    router.push(`/dc/create?po=${row.po_number}`)\r\n                                                }\r\n                                                className=\"inline-flex items-center gap-1 px-3 py-1.5 font-medium text-sys-bg-white bg-sys-brand hover:bg-sys-brand rounded-lg transition-colors shadow-sm opacity-0 group-hover:opacity-100\"\r\n                                            >\r\n                                                <Truck className=\"w-3 h-3\" />\r\n                                                Dispatch\r\n                                            </button>\r\n                                        ) : (\r\n                                            <div className=\"text-sys-tertiary font-medium\">\r\n                                                Completed\r\n                                            </div>\r\n                                        )}\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <div className=\"p-4 border-t border-sys-bg-tertiary\">\r\n                <Pagination\r\n                    currentPage={currentPage}\r\n                    totalItems={data.length}\r\n                    itemsPerPage={itemsPerPage}\r\n                    onPageChange={setCurrentPage}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\organisms\\ReportNavGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'motion' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { NavigationCard, NavigationCardProps } from \"@/components/design-system/molecules/NavigationCard\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport interface ReportNavGridProps {\r\n    items: (Omit<NavigationCardProps, \"onClick\"> & { id: string })[];\r\n    activeId: string;\r\n    onSelect: (id: string) => void;\r\n    className?: string;\r\n}\r\n\r\nexport const ReportNavGrid = ({\r\n    items,\r\n    activeId,\r\n    onSelect,\r\n    className,\r\n}: ReportNavGridProps) => {\r\n    return (\r\n        <div className={cn(\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4\", className)}>\r\n            {items.map((item) => (\r\n                <NavigationCard\r\n                    key={item.id}\r\n                    {...item}\r\n                    active={item.id === activeId}\r\n                    onClick={() => onSelect(item.id)}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\organisms\\ReportsCharts.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":18,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":18,"endColumn":82},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":19,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":19,"endColumn":79},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[539,542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[539,542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6921,6924],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6921,6924],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8085,8088],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8085,8088],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":210,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":210,"endColumn":130},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":216,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":216,"endColumn":112},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":229,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":229,"endColumn":133},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":244,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":244,"endColumn":116}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    ResponsiveContainer,\r\n    Cell,\r\n    PieChart,\r\n    Pie,\r\n} from \"recharts\";\r\nimport { Activity } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Flex, Stack, Box, Grid } from \"@/components/design-system/atoms/Layout\";\r\nimport { Body, SmallText } from \"@/components/design-system/atoms/Typography\";\r\n\r\ninterface ReportsChartsProps {\r\n    activeTab: string;\r\n    chartData: any[];\r\n}\r\n\r\nconst ReportsCharts = ({ activeTab, chartData }: ReportsChartsProps) => {\r\n    return (\r\n        <motion.div\r\n            key={`chart-${activeTab}`}\r\n            initial={{ opacity: 0, scale: 0.98 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.98 }}\r\n        >\r\n            <Grid cols=\"1\" gap={6} className=\"lg:grid-cols-3\">\r\n                {/* Main Chart Card */}\r\n                <Box className=\"lg:col-span-2 p-6 rounded-2xl bg-app-surface/40 backdrop-blur-md shadow-clay-surface transition-all duration-300 hover:shadow-premium-hover\">\r\n                    <Flex\r\n                        align=\"center\"\r\n                        justify=\"between\"\r\n                        className=\"mb-4 shadow-none pb-2\"\r\n                    >\r\n                        <Box>\r\n                            <Body className=\"font-bold text-app-accent uppercase tracking-wide text-xs\">\r\n                                {activeTab === \"sales\" ? \"Revenue Momentum\" : \"Quality Distribution\"}\r\n                            </Body>\r\n                        </Box>\r\n                    </Flex>\r\n                    <Box className=\"h-[240px] w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            {activeTab === \"sales\" ? (\r\n                                <BarChart data={chartData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                                    <CartesianGrid\r\n                                        strokeDasharray=\"3 3\"\r\n                                        vertical={false}\r\n                                        stroke=\"#E0E0E0\"\r\n                                        opacity={0.3}\r\n                                    />\r\n                                    <XAxis\r\n                                        dataKey=\"name\"\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 600,\r\n                                            fill: \"var(--app-fg-muted)\",\r\n                                        }}\r\n                                        dy={8}\r\n                                    />\r\n                                    <YAxis\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 600,\r\n                                            fill: \"var(--app-fg-muted)\",\r\n                                        }}\r\n                                        tickFormatter={(value) => {\r\n                                            if (value >= 10000000) return `${(value / 10000000).toFixed(1)}Cr`;\r\n                                            if (value >= 100000) return `${(value / 100000).toFixed(1)}L`;\r\n                                            if (value >= 1000) return `${(value / 1000).toFixed(1)}k`;\r\n                                            return String(value);\r\n                                        }}\r\n                                    />\r\n                                    <Tooltip\r\n                                        contentStyle={{\r\n                                            borderRadius: \"12px\",\r\n                                            border: \"1px solid #E0E0E0\",\r\n                                            boxShadow: \"var(--shadow-lg)\",\r\n                                            background: \"var(--bg-surface)\",\r\n                                            backdropFilter: \"blur(12px)\",\r\n                                            padding: \"8px 12px\",\r\n                                        }}\r\n                                        labelStyle={{\r\n                                            fontWeight: 700,\r\n                                            color: \"var(--app-fg)\",\r\n                                            fontSize: \"11px\",\r\n                                            marginBottom: \"4px\",\r\n                                        }}\r\n                                        itemStyle={{\r\n                                            fontSize: \"10px\",\r\n                                            fontWeight: 600,\r\n                                        }}\r\n                                    />\r\n                                    <Bar\r\n                                        name=\"Ordered\"\r\n                                        dataKey=\"ordered_value\"\r\n                                        fill=\"#1A73E8\"\r\n                                        radius={[6, 6, 0, 0]}\r\n                                        maxBarSize={40}\r\n                                        opacity={0.9}\r\n                                    />\r\n                                    <Bar\r\n                                        name=\"Delivered\"\r\n                                        dataKey=\"delivered_value\"\r\n                                        fill=\"#1E8E3E\"\r\n                                        radius={[6, 6, 0, 0]}\r\n                                        maxBarSize={40}\r\n                                        opacity={0.9}\r\n                                    />\r\n                                </BarChart>\r\n                            ) : (\r\n                                <BarChart data={chartData} layout=\"vertical\" margin={{ left: 40, right: 10 }}>\r\n                                    <XAxis type=\"number\" hide />\r\n                                    <YAxis\r\n                                        dataKey=\"name\"\r\n                                        type=\"category\"\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 600,\r\n                                            fill: \"var(--app-fg-muted)\",\r\n                                        }}\r\n                                    />\r\n                                    <Tooltip\r\n                                        formatter={(value: any) => [\r\n                                            typeof value === \"number\" ? Math.round(value) : value,\r\n                                            \"\",\r\n                                        ]}\r\n                                        contentStyle={{\r\n                                            borderRadius: \"12px\",\r\n                                            border: \"1px solid #E0E0E0\",\r\n                                            boxShadow: \"var(--shadow-lg)\",\r\n                                            background: \"var(--bg-surface)\",\r\n                                            backdropFilter: \"blur(10px)\",\r\n                                            padding: \"8px 12px\",\r\n                                        }}\r\n                                        itemStyle={{\r\n                                            fontSize: \"10px\",\r\n                                            fontWeight: 600,\r\n                                        }}\r\n                                    />\r\n                                    <Bar dataKey=\"value\" radius={[0, 6, 6, 0]} maxBarSize={28}>\r\n                                        {chartData.map((entry: any, index: number) => {\r\n                                            // Use theme-aware CSS variables\r\n                                            const colors = [\r\n                                                '#1E8E3E',  // Green for Accepted\r\n                                                '#D93025',  // Red for Rejected\r\n                                                '#E37400',  // Amber for Pending\r\n                                            ];\r\n                                            const color = entry.color || colors[index % colors.length];\r\n\r\n                                            return (\r\n                                                <Cell\r\n                                                    key={`cell-${index}`}\r\n                                                    fill={color}\r\n                                                    fillOpacity={0.9}\r\n                                                />\r\n                                            );\r\n                                        })}\r\n                                    </Bar>\r\n                                </BarChart>\r\n                            )}\r\n                        </ResponsiveContainer>\r\n                    </Box>\r\n                </Box>\r\n\r\n                {/* Secondary Charts Stack */}\r\n                <Stack gap={4}>\r\n                    <Flex\r\n                        align=\"center\"\r\n                        justify=\"center\"\r\n                        direction=\"col\"\r\n                        className=\"p-5 rounded-2xl bg-app-surface/40 backdrop-blur-md shadow-clay-surface text-center\"\r\n                    >\r\n                        <Flex align=\"center\" justify=\"center\" className=\"relative w-28 h-28\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <PieChart>\r\n                                    <Pie\r\n                                        data={[\r\n                                            { name: \"Growth\", value: 75, fill: \"#1A73E8\" },\r\n                                            { name: \"Remaining\", value: 25, fill: \"#E0E0E0\" },\r\n                                        ]}\r\n                                        cx=\"50%\"\r\n                                        cy=\"50%\"\r\n                                        innerRadius={42}\r\n                                        outerRadius={56}\r\n                                        dataKey=\"value\"\r\n                                        startAngle={90}\r\n                                        endAngle={-270}\r\n                                        stroke=\"#FFFFFF\"\r\n                                        strokeWidth={3}\r\n                                    />\r\n                                </PieChart>\r\n                            </ResponsiveContainer>\r\n                            <Stack align=\"center\" justify=\"center\" className=\"absolute inset-0\">\r\n                                <Body className=\"font-bold text-app-accent text-lg\">\r\n                                    75%\r\n                                </Body>\r\n                                <SmallText className=\"text-[9px] text-app-accent font-bold uppercase tracking-wider leading-none\">\r\n                                    Margin\r\n                                </SmallText>\r\n                            </Stack>\r\n                        </Flex>\r\n                        <Box className=\"mt-3\">\r\n                            <Body className=\"text-[10px] font-bold text-app-fg-muted uppercase tracking-widest\">\r\n                                Gross Profit Margin\r\n                            </Body>\r\n                        </Box>\r\n                    </Flex>\r\n\r\n                    <Flex\r\n                        justify=\"between\"\r\n                        direction=\"col\"\r\n                        className=\"p-5 rounded-2xl bg-app-surface/40 backdrop-blur-md shadow-clay-surface transition-all duration-300 hover:shadow-premium-hover\"\r\n                    >\r\n                        <Flex align=\"center\" justify=\"between\">\r\n                            <Stack>\r\n                                <SmallText className=\"text-[9px] font-bold text-app-fg-muted uppercase tracking-widest leading-none\">\r\n                                    Quick Ratio\r\n                                </SmallText>\r\n                                <Body className=\"font-bold text-app-fg mt-1 text-sm\">\r\n                                    0.9:8\r\n                                </Body>\r\n                            </Stack>\r\n                            <Box className=\"w-9 h-9 rounded-xl flex items-center justify-center bg-app-status-warning/10 text-app-status-warning\">\r\n                                <Activity size={18} />\r\n                            </Box>\r\n                        </Flex>\r\n                        <Box className=\"mt-3\">\r\n                            <Box className=\"w-full bg-app-border/30 h-2 rounded-full overflow-hidden\">\r\n                                <Box className=\"bg-gradient-to-r from-amber-400 to-amber-600 h-full rounded-full w-[45%]\" />\r\n                            </Box>\r\n                            <SmallText className=\"text-[9px] text-app-fg-muted/70 font-medium mt-2 leading-relaxed\">\r\n                                Liquid assets vs Current liabilities\r\n                            </SmallText>\r\n                        </Box>\r\n                    </Flex>\r\n                </Stack>\r\n            </Grid>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default ReportsCharts;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\organisms\\ReportsDataCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":77},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":71}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H3, SmallText } from \"@/components/design-system/atoms/Typography\";\r\nimport { Stack, Flex } from \"@/components/design-system/atoms/Layout\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface ReportsDataCardProps {\r\n    title: string;\r\n    subtitle?: string;\r\n    children: React.ReactNode;\r\n    actions?: React.ReactNode;\r\n    className?: string;\r\n}\r\n\r\nexport const ReportsDataCard = ({\r\n    title,\r\n    subtitle,\r\n    children,\r\n    actions,\r\n    className,\r\n}: ReportsDataCardProps) => {\r\n    return (\r\n        <div className={cn(\"bg-app-surface border border-app-border rounded-xl shadow-sm p-6 space-y-6\", className)}>\r\n            <Flex justify=\"between\" align=\"start\">\r\n                <Stack gap={1}>\r\n                    <H3 className=\"m-0 text-app-accent font-bold tracking-tight uppercase leading-none\">\r\n                        {title}\r\n                    </H3>\r\n                    {subtitle && (\r\n                        <SmallText className=\"text-app-fg-muted font-medium opacity-70\">\r\n                            {subtitle}\r\n                        </SmallText>\r\n                    )}\r\n                </Stack>\r\n                {actions && <Flex gap={2}>{actions}</Flex>}\r\n            </Flex>\r\n            <div className=\"w-full relative\">\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\organisms\\ReportsToolbar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'FormField' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":66},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":47,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":47,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":54,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":54,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":69,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":69,"endColumn":85}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { FormField } from \"@/components/design-system/molecules/FormField\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { FileSpreadsheet, Calendar } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ReportsToolbar Organism - Atomic Design System v1.0\r\n * Date range selector + Module selector + Export buttons\r\n * Used in Reports page\r\n */\r\nexport interface ReportsToolbarProps {\r\n    startDate: string;\r\n    endDate: string;\r\n    onDateChange: (start: string, end: string) => void;\r\n    onExport?: () => void;\r\n    loading?: boolean;\r\n    className?: string;\r\n}\r\n\r\nexport const ReportsToolbar: React.FC<ReportsToolbarProps> = ({\r\n    startDate,\r\n    endDate,\r\n    onDateChange,\r\n    onExport,\r\n    loading = false,\r\n    className,\r\n}) => {\r\n    return (\r\n        <div\r\n            className={cn(\r\n                \"flex flex-col sm:flex-row items-center justify-between gap-4 py-2 px-4\",\r\n                \"bg-sys-bg-white/50 backdrop-blur-sm rounded-xl border border-sys-tertiary/20 shadow-sm\",\r\n                className\r\n            )}\r\n        >\r\n            {/* Date Range Selection */}\r\n            <div className=\"flex items-center gap-3\">\r\n                <div className=\"flex items-center gap-2 bg-sys-bg-white/40 backdrop-blur-md px-3 py-1.5 rounded-xl border border-sys-white/40 shadow-[0_2px_10px_rgba(0,0,0,0.02)] focus-within:ring-2 focus-within:ring-sys-brand/10 transition-all\">\r\n                    <Calendar size={14} className=\"text-sys-brand mr-0.5\" />\r\n                    <input\r\n                        type=\"date\"\r\n                        value={startDate}\r\n                        onChange={(e) => onDateChange(e.target.value, endDate)}\r\n                        className=\"bg-transparent border-none text-[12px] font-bold text-sys-primary focus:ring-0 w-32 cursor-pointer\"\r\n                    />\r\n                    <span className=\"text-sys-tertiary font-black\">→</span>\r\n                    <input\r\n                        type=\"date\"\r\n                        value={endDate}\r\n                        onChange={(e) => onDateChange(startDate, e.target.value)}\r\n                        className=\"bg-transparent border-none text-[12px] font-bold text-sys-primary focus:ring-0 w-32 cursor-pointer\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Export Action */}\r\n            {onExport && (\r\n                <Button\r\n                    onClick={onExport}\r\n                    variant=\"secondary\"\r\n                    size=\"sm\"\r\n                    disabled={loading}\r\n                    className=\"h-8 gap-2 bg-sys-bg-white hover:bg-sys-bg-tertiary border border-sys-tertiary/20 text-sys-primary\"\r\n                >\r\n                    <FileSpreadsheet size={14} className=\"text-sys-success\" />\r\n                    <span className=\"text-[11px] font-bold uppercase tracking-wider\">\r\n                        Export Excel\r\n                    </span>\r\n                </Button>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\reports\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\srv\\SRVListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRouter' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'XCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Layers' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Stack' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SummaryCards' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InspectionManifest' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SummaryCardProps' is defined but never used. Allowed unused vars must match /^_/u.","line":33,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleDelete' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":73,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4591,4594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4591,4594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":203,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7157,7160],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7157,7160],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":211,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":211,"endColumn":83},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":213,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":213,"endColumn":106},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":223,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":223,"endColumn":97},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":230,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":230,"endColumn":85},{"ruleId":"no-restricted-syntax","severity":2,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":237,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":237,"endColumn":83}],"suppressedMessages":[],"errorCount":15,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo, useCallback, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport {\r\n    Upload,\r\n    CheckCircle2,\r\n    XCircle,\r\n    Trash2,\r\n    Layers,\r\n    AlertCircle,\r\n    ChevronRight,\r\n} from \"lucide-react\";\r\nimport { api, SRVListItem, SRVStats } from \"@/lib/api\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\nimport { useUpload } from \"@/components/providers/UploadContext\";\r\nimport {\r\n    Body,\r\n    SmallText,\r\n    Accounting,\r\n    Button,\r\n    ListPageTemplate,\r\n    type Column,\r\n    Badge,\r\n    DataTable,\r\n    Flex,\r\n    Stack,\r\n    SummaryCards,\r\n    InspectionManifest,\r\n} from \"@/components/design-system\";\r\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\r\nimport { type SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\r\n\r\ninterface SRVListClientProps {\r\n    initialSRVs: SRVListItem[];\r\n    initialStats: SRVStats | null;\r\n}\r\n\r\nexport function SRVListClient({ initialSRVs, initialStats }: SRVListClientProps) {\r\n    // const router = useRouter();\r\n    const [srvs, setSrvs] = useState<SRVListItem[]>(initialSRVs);\r\n    const [stats, setStats] = useState<SRVStats | null>(initialStats);\r\n    const [loading, setLoading] = useState(false);\r\n    const [page, setPage] = useState(1);\r\n    const pageSize = 10;\r\n\r\n    const { startUpload } = useUpload();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const loadData = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const [srvData, statsData] = await Promise.all([api.listSRVs(), api.getSRVStats()]);\r\n            setSrvs(srvData);\r\n            setStats(statsData);\r\n        } catch {\r\n            // console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n            const files = Array.from(e.target.files);\r\n            startUpload(files, \"SRV\");\r\n            e.target.value = \"\";\r\n        }\r\n    }, [startUpload]);\r\n\r\n    const handleDelete = useCallback(\r\n        async (srvNumber: string) => {\r\n            if (!confirm(`Permanently delete SRV #${srvNumber}?`)) return;\r\n            try {\r\n                await api.deleteSRV(srvNumber);\r\n                await loadData();\r\n            } catch {\r\n                // console.error(err);\r\n            }\r\n        },\r\n        [loadData]\r\n    );\r\n\r\n    const groupedSRVs = useMemo(() => {\r\n        const groups: Record<string, {\r\n            po_number: string;\r\n            po_found: boolean;\r\n            total_ord: number;\r\n            total_recd: number;\r\n            total_rejd: number;\r\n            last_srv_date: string;\r\n            po_status: string;\r\n            srvs: SRVListItem[];\r\n        }> = {};\r\n\r\n        srvs.forEach(s => {\r\n            const po = String(s.po_number);\r\n            if (!groups[po]) {\r\n                groups[po] = {\r\n                    po_number: po,\r\n                    po_found: s.po_found ?? true,\r\n                    total_ord: s.total_order_qty, // First SRV gives a baseline, though it might be partial.\r\n                    // In a better system, we'd fetch PO totals directly.\r\n                    total_recd: 0,\r\n                    total_rejd: 0,\r\n                    last_srv_date: s.srv_date,\r\n                    po_status: s.total_received_qty >= s.total_order_qty ? \"Closed\" : (s.total_received_qty > 0 ? \"Pending\" : \"Draft\"),\r\n                    srvs: []\r\n                };\r\n            }\r\n\r\n            groups[po].total_recd += s.total_received_qty;\r\n            groups[po].total_rejd += s.total_rejected_qty;\r\n            if (new Date(s.srv_date) > new Date(groups[po].last_srv_date)) {\r\n                groups[po].last_srv_date = s.srv_date;\r\n            }\r\n            groups[po].srvs.push(s);\r\n        });\r\n\r\n        return Object.values(groups).sort((a, b) =>\r\n            new Date(b.last_srv_date).getTime() - new Date(a.last_srv_date).getTime()\r\n        );\r\n    }, [srvs]);\r\n\r\n    const filteredData = useMemo(() => {\r\n        if (!searchQuery) return groupedSRVs;\r\n        const q = searchQuery.toLowerCase();\r\n        return groupedSRVs.filter(\r\n            (g) => g.po_number.toLowerCase().includes(q) ||\r\n                g.srvs.some(s => s.srv_number.toLowerCase().includes(q))\r\n        );\r\n    }, [groupedSRVs, searchQuery]);\r\n\r\n    const poColumns: Column<any>[] = useMemo(\r\n        () => [\r\n            {\r\n                key: \"po_number\",\r\n                label: \"PO\",\r\n                width: \"25%\",\r\n                render: (v, row) => (\r\n                    <Flex align=\"center\" gap={3}>\r\n                        <Link href={`/po/${v}`} className=\"group flex items-center gap-1.5 p-1 px-2 rounded-lg bg-app-accent/5 border border-app-accent/10 transition-all hover:bg-app-accent/10\">\r\n                            <Body className=\"text-app-accent tracking-tight\">#{v}</Body>\r\n                            {!row.po_found && <AlertCircle size={14} className=\"text-app-status-error\" />}\r\n                        </Link>\r\n                    </Flex>\r\n                )\r\n            },\r\n            {\r\n                key: \"last_srv_date\",\r\n                label: \"DATE\",\r\n                width: \"15%\",\r\n                render: (v) => <SmallText className=\"font-mono text-app-fg-muted\">{formatDate(v as string)}</SmallText>\r\n            },\r\n            {\r\n                key: \"total_ord\",\r\n                label: \"ORD\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting className=\"text-right block\">{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"total_recd\",\r\n                label: \"REC\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting variant=\"highlight\" className=\"text-right block\">{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"total_rejd\",\r\n                label: \"REJ\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => (\r\n                    <Accounting\r\n                        className={cn(\"text-right block\", Number(v) > 0 ? \"text-app-status-error\" : \"text-app-fg-muted/40\")}\r\n                    >\r\n                        {v}\r\n                    </Accounting>\r\n                )\r\n            },\r\n            {\r\n                key: \"po_status\",\r\n                label: \"STATUS\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => (\r\n                    <Badge variant={\r\n                        v === \"Closed\" ? \"success\" :\r\n                            v === \"Pending\" ? \"warning\" :\r\n                                v === \"Delivered\" ? \"accent\" : \"secondary\"\r\n                    }>\r\n                        {v}\r\n                    </Badge>\r\n                )\r\n            }\r\n        ],\r\n        []\r\n    );\r\n\r\n    const renderSRVSubTable = (poGroup: any) => {\r\n        const srvColumns: Column<SRVListItem>[] = [\r\n            {\r\n                key: \"srv_number\",\r\n                label: \"SRV #\",\r\n                width: \"25%\",\r\n                render: (v) => (\r\n                    <div className=\"flex items-center gap-2 pl-[42px]\">\r\n                        <span className=\"text-[10px] text-app-fg-muted opacity-30\">↳</span>\r\n                        <Link href={`/srv/${v}`} className=\"flex items-center gap-2 group\">\r\n                            <Body className=\"text-app-accent group-hover:underline font-mono text-[11px]\">{v}</Body>\r\n                            <ChevronRight size={10} className=\"text-app-accent opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n                        </Link>\r\n                    </div>\r\n                )\r\n            },\r\n            {\r\n                key: \"srv_date\",\r\n                label: \"DATE\",\r\n                width: \"15%\",\r\n                render: (v) => <SmallText className=\"font-mono text-[10px] text-app-fg-muted/60\">{formatDate(v as string)}</SmallText>\r\n            },\r\n            {\r\n                key: \"total_order_qty\",\r\n                label: \"Order\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting className=\"text-[11px] text-app-fg-muted\">{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"total_received_qty\",\r\n                label: \"Received\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting className=\"text-[11px] text-app-accent\">{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"total_rejected_qty\",\r\n                label: \"Rejected\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting className={cn(\"text-[11px]\", Number(v) > 0 ? \"text-app-status-error\" : \"text-app-fg-muted/20\")}>{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"status_spacer\",\r\n                label: \"\",\r\n                width: \"15%\",\r\n                render: () => <div />\r\n            }\r\n        ];\r\n\r\n        return (\r\n            <div className=\"bg-app-border/10 py-1 border-y border-app-border/10\">\r\n                <DataTable\r\n                    columns={srvColumns}\r\n                    data={poGroup.srvs}\r\n                    keyField=\"srv_number\"\r\n                    density=\"compact\"\r\n                    hideHeader\r\n                />\r\n            </div>\r\n        );\r\n    };\r\n\r\n\r\n    const handleUploadClick = useCallback(() => {\r\n        fileInputRef.current?.click();\r\n    }, []);\r\n\r\n    const handleSearch = useCallback((val: string) => {\r\n        setSearchQuery(val);\r\n        setPage(1);\r\n    }, []);\r\n\r\n    const toolbar = (\r\n        <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\r\n            <SearchBar\r\n                value={searchQuery}\r\n                onChange={handleSearch}\r\n                placeholder=\"Find PO or Voucher...\"\r\n                className=\"w-80\"\r\n            />\r\n            <Flex align=\"center\" gap={3}>\r\n                <input\r\n                    ref={fileInputRef}\r\n                    type=\"file\"\r\n                    multiple\r\n                    accept=\".pdf,.html\"\r\n                    onChange={handleFileSelect}\r\n                    className=\"hidden\"\r\n                />\r\n                <Button variant=\"default\" onClick={handleUploadClick} className=\"shadow-lg shadow-sys-brand-primary/20\">\r\n                    <Upload size={16} className=\"mr-2\" />\r\n                    Upload SRV\r\n                </Button>\r\n            </Flex>\r\n        </Flex>\r\n    );\r\n\r\n    const summaryCards = [\r\n        {\r\n            title: \"Active Vouchers\",\r\n            value: stats?.total_srvs || 0,\r\n            variant: \"primary\" as const\r\n        },\r\n        {\r\n            title: \"Receipt Volume\",\r\n            value: `${(stats?.total_received_qty || 0).toLocaleString()} MT`,\r\n            variant: \"success\" as const,\r\n            trend: { value: \"Fully Received\", direction: \"neutral\" as const }\r\n        },\r\n        {\r\n            title: \"Rejection Rate\",\r\n            value: `${stats?.rejection_rate || 0}%`,\r\n            variant: Number(stats?.rejection_rate || 0) > 0 ? (\"error\" as const) : (\"default\" as const)\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <ListPageTemplate\r\n            title=\"MATERIAL RECEIPTS\"\r\n            subtitle=\"Order-centric audit trail for Stores Receipt Vouchers (SRV)\"\r\n            columns={poColumns}\r\n            data={filteredData}\r\n            loading={loading}\r\n            keyField=\"po_number\"\r\n            toolbar={toolbar}\r\n            summaryCards={summaryCards}\r\n            page={page}\r\n            pageSize={pageSize}\r\n            totalItems={filteredData.length}\r\n            onPageChange={(newPage) => setPage(newPage)}\r\n            emptyMessage=\"No receipts found\"\r\n            density=\"compact\"\r\n            renderSubRow={renderSRVSubTable}\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\srv\\organisms\\SRVDetailCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":71},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Badge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":64},{"ruleId":"no-restricted-imports","severity":2,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":7,"endColumn":83},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[498,501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[498,501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[517,520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[517,520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { SummaryCards } from \"@/components/design-system/organisms/SummaryCards\";\r\nimport { Flex, Stack } from \"@/components/design-system/atoms/Layout\";\r\nimport { Badge } from \"@/components/design-system/atoms/Badge\";\r\nimport { H3, Body, SmallText } from \"@/components/design-system/atoms/Typography\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Package, Calendar, User } from \"lucide-react\";\r\n\r\ninterface SRVDetailCardProps {\r\n    header: any;\r\n    summary: any;\r\n}\r\n\r\nexport const SRVDetailCard = ({ header, summary }: SRVDetailCardProps) => {\r\n    const router = useRouter();\r\n\r\n    return (\r\n        <Stack gap={6}>\r\n            <SummaryCards cards={summary} />\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <div className=\"bg-app-surface border border-app-border rounded-xl shadow-sm p-6 border-l-4 border-l-app-accent\">\r\n                    <Stack gap={3}>\r\n                        <Flex align=\"center\" gap={2}>\r\n                            <Package size={16} className=\"text-app-accent\" />\r\n                            <H3 className=\"m-0 text-app-accent font-semibold\">Source PO</H3>\r\n                        </Flex>\r\n                        <Flex direction=\"col\" gap={1}>\r\n                            <Badge\r\n                                variant=\"accent\"\r\n                                className=\"w-fit cursor-pointer hover:scale-105 active:scale-95 transition-transform\"\r\n                                onClick={() => router.push(`/po/${header.po_number}`)}\r\n                            >\r\n                                PO #{header.po_number}\r\n                            </Badge>\r\n                            <SmallText className=\"text-app-fg-muted\">\r\n                                Source identifying document for this SRV\r\n                            </SmallText>\r\n                        </Flex>\r\n                    </Stack>\r\n                </div>\r\n            </div>\r\n        </Stack>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\srv\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\e2e\\dashboard.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\e2e\\dc-workflow.spec.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":44,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":44,"endColumn":24,"suggestions":[{"fix":{"range":[2020,2088],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\r\n\r\ntest.describe('Delivery Challan Workflow', () => {\r\n    test.beforeEach(async ({ page }) => {\r\n        await page.goto('/dc');\r\n        await page.waitForLoadState('networkidle');\r\n    });\r\n\r\n    test('should load the DC page and handle empty list or table', async ({ page }) => {\r\n        await expect(page.getByRole('heading', { name: /DELIVERY CHALLANS/i }).first()).toBeVisible();\r\n\r\n        // Check if either the table is present OR the empty message is shown\r\n        const dcTable = page.locator('table');\r\n        const emptyMessage = page.locator('text=No delivery challans found');\r\n\r\n        // Use a custom locator to check for one or the other\r\n        await expect(dcTable.or(emptyMessage)).toBeVisible();\r\n    });\r\n\r\n    test('should navigate to Create DC page from the list', async ({ page }) => {\r\n        // Look for the button more aggressively\r\n        const createBtn = page.getByRole('button', { name: /New DC/i });\r\n        await expect(createBtn).toBeVisible();\r\n        await createBtn.click();\r\n\r\n        // Wait for URL change\r\n        await expect(page).toHaveURL(/\\/dc\\/create$/, { timeout: 10000 });\r\n        await expect(page.getByRole('heading', { name: /Create Delivery Challan/i }).first()).toBeVisible();\r\n    });\r\n\r\n    test('should view a specific DC detail (if exists)', async ({ page }) => {\r\n        // This test will only run successfully if there is data\r\n        // If not, we skip it or just verify the empty state\r\n        const firstDCLink = page.locator('table tbody tr td a').first();\r\n        const count = await firstDCLink.count();\r\n\r\n        if (count > 0) {\r\n            const dcNumber = (await firstDCLink.textContent())?.trim();\r\n            await firstDCLink.click();\r\n            await expect(page).toHaveURL(new RegExp(`/dc/${encodeURIComponent(dcNumber!)}`));\r\n\r\n            await expect(page.getByRole('heading', { name: new RegExp(`DC #?${dcNumber}`, 'i') })).toBeVisible();\r\n        } else {\r\n            console.log('Skipping DC detail test: No DCs found in the system.');\r\n        }\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\e2e\\invoice-workflow.spec.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":46,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":46,"endColumn":24,"suggestions":[{"fix":{"range":[1992,2056],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\r\n\r\ntest.describe('Invoice Workflow', () => {\r\n    test.beforeEach(async ({ page }) => {\r\n        await page.goto('/invoice');\r\n        await page.waitForLoadState('networkidle');\r\n    });\r\n\r\n    test('should load the Invoice page and handle empty list or table', async ({ page }) => {\r\n        await expect(page.getByRole('heading', { name: /INVOICE/i }).first()).toBeVisible();\r\n\r\n        // Check if either table is present OR the empty message is shown\r\n        const invoiceTable = page.locator('table');\r\n        const emptyMessage = page.locator('text=No invoices found');\r\n\r\n        await expect(invoiceTable.or(emptyMessage)).toBeVisible();\r\n    });\r\n\r\n    test('should navigate to Create Invoice page', async ({ page }) => {\r\n        const createBtn = page.getByRole('button', { name: /New Invoice/i });\r\n        await expect(createBtn).toBeVisible();\r\n        await createBtn.click();\r\n\r\n        // Updated standard regex to handle query params if any\r\n        await expect(page).toHaveURL(/.*\\/invoice\\/create$/, { timeout: 10000 });\r\n        await expect(page.getByRole('heading', { name: /Create GST Invoice/i }).first()).toBeVisible();\r\n    });\r\n\r\n    test('should view a specific Invoice detail and verify print options (if exists)', async ({ page }) => {\r\n        const firstInvoiceLink = page.locator('table tbody tr td a').first();\r\n        const count = await firstInvoiceLink.count();\r\n\r\n        if (count > 0) {\r\n            const invNumber = (await firstInvoiceLink.textContent())?.trim();\r\n            await firstInvoiceLink.click();\r\n\r\n            // Check URL and heading\r\n            await expect(page).toHaveURL(\r\n                new RegExp(`/invoice/${encodeURIComponent(invNumber || '')}`)\r\n            );\r\n\r\n            // Verify presence of Print button\r\n            const printBtn = page.getByRole('button', { name: /Print/i });\r\n            await expect(printBtn).toBeVisible();\r\n        } else {\r\n            console.log('Skipping Invoice detail test: No Invoices found.');\r\n        }\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\e2e\\po-workflow.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\hooks\\useDebounce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\hooks\\useFetch.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1735,1738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1735,1738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6816,6819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6816,6819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useRef } from \"react\";\r\n\r\n/**\r\n * useFetch - Fetch hook with exponential backoff retry\r\n *\r\n * Automatically retries failed requests with exponential backoff:\r\n * - Retry 1: Wait 1 second\r\n * - Retry 2: Wait 2 seconds\r\n * - Retry 3: Wait 4 seconds\r\n *\r\n * Supports:\r\n * - Unified SuccessResponse format { status: \"success\", data: T }\r\n * - Legacy direct response format (fallback)\r\n * - Automatic cancellation on unmount\r\n * - TypeScript generics for type-safe data\r\n *\r\n * @example\r\n * ```tsx\r\n * const { data, loading, error, refetch } = useFetch<POListItem[]>('/api/po');\r\n *\r\n * if (loading) return <Skeleton />;\r\n * if (error) return <ErrorMessage error={error} />;\r\n * return <DataTable data={data} />;\r\n * ```\r\n */\r\nexport interface UseFetchOptions extends RequestInit {\r\n    /**\r\n     * Number of retry attempts (default: 3)\r\n     */\r\n    retries?: number;\r\n    /**\r\n     * Initial delay in ms before first retry (default: 1000)\r\n     * Subsequent retries use exponential backoff: delay * 2^attempt\r\n     */\r\n    retryDelay?: number;\r\n    /**\r\n     * Skip automatic execution on mount (default: false)\r\n     * Use when you want to trigger fetch manually via refetch()\r\n     */\r\n    manual?: boolean;\r\n}\r\n\r\nexport interface UseFetchResult<T> {\r\n    /**\r\n     * Response data (null until loaded)\r\n     */\r\n    data: T | null;\r\n    /**\r\n     * Loading state\r\n     */\r\n    loading: boolean;\r\n    /**\r\n     * Error if request failed after all retries\r\n     */\r\n    error: Error | null;\r\n    /**\r\n     * Manually trigger a refetch\r\n     */\r\n    refetch: () => Promise<void>;\r\n    /**\r\n     * Cancel any in-flight request\r\n     */\r\n    cancel: () => void;\r\n}\r\n\r\nexport function useFetch<T = any>(\r\n    url: string,\r\n    options: UseFetchOptions = {}\r\n): UseFetchResult<T> {\r\n    const {\r\n        retries = 3,\r\n        retryDelay = 1000,\r\n        manual = false,\r\n        ...fetchOptions\r\n    } = options;\r\n\r\n    const [data, setData] = useState<T | null>(null);\r\n    const [loading, setLoading] = useState(!manual);\r\n    const [error, setError] = useState<Error | null>(null);\r\n\r\n    // Track if component is mounted\r\n    const isMountedRef = useRef(true);\r\n    const abortControllerRef = useRef<AbortController | null>(null);\r\n\r\n    /**\r\n     * Fetch with retry logic\r\n     */\r\n    const fetchWithRetry = useCallback(\r\n        async (attempts = retries): Promise<void> => {\r\n            // Create new AbortController for this request\r\n            const abortController = new AbortController();\r\n            abortControllerRef.current = abortController;\r\n\r\n            for (let attempt = 0; attempt < attempts; attempt++) {\r\n                try {\r\n                    if (attempt === 0) {\r\n                        setLoading(true);\r\n                        setError(null);\r\n                    }\r\n\r\n                    const response = await fetch(url, {\r\n                        ...fetchOptions,\r\n                        signal: abortController.signal,\r\n                    });\r\n\r\n                    // Check if request was cancelled\r\n                    if (abortController.signal.aborted) {\r\n                        return;\r\n                    }\r\n\r\n                    // Handle HTTP errors\r\n                    if (!response.ok) {\r\n                        throw new Error(\r\n                            `HTTP ${response.status}: ${response.statusText}`\r\n                        );\r\n                    }\r\n\r\n                    const json = await response.json();\r\n\r\n                    // Handle unified SuccessResponse format\r\n                    // { status: \"success\", data: T, pagination?: {...} }\r\n                    const extractedData = json.data !== undefined ? json.data : json;\r\n\r\n                    // Only update state if component is still mounted\r\n                    if (isMountedRef.current) {\r\n                        setData(extractedData);\r\n                        setLoading(false);\r\n                        setError(null);\r\n                    }\r\n                    return; // Success - exit retry loop\r\n                } catch (err) {\r\n                    // Check if request was cancelled\r\n                    if (err instanceof Error && err.name === \"AbortError\") {\r\n                        return;\r\n                    }\r\n\r\n                    const error = err instanceof Error ? err : new Error(String(err));\r\n\r\n                    // Last attempt failed\r\n                    if (attempt === attempts - 1) {\r\n                        if (isMountedRef.current) {\r\n                            setError(error);\r\n                            setLoading(false);\r\n                        }\r\n                        console.error(`[useFetch] Failed after ${attempts} attempts:`, error);\r\n                        return;\r\n                    }\r\n\r\n                    // Calculate exponential backoff delay\r\n                    const delay = retryDelay * Math.pow(2, attempt);\r\n                    console.warn(\r\n                        `[useFetch] Attempt ${attempt + 1}/${attempts} failed. Retrying in ${delay}ms...`,\r\n                        error.message\r\n                    );\r\n\r\n                    // Wait before retrying\r\n                    await new Promise((resolve) => setTimeout(resolve, delay));\r\n                }\r\n            }\r\n        },\r\n        [url, retries, retryDelay, fetchOptions]\r\n    );\r\n\r\n    /**\r\n     * Cancel any in-flight request\r\n     */\r\n    const cancel = useCallback(() => {\r\n        if (abortControllerRef.current) {\r\n            abortControllerRef.current.abort();\r\n            abortControllerRef.current = null;\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * Manual refetch function\r\n     */\r\n    const refetch = useCallback(async () => {\r\n        cancel(); // Cancel any existing request\r\n        await fetchWithRetry();\r\n    }, [cancel, fetchWithRetry]);\r\n\r\n    // Auto-fetch on mount (unless manual mode)\r\n    useEffect(() => {\r\n        if (!manual) {\r\n            fetchWithRetry();\r\n        }\r\n\r\n        // Cleanup: mark as unmounted and cancel request\r\n        // NOTE: We return the cleanup function but it only runs on actual unmount\r\n        return () => {\r\n            isMountedRef.current = false;\r\n            // Don't cancel immediately - let in-flight requests complete\r\n            // cancel();\r\n        };\r\n    }, [manual, fetchWithRetry]);\r\n\r\n    return {\r\n        data,\r\n        loading,\r\n        error,\r\n        refetch,\r\n        cancel,\r\n    };\r\n}\r\n\r\n/**\r\n * Specialized hook for paginated endpoints\r\n * Handles pagination metadata from SuccessResponse\r\n */\r\nexport interface PaginatedResponse<T> {\r\n    data: T[];\r\n    pagination: {\r\n        total_items: number;\r\n        page: number;\r\n        total_pages: number;\r\n        limit: number;\r\n    };\r\n}\r\n\r\nexport function useFetchPaginated<T = any>(\r\n    baseUrl: string,\r\n    page: number = 1,\r\n    limit: number = 10,\r\n    options: UseFetchOptions = {}\r\n) {\r\n    const url = `${baseUrl}?skip=${(page - 1) * limit}&limit=${limit}`;\r\n    const result = useFetch<PaginatedResponse<T>>(url, options);\r\n\r\n    return {\r\n        ...result,\r\n        items: result.data?.data || [],\r\n        pagination: result.data?.pagination || null,\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\adapters.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'DCHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'POHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InvoiceItem' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'InvoiceHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":18},{"ruleId":null,"message":"Unused eslint-disable directive (no problems were reported from '@typescript-eslint/no-explicit-any').","line":106,"column":9,"severity":1,"nodeType":null,"fix":{"range":[4730,4792],"text":" "}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4855,4858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4855,4858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[574,577],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[574,577],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4002,4005],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4002,4005],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"/**\r\n * Data Adapters for API ↔ UI Transformation\r\n * Ensures type safety between backend (snake_case) and frontend (camelCase)\r\n */\r\n\r\nimport type {\r\n    DCItemRow,\r\n    DCHeader,\r\n    POItem,\r\n    POHeader,\r\n    InvoiceItem,\r\n    InvoiceHeader,\r\n} from \"@/types\";\r\n\r\n// ============================================================\r\n// DC ITEM ADAPTERS\r\n// ============================================================\r\n\r\n/**\r\n * Transform API DC item to UI format\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function dcItemFromAPI(apiItem: any): DCItemRow {\r\n    return {\r\n        id: apiItem.id || `${apiItem.po_item_id}-${apiItem.lot_no}`,\r\n        po_item_id: apiItem.po_item_id,\r\n        po_item_no: apiItem.po_item_no,\r\n        lot_no: apiItem.lot_no,\r\n        material_code: apiItem.material_code,\r\n        material_description: apiItem.material_description,\r\n        description: apiItem.material_description || apiItem.description,\r\n        unit: apiItem.unit,\r\n        po_rate: apiItem.po_rate,\r\n        lot_ordered_quantity:\r\n            apiItem.lot_ordered_qty || apiItem.lot_ordered_quantity,\r\n        ordered_quantity: apiItem.ordered_quantity || apiItem.lot_ordered_quantity,\r\n        already_dispatched: apiItem.already_dispatched,\r\n        remaining_quantity: apiItem.remaining_quantity || apiItem.remaining_qty,\r\n        dispatched_quantity: apiItem.dispatched_quantity || 0,\r\n        dispatch_quantity:\r\n            apiItem.dispatched_quantity || apiItem.dispatch_quantity || 0,\r\n        hsn_code: apiItem.hsn_code,\r\n        hsn_rate: apiItem.hsn_rate,\r\n        remaining_post_dc: apiItem.remaining_post_dc,\r\n    };\r\n}\r\n\r\n/**\r\n * Transform UI DC item to API format\r\n */\r\nexport function dcItemToAPI(uiItem: DCItemRow): Record<string, unknown> {\r\n    return {\r\n        po_item_id: uiItem.po_item_id,\r\n        lot_no: uiItem.lot_no ? parseInt(String(uiItem.lot_no)) : undefined,\r\n        dispatch_quantity: uiItem.dispatch_quantity || uiItem.dispatched_quantity,\r\n        // Backend expects 'dispatched_quantity' alias in models? No, create_dc uses dictionary.\r\n        // routers/dc.py create_dc uses \"items: List[dict]\".\r\n        // service_create_dc reads \"dispatch_qty\" usually?\r\n        // I need to check backend service creation logic.\r\n        // But assuming standardized naming, I should send \"dispatched_quantity\" or \"dispatch_qty\".\r\n        // The router aliases INPUT?\r\n        // `service_create_dc` validation: `item.get(\"dispatch_qty\")`.\r\n        // I did NOT update `service_create_dc` to use `dispatched_quantity` in logic yet?\r\n        // Phase 2 \"Move Business Logic\" might address that.\r\n        // But for now, backend expects `dispatch_qty` in `create_dc` payload likely.\r\n        // Wait, I updated `models.py` `DCListItem`.\r\n        // But `create_dc` accepts `items: List[dict]`.\r\n        // `routers/dc.py` documentation says `items format: [{ ... \"dispatch_qty\": 10 ... }]`\r\n        // So I must stick to `dispatch_qty` for POST payload unless I change backend acceptance.\r\n        // User said \"Standardize Quantity Field Naming (Backend)\".\r\n        // I should probably start sending `dispatched_quantity` and update backend to accept it.\r\n        // But safely, I can send BOTH. Or check backend logic.\r\n        // I'll check backend logic in next step. For now, sending `dispatch_qty` (legacy) is safer if backend not updated for INPUT.\r\n        // But `types/index.ts` `DCItemRow` has `dispatched_quantity`.\r\n        // `dcItemToAPI` returns `any`.\r\n        dispatch_qty: uiItem.dispatch_quantity || uiItem.dispatched_quantity,\r\n        hsn_code: uiItem.hsn_code,\r\n        hsn_rate: uiItem.hsn_rate,\r\n    };\r\n}\r\n\r\n// ============================================================\r\n// PO ITEM ADAPTERS\r\n// ============================================================\r\n\r\n/**\r\n * Transform API PO item to UI format\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function poItemFromAPI(apiItem: any): POItem {\r\n    return {\r\n        id: apiItem.id,\r\n        po_item_no: apiItem.po_item_no,\r\n        material_code: apiItem.material_code,\r\n        material_description: apiItem.material_description,\r\n        drg_no: apiItem.drg_no,\r\n        mtrl_cat: apiItem.mtrl_cat,\r\n        unit: apiItem.unit,\r\n        po_rate: apiItem.po_rate,\r\n        ordered_quantity: apiItem.ordered_quantity || apiItem.ord_qty,\r\n        received_quantity: apiItem.received_quantity || apiItem.rcd_qty,\r\n        item_value: apiItem.item_value,\r\n        hsn_code: apiItem.hsn_code,\r\n        delivered_quantity: apiItem.delivered_quantity || apiItem.delivered_qty,\r\n        pending_quantity: apiItem.pending_quantity || apiItem.pending_qty,\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        deliveries:\r\n            apiItem.deliveries?.map((d: any) => ({\r\n                id: d.id,\r\n                lot_no: d.lot_no,\r\n                delivered_quantity: d.delivered_quantity || d.dely_qty,\r\n                dely_date: d.dely_date,\r\n                entry_allow_date: d.entry_allow_date,\r\n                dest_code: d.dest_code,\r\n            })) || [],\r\n    };\r\n}\r\n\r\n// ============================================================\r\n// VALIDATION HELPERS\r\n// ============================================================\r\n\r\n/**\r\n * Validate DC item before sending to API\r\n * Throws error if validation fails\r\n */\r\nexport function validateDCItem(item: DCItemRow): void {\r\n    const dispatchQty = item.dispatch_quantity || item.dispatched_quantity;\r\n    if (!item.po_item_id) {\r\n        throw new Error(\"PO item ID is required\");\r\n    }\r\n    if (!dispatchQty || dispatchQty <= 0) {\r\n        throw new Error(\"Dispatch quantity must be greater than 0\");\r\n    }\r\n    if (\r\n        item.remaining_quantity !== undefined &&\r\n        dispatchQty > item.remaining_quantity\r\n    ) {\r\n        throw new Error(\r\n            `Cannot dispatch ${dispatchQty} units. Only ${item.remaining_quantity} remaining.`\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Batch validate DC items\r\n */\r\nexport function validateDCItems(items: DCItemRow[]): void {\r\n    if (items.length === 0) {\r\n        throw new Error(\"At least one item is required\");\r\n    }\r\n    items.forEach((item, index) => {\r\n        try {\r\n            validateDCItem(item);\r\n        } catch (error) {\r\n            throw new Error(\r\n                `Item ${index + 1}: ${error instanceof Error ? error.message : \"Invalid item\"\r\n                }`\r\n            );\r\n        }\r\n    });\r\n}\r\n\r\n// ============================================================\r\n// UTILITY FUNCTIONS\r\n// ============================================================\r\n\r\n/**\r\n * Safe number parsing with fallback\r\n */\r\nexport function parseNumber(value: unknown, fallback: number = 0): number {\r\n    const parsed = typeof value === \"string\" ? parseFloat(value) : Number(value);\r\n    return isNaN(parsed) ? fallback : parsed;\r\n}\r\n\r\n/**\r\n * Safe string conversion\r\n */\r\nexport function toString(value: unknown): string {\r\n    return value === null || value === undefined ? \"\" : String(value);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1064,1067],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1064,1067],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1381,1384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1381,1384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2096,2099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2096,2099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2184,2187],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2184,2187],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2249,2252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2249,2252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2264,2267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2264,2267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2544,2547],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2544,2547],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3662,3665],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3662,3665],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":193,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4464,4467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4464,4467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4611,4614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4611,4614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4786,4789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4786,4789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":219,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":219,"endColumn":20,"suggestions":[{"fix":{"range":[5233,5274],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":226,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":226,"endColumn":20,"suggestions":[{"fix":{"range":[5480,5531],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":245,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6057,6060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6057,6060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":253,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":253,"endColumn":20,"suggestions":[{"fix":{"range":[6252,6295],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":308,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":308,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7937,7940],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7937,7940],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10931,10934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10931,10934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":388,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":388,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11003,11006],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11003,11006],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":390,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":390,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11090,11093],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11090,11093],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":395,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":395,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11325,11328],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11325,11328],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":397,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":397,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11441,11444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11441,11444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":399,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":399,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11559,11562],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11559,11562],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":400,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":400,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11638,11641],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11638,11641],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":400,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":400,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11650,11653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11650,11653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":405,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":405,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11804,11807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11804,11807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":413,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":413,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12031,12034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12031,12034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":422,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":422,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12297,12300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12297,12300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":433,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12628,12631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12628,12631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":433,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12640,12643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12640,12643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":438,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":438,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12798,12801],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12798,12801],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":438,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":438,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12810,12813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12810,12813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":443,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":443,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12981,12984],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12981,12984],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":445,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":445,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13069,13072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13069,13072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":447,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":447,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13179,13182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13179,13182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":449,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":449,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13265,13268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13265,13268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":454,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":454,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13499,13502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13499,13502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":457,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":457,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13649,13652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13649,13652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":476,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":476,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14381,14384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14381,14384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":483,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":483,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14561,14564],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14561,14564],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":515,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":515,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15812,15815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15812,15815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":517,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":517,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15970,15973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15970,15973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":536,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":536,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16874,16877],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16874,16877],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":539,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":539,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16979,16982],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16979,16982],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":43,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// CENTRALIZED API FETCH\r\n// ============================================================\r\n\r\nexport const API_BASE_URL =\r\n  typeof window !== \"undefined\"\r\n    ? \"\"\r\n    : process.env.NEXT_PUBLIC_API_URL || \"http://127.0.0.1:8000\";\r\n\r\nexport interface Buyer {\r\n  id: number;\r\n  name: string;\r\n  gstin: string;\r\n  billing_address: string;\r\n  shipping_address?: string;\r\n  designation?: string;\r\n  place_of_supply: string;\r\n  state?: string;\r\n  state_code?: string;\r\n  is_default: boolean;\r\n  is_active: boolean;\r\n  created_at: string;\r\n}\r\n\r\nexport interface POHeader {\r\n  po_number: string;\r\n  po_date: string;\r\n  supplier_name: string;\r\n  supplier_code: string;\r\n  supplier_email: string;\r\n  department_no: string;\r\n  po_value: number;\r\n  net_po_value: number;\r\n  tin_no: string;\r\n  ecc_no: string;\r\n  remarks: string;\r\n  project_name?: string;\r\n  status?: string;\r\n}\r\nexport interface POListItem {\r\n  po_number: number;\r\n  po_date: string;\r\n  vendor_name: string;\r\n  project_name: string;\r\n  items: any[];\r\n  total_amount?: number;\r\n  po_value?: number;\r\n  total_ordered_quantity?: number;\r\n  total_dispatched_quantity?: number;\r\n  total_received_quantity?: number;\r\n  total_rejected_quantity?: number;\r\n  total_pending_quantity?: number;\r\n  total_items_count?: number; // Added\r\n  status: string;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface POStats {\r\n  total_pos: number;\r\n  active_count: number; // Added for UI consumption\r\n  total_value: number;\r\n  pending_pos: number;\r\n  completed_pos: number;\r\n  open_orders_count: number;\r\n  pending_approval_count: number;\r\n  total_value_ytd: number;\r\n  total_value_change: number;\r\n  rejection_rate?: number; // Added\r\n}\r\n\r\nexport interface DCListItem {\r\n  dc_number: string;\r\n  dc_date: string;\r\n  po_number: number;\r\n  consignee_name: string;\r\n  total_value: number;\r\n  status: string;\r\n}\r\n\r\nexport interface DCStats {\r\n  total_challans: number;\r\n  pending_delivery: number;\r\n  completed_delivery: number;\r\n  total_value: number;\r\n}\r\n\r\nexport interface DCDetailResponse {\r\n  header: any; // Using any for flexibility during refactor, strictly typed in refactor\r\n  items: any[];\r\n}\r\n\r\nexport interface InvoiceDetailResponse {\r\n  header: any;\r\n  items: any[];\r\n}\r\n\r\nexport interface InvoiceListItem {\r\n  invoice_number: string;\r\n  invoice_date: string;\r\n  linked_dc_numbers: string; // Comma separated\r\n  customer_gstin: string;\r\n  total_invoice_value: number;\r\n  status?: string; // Optional if not always present\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface InvoiceStats {\r\n  total_invoiced: number;\r\n  total_invoiced_change: number;\r\n  gst_collected: number;\r\n  gst_collected_change: number;\r\n  pending_payments: number;\r\n  pending_payments_count: number;\r\n}\r\n\r\nexport interface Settings {\r\n  supplier_name: string;\r\n  supplier_description: string;\r\n  supplier_address: string;\r\n  supplier_gstin: string;\r\n  supplier_contact: string;\r\n  supplier_state: string;\r\n  supplier_state_code: string;\r\n}\r\n\r\nexport interface ReconciliationItem {\r\n  id: number;\r\n  po_item_no: number;\r\n  material_code: string;\r\n  material_description: string;\r\n  unit: string;\r\n  ord_qty: number;\r\n  dispatched_qty: number;\r\n  pending_qty: number;\r\n  status: string;\r\n}\r\n\r\nexport interface PONote {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface DashboardSummary {\r\n  total_sales_month: number;\r\n  sales_growth: number | string;\r\n  pending_pos: number;\r\n  new_pos_today: number;\r\n  active_challans: number;\r\n  total_po_value: number;\r\n  po_value_growth: number | string;\r\n  active_po_count: number;\r\n  revenue_momentum?: any[];\r\n  total_ordered?: number;\r\n  total_delivered?: number;\r\n  total_received?: number;\r\n}\r\n\r\n// Removed conflicting re-exports\r\n\r\nimport { SRVListItem, SRVStats } from \"@/types\";\r\nexport type { SRVListItem, SRVStats };\r\n\r\nexport interface ActivityItem {\r\n  type: \"PO\" | \"DC\" | \"Invoice\";\r\n  status: string;\r\n  number: string;\r\n  amount?: number;\r\n  date: string;\r\n}\r\n\r\nexport interface SearchResult {\r\n  id: string | number;\r\n  type: \"PO\" | \"DC\" | \"Invoice\" | \"SRV\";\r\n  number: string;\r\n  date: string;\r\n  party: string;\r\n  amount?: number;\r\n  type_label: string;\r\n  status?: string;\r\n}\r\n\r\ntype FetchOptions = RequestInit & {\r\n  retries?: number;\r\n  timeout?: number;\r\n};\r\n\r\nclass APIError extends Error {\r\n  constructor(\r\n    public status: number,\r\n    public message: string,\r\n    public data?: any,\r\n  ) {\r\n    super(message);\r\n    this.name = \"APIError\";\r\n  }\r\n}\r\n\r\n// --- SIMPLE CACHE SYSTEM ---\r\nconst GET_CACHE = new Map<string, { data: any; timestamp: number }>();\r\nconst CACHE_TTL = 5000; // 5 seconds cache for GET requests\r\n\r\n// --- DEDUPLICATION SYSTEM ---\r\nconst PENDING_REQUESTS = new Map<string, Promise<any>>();\r\n\r\nasync function apiFetch<T>(\r\n  endpoint: string,\r\n  options: FetchOptions = {},\r\n): Promise<T> {\r\n  const { retries = 0, timeout = 60000, ...fetchOptions } = options;\r\n  const url = `${API_BASE_URL}${endpoint}`;\r\n  const method = fetchOptions.method || \"GET\";\r\n\r\n  // Check Cache for GET requests\r\n  if (method === \"GET\") {\r\n    const cached = GET_CACHE.get(url);\r\n    if (cached && Date.now() - cached.timestamp < CACHE_TTL) {\r\n      console.debug(`[API] Cache Hit: ${url}`);\r\n      return cached.data as T;\r\n    }\r\n\r\n    // Deduplication: If a request for this URL is already in flight, reuse the promise\r\n    const pending = PENDING_REQUESTS.get(url);\r\n    if (pending) {\r\n      console.debug(`[API] Deduplication Reuse: ${url}`);\r\n      return pending as Promise<T>;\r\n    }\r\n  }\r\n\r\n  const fetchPromise = (async () => {\r\n    const headers: Record<string, string> = {\r\n      Accept: \"application/json\",\r\n      ...(fetchOptions.headers as Record<string, string>),\r\n    };\r\n\r\n    if (!(fetchOptions.body instanceof FormData)) {\r\n      headers[\"Content-Type\"] = \"application/json\";\r\n    }\r\n\r\n    // Add Auth Token if exists\r\n    if (typeof window !== \"undefined\") {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        (headers as any)[\"Authorization\"] = `Bearer ${token}`;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const controller = new AbortController();\r\n      const id = setTimeout(() => controller.abort(), timeout);\r\n\r\n      console.debug(`[API] Fetching ${url} ...`);\r\n      const response = await fetch(url, {\r\n        ...fetchOptions,\r\n        headers,\r\n        signal: controller.signal,\r\n      });\r\n      clearTimeout(id);\r\n\r\n      if (!response.ok) {\r\n        // Handle 401 Unauthorized globally\r\n        if (response.status === 401) {\r\n          if (\r\n            typeof window !== \"undefined\" &&\r\n            !window.location.pathname.startsWith(\"/auth\")\r\n          ) {\r\n            console.warn(\"[API] 401 Unauthorized - Redirecting to login\");\r\n            localStorage.removeItem(\"token\");\r\n            window.location.href = \"/auth/login\";\r\n          }\r\n          throw new APIError(401, \"Unauthorized\");\r\n        }\r\n\r\n        // Parse error response\r\n        let errorData;\r\n        try {\r\n          errorData = await response.json();\r\n        } catch {\r\n          errorData = { detail: response.statusText };\r\n        }\r\n\r\n        const errorMessage =\r\n          errorData.detail ||\r\n          errorData.message ||\r\n          `Request failed with status ${response.status}`;\r\n        throw new APIError(response.status, errorMessage, errorData);\r\n      }\r\n\r\n      // Handle 204 No Content\r\n      if (response.status === 204) {\r\n        return {} as T;\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      // Populate Cache for GET requests\r\n      if (method === \"GET\") {\r\n        GET_CACHE.set(url, { data, timestamp: Date.now() });\r\n        // Cleanup old cache entries\r\n        if (GET_CACHE.size > 100) {\r\n          const oldestKey = GET_CACHE.keys().next().value;\r\n          if (oldestKey) GET_CACHE.delete(oldestKey);\r\n        }\r\n      }\r\n\r\n      return data;\r\n    } catch (error: any) {\r\n      if (error.name === \"AbortError\") {\r\n        console.error(`[API] Timeout for ${url}`);\r\n        throw new APIError(408, `Request timed out after ${timeout}ms`);\r\n      }\r\n\r\n      // Handle Network Errors (TypeError: Failed to fetch)\r\n      if (error instanceof TypeError && error.message === \"Failed to fetch\") {\r\n        console.error(`[API] Network Error: Could not connect to backend at ${url}. Is the server running?`);\r\n        if (typeof window !== \"undefined\") {\r\n          window.dispatchEvent(\r\n            new CustomEvent(\"api-error\", {\r\n              detail: {\r\n                title: \"Connection Failed\",\r\n                message: \"Could not connect to the server. Please check your internet connection or try again later.\",\r\n                type: \"critical\"\r\n              }\r\n            })\r\n          );\r\n        }\r\n        throw new APIError(0, \"Network Error: Backend Unreachable\");\r\n      }\r\n\r\n      if (retries > 0) {\r\n        console.warn(`[API] Retrying ${url} (${retries} attempts left)...`);\r\n        await new Promise((res) => setTimeout(res, 1000));\r\n        // Note: We don't recurse apiFetch here to avoid infinite deduplication loops if we were to just call apiFetch again.\r\n        // Instead we let the error propagate or handle retry logic differently if complex.\r\n        // For simplicity in this deductive model, we remove from pending map and re-throw to let upper layer retry,\r\n        // OR better: we can't easily retry inside the dedup promise without recursion complications.\r\n        // Let's keep it simple: Retries are valuable.\r\n        // We will simple RECURSE, but we need to be careful about PENDING_REQUESTS.\r\n        // Actually, if we recurse, the new call will find the PENDING entry (itself) and wait forever!\r\n        // FIX: Remove from pending before recursing.\r\n        PENDING_REQUESTS.delete(url);\r\n        return apiFetch<T>(endpoint, { ...options, retries: retries - 1 });\r\n      }\r\n\r\n      console.error(`[API] Error fetching ${url}:`, error);\r\n\r\n      // Dispatch global event for UI to verify\r\n      if (\r\n        typeof window !== \"undefined\" &&\r\n        options.method &&\r\n        options.method !== \"GET\"\r\n      ) {\r\n        window.dispatchEvent(\r\n          new CustomEvent(\"api-error\", {\r\n            detail: {\r\n              title: \"Operation Failed\",\r\n              message: error.message || \"Unknown error occurred\",\r\n              type: \"error\",\r\n            },\r\n          }),\r\n        );\r\n      }\r\n\r\n      throw error;\r\n    } finally {\r\n      // Clean up pending request\r\n      if (method === \"GET\") {\r\n        PENDING_REQUESTS.delete(url);\r\n      }\r\n    }\r\n  })();\r\n\r\n  if (method === \"GET\") {\r\n    PENDING_REQUESTS.set(url, fetchPromise);\r\n  }\r\n\r\n  return fetchPromise;\r\n}\r\n\r\n// ============================================================\r\n// STABLE API CLIENT\r\n// ============================================================\r\n\r\nexport const api = {\r\n  // DASHBOARD\r\n  getDashboardSummary: () => apiFetch<any>(\"/api/dashboard/summary\"),\r\n  getDashboardInsights: () => apiFetch<any[]>(\"/api/dashboard/insights\"),\r\n  getRecentActivity: (limit = 10) =>\r\n    apiFetch<any[]>(`/api/dashboard/activity?limit=${limit}`),\r\n\r\n  // PURCHASE ORDERS\r\n  listPOs: () => apiFetch<POListItem[]>(\"/api/po/\"),\r\n  getPOStats: () => apiFetch<POStats>(\"/api/po/stats\"),\r\n  getPO: (poNumber: string | number) => apiFetch<any>(`/api/po/${poNumber}`), // Alias for internal use\r\n  getPODetail: (poNumber: string | number) =>\r\n    apiFetch<any>(`/api/po/${poNumber}`), // Explicitly called by UI\r\n  checkPOHasDC: (poNumber: string | number) =>\r\n    apiFetch<any>(`/api/po/${poNumber}/dc`),\r\n  updatePO: (poNumber: string | number, data: any, items: any[]) =>\r\n    apiFetch(`/api/po/${poNumber}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ header: data, items }),\r\n    }),\r\n  createPO: (data: any) =>\r\n    apiFetch(\"/api/po/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  syncPO: (file: File) => {\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    return apiFetch<any>(\"/api/po/upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n    });\r\n  },\r\n  uploadPOBatch: (files: File[]) => {\r\n    const formData = new FormData();\r\n    files.forEach((file) => formData.append(\"files\", file));\r\n    return apiFetch<any>(\"/api/po/upload/batch\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n      timeout: 600000, // 10 minutes for large batch uploads\r\n    });\r\n  },\r\n\r\n  // DELIVERY CHALLANS\r\n  listDCs: () => apiFetch<DCListItem[]>(\"/api/dc/\"),\r\n  getDCStats: () => apiFetch<DCStats>(\"/api/dc/stats\"),\r\n  createDC: (data: any, items: any[]) =>\r\n    apiFetch(\"/api/dc/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ dc: data, items }),\r\n    }),\r\n  updateDC: (dcNumber: string, data: any, items: any[]) =>\r\n    apiFetch(`/api/dc/${dcNumber}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ dc: data, items }),\r\n    }),\r\n  getDC: (dcNumber: string) => apiFetch<any>(`/api/dc/${dcNumber}`),\r\n  getDCDetail: (dcNumber: string | null) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}`), // Alias for UI\r\n  checkDCHasInvoice: (dcNumber: string | null) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}/invoice`),\r\n  deleteDC: (dcNumber: string) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}`, { method: \"DELETE\" }),\r\n\r\n  // INVOICES\r\n  listInvoices: () => apiFetch<InvoiceListItem[]>(\"/api/invoice/\"),\r\n  getInvoiceStats: () => apiFetch<InvoiceStats>(\"/api/invoice/stats\"),\r\n  createInvoice: (data: any) =>\r\n    apiFetch(\"/api/invoice/\", { method: \"POST\", body: JSON.stringify(data) }),\r\n  getInvoiceDetail: (invoiceNumber: string) =>\r\n    apiFetch<any>(`/api/invoice/${encodeURIComponent(invoiceNumber)}`),\r\n\r\n  // COMMON\r\n  checkDuplicateNumber: (\r\n    type: \"DC\" | \"Invoice\",\r\n    number: string,\r\n    date: string,\r\n  ) =>\r\n    apiFetch<{ exists: boolean; financial_year: string; conflict_type?: string | null }>(\r\n      `/api/common/check-duplicate?type=${type}&number=${encodeURIComponent(number)}&date=${date}`,\r\n    ),\r\n\r\n  // SRVS\r\n  listSRVs: (poId?: string | number) =>\r\n    apiFetch<SRVListItem[]>(poId ? `/api/srv/po/${poId}/srvs` : \"/api/srv/\"),\r\n  getSRVStats: () => apiFetch<SRVStats>(\"/api/srv/stats\"),\r\n  uploadSRVBatch: (files: File[]) => {\r\n    const formData = new FormData();\r\n    files.forEach((file) => formData.append(\"files\", file));\r\n    return apiFetch<any>(\"/api/srv/upload/batch\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n      timeout: 600000,\r\n    });\r\n  },\r\n  getSRV: (srvNumber: string) => apiFetch<any>(`/api/srv/${encodeURIComponent(srvNumber)}`),\r\n  deleteSRV: (srvNumber: string) =>\r\n    apiFetch<void>(`/api/srv/${srvNumber}`, { method: \"DELETE\" }),\r\n\r\n  // SETTINGS\r\n  getSettings: () => apiFetch<Settings>(\"/api/settings/\"),\r\n  updateSetting: (key: string, value: string) =>\r\n    apiFetch(\"/api/settings/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ key, value }),\r\n    }),\r\n  updateSettingsBatch: (settings: { key: string; value: string }[]) =>\r\n    apiFetch(\"/api/settings/batch\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(settings),\r\n    }),\r\n\r\n  // PO NOTES\r\n  getPONotes: () => apiFetch<PONote[]>(\"/api/po-notes/\"),\r\n  getPONote: (id: string | number) => apiFetch<PONote>(`/api/po-notes/${id}`),\r\n  createPONote: (data: Partial<PONote>) =>\r\n    apiFetch<PONote>(\"/api/po-notes/\", { method: \"POST\", body: JSON.stringify(data) }),\r\n  updatePONote: (id: string | number, data: Partial<PONote>) =>\r\n    apiFetch<PONote>(`/api/po-notes/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  deletePONote: (id: string | number) =>\r\n    apiFetch<void>(`/api/po-notes/${id}`, { method: \"DELETE\" }),\r\n\r\n  // REPORTS (RECONCILIATION)\r\n  getReconciliation: (poNumber: string | number) =>\r\n    apiFetch<any[]>(`/api/reports/reconciliation?po=${poNumber}`), // Corrected to reports endpoint\r\n  getReconciliationLots: (poNumber: string | number) =>\r\n    apiFetch<any>(`/api/dc/po/${poNumber}/lots`),\r\n\r\n\r\n  // REPORTS\r\n  getReports: (\r\n    type: \"sales\" | \"reconciliation\" | \"dc_register\" | \"invoice_register\" | \"pending\",\r\n    params: string\r\n  ) => {\r\n    // Map internal types to API endpoints if they differ, or use common logic\r\n    // endpoints: /api/reports/sales, /api/reports/reconciliation, /api/reports/register/dc, etc.\r\n    let endpoint = \"\";\r\n    switch (type) {\r\n      case \"sales\": endpoint = \"/api/reports/sales\"; break;\r\n      case \"reconciliation\": endpoint = \"/api/reports/reconciliation\"; break;\r\n      case \"dc_register\": endpoint = \"/api/reports/register/dc\"; break; // Note: Frontend used /register/dc\r\n      case \"invoice_register\": endpoint = \"/api/reports/register/invoice\"; break;\r\n      case \"pending\": endpoint = \"/api/reports/pending\"; break;\r\n      default: throw new Error(`Unknown report type: ${type}`);\r\n    }\r\n    return apiFetch<any[]>(`${endpoint}?${params}`);\r\n  },\r\n  getReport: (type: string, dateParams: string) =>\r\n    apiFetch<any[]>(`/api/reports/${type}?${dateParams}`),\r\n  exportReport: (type: string, dateParams: string) => {\r\n    // Reports export usually calls the same endpoint with export=true\r\n    // But we need to handle the URL construction carefully\r\n    // Reusing the logic from getReports but with export flag\r\n    let endpoint = \"\";\r\n    switch (type) {\r\n      case \"sales\": endpoint = \"/api/reports/sales\"; break;\r\n      case \"reconciliation\": endpoint = \"/api/reports/reconciliation\"; break;\r\n      case \"dc_register\": endpoint = \"/api/reports/register/dc\"; break;\r\n      case \"invoice_register\": endpoint = \"/api/reports/register/invoice\"; break;\r\n      case \"pending\": endpoint = \"/api/reports/pending\"; break;\r\n      default: endpoint = `/api/reports/${type}`; // Fallback\r\n    }\r\n    const baseUrl = API_BASE_URL;\r\n    window.open(`${baseUrl}${endpoint}?export=true&${dateParams}`, \"_blank\");\r\n  },\r\n\r\n  // SEARCH\r\n  searchGlobal: (q: string) =>\r\n    apiFetch<{ results: SearchResult[] }>(\r\n      `/api/search/?q=${encodeURIComponent(q)}`,\r\n    ).then((res) => res.results),\r\n\r\n  // --- Buyers ---\r\n  getBuyers: () => apiFetch<Buyer[]>(\"/api/buyers\"),\r\n  createBuyer: (data: Partial<Buyer>) =>\r\n    apiFetch<Buyer>(\"/api/buyers\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  updateBuyer: (id: number, data: Partial<Buyer>) =>\r\n    apiFetch<Buyer>(`/api/buyers/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  setBuyerDefault: (id: number) =>\r\n    apiFetch<Buyer>(`/api/buyers/${id}/default`, { method: \"PUT\" }),\r\n  deleteBuyer: (id: number) =>\r\n    apiFetch<{ success: boolean }>(`/api/buyers/${id}`, { method: \"DELETE\" }),\r\n\r\n\r\n\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\apiMonitor.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":43,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":43,"endColumn":24,"suggestions":[{"fix":{"range":[1147,1424],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * API Client with Monitoring\r\n * Tracks all API requests for debugging and performance monitoring\r\n */\r\ninterface RequestLog {\r\n    method: string;\r\n    url: string;\r\n    timestamp: string;\r\n    duration?: number;\r\n    status?: number;\r\n    error?: string;\r\n    requestId?: string;\r\n}\r\n\r\nclass APIMonitor {\r\n    private logs: RequestLog[] = [];\r\n    private maxLogs = 100;\r\n    private errorCount = 0;\r\n    private successCount = 0;\r\n\r\n    logRequest(log: RequestLog) {\r\n        this.logs.push(log);\r\n\r\n        // Track success/error counts\r\n        if (log.error || (log.status && log.status >= 400)) {\r\n            this.errorCount++;\r\n        } else if (log.status && log.status < 400) {\r\n            this.successCount++;\r\n        }\r\n\r\n        // Keep only recent logs\r\n        if (this.logs.length > this.maxLogs) {\r\n            this.logs.shift();\r\n        }\r\n\r\n        // Log to console in development\r\n        if (process.env.NODE_ENV === \"development\") {\r\n            const emoji = log.error\r\n                ? \"❌\"\r\n                : log.status && log.status >= 400\r\n                    ? \"⚠️\"\r\n                    : \"✅\";\r\n            console.log(\r\n                `[API ${emoji}]`,\r\n                log.method,\r\n                log.url,\r\n                log.duration ? `${log.duration.toFixed(0)}ms` : \"\",\r\n                log.status ? `HTTP ${log.status}` : \"\",\r\n                log.error || \"\"\r\n            );\r\n        }\r\n    }\r\n\r\n    getLogs(): RequestLog[] {\r\n        return [...this.logs];\r\n    }\r\n\r\n    getRecentErrors(count: number = 10): RequestLog[] {\r\n        return this.logs\r\n            .filter((log) => log.error || (log.status && log.status >= 400))\r\n            .slice(-count);\r\n    }\r\n\r\n    getErrorRate(): number {\r\n        const total = this.errorCount + this.successCount;\r\n        if (total === 0) return 0;\r\n        return this.errorCount / total;\r\n    }\r\n\r\n    getStats() {\r\n        const recentLogs = this.logs.slice(-20);\r\n        const avgDuration =\r\n            recentLogs.reduce((sum, log) => sum + (log.duration || 0), 0) /\r\n            recentLogs.length;\r\n\r\n        return {\r\n            totalRequests: this.logs.length,\r\n            successCount: this.successCount,\r\n            errorCount: this.errorCount,\r\n            errorRate: this.getErrorRate(),\r\n            avgDuration: Math.round(avgDuration),\r\n            recentErrors: this.getRecentErrors(5),\r\n        };\r\n    }\r\n\r\n    clear() {\r\n        this.logs = [];\r\n        this.errorCount = 0;\r\n        this.successCount = 0;\r\n    }\r\n}\r\n\r\nexport const apiMonitor = new APIMonitor();\r\n\r\n/**\r\n * Monitored fetch wrapper\r\n * Automatically logs all requests with timing and status\r\n */\r\nexport async function monitoredFetch(\r\n    url: string,\r\n    options?: RequestInit\r\n): Promise<Response> {\r\n    const startTime = performance.now();\r\n    const log: RequestLog = {\r\n        method: options?.method || \"GET\",\r\n        url,\r\n        timestamp: new Date().toISOString(),\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(url, options);\r\n        log.duration = performance.now() - startTime;\r\n        log.status = response.status;\r\n        log.requestId = response.headers.get(\"X-Request-ID\") || undefined;\r\n\r\n        if (!response.ok) {\r\n            log.error = `HTTP ${response.status}: ${response.statusText}`;\r\n        }\r\n\r\n        apiMonitor.logRequest(log);\r\n        return response;\r\n    } catch (error) {\r\n        log.duration = performance.now() - startTime;\r\n        log.error = error instanceof Error ? error.message : \"Unknown error\";\r\n        apiMonitor.logRequest(log);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Get API monitoring stats\r\n * Useful for debugging and performance analysis\r\n */\r\nexport function getAPIStats() {\r\n    return apiMonitor.getStats();\r\n}\r\n\r\n/**\r\n * Clear API monitoring logs\r\n */\r\nexport function clearAPILogs() {\r\n    apiMonitor.clear();\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\design-registry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\design-tokens.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\hooks\\useDebounce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\tts.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[920,923],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[920,923],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Text-to-Speech Utility using Web Speech API\r\n * Optimized for natural voice delivery and queue management\r\n */\r\nclass TTSManager {\r\n    private synthesis: SpeechSynthesis;\r\n    private voice: SpeechSynthesisVoice | null = null;\r\n    private queue: { text: string; onEnd?: () => void }[] = [];\r\n    private isSpeaking = false;\r\n    private enabled = true;\r\n\r\n    constructor() {\r\n        if (typeof window !== \"undefined\") {\r\n            this.synthesis = window.speechSynthesis;\r\n            // Load voices\r\n            this.loadVoice();\r\n            if (this.synthesis.onvoiceschanged !== undefined) {\r\n                this.synthesis.onvoiceschanged = () => this.loadVoice();\r\n            }\r\n        } else {\r\n            // Server-side fallback (noop)\r\n            this.synthesis = {\r\n                speak: () => { },\r\n                cancel: () => { },\r\n                getVoices: () => [],\r\n            } as any;\r\n        }\r\n    }\r\n\r\n    private loadVoice() {\r\n        const voices = this.synthesis.getVoices();\r\n        // Prefer Google US English or Microsoft Zira/David\r\n        this.voice =\r\n            voices.find((v) => v.name.includes(\"Google US English\")) ||\r\n            voices.find((v) => v.name.includes(\"Zira\")) ||\r\n            voices.find((v) => v.lang === \"en-US\") ||\r\n            voices[0] ||\r\n            null;\r\n    }\r\n\r\n    public speak(\r\n        text: string,\r\n        priority: \"normal\" | \"high\" = \"normal\",\r\n        onEnd?: () => void\r\n    ) {\r\n        if (!this.enabled || !text) {\r\n            if (onEnd) onEnd();\r\n            return;\r\n        }\r\n\r\n        if (priority === \"high\") {\r\n            this.stop();\r\n            this.queue = [{ text, onEnd }];\r\n            this.processQueue();\r\n        } else {\r\n            this.queue.push({ text, onEnd });\r\n            if (!this.isSpeaking) {\r\n                this.processQueue();\r\n            }\r\n        }\r\n    }\r\n\r\n    private processQueue() {\r\n        if (this.queue.length === 0) {\r\n            this.isSpeaking = false;\r\n            return;\r\n        }\r\n\r\n        this.isSpeaking = true;\r\n        const item = this.queue.shift()!;\r\n        const utterance = new SpeechSynthesisUtterance(item.text);\r\n        if (this.voice) utterance.voice = this.voice;\r\n\r\n        // Optimize rate/pitch\r\n        utterance.rate = 1.1; // Slightly faster\r\n        utterance.pitch = 1.0;\r\n\r\n        utterance.onend = () => {\r\n            if (item.onEnd) item.onEnd();\r\n            this.processQueue();\r\n        };\r\n\r\n        utterance.onerror = (e) => {\r\n            console.error(\"TTS Error:\", e);\r\n            this.isSpeaking = false;\r\n            if (item.onEnd) item.onEnd();\r\n        };\r\n\r\n        this.synthesis.speak(utterance);\r\n    }\r\n\r\n    public stop() {\r\n        this.synthesis.cancel();\r\n        this.queue = [];\r\n        this.isSpeaking = false;\r\n    }\r\n\r\n    public setEnabled(enabled: boolean) {\r\n        this.enabled = enabled;\r\n        if (!enabled) this.stop();\r\n    }\r\n}\r\n\r\nexport const tts = new TTSManager();\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\uiAdapters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\uiContext.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[197,200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[197,200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[235,238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[235,238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1214,1217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1214,1217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface UIContext {\r\n    current_page: string;\r\n    active_entity_id?: string;\r\n    active_entity_type?: \"po\" | \"dc\" | \"invoice\";\r\n    visible_ids: string[];\r\n    filters?: Record<string, any>;\r\n    form_data?: Record<string, any>;\r\n}\r\n\r\nclass UIContextManager {\r\n    private context: UIContext = {\r\n        current_page: \"dashboard\",\r\n        visible_ids: [],\r\n        filters: {},\r\n    };\r\n\r\n    // Update the current page identifier\r\n    setPage(page: string) {\r\n        this.context.current_page = page;\r\n        // Reset specific context when changing pages unless explicit preservation needed\r\n        this.context.active_entity_id = undefined;\r\n        this.context.active_entity_type = undefined;\r\n    }\r\n\r\n    // Set the active entity being viewed/edited\r\n    setActiveEntity(type: \"po\" | \"dc\" | \"invoice\", id: string) {\r\n        this.context.active_entity_type = type;\r\n        this.context.active_entity_id = id;\r\n    }\r\n\r\n    // Update list of currently visible record IDs (for \"that\" reference)\r\n    setVisibleIds(ids: string[]) {\r\n        this.context.visible_ids = ids;\r\n    }\r\n\r\n    // Update current filters to help agent understand what user sees\r\n    setFilters(filters: Record<string, any>) {\r\n        this.context.filters = filters;\r\n    }\r\n\r\n    // Get a snapshot of the context to send with voice request\r\n    getContext(): UIContext {\r\n        return { ...this.context };\r\n    }\r\n}\r\n\r\n// Global singleton instance\r\nexport const uiContext = new UIContextManager();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\utils.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":13,"column":37,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":13,"endColumn":38,"suggestions":[{"messageId":"removeEscape","fix":{"range":[438,439],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[438,438],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":13,"column":39,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":13,"endColumn":40,"suggestions":[{"messageId":"removeEscape","fix":{"range":[440,441],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[440,440],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":13,"column":50,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":13,"endColumn":51,"suggestions":[{"messageId":"removeEscape","fix":{"range":[451,452],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[451,451],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":13,"column":52,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":13,"endColumn":53,"suggestions":[{"messageId":"removeEscape","fix":{"range":[453,454],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[453,453],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":14,"column":43,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":14,"endColumn":44,"suggestions":[{"messageId":"removeEscape","fix":{"range":[511,512],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[511,511],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":14,"column":45,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":14,"endColumn":46,"suggestions":[{"messageId":"removeEscape","fix":{"range":[513,514],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[513,513],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatDate(dateStr: string | null | undefined): string {\r\n    if (!dateStr || dateStr === \"-\") return \"-\";\r\n    try {\r\n        let date: Date;\r\n        // Try to parse dd/mm/yyyy or dd-mm-yyyy format first\r\n        if (dateStr.match(/^\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{4}$/)) {\r\n            const parts = dateStr.split(/[\\/\\-]/);\r\n            // Assuming dd/mm/yyyy format\r\n            date = new Date(\r\n                parseInt(parts[2]),\r\n                parseInt(parts[1]) - 1,\r\n                parseInt(parts[0])\r\n            );\r\n        } else {\r\n            // Try standard ISO format or other formats\r\n            date = new Date(dateStr);\r\n        }\r\n\r\n        if (isNaN(date.getTime())) return \"-\";\r\n\r\n        const day = date.getDate().toString().padStart(2, \"0\");\r\n        const months = [\r\n            \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n            \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\r\n        ];\r\n        const month = months[date.getMonth()];\r\n        const year = date.getFullYear();\r\n\r\n        return `${day}-${month}-${year}`;\r\n    } catch {\r\n        return \"-\";\r\n    }\r\n}\r\n\r\nexport function formatIndianCurrency(\r\n    amount: number | null | undefined\r\n): string {\r\n    if (amount === null || amount === undefined) return \"₹0\";\r\n    const isNeg = amount < 0;\r\n    const absAmount = Math.abs(amount);\r\n    let formatted = \"\";\r\n\r\n    if (absAmount >= 10000000) {\r\n        formatted = `${(absAmount / 10000000).toFixed(2)} Cr`;\r\n    } else if (absAmount >= 100000) {\r\n        formatted = `${(absAmount / 100000).toFixed(2)} L`;\r\n    } else {\r\n        formatted = absAmount.toLocaleString(\"en-IN\");\r\n    }\r\n\r\n    return `${isNeg ? \"- \" : \"\"}₹${formatted}`;\r\n}\r\n\r\nfunction numberToWords(num: number): string {\r\n    if (num === 0) return \"Zero\";\r\n    const ones = [\r\n        \"\", \"One\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\", \"Seven\", \"Eight\", \"Nine\",\r\n    ];\r\n    const tens = [\r\n        \"\", \"\", \"Twenty\", \"Thirty\", \"Forty\", \"Fifty\", \"Sixty\", \"Seventy\", \"Eighty\", \"Ninety\",\r\n    ];\r\n    const teens = [\r\n        \"Ten\", \"Eleven\", \"Twelve\", \"Thirteen\", \"Fourteen\", \"Fifteen\", \"Sixteen\", \"Seventeen\", \"Eighteen\", \"Nineteen\",\r\n    ];\r\n\r\n    function convertLessThanThousand(n: number): string {\r\n        if (n === 0) return \"\";\r\n        if (n < 10) return ones[n];\r\n        if (n < 20) return teens[n - 10];\r\n        if (n < 100) return tens[Math.floor(n / 10)] + (n % 10 !== 0 ? \" \" + ones[n % 10] : \"\");\r\n        return ones[Math.floor(n / 100)] + \" Hundred\" + (n % 100 !== 0 ? \" and \" + convertLessThanThousand(n % 100) : \"\");\r\n    }\r\n\r\n    const crore = Math.floor(num / 10000000);\r\n    const lakh = Math.floor((num % 10000000) / 100000);\r\n    const thousand = Math.floor((num % 100000) / 1000);\r\n    const remainder = num % 1000;\r\n\r\n    let result = \"\";\r\n    if (crore > 0) result += convertLessThanThousand(crore) + \" Crore \";\r\n    if (lakh > 0) result += convertLessThanThousand(lakh) + \" Lakh \";\r\n    if (thousand > 0) result += convertLessThanThousand(thousand) + \" Thousand \";\r\n    if (remainder > 0) result += convertLessThanThousand(remainder);\r\n\r\n    return result.trim();\r\n}\r\n\r\nexport function amountInWords(amount: number): string {\r\n    const rupees = Math.floor(amount);\r\n    const paise = Math.round((amount - rupees) * 100);\r\n    let words = \"Rupees \" + numberToWords(rupees);\r\n    if (paise > 0) words += \" and Paise \" + numberToWords(paise);\r\n    words += \" Only\";\r\n    return words;\r\n}\r\n\r\nexport function getFinancialYear(dateStr?: string): string {\r\n    const date = dateStr ? new Date(dateStr) : new Date();\r\n    if (isNaN(date.getTime())) return getFinancialYear();\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth() + 1; // 1-12\r\n    if (month >= 4) {\r\n        return `${year}-${(year + 1).toString().slice(-2)}`;\r\n    } else {\r\n        return `${year - 1}-${year.toString().slice(-2)}`;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\next-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\scripts\\validate-tokens.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'TOKENS_PATH' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":63,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":63,"endColumn":16,"suggestions":[{"fix":{"range":[2141,2196],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":64,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":64,"endColumn":16,"suggestions":[{"fix":{"range":[2202,2282],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fs from \"fs\";\r\nimport path from \"path\";\r\nimport { z } from \"zod\";\r\nimport { createHash } from \"crypto\";\r\n\r\n// Embedded Schema to ensure robustness in standalone script execution\r\nconst designTokensSchema = z.object({\r\n    theme: z.enum([\"dark\", \"light\"]),\r\n    brand: z.object({\r\n        primary: z.string(),\r\n        background: z.string(),\r\n    }),\r\n    effects: z.object({\r\n        surface: z.enum([\"claymorphic\", \"flat\", \"glass\"]),\r\n        depth: z.string(),\r\n        interaction: z.object({\r\n            hover: z.string(),\r\n            transition_ms: z.number(),\r\n        }),\r\n        glass: z.enum([\"optional\", \"required\", \"none\"]),\r\n    }),\r\n    motion: z.object({\r\n        library: z.string(),\r\n        reduce_on_low_power_devices: z.boolean(),\r\n    }),\r\n    layout: z.object({\r\n        radius_scale: z.array(z.string()),\r\n        layout_mode: z.string().optional(), // Added resiliency\r\n        shadow_style: z.string(),\r\n        padding_min: z.string(),\r\n        feedback_states: z.array(z.string()),\r\n    }),\r\n    performance: z.object({\r\n        lazy_load_heavy_components: z.boolean(),\r\n        avoid_re_render_chains: z.boolean(),\r\n        memoize_static_ui_parts: z.boolean(),\r\n        critical_css_in_bundle: z.boolean(),\r\n    }),\r\n}); // Removed .strict() for now to allow minor flexibility during dev, or keep if strict requirement. User said strict.\r\n// User said \"Use .strict() to prevent silent corruption\". I will keep strict but ensure JSON matches.\r\n\r\nconst TOKENS_PATH = path.join(process.cwd(), \"design-tokens.json\");\r\n\r\ntry {\r\n    const rootPath = path.resolve(process.cwd(), \"design-tokens.json\");\r\n\r\n    if (!fs.existsSync(rootPath)) {\r\n        console.error(\"❌ design-tokens.json not found at project root!\");\r\n        process.exit(1);\r\n    }\r\n\r\n    const raw = fs.readFileSync(rootPath, \"utf-8\");\r\n    const json = JSON.parse(raw);\r\n\r\n    const result = designTokensSchema.strict().safeParse(json);\r\n\r\n    if (!result.success) {\r\n        console.error(\"❌ Design Token Validation Failed:\");\r\n        console.error(JSON.stringify(result.error.format(), null, 2));\r\n        process.exit(1);\r\n    }\r\n\r\n    console.log(\"✅ Design Tokens Validated Successfully.\");\r\n    console.log(`🔒 Token Hash: ${createHash('sha256').update(raw).digest('hex')}`);\r\n\r\n} catch (error) {\r\n    console.error(\"❌ Fatal Error validating design tokens:\", error);\r\n    process.exit(1);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\store\\dcStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[420,423],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[420,423],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[476,479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[476,479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[545,548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[545,548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2537,2540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2537,2540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from \"zustand\";\r\nimport { DCDetail, DCItemRow, POHeader } from \"@/types\";\r\n\r\ninterface DCState {\r\n    data: DCDetail | null;\r\n    originalData: DCDetail | null;\r\n    isEditing: boolean;\r\n    poData: POHeader | null;\r\n    notes: string[];\r\n    isCheckingNumber: boolean;\r\n    isDuplicateNumber: boolean;\r\n    conflictType: string | null;\r\n\r\n    setDC: (data: DCDetail) => void;\r\n    setHeader: (header: any) => void;\r\n    updateHeader: (field: string, value: any) => void;\r\n    updateItem: (index: number, field: string, value: any) => void;\r\n    setEditing: (isEditing: boolean) => void;\r\n    reset: () => void;\r\n\r\n    setPOData: (data: POHeader | null) => void;\r\n    setItems: (items: DCItemRow[]) => void;\r\n    setNotes: (notes: string[]) => void;\r\n    addNote: () => void;\r\n    updateNote: (index: number, value: string) => void;\r\n    removeNote: (index: number) => void;\r\n    setNumberStatus: (isChecking: boolean, isDuplicate: boolean, conflictType: string | null) => void;\r\n}\r\n\r\nexport const useDCStore = create<DCState>((set) => ({\r\n    data: null,\r\n    originalData: null,\r\n    isEditing: false,\r\n    poData: null,\r\n    notes: [],\r\n    isCheckingNumber: false,\r\n    isDuplicateNumber: false,\r\n    conflictType: null,\r\n\r\n    setDC: (data) => set({\r\n        data,\r\n        originalData: data,\r\n        notes: data.header.remarks ? data.header.remarks.split(\"\\n\\n\") : []\r\n    }),\r\n    setHeader: (header) => set((state) => ({\r\n        data: state.data ? { ...state.data, header } : { header, items: [] }\r\n    })),\r\n    updateHeader: (field, value) => set((state) => {\r\n        if (!state.data) return state;\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                header: {\r\n                    ...state.data.header,\r\n                    [field]: value\r\n                }\r\n            }\r\n        };\r\n    }),\r\n    updateItem: (index, field, value) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        newItems[index] = { ...newItems[index], [field]: value };\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                items: newItems\r\n            }\r\n        };\r\n    }),\r\n    setEditing: (isEditing) => set({ isEditing }),\r\n    reset: () => set((state) => ({ data: state.originalData, isEditing: false })),\r\n\r\n    setPOData: (poData) => set({ poData }),\r\n    setItems: (items) => set((state) => ({\r\n        data: state.data ? { ...state.data, items } : { header: {} as any, items }\r\n    })),\r\n    setNotes: (notes) => set({ notes }),\r\n    addNote: () => set((state) => ({ notes: [...state.notes, \"\"] })),\r\n    updateNote: (index, value) => set((state) => {\r\n        const newNotes = [...state.notes];\r\n        newNotes[index] = value;\r\n        return { notes: newNotes };\r\n    }),\r\n    removeNote: (index) => set((state) => ({\r\n        notes: state.notes.filter((_, i) => i !== index)\r\n    })),\r\n    setNumberStatus: (isCheckingNumber, isDuplicateNumber, conflictType) =>\r\n        set({ isCheckingNumber, isDuplicateNumber, conflictType })\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\store\\invoiceStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[203,206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[203,206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[442,445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[442,445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[511,514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[511,514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[595,598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[595,598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1130,1133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1130,1133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2055,2058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2055,2058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from \"zustand\";\r\nimport { InvoiceDetail, InvoiceHeader, InvoiceItem } from \"@/types\";\r\n\r\ninterface InvoiceState {\r\n    data: InvoiceDetail | null;\r\n    isEditing: boolean;\r\n    dcData: any | null; // For creation flow\r\n    isCheckingNumber: boolean;\r\n    isDuplicateNumber: boolean;\r\n\r\n    setInvoice: (data: InvoiceDetail) => void;\r\n    setHeader: (header: InvoiceHeader) => void;\r\n    updateHeader: (field: string, value: any) => void;\r\n    updateItem: (index: number, field: string, value: any) => void;\r\n    setEditing: (isEditing: boolean) => void;\r\n    setDCData: (data: any) => void;\r\n    setItems: (items: InvoiceItem[]) => void;\r\n    setNumberStatus: (checking: boolean, duplicate: boolean) => void;\r\n    reset: () => void;\r\n}\r\n\r\nexport const useInvoiceStore = create<InvoiceState>((set) => ({\r\n    data: null,\r\n    isEditing: false,\r\n    dcData: null,\r\n    isCheckingNumber: false,\r\n    isDuplicateNumber: false,\r\n\r\n    setInvoice: (data) => set({ data, isEditing: false }),\r\n    setHeader: (header) => set((state) => ({\r\n        data: state.data ? { ...state.data, header } : { header, items: [] } as any\r\n    })),\r\n    updateHeader: (field, value) => set((state) => {\r\n        if (!state.data) return state;\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                header: {\r\n                    ...state.data.header,\r\n                    [field]: value\r\n                }\r\n            }\r\n        };\r\n    }),\r\n    updateItem: (index, field, value) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        newItems[index] = { ...newItems[index], [field]: value };\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                items: newItems\r\n            }\r\n        };\r\n    }),\r\n    setEditing: (isEditing) => set({ isEditing }),\r\n    setDCData: (dcData) => set({ dcData }),\r\n    setItems: (items) => set((state) => ({\r\n        data: state.data ? { ...state.data, items } : { items } as any\r\n    })),\r\n    setNumberStatus: (isCheckingNumber, isDuplicateNumber) => set({ isCheckingNumber, isDuplicateNumber }),\r\n    reset: () => set({ data: null, isEditing: false, dcData: null, isCheckingNumber: false, isDuplicateNumber: false })\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\store\\poStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[210,213],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[210,213],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[308,311],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[308,311],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[377,380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[377,380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[655,658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[655,658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1058,1061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1058,1061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { PODetail, POItem, PODelivery } from '@/types';\r\n\r\ninterface POState {\r\n    data: PODetail | null;\r\n    setPO: (po: PODetail | null) => void;\r\n    setHeader: (header: any) => void;\r\n    setItems: (items: POItem[]) => void;\r\n    updateHeader: (field: string, value: any) => void;\r\n    updateItem: (index: number, field: string, value: any) => void;\r\n    addItem: () => void;\r\n    removeItem: (index: number) => void;\r\n    addDelivery: (itemIdx: number) => void;\r\n    removeDelivery: (itemIdx: number, deliveryIdx: number) => void;\r\n    updateDelivery: (itemIdx: number, deliveryIdx: number, field: string, value: any) => void;\r\n    reset: () => void;\r\n}\r\n\r\nexport const usePOStore = create<POState>((set) => ({\r\n    data: null,\r\n    setPO: (po) => set({ data: po }),\r\n    setHeader: (header) => set((state) => ({\r\n        data: state.data ? { ...state.data, header } : { header, items: [] }\r\n    })),\r\n    setItems: (items) => set((state) => ({\r\n        data: state.data ? { ...state.data, items } : { header: {} as any, items }\r\n    })),\r\n    updateHeader: (field, value) => set((state) => {\r\n        if (!state.data) return state;\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                header: { ...state.data.header, [field]: value }\r\n            }\r\n        };\r\n    }),\r\n    updateItem: (index, field, value) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        newItems[index] = { ...newItems[index], [field]: value };\r\n\r\n        // Auto-calculate item value if rate or quantity changes\r\n        if (field === \"po_rate\" || field === \"ordered_quantity\") {\r\n            newItems[index].item_value =\r\n                (newItems[index].ordered_quantity || 0) * (newItems[index].po_rate || 0);\r\n        }\r\n\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    addItem: () => set((state) => {\r\n        if (!state.data) return state;\r\n        const items = state.data.items || [];\r\n        const maxItemNo = Math.max(...items.map((i) => i.po_item_no || 0), 0);\r\n        const newItem: POItem = {\r\n            po_item_no: maxItemNo + 1,\r\n            material_code: \"\",\r\n            material_description: \"NEW PROCUREMENT ITEM\",\r\n            drg_no: \"\",\r\n            unit: \"NOS\",\r\n            ordered_quantity: 0,\r\n            po_rate: 0,\r\n            item_value: 0,\r\n            delivered_quantity: 0,\r\n            deliveries: [{\r\n                lot_no: 1,\r\n                ordered_quantity: 0,\r\n                delivered_quantity: 0,\r\n                received_quantity: 0,\r\n                manual_override_qty: 0,\r\n                dely_date: new Date().toISOString().split(\"T\")[0],\r\n            }],\r\n        };\r\n        return { data: { ...state.data, items: [...items, newItem] } };\r\n    }),\r\n    removeItem: (index) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = state.data.items.filter((_, i) => i !== index);\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    addDelivery: (itemIdx) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        const item = newItems[itemIdx];\r\n        const deliveries = item.deliveries || [];\r\n        const maxLotNo = Math.max(...deliveries.map((d) => d.lot_no || 0), 0);\r\n        const newLot: PODelivery = {\r\n            lot_no: maxLotNo + 1,\r\n            ordered_quantity: 0,\r\n            delivered_quantity: 0,\r\n            received_quantity: 0,\r\n            manual_override_qty: 0,\r\n            dely_date: new Date().toISOString().split(\"T\")[0],\r\n        };\r\n        newItems[itemIdx].deliveries = [...deliveries, newLot];\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    removeDelivery: (itemIdx, deliveryIdx) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        newItems[itemIdx].deliveries = newItems[itemIdx].deliveries.filter((_, i) => i !== deliveryIdx);\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    updateDelivery: (itemIdx, deliveryIdx, field, value) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        const item = newItems[itemIdx];\r\n        const newDeliveries = [...item.deliveries];\r\n        newDeliveries[deliveryIdx] = { ...newDeliveries[deliveryIdx], [field]: value };\r\n\r\n        // Handle manual override flag\r\n        if (field === \"delivered_quantity\") {\r\n            newDeliveries[deliveryIdx].manual_override_qty = value;\r\n        }\r\n\r\n        newItems[itemIdx].deliveries = newDeliveries;\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    reset: () => set({ data: null }),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\ui.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\ui\\dc.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":2,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":2,"endColumn":22,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[254,884],"text":"type DCUI = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[254,884],"text":"type DCUI = unknown"},"desc":"Replace empty interface with `unknown`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/** * UI-Specific Type Definitions for DC Components * * These types represent the VIEW MODEL layer for Delivery Challans. * Separate from API types to allow independent evolution. */ /** * DC UI Model * Optimized for form editing and display */\r\nexport interface DCUI { // Identity dcNumber: string; dcDate: string; // Reference poNumber?: number; // Supplier Information supplier: { phone: string; gstin: string; }; // Consignee Information consignee: { name: string; address: string; gstin?: string; }; // Department departmentNumber?: string; // Transport Details transport: { modeOfTransport?: string; vehicleNumber?: string; transporterName?: string; lrNumber?: string; ewayBillNumber?: string; }; // Inspection inspectionCompany?: string; // Items items: DCItemUIRow[]; // Notes remarks?: string; // Metadata createdAt?: string; hasInvoice?: boolean; invoiceNumber?: string;\r\n} /** * DC Item UI Row * Optimized for table editing */\r\nexport interface DCItemUIRow { id: string; // Local UI identifier lotNumber: string; description: string; orderedQuantity: number; remainingQuantity: number; dispatchQuantity: number; poItemId: string; hsnCode?: string; hsnRate?: number;\r\n} /** * DC Form Data * Used for form state management */\r\nexport interface DCFormData { dcNumber: string; dcDate: string; poNumber?: string; // Supplier supplierPhone: string; supplierGstin: string; // Consignee consigneeName: string; consigneeAddress: string; consigneeGstin?: string; // Department departmentNo?: string; // Transport modeOfTransport?: string; vehicleNumber?: string; transporterName?: string; lrNumber?: string; ewayBillNumber?: string; // Inspection inspectionCompany?: string; // Notes remarks?: string;\r\n} /** * DC List Item UI * Optimized for list/table display */\r\nexport interface DCListItemUI { dcNumber: string; dcDate: string; poNumber?: number; consigneeName: string; status: \"pending\" | \"delivered\"; totalValue: number; createdAt: string;\r\n} /** * DC Creation Request * What we send to the API */\r\nexport interface DCCreateRequest { dc_number: string; dc_date: string; po_number?: number; department_no?: string; consignee_name: string; consignee_gstin?: string; consignee_address: string; inspection_company?: string; eway_bill_no?: string; vehicle_no?: string; lr_no?: string; transporter?: string; mode_of_transport?: string; remarks?: string;\r\n} /** * DC Item for API */\r\nexport interface DCItemRequest { po_item_id: string; lot_no?: number; dispatch_qty: number; hsn_code?: string; hsn_rate?: number;\r\n} /** * DC Detail Response from API */\r\nexport interface DCDetailResponse { header: { dc_number: string; dc_date: string; po_number?: number; department_no?: string; consignee_name: string; consignee_gstin?: string; consignee_address: string; supplier_phone?: string; supplier_gstin?: string; inspection_company?: string; eway_bill_no?: string; vehicle_no?: string; lr_no?: string; transporter?: string; mode_of_transport?: string; remarks?: string; created_at?: string; }; items: Array<{ lot_no?: number; material_description?: string; lot_ordered_qty?: number; remaining_post_dc?: number; dispatch_qty?: number; po_item_id: string; hsn_code?: string; hsn_rate?: number; }>;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\ui\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\ui\\invoice.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":2,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":2,"endColumn":27,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[373,1403],"text":"type InvoiceUI = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[373,1403],"text":"type InvoiceUI = unknown"},"desc":"Replace empty interface with `unknown`."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":4,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":4,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[1473,1936],"text":"type InvoiceItemUI = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[1473,1936],"text":"type InvoiceItemUI = unknown"},"desc":"Replace empty interface with `unknown`."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":6,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":6,"endColumn":33,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[2072,2967],"text":"type InvoiceFormData = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[2072,2967],"text":"type InvoiceFormData = unknown"},"desc":"Replace empty interface with `unknown`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":1043,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":1046,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5035,5038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5035,5038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/** * UI-Specific Type Definitions for Invoice Components * * These types represent the VIEW MODEL layer - what the UI needs to display and edit. * They are intentionally separate from API types to allow independent evolution. * * API Types (backend contract) → Adapters → UI Types (view model) */ /** * Invoice UI Model * Optimized for form editing and display */\r\nexport interface InvoiceUI { // Identity invoiceNumber: string; invoiceDate: string; // References dcNumber: string; poNumber?: string; // Buyer Information (editable in UI) buyer: { name: string; address: string; gstin: string; state: string; stateCode: string; placeOfSupply: string; }; // Order Details (read-only from DC/PO) order: { orderNumber?: string; orderDate?: string; }; // Transport Details (editable) transport: { vehicleNumber?: string; lrNumber?: string; transporterName?: string; destination?: string; termsOfDelivery?: string; }; // Payment & Financial payment: { gemcNumber?: string; modeOfPayment?: string; paymentTerms: string; // default: \"45 Days\" }; // Additional Documents documents: { despatchDocNumber?: string; srvNumber?: string; srvDate?: string; }; // Items (computed from DC) items: InvoiceItemUI[]; // Totals (computed by backend, read-only in UI) totals: { taxableValue: number; cgst: number; sgst: number; igst: number; totalInvoiceValue: number; }; // Metadata remarks?: string; createdAt?: string;\r\n} /** * Invoice Item UI Model * Optimized for table display */\r\nexport interface InvoiceItemUI { // Display fields lotNumber: string; description: string; hsnCode: string; // Quantity & Unit quantity: number; unit: string; // \"NO\", \"KG\", etc. // Pricing rate: number; taxableValue: number; // Tax breakdown (read-only, computed by backend) tax: { cgstRate: number; cgstAmount: number; sgstRate: number; sgstAmount: number; igstRate: number; igstAmount: number; }; // Total totalAmount: number; // Optional numberOfPackets?: number;\r\n} /** * Invoice Form Data * Used for form state management * NOTE: Uses snake_case to match existing component implementation */\r\nexport interface InvoiceFormData { // Auto-generated or provided invoice_number: string; invoice_date: string; // Required reference dc_number: string; challan_date?: string; // DC date for display // Buyer details (all editable) buyer_name: string; buyer_address?: string; buyer_gstin?: string; buyer_state?: string; buyer_state_code?: string; place_of_supply?: string; // Order details (from DC/PO) buyers_order_no?: string; buyers_order_date?: string; // Transport vehicle_no?: string; lr_no?: string; transporter?: string; destination?: string; terms_of_delivery?: string; // Payment gemc_number?: string; mode_of_payment?: string; payment_terms?: string; // Documents despatch_doc_no?: string; srv_no?: string; srv_date?: string; // Notes remarks?: string; // Computed totals (read-only, calculated by backend) taxable_value?: number; cgst?: number; sgst?: number; total_invoice_value?: number;\r\n} /** * Invoice List Item UI * Optimized for list/table display */\r\nexport interface InvoiceListItemUI { invoiceNumber: string; invoiceDate: string; buyerName: string; dcNumber: string; totalAmount: number; status: \"paid\" | \"pending\" | \"overdue\"; createdAt: string;\r\n} /** * Invoice Creation Request * What we send to the API */\r\nexport interface InvoiceCreateRequest { invoice_number?: string; // Optional, backend can generate invoice_date: string; dc_number: string; // Buyer buyer_name: string; buyer_address?: string; buyer_gstin?: string; buyer_state?: string; buyer_state_code?: string; place_of_supply?: string; // Order buyers_order_no?: string; buyers_order_date?: string; // Transport vehicle_no?: string; lr_no?: string; transporter?: string; destination?: string; terms_of_delivery?: string; // Payment gemc_number?: string; mode_of_payment?: string; payment_terms?: string; // Documents despatch_doc_no?: string; srv_no?: string; srv_date?: string; remarks?: string;\r\n} /** * Invoice Detail Response from API */\r\nexport interface InvoiceDetailResponse { header: { invoice_number: string; invoice_date: string; linked_dc_numbers: string; po_numbers?: string; buyer_name: string; buyer_address?: string; buyer_gstin?: string; buyer_state?: string; buyer_state_code?: string; place_of_supply?: string; buyers_order_no?: string; buyers_order_date?: string; vehicle_no?: string; lr_no?: string; transporter?: string; destination?: string; terms_of_delivery?: string; gemc_number?: string; mode_of_payment?: string; payment_terms?: string; despatch_doc_no?: string; srv_no?: string; srv_date?: string; taxable_value: number; cgst: number; sgst: number; igst: number; total_invoice_value: number; remarks?: string; created_at?: string; }; items: Array<{ po_sl_no: string; description: string; hsn_sac: string; quantity: number; unit: string; rate: number; taxable_value: number; cgst_rate: number; cgst_amount: number; sgst_rate: number; sgst_amount: number; igst_rate: number; igst_amount: number; total_amount: number; no_of_packets?: number; }>; linked_dcs?: any[];\r\n}\r\n","usedDeprecatedRules":[]}]