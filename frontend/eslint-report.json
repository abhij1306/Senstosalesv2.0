[{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\DashboardShell.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H1' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H3' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Grid' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useMemo, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { DashboardSummary, ActivityItem } from \"@/lib/api\";\r\nimport {\r\n    Receipt,\r\n    Activity,\r\n    Plus,\r\n    BarChart3,\r\n    ArrowRight,\r\n    Truck,\r\n    FileText,\r\n} from \"lucide-react\";\r\nimport { formatIndianCurrency, cn } from \"@/lib/utils\";\r\nimport {\r\n    H1,\r\n    H3,\r\n    SmallText,\r\n    Body,\r\n    Accounting,\r\n    Button,\r\n    SummaryCards,\r\n    DataTable,\r\n    StatusBadge,\r\n    Flex,\r\n    Stack,\r\n    Grid,\r\n    Box,\r\n    Card,\r\n    Title1,\r\n    Title2,\r\n    Caption1,\r\n    Footnote\r\n} from \"@/components/design-system\";\r\nimport { type Column } from \"@/components/design-system\";\r\n// import { SummaryCardSkeleton, TableRowSkeleton } from \"@/components/design-system/atoms/Skeleton\";\r\nimport { AppRouterInstance } from \"next/dist/shared/lib/app-router-context.shared-runtime\";\r\nimport { motion } from \"framer-motion\";\r\n\r\n// --- CLIENT COMPONENT: Interactive Dashboard Shell ---\r\n\r\nconst createActivityColumns = (router: AppRouterInstance): Column<ActivityItem>[] => [\r\n    {\r\n        key: \"number\",\r\n        label: \"RECORD\",\r\n        width: \"40%\",\r\n        render: (_value, item) => (\r\n            <Flex\r\n                align=\"center\"\r\n                gap={3}\r\n                className=\"cursor-pointer group py-1\"\r\n                onClick={() => {\r\n                    const path =\r\n                        item.type === \"PO\"\r\n                            ? `/po/${item.number}`\r\n                            : item.type === \"DC\"\r\n                                ? `/dc/${item.number}`\r\n                                : `/invoice/${item.number}`;\r\n                    router.push(path);\r\n                }}\r\n            >\r\n                <motion.div\r\n                    layoutId={\r\n                        item.type === \"PO\"\r\n                            ? `po-icon-${item.number}`\r\n                            : item.type === \"DC\"\r\n                                ? `dc-icon-${item.number}`\r\n                                : `inv-icon-${item.number}`\r\n                    }\r\n                    className={cn(\r\n                        \"p-2 rounded-lg transition-colors shrink-0\",\r\n                        item.type === \"Invoice\"\r\n                            ? \"bg-app-accent/10 text-app-accent\"\r\n                            : item.type === \"PO\"\r\n                                ? \"bg-app-overlay/50 text-app-fg-muted\"\r\n                                : \"bg-app-status-success/10 text-app-status-success\"\r\n                    )}\r\n                >\r\n                    {item.type === \"Invoice\" ? (\r\n                        <Receipt size={16} />\r\n                    ) : item.type === \"PO\" ? (\r\n                        <FileText size={16} />\r\n                    ) : (\r\n                        <Truck size={16} />\r\n                    )}\r\n                </motion.div>\r\n                <Body className=\"text-app-fg group-hover:text-app-accent transition-colors whitespace-nowrap\">\r\n                    {item.number}\r\n                </Body>\r\n            </Flex>\r\n        ),\r\n    },\r\n    {\r\n        key: \"amount\",\r\n        label: \"AMOUNT\",\r\n        width: \"20%\",\r\n        align: \"right\",\r\n        render: (_value, item) => (\r\n            <Accounting\r\n                isCurrency\r\n                className=\"text-app-fg text-right block\"\r\n            >\r\n                {item.amount || 0}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"status\",\r\n        label: \"STATUS\",\r\n        width: \"20%\",\r\n        render: (_value, item) => <StatusBadge status={item.status} className=\"w-24 justify-center\" />,\r\n    },\r\n    {\r\n        key: \"date\",\r\n        label: \"DATE\",\r\n        width: \"20%\",\r\n        align: \"right\",\r\n        render: (_value, item) => (\r\n            <SmallText className=\"text-app-fg-muted whitespace-nowrap leading-none\">\r\n                {item.date}\r\n            </SmallText>\r\n        ),\r\n    },\r\n];\r\n\r\ninterface QuickActionCardProps {\r\n    title: string;\r\n    description: string;\r\n    icon: React.ReactNode;\r\n    onClick: () => void;\r\n}\r\n\r\nfunction QuickActionCard({\r\n    title,\r\n    description,\r\n    icon,\r\n    onClick,\r\n}: QuickActionCardProps) {\r\n    return (\r\n        <div\r\n            className=\"tahoe-glass-card border-none cursor-pointer group relative overflow-hidden transition-all duration-300 hover:bg-white/60 dark:hover:bg-white/10 active:scale-[0.98] p-0 shadow-soft\"\r\n            onClick={onClick}\r\n        >\r\n            <div className=\"flex items-center gap-4 p-3 px-4\">\r\n                <div className=\"p-2.5 rounded-xl bg-gradient-to-br from-system-blue to-system-cyan text-white elevation-1 transition-transform duration-300 group-hover:scale-110\">\r\n                    {icon}\r\n                </div>\r\n\r\n                <div className=\"flex-1 min-w-0\">\r\n                    <Body className=\"text-text-primary leading-tight\">\r\n                        {title}\r\n                    </Body>\r\n                    <Caption1 className=\"text-text-secondary mt-1\">{description}</Caption1>\r\n                </div>\r\n\r\n                <div className=\"w-8 h-8 rounded-full bg-black/5 dark:bg-white/10 flex items-center justify-center transition-colors group-hover:bg-system-blue/10\">\r\n                    <ArrowRight\r\n                        size={14}\r\n                        className=\"text-text-tertiary transition-transform group-hover:translate-x-1 group-hover:text-system-blue\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface DashboardShellProps {\r\n    summary: DashboardSummary | null;\r\n    activity: ActivityItem[];\r\n}\r\n\r\nexport function DashboardShell({ summary, activity }: DashboardShellProps) {\r\n    const router = useRouter();\r\n    const activityColumns = useMemo(() => createActivityColumns(router), [router]);\r\n\r\n    const handleAnalytics = useCallback(() => router.push(\"/reports\"), [router]);\r\n    const handleNewPO = useCallback(() => router.push(\"/po/create\"), [router]);\r\n    const handleNewDC = useCallback(() => router.push(\"/dc/create\"), [router]);\r\n    const handleNewInvoice = useCallback(() => router.push(\"/invoice/create\"), [router]);\r\n\r\n    return (\r\n        <div className=\"relative z-0 min-h-screen space-y-8\">\r\n            <div className=\"flex items-center justify-between mb-8\">\r\n                <div className=\"flex items-center gap-5\">\r\n                    <motion.div\r\n                        layoutId=\"dashboard-icon\"\r\n                        className=\"w-11 h-11 rounded-xl bg-white/40 dark:bg-white/5 elevation-1 flex items-center justify-center text-system-blue backdrop-blur-md\"\r\n                    >\r\n                        <BarChart3 size={20} />\r\n                    </motion.div>\r\n                    <div className=\"space-y-0.5\">\r\n                        <motion.div layoutId=\"dashboard-title\">\r\n                            <Title1 className=\"text-text-primary uppercase\">DASHBOARD</Title1>\r\n                        </motion.div>\r\n                        <Caption1 className=\"text-text-secondary\">Business intelligence overview</Caption1>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <Box className=\"min-h-[140px]\">\r\n                <SummaryCards\r\n                    loading={!summary}\r\n                    cards={[\r\n                        {\r\n                            title: \"Morning Briefing\",\r\n                            value: (\r\n                                <Stack gap={1} className=\"pb-4\">\r\n                                    <Footnote className=\"text-app-fg leading-snug\">\r\n                                        {summary?.pending_pos || 0} POs pending\r\n                                    </Footnote>\r\n                                    <Footnote className=\"text-app-fg leading-snug\">\r\n                                        {summary?.active_challans || 0} DCs in transit\r\n                                    </Footnote>\r\n                                </Stack>\r\n                            ),\r\n                            icon: <Activity size={24} />,\r\n                            variant: \"primary\",\r\n                        },\r\n                        {\r\n                            title: \"Invoiced Sales\",\r\n                            value: (\r\n                                <Accounting className=\"text-app-accent\">\r\n                                    {formatIndianCurrency(summary?.total_sales_month || 0)}\r\n                                </Accounting>\r\n                            ),\r\n                            icon: <Receipt size={24} />,\r\n                            variant: \"success\",\r\n                        },\r\n                        {\r\n                            title: \"Purchase Commitment\",\r\n                            value: (\r\n                                <Accounting className=\"text-app-accent\">\r\n                                    {formatIndianCurrency(summary?.total_po_value || 0)}\r\n                                </Accounting>\r\n                            ),\r\n                            icon: <FileText size={24} />,\r\n                            variant: \"primary\",\r\n                        },\r\n                        {\r\n                            title: \"Active Orders\",\r\n                            value: (\r\n                                <Accounting className=\"text-app-fg\">{summary?.active_po_count || 0}</Accounting>\r\n                            ),\r\n                            icon: <Activity size={24} />,\r\n                            variant: \"warning\",\r\n                        },\r\n                    ]}\r\n                    className=\"lg:grid-cols-2 xl:grid-cols-4\"\r\n                />\r\n            </Box >\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <Title2>Transaction Ledger</Title2>\r\n                        <Button variant=\"ghost\" size=\"compact\" onClick={handleAnalytics} className=\"font-medium text-system-blue\">\r\n                            View All\r\n                        </Button>\r\n                    </div>\r\n\r\n                    <div className=\"rounded-[20px] overflow-hidden\">\r\n                        <DataTable\r\n                            columns={activityColumns}\r\n                            data={activity}\r\n                            keyField=\"number\"\r\n                            pageSize={8}\r\n                            className=\"h-full border-none shadow-none bg-transparent\"\r\n                            density=\"compact\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    <Title2>Execution Center</Title2>\r\n                    <div className=\"space-y-4\">\r\n                        <QuickActionCard\r\n                            title=\"New Purchase Order\"\r\n                            description=\"Initiate procurement lifecycle\"\r\n                            icon={<Plus size={20} />}\r\n                            onClick={handleNewPO}\r\n                        />\r\n                        <QuickActionCard\r\n                            title=\"Issue Delivery Challan\"\r\n                            description=\"Commit inventory to logistics\"\r\n                            icon={<Truck size={20} />}\r\n                            onClick={handleNewDC}\r\n                        />\r\n                        <QuickActionCard\r\n                            title=\"Generate Invoice\"\r\n                            description=\"Finalize financial reconciliation\"\r\n                            icon={<Receipt size={20} />}\r\n                            onClick={handleNewInvoice}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\DCListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Truck' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'api' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":21,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { Truck, Plus, CheckCircle, Clock, Download, Activity, FileStack, PackageCheck, Ship } from \"lucide-react\";\r\nimport { api, DCListItem, DCStats } from \"@/lib/api\";\r\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\r\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\r\nimport {\r\n    Body,\r\n    Footnote,\r\n    Accounting,\r\n    StatusBadge,\r\n    ListPageTemplate,\r\n    type SummaryCardProps,\r\n    type Column,\r\n    Button,\r\n    Flex,\r\n    Label,\r\n    SmallText,\r\n} from \"@/components/design-system\";\r\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\r\n\r\nconst columns: Column<DCListItem>[] = [\r\n    {\r\n        key: \"dc_number\",\r\n        label: \"CHALLAN #\",\r\n        sortable: true,\r\n        width: \"15%\",\r\n        render: (_value, dc) => (\r\n            <Link href={`/dc/${encodeURIComponent(dc.dc_number)}`} className=\"block group\">\r\n                <Accounting className=\"text-app-accent tracking-tight group-hover:underline underline-offset-4 decoration-2\">\r\n                    {dc.dc_number}\r\n                </Accounting>\r\n            </Link>\r\n        ),\r\n    },\r\n    {\r\n        key: \"dc_date\",\r\n        label: \"DATE\",\r\n        sortable: true,\r\n        width: \"12%\",\r\n        render: (v) => (\r\n            <Footnote className=\"text-text-tertiary whitespace-nowrap leading-none\">\r\n                {formatDate(String(v))}\r\n            </Footnote>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_number\",\r\n        label: \"CONTRACT\",\r\n        sortable: true,\r\n        width: \"12%\",\r\n        render: (v) => (\r\n            <Link href={`/po/${v}`} className=\"block group\">\r\n                <Accounting className=\"text-text-tertiary group-hover:text-text-primary transition-colors\">\r\n                    {String(v) || \"---\"}\r\n                </Accounting>\r\n            </Link>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_ordered_quantity\",\r\n        label: \"ORD\",\r\n        align: \"right\",\r\n        width: \"10%\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-right pr-2\">{v || 0}</Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_dispatched_quantity\",\r\n        label: \"DELIVERED\",\r\n        align: \"right\",\r\n        width: \"10%\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"success\" className=\"text-right pr-2\">\r\n                {v || 0}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_pending_quantity\",\r\n        label: \"BAL\",\r\n        align: \"right\",\r\n        width: \"10%\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"warning\" className=\"text-right pr-2\">\r\n                {v || 0}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_received_quantity\",\r\n        label: \"RECD\",\r\n        sortable: true,\r\n        align: \"right\",\r\n        width: \"10%\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"highlight\" className=\"text-app-accent text-right pr-2\">{v || 0}</Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"status\",\r\n        label: \"STATUS\",\r\n        sortable: true,\r\n        align: \"center\",\r\n        width: \"11%\",\r\n        render: (v) => (\r\n            <div className=\"flex justify-center\">\r\n                <StatusBadge status={String(v)} className=\"w-24 border-none\" />\r\n            </div>\r\n        ),\r\n    },\r\n];\r\n\r\ninterface DCListClientProps {\r\n    initialDCs: DCListItem[];\r\n    initialStats: DCStats | null;\r\n}\r\n\r\nexport function DCListClient({ initialDCs, initialStats }: DCListClientProps) {\r\n    const router = useRouter();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const debouncedSearch = useDebouncedValue(searchQuery, 300);\r\n    const [page, setPage] = useState(1);\r\n    const pageSize = 10;\r\n\r\n    const filteredDCs = useMemo(() => {\r\n        const term = debouncedSearch.toLowerCase();\r\n        return initialDCs.filter(\r\n            (dc) =>\r\n                dc.dc_number.toLowerCase().includes(term) ||\r\n                (dc.po_number?.toString() || \"\").includes(term) ||\r\n                (dc.consignee_name && dc.consignee_name.toLowerCase().includes(term))\r\n        );\r\n    }, [initialDCs, debouncedSearch]);\r\n\r\n    const summaryCards = useMemo(\r\n        (): SummaryCardProps[] => [\r\n            {\r\n                title: \"Active Shipments\",\r\n                value: initialStats?.total_challans || initialDCs.length,\r\n                icon: <Ship size={18} />,\r\n                variant: \"primary\",\r\n            },\r\n            {\r\n                title: \"Fully Delivered\",\r\n                value: initialStats?.completed_delivery || 0,\r\n                icon: <PackageCheck size={18} />,\r\n                variant: \"success\",\r\n            },\r\n            {\r\n                title: \"Contract Capacity\",\r\n                value: formatIndianCurrency(initialStats?.total_value || 0),\r\n                icon: <FileStack size={18} />,\r\n                variant: \"primary\",\r\n            },\r\n            {\r\n                title: \"Awaiting Receipt\",\r\n                value: initialStats?.pending_delivery || 0,\r\n                icon: <Activity size={18} />,\r\n                variant: \"warning\",\r\n            },\r\n        ],\r\n        [initialDCs.length, initialStats]\r\n    );\r\n\r\n    const handleSearch = useCallback((val: string) => {\r\n        setSearchQuery(val);\r\n        setPage(1);\r\n    }, []);\r\n\r\n    const toolbar = (\r\n        <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\r\n            <SearchBar\r\n                id=\"dc-search\"\r\n                value={searchQuery}\r\n                onChange={handleSearch}\r\n                placeholder=\"Search challans or contracts...\"\r\n                className=\"w-full max-w-sm\"\r\n            />\r\n\r\n            <Button\r\n                variant=\"primary\"\r\n                onClick={() => router.push(\"/dc/create\")}\r\n                className=\"min-w-[140px] border-none\"\r\n            >\r\n                <Plus size={18} />\r\n                New Challan\r\n            </Button>\r\n        </Flex>\r\n    );\r\n\r\n    return (\r\n        <ListPageTemplate\r\n            title=\"Delivery Challans\"\r\n            subtitle=\"Manage and track all delivery documentation\"\r\n            toolbar={toolbar}\r\n            summaryCards={summaryCards}\r\n            columns={columns}\r\n            data={filteredDCs}\r\n            keyField=\"dc_number\"\r\n            page={page}\r\n            pageSize={pageSize}\r\n            totalItems={filteredDCs.length}\r\n            onPageChange={(newPage) => setPage(newPage)}\r\n            emptyMessage=\"No delivery challans found\"\r\n            density=\"compact\"\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\[id]\\DCDetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'api' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H3' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Input' is defined but never used. Allowed unused vars must match /^_/u.","line":26,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":27,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":66,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":66,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":31},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":160,"column":55,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":160,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":164,"column":55,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":164,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":168,"column":55,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":168,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":181,"column":55,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":181,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":185,"column":55,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":185,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":192,"column":51,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":192,"endColumn":119},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":196,"column":51,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":196,"endColumn":119},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":211,"column":94,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":211,"endColumn":155},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":212,"column":95,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":212,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":213,"column":95,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":213,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":214,"column":95,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":214,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":215,"column":96,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":215,"endColumn":157},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":216,"column":95,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":216,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":217,"column":129,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":217,"endColumn":206},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":218,"column":129,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":218,"endColumn":207},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":219,"column":95,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":219,"endColumn":156},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'totalDlv' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":226,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":226,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'originalIndex' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":268,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":268,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":29,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useState, useCallback, useEffect, useMemo } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n    FileText,\r\n    Plus,\r\n    Truck,\r\n    AlertCircle,\r\n    FileDown,\r\n} from \"lucide-react\";\r\nimport { api, API_BASE_URL } from \"@/lib/api\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\nimport { DCDetail } from \"@/types\";\r\nimport {\r\n    H3,\r\n    Body,\r\n    Footnote,\r\n    Caption1,\r\n    Caption2,\r\n    SmallText,\r\n    Label,\r\n    Accounting,\r\n    Button,\r\n    Input,\r\n    Card,\r\n    DocumentTemplate,\r\n    Tabs,\r\n    TabsList,\r\n    TabsTrigger,\r\n    TabsContent,\r\n    MonoCode,\r\n} from \"@/components/design-system\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { useDCStore } from \"@/store/dcStore\";\r\n\r\nconst DocumentJourney = dynamic(\r\n    () =>\r\n        import(\"@/components/design-system/molecules/DocumentJourney\").then(\r\n            (mod) => mod.DocumentJourney\r\n        ),\r\n    {\r\n        loading: () => <div className=\"h-6 w-48 bg-app-surface-hover rounded-full animate-pulse\" />,\r\n        ssr: false,\r\n    }\r\n);\r\n\r\ninterface DCDetailClientProps {\r\n    initialData: DCDetail;\r\n    initialInvoiceData: { has_invoice: boolean; invoice_number?: string } | null;\r\n}\r\n\r\nexport default function DCDetailClient({ initialData, initialInvoiceData }: DCDetailClientProps) {\r\n    const router = useRouter();\r\n    const dcId = initialData.header.dc_number;\r\n\r\n    const { data, setDC } = useDCStore();\r\n\r\n    useEffect(() => {\r\n        if (initialData) setDC(initialData);\r\n    }, [initialData, setDC]);\r\n\r\n    // UI Local State\r\n    const [loading, setLoading] = useState(false);\r\n    const [activeTab, setActiveTab] = useState(\"basic\");\r\n\r\n    const hasInvoice = initialInvoiceData?.has_invoice || false;\r\n    const invoiceNumber = initialInvoiceData?.invoice_number || null;\r\n\r\n    // Derived state - safe access for hooks\r\n    const items = data?.items || [];\r\n\r\n    // Memoized grouping for Parent-Lot hierarchy (Must be called before any return)\r\n    const groupedItems = useMemo(() => {\r\n        return Object.values(items.reduce((acc, item) => {\r\n            const key = item.po_item_id;\r\n            if (!acc[key]) acc[key] = [];\r\n            acc[key].push(item);\r\n            return acc;\r\n        }, {} as Record<string, typeof items>));\r\n    }, [items]);\r\n\r\n    if (!data) return null;\r\n\r\n    const header = data.header;\r\n    const notes = header.remarks ? header.remarks.split(\"\\n\\n\") : [];\r\n\r\n    // Edit and Delete logic removed for Read-Only View\r\n\r\n    const topActions = (\r\n        <div className=\"flex gap-3\">\r\n            <Button\r\n                variant=\"excel\"\r\n                asChild\r\n            >\r\n                <a href={`${API_BASE_URL}/api/dc/${dcId}/download`} target=\"_blank\" rel=\"noreferrer\">\r\n                    <FileDown size={14} />\r\n                    Excel\r\n                </a>\r\n            </Button>\r\n            {hasInvoice && (\r\n                <Button\r\n                    variant=\"secondary\"\r\n                    onClick={() => router.push(`/invoice/${encodeURIComponent(invoiceNumber!)}`)}\r\n                >\r\n                    <FileText size={16} />\r\n                    View Invoice\r\n                </Button>\r\n            )}\r\n            {!hasInvoice && (\r\n                <Button\r\n                    variant=\"primary\"\r\n                    onClick={() => router.push(`/invoice/create?dc=${dcId}`)}\r\n                >\r\n                    <Plus size={16} />\r\n                    Create Invoice\r\n                </Button>\r\n            )}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title={`DC #${header.dc_number}`}\r\n            description={`${header.consignee_name} â€¢ ${formatDate(header.dc_date)}`}\r\n            actions={topActions}\r\n            onBack={() => router.push(\"/dc\")}\r\n            layoutId={`dc-title-${header.dc_number}`}\r\n            icon={<Truck size={20} className=\"text-app-status-success\" />}\r\n            iconLayoutId={`dc-icon-${header.dc_number}`}\r\n        >\r\n            <div className=\"space-y-6\">\r\n                <DocumentJourney currentStage=\"DC\" className=\"mb-2\" />\r\n\r\n\r\n\r\n\r\n\r\n                <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n                    <TabsList className=\"mb-4 bg-app-overlay/5 p-1 rounded-xl w-fit border-none backdrop-blur-sm\">\r\n                        <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\r\n                        <TabsTrigger value=\"supplier\">Supplier</TabsTrigger>\r\n                        <TabsTrigger value=\"consignee\">Consignee</TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <AnimatePresence mode=\"wait\">\r\n                        <motion.div\r\n                            key={activeTab}\r\n                            initial={{ opacity: 0, y: 5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -5 }}\r\n                            transition={{ duration: 0.15 }}\r\n                        >\r\n                            <div className=\"bg-app-surface rounded-xl elevation-2 p-6 mt-0\">\r\n                                <TabsContent value=\"basic\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                        <div className=\"space-y-1\">\r\n                                            <Caption1 className=\"text-text-tertiary uppercase tracking-widest text-[10px]\">DC Number</Caption1>\r\n                                            <div className=\"text-text-primary px-3 py-2 bg-app-overlay/5 rounded-lg border-none font-medium\">{header.dc_number}</div>\r\n                                        </div>\r\n                                        <div className=\"space-y-1\">\r\n                                            <Caption1 className=\"text-text-tertiary uppercase tracking-widest text-[10px]\">DC Date</Caption1>\r\n                                            <div className=\"text-text-primary px-3 py-2 bg-app-overlay/5 rounded-lg border-none\">{header.dc_date}</div>\r\n                                        </div>\r\n                                        <div className=\"space-y-1\">\r\n                                            <Caption1 className=\"text-text-tertiary uppercase tracking-widest text-[10px]\">PO Reference</Caption1>\r\n                                            <button\r\n                                                className=\"w-full text-left px-3 py-2 bg-app-overlay/5 hover:bg-app-accent/10 rounded-lg border-none text-app-accent font-medium transition-all\"\r\n                                                onClick={() => router.push(`/po/${header.po_number}`)}\r\n                                            >\r\n                                                #{header.po_number}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </TabsContent>\r\n                                <TabsContent value=\"supplier\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                        <div className=\"space-y-1\">\r\n                                            <Caption1 className=\"text-text-tertiary uppercase tracking-widest text-[10px]\">Supplier Phone</Caption1>\r\n                                            <div className=\"text-text-primary px-3 py-2 bg-app-overlay/5 rounded-lg border-none\">{header.supplier_phone}</div>\r\n                                        </div>\r\n                                        <div className=\"space-y-1\">\r\n                                            <Caption1 className=\"text-text-tertiary uppercase tracking-widest text-[10px]\">Supplier GSTIN</Caption1>\r\n                                            <div className=\"text-text-primary px-3 py-2 bg-app-overlay/5 rounded-lg border-none\">{header.supplier_gstin}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                </TabsContent>\r\n                                <TabsContent value=\"consignee\" className=\"mt-0\">\r\n                                    <div className=\"space-y-1\">\r\n                                        <Caption1 className=\"text-text-tertiary uppercase tracking-widest text-[10px]\">Consignee Name</Caption1>\r\n                                        <div className=\"text-text-primary px-3 py-2 bg-app-overlay/5 rounded-lg border-none\">{header.consignee_name}</div>\r\n                                    </div>\r\n                                    <div className=\"space-y-1\">\r\n                                        <Caption1 className=\"text-text-tertiary uppercase tracking-widest text-[10px]\">Consignee Address</Caption1>\r\n                                        <div className=\"text-text-primary px-3 py-2 bg-app-overlay/5 rounded-lg border-none min-h-[60px]\">{header.consignee_address}</div>\r\n                                    </div>\r\n                                </TabsContent>\r\n                            </div>\r\n                        </motion.div>\r\n                    </AnimatePresence>\r\n                </Tabs>\r\n\r\n                {/* Items Table with Parent-Lot Hierarchy */}\r\n                <div className=\"space-y-3\">\r\n                    <div className=\"tahoe-glass-card elevation-1 overflow-hidden\">\r\n                        <table className=\"table-standard w-full\">\r\n                            <thead>\r\n                                <tr className=\"header-glass\">\r\n                                    <th className=\"py-2.5 px-3 text-left w-[60px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Lot</Caption2></th>\r\n                                    <th className=\"py-2.5 px-3 text-left w-[120px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Code</Caption2></th>\r\n                                    <th className=\"py-2.5 px-3 text-left w-[120px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Drawing</Caption2></th>\r\n                                    <th className=\"py-2.5 px-3 text-left w-[200px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Description</Caption2></th>\r\n                                    <th className=\"py-2.5 px-3 text-center w-[60px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Unit</Caption2></th>\r\n                                    <th className=\"py-2.5 px-3 text-right w-[80px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Ord</Caption2></th>\r\n                                    <th className=\"py-2.5 px-3 text-right w-[100px] bg-blue-600/5 dark:bg-blue-400/5\"><Caption2 className=\"text-app-accent uppercase tracking-widest text-[10px] opacity-100\">DLV</Caption2></th>\r\n                                    <th className=\"py-2.5 px-3 text-right w-[100px] bg-blue-600/5 dark:bg-blue-400/5\"><Caption2 className=\"text-app-warning uppercase tracking-widest text-[10px] opacity-100\">Bal</Caption2></th>\r\n                                    <th className=\"py-2.5 px-3 text-right w-[80px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Recd</Caption2></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {groupedItems.map((group, groupIdx) => {\r\n                                    const parentItem = group[0];\r\n                                    const totalOrd = group.reduce((sum, i) => sum + (i.ordered_quantity || (group.length === 1 ? parentItem.ordered_quantity : 0) || 0), 0);\r\n                                    const totalDlv = group.reduce((sum, i) => sum + (i.delivered_quantity || (group.length === 1 ? parentItem.delivered_quantity : 0) || 0), 0);\r\n                                    const totalRec = group.reduce((sum, i) => sum + (i.received_quantity || (group.length === 1 ? parentItem.received_quantity : 0) || 0), 0);\r\n                                    const totalBal = group.reduce((sum, i) => sum + (i.remaining_post_dc || 0), 0);\r\n                                    const totalDisp = group.reduce((sum, i) => sum + (i.dispatch_quantity || (group.length === 1 ? parentItem.dispatch_quantity : 0) || 0), 0);\r\n\r\n                                    return (\r\n                                        <React.Fragment key={parentItem.po_item_id || groupIdx}>\r\n                                            <tr className=\"bg-app-overlay/5 border-none opacity-80\">\r\n                                                <td className=\"py-2 px-3 align-middle\">\r\n                                                    <MonoCode className=\"border-none bg-transparent p-0\">\r\n                                                        #{parentItem.po_item_no || groupIdx + 1}\r\n                                                    </MonoCode>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-3 align-middle\">\r\n                                                    <Accounting className=\"text-text-tertiary\">{parentItem.material_code || \"-\"}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-3 align-middle\">\r\n                                                    <Caption2 className=\"text-text-tertiary opacity-50\">{parentItem.drg_no || \"-\"}</Caption2>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-3 align-middle\">\r\n                                                    <Footnote className=\"truncate max-w-[200px] text-text-secondary\" title={parentItem.material_description || parentItem.description}>\r\n                                                        {parentItem.material_description || parentItem.description}\r\n                                                    </Footnote>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-3 align-middle text-center\">\r\n                                                    <Caption2 className=\"uppercase text-text-tertiary\">{parentItem.unit}</Caption2>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-3 align-middle text-right\">\r\n                                                    <Accounting className=\"text-text-tertiary\">{totalOrd}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-3 align-middle text-right bg-blue-600/5 dark:bg-blue-400/5\">\r\n                                                    <Accounting className=\"text-app-accent opacity-70\">{totalDisp}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-3 align-middle text-right bg-blue-600/5 dark:bg-blue-400/5\">\r\n                                                    <Accounting className=\"text-app-warning opacity-70\">{totalBal}</Accounting>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-3 align-middle text-right\">\r\n                                                    <Accounting className=\"text-text-tertiary\">{totalRec}</Accounting>\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                            {group.map((item) => {\r\n                                                const originalIndex = items.findIndex(i => i.id === item.id);\r\n                                                return (\r\n                                                    <tr key={item.id} className=\"bg-transparent border-none\">\r\n                                                        <td className=\"py-2 px-3 text-left\">\r\n                                                            <div className=\"flex items-center gap-2 pl-4\">\r\n                                                                <div className=\"w-1 h-1 rounded-full bg-app-accent/30\" />\r\n                                                                <MonoCode className=\"bg-transparent border-none text-text-primary\">L-{item.lot_no}</MonoCode>\r\n                                                            </div>\r\n                                                        </td>\r\n                                                        <td colSpan={4} />\r\n                                                        <td className=\"py-2 px-3 text-right\">\r\n                                                            <Accounting className=\"text-text-secondary\">{item.ordered_quantity}</Accounting>\r\n                                                        </td>\r\n\r\n                                                        <td className=\"py-2 px-3 text-right bg-blue-600/5 dark:bg-blue-400/5\">\r\n                                                            <Accounting className=\"text-app-accent\">\r\n                                                                {item.dispatch_quantity}\r\n                                                            </Accounting>\r\n                                                        </td>\r\n                                                        <td className=\"py-2 px-3 text-right bg-blue-600/5 dark:bg-blue-400/5\">\r\n                                                            <Accounting className=\"text-app-warning\">{item.remaining_post_dc}</Accounting>\r\n                                                        </td>\r\n                                                        <td className=\"py-2 px-3 text-right\">\r\n                                                            <Accounting className=\"text-text-secondary\">{item.received_quantity}</Accounting>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                );\r\n                                            })}\r\n                                        </React.Fragment>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                {notes.length > 0 && (\r\n                    <div className=\"p-6 bg-app-surface rounded-xl elevation-2 mt-6\">\r\n                        <Caption1 className=\"mb-4 block uppercase tracking-wide text-text-tertiary\">Additional Notes</Caption1>\r\n                        <div className=\"space-y-3\">\r\n                            {notes.map((note, idx) => (\r\n                                <div key={`note-${idx}`} className=\"p-3 bg-app-overlay/5 rounded-xl\">\r\n                                    <Body className=\"text-text-secondary italic leading-relaxed\">{note}</Body>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H3' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":5},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":7},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2990,2993],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2990,2993],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":110,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3089,3092],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3089,3092],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":144,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4515,4518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4515,4518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":145,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":145,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4588,4591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4588,4591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4910,4913],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4910,4913],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":218,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":218,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6973,6976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6973,6976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":226,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":226,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7181,7184],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7181,7184],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":229,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":229,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7332,7335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7332,7335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":338,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":338,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":348,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":348,"endColumn":115},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":353,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":353,"endColumn":121},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":363,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":363,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":376,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":376,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":385,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":385,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":394,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":394,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":402,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":402,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":419,"column":76,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":419,"endColumn":137},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":420,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":420,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":421,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":421,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":422,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":422,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":423,"column":78,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":423,"endColumn":139},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":424,"column":78,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":424,"endColumn":139},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":425,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":425,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":426,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":426,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":427,"column":78,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":427,"endColumn":155},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":428,"column":78,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":428,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":429,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":429,"endColumn":138}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":31,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { Save, Search, AlertCircle, Loader2, Plus, Trash2, Truck } from \"lucide-react\";\r\nimport { api } from \"@/lib/api\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { DCItemRow } from \"@/types\";\r\nimport {\r\n  H3,\r\n  Label,\r\n  SmallText,\r\n  Body,\r\n  Footnote,\r\n  Caption1,\r\n  Caption2,\r\n  Accounting,\r\n  MonoCode,\r\n  Button,\r\n  Badge,\r\n  Input,\r\n  Card,\r\n  DocumentJourney,\r\n  DocumentTemplate,\r\n} from \"@/components/design-system\";\r\nimport { ActionConfirmationModal } from \"@/components/design-system/molecules/ActionConfirmationModal\";\r\nimport { useDCStore } from \"@/store/dcStore\";\r\nimport { useDebounce } from \"@/hooks/useDebounce\";\r\n\r\nfunction CreateDCPageContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const initialPoNumber = searchParams ? searchParams.get(\"po\") : \"\";\r\n\r\n  const {\r\n    data,\r\n    poData,\r\n    notes,\r\n    isCheckingNumber,\r\n    isDuplicateNumber,\r\n    conflictType,\r\n    updateHeader,\r\n    setHeader,\r\n    updateItem,\r\n    setPOData,\r\n    setItems,\r\n    addNote,\r\n    updateNote,\r\n    removeNote,\r\n    setNumberStatus,\r\n  } = useDCStore();\r\n\r\n  const [poNumber, setPONumber] = useState(initialPoNumber || \"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [showWarning, setShowWarning] = useState(false);\r\n\r\n  const header = data?.header || {\r\n    dc_number: \"\",\r\n    dc_date: new Date().toISOString().split(\"T\")[0],\r\n    supplier_phone: \"0755 â€“ 4247748\",\r\n    supplier_gstin: \"23AACFS6810L1Z7\",\r\n    consignee_name: \"\",\r\n    consignee_address: \"\",\r\n  };\r\n\r\n  // Real-time duplicate check with debounce\r\n  const debouncedDCNumber = useDebounce(header.dc_number, 500);\r\n\r\n  useEffect(() => {\r\n    if (debouncedDCNumber && debouncedDCNumber.trim() !== \"\") {\r\n      checkNumberDuplicate(debouncedDCNumber, header.dc_date);\r\n    } else {\r\n      // Clear status if empty\r\n      setNumberStatus(false, false, null);\r\n    }\r\n  }, [debouncedDCNumber, header.dc_date]);\r\n\r\n\r\n  const items = data?.items || [];\r\n\r\n  // Memoized item grouping to eliminate re-calculation lag\r\n  const groupedItems = React.useMemo(() => {\r\n    return Object.values(items.reduce((acc, item) => {\r\n      const key = item.po_item_id;\r\n      if (!acc[key]) acc[key] = [];\r\n      acc[key].push(item);\r\n      return acc;\r\n    }, {} as Record<string, typeof items>));\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    if (initialPoNumber) {\r\n      loadInitialData(initialPoNumber);\r\n    }\r\n  }, [initialPoNumber]);\r\n\r\n  const loadInitialData = async (po: string) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const pod = await api.getPODetail(po);\r\n      const mappedItems: DCItemRow[] = [];\r\n\r\n      if (pod?.items) {\r\n        pod.items.forEach((item: any) => {\r\n          const deliveries = item.deliveries || [];\r\n          deliveries.forEach((lot: any) => {\r\n            // Fallback to item quantity if lot quantity is missing (valid for single-lot items)\r\n            const ord = lot.ordered_quantity || (deliveries.length === 1 ? item.ordered_quantity : 0) || 0;\r\n            const dlv = lot.delivered_quantity || (deliveries.length === 1 ? item.delivered_quantity : 0) || 0;\r\n            const recd = lot.received_quantity || (deliveries.length === 1 ? item.received_quantity : 0) || 0;\r\n            const currentBal = Math.max(0, ord - dlv);\r\n\r\n            mappedItems.push({\r\n              id: `${item.id}-${lot.lot_no}`,\r\n              po_item_id: item.id.toString(),\r\n              po_item_no: item.po_item_no,\r\n              lot_no: lot.lot_no,\r\n              material_code: item.material_code || \"\",\r\n              description: item.material_description || \"\",\r\n              drg_no: item.drg_no || \"\",\r\n              unit: item.unit || \"NOS\",\r\n              po_rate: item.po_rate || 0,\r\n              ordered_quantity: ord,\r\n              delivered_quantity: dlv,\r\n              received_quantity: recd,\r\n              dispatch_quantity: 0,\r\n              remaining_post_dc: currentBal,\r\n              original_remaining: currentBal\r\n            });\r\n          });\r\n        });\r\n      }\r\n\r\n      setItems(mappedItems);\r\n\r\n      if (pod?.header) {\r\n        setPOData(pod.header);\r\n        setHeader({\r\n          ...header,\r\n          consignee_name: (pod.header as any)?.consignee_name || \"\",\r\n          consignee_address: (pod.header as any)?.consignee_address || \"\",\r\n          supplier_phone: pod.header?.supplier_phone || \"0755 â€“ 4247748\",\r\n          supplier_gstin: pod.header?.supplier_gstin || \"23AACFS6810L1Z7\",\r\n        });\r\n      }\r\n\r\n      if (mappedItems.length === 0) {\r\n        setError(\"No items found in this PO.\");\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to load initial data\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const checkNumberDuplicate = async (num: string, date: string) => {\r\n    if (!num || num.trim() === \"\") return;\r\n    setNumberStatus(true, false, null);\r\n    try {\r\n      const res = await api.checkDuplicateNumber(\"DC\", num, date);\r\n      setNumberStatus(false, res.exists, res.conflict_type || null);\r\n    } catch {\r\n      setNumberStatus(false, false, null);\r\n    }\r\n  };\r\n\r\n  const handleSave = () => {\r\n    // Basic validation\r\n    if (!header.dc_number || !header.dc_date) {\r\n      setError(\"DC Number and Date are required\");\r\n      return;\r\n    }\r\n\r\n    // Check for duplicate number\r\n    if (isDuplicateNumber && conflictType === \"DC\") {\r\n      setError(\"Duplicate DC Number detected. Please use a unique number.\");\r\n      return;\r\n    }\r\n\r\n    if (items.some(i => (i.dispatch_quantity || 0) > 0)) {\r\n      setShowWarning(true);\r\n    } else {\r\n      setError(\"Please dispatch at least one item.\");\r\n    }\r\n  };\r\n\r\n  const confirmSave = async () => {\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    try {\r\n      // Prepare payload\r\n      // Use existing store data logic or refine as needed\r\n      const dcPayload = {\r\n        dc_number: header.dc_number,\r\n        dc_date: header.dc_date,\r\n        po_number: poNumber || undefined,\r\n        supplier_phone: header.supplier_phone,\r\n        supplier_gstin: header.supplier_gstin,\r\n        consignee_name: header.consignee_name,\r\n        consignee_address: header.consignee_address,\r\n        remarks: notes.join(\"\\n\\n\"),\r\n      };\r\n\r\n      const dispatchItems = items.filter(i => (i.dispatch_quantity || 0) > 0);\r\n      const itemsPayload = dispatchItems.map((item) => ({\r\n        po_item_id: item.po_item_id,\r\n        lot_no: item.lot_no ? parseInt(item.lot_no.toString()) : undefined,\r\n        dispatch_qty: item.dispatch_quantity,\r\n        hsn_code: null,\r\n        hsn_rate: null,\r\n      }));\r\n\r\n      const response = await api.createDC(dcPayload, itemsPayload) as any;\r\n\r\n      // Cleanup\r\n      setNumberStatus(false, false, null); // Clear duplication status\r\n\r\n      // Redirect\r\n      router.push(`/dc/${response.dc_number || header.dc_number}`);\r\n\r\n    } catch (err: any) {\r\n      console.error(err);\r\n      if (err.status === 422 && Array.isArray(err.data?.detail)) {\r\n        const details = err.data.detail.map((d: any) => `${d.loc.join(\".\")}: ${d.msg}`).join(\", \");\r\n        setError(`Validation Error: ${details}`);\r\n      } else {\r\n        setError(err.message || \"Failed to create Delivery Challan\");\r\n      }\r\n      setIsSubmitting(false); // Only stop submitting on error, otherwise redirecting\r\n    } finally {\r\n      setShowWarning(false);\r\n    }\r\n  };\r\n\r\n  const topActions = (\r\n    <div className=\"flex items-center gap-2\">\r\n      <Button variant=\"secondary\" onClick={() => router.back()} disabled={isSubmitting}>\r\n        Cancel\r\n      </Button>\r\n      <Button\r\n        variant=\"primary\"\r\n        onClick={handleSave}\r\n        disabled={\r\n          isSubmitting || items.length === 0 || isDuplicateNumber || isCheckingNumber || !header.dc_number || isLoading\r\n        }\r\n      >\r\n        {isSubmitting ? (\r\n          <Loader2 size={16} className=\"animate-spin\" />\r\n        ) : (\r\n          <Save size={16} />\r\n        )}\r\n        {isSubmitting ? \"Saving...\" : \"Save Challan\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"Create Delivery Challan\"\r\n      description=\"Generate dispatch documentation from PO\"\r\n      actions={topActions}\r\n      icon={<Truck size={18} className=\"text-app-status-success\" />}\r\n      iconLayoutId=\"create-dc-icon\"\r\n    >\r\n      <div className=\"mb-6\">\r\n        <DocumentJourney currentStage=\"DC\" />\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {error && (\r\n          <div className=\"p-4 bg-app-status-error/10 border-none rounded-xl mb-4\">\r\n            <div className=\"flex items-center gap-2 text-app-status-error\">\r\n              <AlertCircle size={16} />\r\n              <Footnote className=\"text-app-status-error\">{error}</Footnote>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* PO Selection */}\r\n        {!initialPoNumber && (\r\n          <div className=\"p-6 bg-app-surface rounded-xl elevation-2\">\r\n            <Caption1 className=\"mb-2 block uppercase tracking-wide text-text-tertiary\">\r\n              Purchase Order Reference\r\n            </Caption1>\r\n            <div className=\"flex gap-3 mt-1\">\r\n              <div className=\"flex-1\">\r\n                <Input\r\n                  id=\"search-po-number\"\r\n                  name=\"search-po-number\"\r\n                  value={poNumber}\r\n                  onChange={(e) => setPONumber(e.target.value)}\r\n                  placeholder=\"Enter PO number\"\r\n                />\r\n              </div>\r\n              <Button\r\n                variant=\"secondary\"\r\n                onClick={() => loadInitialData(poNumber)}\r\n                disabled={!poNumber || isLoading}\r\n                className=\"h-[36px]\"\r\n              >\r\n                {isLoading ? (\r\n                  <Loader2 size={16} className=\"animate-spin mr-2\" />\r\n                ) : (\r\n                  <Search size={16} className=\"mr-2\" />\r\n                )}\r\n                {isLoading ? \"Loading...\" : \"Load Items\"}\r\n              </Button>\r\n            </div>\r\n            {poData && (\r\n              <div className=\"mt-4 p-4 bg-app-overlay/5 rounded-xl border-none flex items-center justify-between\">\r\n                <div className=\"flex flex-col\">\r\n                  <Caption1 className=\"text-text-tertiary uppercase tracking-wide\">\r\n                    Supplier\r\n                  </Caption1>\r\n                  <Body className=\"text-text-primary\">{poData.supplier_name}</Body>\r\n                </div>\r\n                <Badge\r\n                  variant=\"outline\"\r\n                  className=\"bg-app-surface text-text-tertiary border-white/10\"\r\n                >\r\n                  PO #{poData.po_number}\r\n                </Badge>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Challan Details */}\r\n        <div className=\"p-6 bg-app-surface rounded-xl elevation-2\">\r\n          <Caption1 className=\"mb-6 block uppercase tracking-widest text-text-tertiary\">Challan Information</Caption1>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div className=\"space-y-1\">\r\n              <Caption1 className=\"uppercase tracking-widest text-text-tertiary text-[10px]\">DC Number</Caption1>\r\n              <Input\r\n                value={header.dc_number}\r\n                onChange={(e) => updateHeader(\"dc_number\", e.target.value)}\r\n                placeholder=\"Ex. DC/001/24-25\"\r\n                className={cn(\r\n                  isDuplicateNumber ? \"border-app-status-error\" : \"border-transparent\"\r\n                )}\r\n              />\r\n              {isCheckingNumber && (\r\n                <div className=\"flex items-center gap-2 text-[10px] text-app-accent mt-1 uppercase tracking-tight\">\r\n                  <Loader2 className=\"w-3 h-3 animate-spin\" /> Checking availability...\r\n                </div>\r\n              )}\r\n              {isDuplicateNumber && (\r\n                <div className=\"flex items-center gap-2 text-[10px] text-app-status-error mt-1 uppercase tracking-tight\">\r\n                  <AlertCircle className=\"w-3 h-3\" />\r\n                  {conflictType === \"DC\"\r\n                    ? \"This DC Number already exists\"\r\n                    : \"DC Number conflicts with \" + conflictType}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <Caption1 className=\"uppercase tracking-widest text-text-tertiary text-[10px]\">DC Date</Caption1>\r\n              <Input\r\n                type=\"date\"\r\n                value={header.dc_date}\r\n                onChange={(e) => {\r\n                  const d = e.target.value;\r\n                  updateHeader(\"dc_date\", d);\r\n                  if (header.dc_number) checkNumberDuplicate(header.dc_number, d);\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <Caption1 className=\"uppercase tracking-widest text-text-tertiary text-[10px]\">Supplier Phone</Caption1>\r\n              <Input\r\n                value={header.supplier_phone}\r\n                readOnly\r\n                className=\"bg-app-overlay/5\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <Caption1 className=\"uppercase tracking-widest text-text-tertiary text-[10px]\">Supplier GSTIN</Caption1>\r\n              <Input\r\n                value={header.supplier_gstin}\r\n                readOnly\r\n                className=\"bg-app-overlay/5\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <Caption1 className=\"uppercase tracking-widest text-text-tertiary text-[10px]\">Consignee Name</Caption1>\r\n              <Input\r\n                value={header.consignee_name}\r\n                onChange={(e) => updateHeader(\"consignee_name\", e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <Caption1 className=\"uppercase tracking-widest text-text-tertiary text-[10px]\">Consignee Address</Caption1>\r\n              <Input\r\n                value={header.consignee_address}\r\n                onChange={(e) => updateHeader(\"consignee_address\", e.target.value)}\r\n                className=\"truncate\"\r\n                title={header.consignee_address}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Items Table */}\r\n        {items.length > 0 && (\r\n          <div className=\"tahoe-glass-card elevation-1 overflow-hidden\">\r\n            <table className=\"table-standard w-full\">\r\n              <thead>\r\n                <tr className=\"header-glass\">\r\n                  <th className=\"py-2.5 px-3 text-left w-[60px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Lot</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-left w-[120px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Code</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-left w-[120px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Drawing</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-left w-[200px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Description</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-center w-[60px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Unit</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-right w-[100px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Rate</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-right w-[80px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Ord</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-right w-[80px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Dlv</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-right w-[100px]\"><Caption2 className=\"text-app-accent uppercase tracking-widest text-[10px] opacity-100\">DLV</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-right w-[100px]\"><Caption2 className=\"text-app-warning uppercase tracking-widest text-[10px] opacity-100\">Bal</Caption2></th>\r\n                  <th className=\"py-2.5 px-3 text-right w-[80px]\"><Caption2 className=\"uppercase tracking-widest text-[10px] opacity-100\">Recd</Caption2></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {groupedItems.map((group, groupIdx) => {\r\n                  const parentItem = group[0];\r\n                  const totalOrd = group.reduce((sum, i) => sum + (i.ordered_quantity || 0), 0);\r\n                  const totalDlv = group.reduce((sum, i) => sum + (i.delivered_quantity || 0), 0);\r\n                  const totalRec = group.reduce((sum, i) => sum + (i.received_quantity || 0), 0);\r\n                  const totalBal = group.reduce((sum, i) => sum + (i.remaining_post_dc || 0), 0);\r\n                  const totalDisp = group.reduce((sum, i) => sum + (i.dispatch_quantity || 0), 0);\r\n\r\n                  return (\r\n                    <React.Fragment key={parentItem.po_item_id}>\r\n                      <tr className=\"bg-app-overlay/5 border-none opacity-80\">\r\n                        <td className=\"py-2.5 px-3 align-middle\">\r\n                          <MonoCode className=\"bg-transparent border-none p-0 opacity-60\">\r\n                            #{parentItem.po_item_no || groupIdx + 1}\r\n                          </MonoCode>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle\">\r\n                          <Accounting className=\"text-text-tertiary opacity-70\">{parentItem.material_code || \"-\"}</Accounting>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle\">\r\n                          <Caption2 className=\"text-text-tertiary opacity-40\">{parentItem.drg_no || \"-\"}</Caption2>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle\">\r\n                          <Footnote className=\"truncate max-w-[200px] text-text-secondary opacity-80\" title={parentItem.description}>\r\n                            {parentItem.description}\r\n                          </Footnote>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle text-center\">\r\n                          <Caption2 className=\"uppercase text-text-tertiary opacity-50\">{parentItem.unit}</Caption2>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle text-right\">\r\n                          <Accounting className=\"text-text-tertiary opacity-70\" isCurrency>{parentItem.po_rate || 0}</Accounting>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle text-right\">\r\n                          <Accounting className=\"text-text-tertiary opacity-70\">{totalOrd}</Accounting>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle text-right\">\r\n                          <Accounting className=\"text-text-tertiary opacity-70\">{totalDlv}</Accounting>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle text-right bg-app-accent/5\">\r\n                          <Accounting className=\"text-app-accent opacity-60\">{totalDisp}</Accounting>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle text-right bg-app-warning/5\">\r\n                          <Accounting className=\"text-app-warning opacity-60\">{totalBal}</Accounting>\r\n                        </td>\r\n                        <td className=\"py-2.5 px-3 align-middle text-right\">\r\n                          <Accounting className=\"text-text-tertiary opacity-70\">{totalRec}</Accounting>\r\n                        </td>\r\n                      </tr>\r\n\r\n                      {group.map((item) => {\r\n                        const originalIndex = items.findIndex(i => i.id === item.id);\r\n                        return (\r\n                          <tr key={item.id} className=\"bg-transparent border-none last:border-none\">\r\n                            <td className=\"py-2 px-3 align-middle\">\r\n                              <div className=\"flex items-center gap-2 pl-4\">\r\n                                <div className=\"w-1 h-1 rounded-full bg-app-accent/30\" />\r\n                                <MonoCode className=\"bg-transparent border-none text-text-secondary\">L-{item.lot_no}</MonoCode>\r\n                              </div>\r\n                            </td>\r\n                            <td colSpan={4} />\r\n                            <td className=\"py-2 px-3 text-right\">\r\n                              {/* Rate inherited */}\r\n                            </td>\r\n                            <td className=\"py-2 px-3 text-right\">\r\n                              <Accounting className=\"text-text-secondary\">{item.ordered_quantity}</Accounting>\r\n                            </td>\r\n                            <td className=\"py-2 px-3 text-right\">\r\n                              <Accounting className=\"text-text-secondary\">{item.delivered_quantity}</Accounting>\r\n                            </td>\r\n                            <td className=\"py-2 px-3\">\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={item.dispatch_quantity || \"\"}\r\n                                onChange={(e) => {\r\n                                  const val = parseFloat(e.target.value) || 0;\r\n                                  const originalRem = items[originalIndex].original_remaining ?? items[originalIndex].remaining_post_dc ?? 0;\r\n                                  const validDispatch = Math.min(Math.max(0, val), originalRem);\r\n                                  const newBalance = Math.max(0, originalRem - validDispatch);\r\n                                  updateItem(originalIndex, \"dispatch_quantity\", validDispatch);\r\n                                  updateItem(originalIndex, \"remaining_post_dc\", newBalance);\r\n                                }}\r\n                                className=\"text-right w-full h-7 text-xs bg-app-accent/5 border-transparent focus:border-app-accent/20\"\r\n                                placeholder=\"0\"\r\n                              />\r\n                            </td>\r\n                            <td className=\"py-2 px-3 text-right bg-app-warning/5\">\r\n                              <Accounting className=\"text-app-warning\">{item.remaining_post_dc}</Accounting>\r\n                            </td>\r\n                            <td className=\"py-2 px-3 text-right\">\r\n                              <Accounting className=\"text-text-secondary\">{item.received_quantity}</Accounting>\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                    </React.Fragment>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"p-6 bg-app-surface rounded-xl elevation-2\">\r\n          <Caption1 className=\"mb-4 block uppercase tracking-wide text-text-tertiary\">\r\n            Additional Notes\r\n          </Caption1>\r\n          <div className=\"space-y-3\">\r\n            {notes.map((note, idx) => (\r\n              <div key={`lot-${idx}`} className=\"flex gap-2\">\r\n                <Input\r\n                  value={note}\r\n                  onChange={(e) => updateNote(idx, e.target.value)}\r\n                  placeholder=\"Enter additional information...\"\r\n                />\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => removeNote(idx)}\r\n                  className=\"text-text-tertiary hover:text-app-status-error\"\r\n                >\r\n                  <Trash2 size={16} />\r\n                </Button>\r\n              </div>\r\n            ))}\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              onClick={addNote}\r\n              className=\"w-full bg-transparent hover:bg-app-overlay/5\"\r\n            >\r\n              <Plus size={16} />\r\n              Add Line Note\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <ActionConfirmationModal\r\n        isOpen={showWarning}\r\n        onClose={() => setShowWarning(false)}\r\n        onConfirm={confirmSave}\r\n        title=\"Confirm Delivery Challan Generation\"\r\n        subtitle=\"This action is permanent\"\r\n        warningText=\"Generating this DC will lock the specified quantities. Ensure all details are correct as this affects inventory and billing.\"\r\n        confirmLabel={isSubmitting ? \"Saving...\" : \"Confirm Save\"}\r\n      />\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\nimport { Suspense } from \"react\";\r\n\r\nexport default function CreateDCPage() {\r\n  return (\r\n    <Suspense fallback={<div className=\"flex items-center justify-center p-12\"><Loader2 className=\"animate-spin text-app-accent\" /></div>}>\r\n      <CreateDCPageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\dc\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\error.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\InvoiceListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Receipt' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Activity' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'api' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":10},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":78,"column":49,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":78,"endColumn":113},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":104,"column":49,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":104,"endColumn":113}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport {\r\n    Receipt,\r\n    Plus,\r\n    TrendingUp,\r\n    Clock,\r\n    Activity,\r\n    CheckCircle,\r\n    Boxes,\r\n    FileCheck,\r\n} from \"lucide-react\";\r\nimport { api, InvoiceListItem, InvoiceStats } from \"@/lib/api\";\r\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\r\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\r\nimport {\r\n    Body,\r\n    SmallText,\r\n    Accounting,\r\n    StatusBadge,\r\n    ListPageTemplate,\r\n    type SummaryCardProps,\r\n    type Column,\r\n    Button,\r\n    Flex,\r\n    Box,\r\n    Label,\r\n} from \"@/components/design-system\";\r\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\r\n\r\nconst columns: Column<InvoiceListItem>[] = [\r\n    {\r\n        key: \"invoice_number\",\r\n        label: \"INVOICE #\",\r\n        sortable: true,\r\n        width: \"12%\",\r\n        render: (_value, inv) => (\r\n            <Link\r\n                href={`/invoice/${encodeURIComponent(inv.invoice_number)}`}\r\n                className=\"block group\"\r\n            >\r\n                <Accounting className=\"text-app-accent tracking-tight group-hover:underline underline-offset-4 decoration-2\">\r\n                    {inv.invoice_number}\r\n                </Accounting>\r\n            </Link>\r\n        ),\r\n    },\r\n    {\r\n        key: \"invoice_date\",\r\n        label: \"DATE\",\r\n        sortable: true,\r\n        width: \"10%\",\r\n        render: (v) => (\r\n            <Body className=\"text-app-fg-muted font-bold text-xs whitespace-nowrap\">\r\n                {formatDate(String(v))}\r\n            </Body>\r\n        ),\r\n    },\r\n    {\r\n        key: \"dc_number\",\r\n        label: \"LINKED DCS\",\r\n        width: \"14%\",\r\n        render: (v) => (\r\n            <Flex wrap gap={1}>\r\n                {String(v) && String(v) !== \"null\" && String(v) !== \"undefined\" ? (\r\n                    String(v)\r\n                        .split(\",\")\r\n                        .map((dc: string, i: number) => (\r\n                            <Link\r\n                                key={i}\r\n                                href={`/dc/${dc.trim()}`}\r\n                                className=\"no-underline\"\r\n                            >\r\n                                <Box className=\"px-2 py-0.5 rounded-lg bg-app-accent/10 text-app-accent cursor-pointer hover:bg-app-accent/20 transition-all border-none shadow-none\">\r\n                                    <Accounting className=\"text-inherit leading-none text-[10px] tracking-tight\">{dc.trim()}</Accounting>\r\n                                </Box>\r\n                            </Link>\r\n                        ))\r\n                ) : (\r\n                    <SmallText className=\"italic font-medium text-app-fg-muted/50\">Direct</SmallText>\r\n                )}\r\n            </Flex>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_numbers\",\r\n        label: \"LINKED POS\",\r\n        width: \"14%\",\r\n        render: (v) => (\r\n            <Flex wrap gap={1}>\r\n                {String(v) && String(v) !== \"null\" ? (\r\n                    String(v)\r\n                        .split(\",\")\r\n                        .map((po: string, i: number) => (\r\n                            <Link\r\n                                key={i}\r\n                                href={`/po/${po.trim()}`}\r\n                                className=\"no-underline\"\r\n                            >\r\n                                <Box className=\"px-2 py-0.5 rounded-lg bg-app-overlay/5 text-app-fg-muted cursor-pointer hover:bg-app-overlay/10 transition-all border-none shadow-none\">\r\n                                    <Accounting className=\"text-inherit leading-none text-[10px] tracking-tight\">{po.trim()}</Accounting>\r\n                                </Box>\r\n                            </Link>\r\n                        ))\r\n                ) : (\r\n                    <SmallText className=\"italic font-medium text-app-fg-muted/50\">Direct</SmallText>\r\n                )}\r\n            </Flex>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_items\",\r\n        label: \"ITEMS\",\r\n        width: \"6%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-right pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_dispatched_quantity\",\r\n        label: \"DLV\",\r\n        width: \"8%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"success\" className=\"text-right pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_received_quantity\",\r\n        label: \"RECD\",\r\n        width: \"8%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting variant=\"highlight\" className=\"text-app-accent text-right pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_invoice_value\",\r\n        label: \"VALUE\",\r\n        sortable: true,\r\n        align: \"right\",\r\n        width: \"12%\",\r\n        isCurrency: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-app-fg text-right pr-2\" isCurrency>\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"status\",\r\n        label: \"STATUS\",\r\n        sortable: true,\r\n        width: \"10%\",\r\n        align: \"center\",\r\n        render: (v) => (\r\n            <div className=\"flex justify-center\">\r\n                <StatusBadge status={String(v || \"Pending\")} className=\"w-24 border-none shadow-none\" />\r\n            </div>\r\n        ),\r\n    },\r\n];\r\n\r\ninterface InvoiceListClientProps {\r\n    initialInvoices: InvoiceListItem[];\r\n    initialStats: InvoiceStats | null;\r\n}\r\n\r\nexport function InvoiceListClient({ initialInvoices, initialStats }: InvoiceListClientProps) {\r\n    const router = useRouter();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const debouncedSearch = useDebouncedValue(searchQuery, 300);\r\n    const [page, setPage] = useState(1);\r\n    const pageSize = 10;\r\n\r\n    const filteredInvoices = useMemo(() => {\r\n        const term = debouncedSearch.toLowerCase();\r\n        return initialInvoices.filter(\r\n            (inv) =>\r\n                inv.invoice_number.toLowerCase().includes(term) ||\r\n                (inv.customer_gstin && inv.customer_gstin.toLowerCase().includes(term))\r\n        );\r\n    }, [initialInvoices, debouncedSearch]);\r\n\r\n    const summaryCards = useMemo(\r\n        (): SummaryCardProps[] => [\r\n            {\r\n                title: \"Total Documents\",\r\n                value: initialInvoices.length,\r\n                icon: <Boxes size={20} />,\r\n                variant: \"primary\",\r\n            },\r\n            {\r\n                title: \"Revenue Confirmed\",\r\n                value: formatIndianCurrency(initialStats?.total_invoiced || 0),\r\n                icon: <FileCheck size={20} />,\r\n                variant: \"success\",\r\n            },\r\n            {\r\n                title: \"Outstanding\",\r\n                value: formatIndianCurrency(initialStats?.pending_payments || 0),\r\n                icon: <Clock size={20} />,\r\n                variant: \"warning\",\r\n            },\r\n            {\r\n                title: \"YTD Billings\",\r\n                value: formatIndianCurrency(initialStats?.total_invoiced || 0),\r\n                icon: <TrendingUp size={20} />,\r\n                variant: \"primary\",\r\n            },\r\n        ],\r\n        [initialInvoices.length, initialStats]\r\n    );\r\n\r\n    const handleSearch = useCallback((val: string) => {\r\n        setSearchQuery(val);\r\n        setPage(1);\r\n    }, []);\r\n\r\n    const toolbar = (\r\n        <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\r\n            <SearchBar\r\n                id=\"invoice-search\"\r\n                value={searchQuery}\r\n                onChange={handleSearch}\r\n                placeholder=\"Search invoices or GSTIN...\"\r\n                className=\"w-full max-w-sm\"\r\n            />\r\n\r\n            <Button\r\n                variant=\"primary\"\r\n                onClick={() => router.push(\"/invoice/create\")}\r\n                className=\"min-w-[140px]\"\r\n            >\r\n                <Plus size={16} />\r\n                New Invoice\r\n            </Button>\r\n        </Flex>\r\n    );\r\n\r\n    return (\r\n        <ListPageTemplate\r\n            title=\"GST INVOICES\"\r\n            subtitle=\"Manage all billing documentation and compliance\"\r\n            toolbar={toolbar}\r\n            summaryCards={summaryCards}\r\n            columns={columns}\r\n            data={filteredInvoices}\r\n            keyField=\"invoice_number\"\r\n            page={page}\r\n            pageSize={pageSize}\r\n            totalItems={filteredInvoices.length}\r\n            onPageChange={(newPage) => setPage(newPage)}\r\n            emptyMessage=\"No invoices found\"\r\n            density=\"compact\"\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\[id]\\InvoiceDetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Suspense' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatIndianCurrency' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":42},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":139,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":139,"endColumn":128},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":145,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":145,"endColumn":128},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":149,"column":52,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":149,"endColumn":128},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":159,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":159,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":160,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":160,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":161,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":161,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":162,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":162,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":163,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":163,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":164,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":164,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":170,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":170,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":171,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":171,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":172,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":172,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":173,"column":77,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":173,"endColumn":153},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":183,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":183,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":190,"column":79,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":190,"endColumn":102},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":191,"column":70,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":191,"endColumn":93},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":192,"column":80,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":192,"endColumn":103},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":193,"column":91,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":193,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":194,"column":91,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":194,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":195,"column":125,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":195,"endColumn":181},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":196,"column":91,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":196,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":215,"column":89,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":215,"endColumn":160},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":217,"column":86,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":217,"endColumn":154},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":233,"column":67,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":233,"endColumn":109},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":234,"column":71,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":234,"endColumn":112},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":261,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":261,"endColumn":109},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":265,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":265,"endColumn":91},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":270,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":270,"endColumn":111}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":30,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect, useMemo, Suspense } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Printer, FileDown, Receipt, Loader2, ChevronDown, ChevronUp } from \"lucide-react\";\r\nimport { API_BASE_URL } from \"@/lib/api\";\r\nimport { formatDate, formatIndianCurrency, cn, amountInWords } from \"@/lib/utils\";\r\nimport { dcRoute } from \"@/lib/routes\";\r\nimport {\r\n    H3,\r\n    Body,\r\n    SmallText,\r\n    Label,\r\n    Accounting,\r\n    Button,\r\n    Card,\r\n    Tabs,\r\n    TabsList,\r\n    TabsTrigger,\r\n    TabsContent,\r\n    DocumentTemplate,\r\n    MonoCode,\r\n} from \"@/components/design-system\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { useInvoiceStore } from \"@/store/invoiceStore\";\r\nimport { InvoiceDetail } from \"@/types\";\r\n\r\nconst DocumentJourney = dynamic(\r\n    () =>\r\n        import(\"@/components/design-system/molecules/DocumentJourney\").then(\r\n            (mod) => mod.DocumentJourney,\r\n        ),\r\n    {\r\n        loading: () => null,\r\n        ssr: false,\r\n    },\r\n);\r\n\r\ninterface InvoiceDetailClientProps {\r\n    data: InvoiceDetail;\r\n}\r\n\r\nexport default function InvoiceDetailClient({ data: initialData }: InvoiceDetailClientProps) {\r\n    const router = useRouter();\r\n    const [activeTab, setActiveTab] = useState(\"buyer\");\r\n    const [expandedItems, setExpandedItems] = useState<Set<string>>(new Set());\r\n\r\n    const {\r\n        data,\r\n        setInvoice,\r\n    } = useInvoiceStore();\r\n\r\n    useEffect(() => {\r\n        if (initialData) {\r\n            setInvoice(initialData);\r\n        }\r\n    }, [initialData, setInvoice]);\r\n\r\n    // Group items for Parent-Lot hierarchy\r\n    const groupedItems = useMemo(() => {\r\n        if (!data?.items) return [];\r\n        const items = data.items;\r\n        return Object.values(items.reduce((acc, item) => {\r\n            const key = item.description || \"item\";\r\n            if (!acc[key]) acc[key] = [];\r\n            acc[key].push(item);\r\n            return acc;\r\n        }, {} as Record<string, typeof items>));\r\n    }, [data?.items]);\r\n\r\n    const toggleItem = (key: string) => {\r\n        const newSet = new Set(expandedItems);\r\n        if (newSet.has(key)) newSet.delete(key);\r\n        else newSet.add(key);\r\n        setExpandedItems(newSet);\r\n    };\r\n\r\n    if (!data || !data.header) return (\r\n        <div className=\"flex items-center justify-center min-h-[400px]\">\r\n            <Loader2 className=\"animate-spin text-app-accent\" size={32} />\r\n        </div>\r\n    );\r\n\r\n    const { header, items = [] } = data;\r\n\r\n    const topActions = (\r\n        <div className=\"flex gap-3\">\r\n            <Button\r\n                variant=\"excel\"\r\n                asChild\r\n            >\r\n                <a\r\n                    href={`${API_BASE_URL}/api/invoice/${encodeURIComponent(header.invoice_number)}/download`}\r\n                    target=\"_blank\"\r\n                    rel=\"noreferrer\"\r\n                >\r\n                    <FileDown size={16} /> Excel\r\n                </a>\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={() => window.print()}>\r\n                <Printer size={16} /> Print\r\n            </Button>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title={`Invoice #${header?.invoice_number || 'N/A'}`}\r\n            description={`${header?.buyer_name || 'N/A'} â€¢ ${formatDate(header?.invoice_date || '')}`}\r\n            actions={topActions}\r\n            onBack={() => router.back()}\r\n            layoutId={`inv-title-${header?.invoice_number}`}\r\n            icon={<Receipt size={20} className=\"text-app-accent\" />}\r\n            iconLayoutId={`inv-icon-${header?.invoice_number}`}\r\n        >\r\n            <div className=\"space-y-6\">\r\n                <DocumentJourney currentStage=\"Invoice\" className=\"mb-2\" />\r\n\r\n                <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n                    <TabsList className=\"mb-4 bg-app-overlay/5 p-1 rounded-xl inline-flex border-none\">\r\n                        <TabsTrigger value=\"buyer\">Buyer</TabsTrigger>\r\n                        <TabsTrigger value=\"references\">References</TabsTrigger>\r\n                        <TabsTrigger value=\"logistics\">Logistics</TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <AnimatePresence mode=\"wait\">\r\n                        <motion.div\r\n                            key={activeTab}\r\n                            initial={{ opacity: 0, y: 5 }}\r\n                            animate={{ opacity: 1, y: 0 }}\r\n                            exit={{ opacity: 0, y: -5 }}\r\n                            transition={{ duration: 0.15 }}\r\n                        >\r\n                            <Card className=\"p-6 mt-0 border-none elevation-2 bg-app-surface/50 backdrop-blur-md\">\r\n                                <TabsContent value=\"buyer\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Buyer Name</Label>\r\n                                            <H3 className=\"text-app-fg text-sm font-semibold leading-none\">\r\n                                                {header.buyer_name || \"-\"}\r\n                                            </H3>\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5\">\r\n                                            <Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Buyer GSTIN</Label>\r\n                                            <Accounting className=\"text-app-accent text-sm font-mono leading-none\">{header.buyer_gstin || \"-\"}</Accounting>\r\n                                        </div>\r\n                                        <div className=\"space-y-1.5 col-span-2 pt-4 border-none\">\r\n                                            <Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Billing Address</Label>\r\n                                            <Body className=\"text-app-fg text-sm leading-relaxed max-w-3xl opacity-90\">\r\n                                                {header.buyer_address || \"-\"}\r\n                                            </Body>\r\n                                        </div>\r\n                                    </div>\r\n                                </TabsContent>\r\n\r\n                                <TabsContent value=\"references\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Order Number</Label><Accounting className=\"text-app-fg text-sm font-mono\">{header.buyers_order_no || \"-\"}</Accounting></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Order Date</Label><Body className=\"text-app-fg text-sm\">{header.buyers_order_date ? formatDate(header.buyers_order_date) : \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Linked DC</Label><Accounting className=\"text-app-accent cursor-pointer hover:underline text-sm font-mono\" onClick={() => router.push(header.dc_number ? dcRoute(header.dc_number) : \"#\")}>{header.dc_number || \"-\"}</Accounting></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Challan Date</Label><Body className=\"text-app-fg text-sm\">{header.dc_date ? formatDate(header.dc_date) : \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">GEMC Number</Label><Body className=\"text-app-fg text-sm\">{header.gemc_number || \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">SRV Number</Label><Body className=\"text-app-fg text-sm\">{header.srv_no || \"-\"}</Body></div>\r\n                                    </div>\r\n                                </TabsContent>\r\n\r\n                                <TabsContent value=\"logistics\" className=\"mt-0\">\r\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Vehicle No</Label><Body className=\"text-app-fg text-sm\">{header.vehicle_no || \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">LR Number</Label><Body className=\"text-app-fg text-sm\">{header.lr_no || \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Transporter</Label><Body className=\"text-app-fg text-sm\">{header.transporter || \"-\"}</Body></div>\r\n                                        <div className=\"space-y-1.5\"><Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px] opacity-70\">Payment Terms</Label><Body className=\"text-app-fg text-app-accent text-sm\">{header.payment_terms || \"45 Days\"}</Body></div>\r\n                                    </div>\r\n                                </TabsContent>\r\n                            </Card>\r\n                        </motion.div>\r\n                    </AnimatePresence>\r\n                </Tabs>\r\n\r\n                {/* Items Table */}\r\n                <div className=\"space-y-4\">\r\n                    <Label className=\"m-0 text-app-fg-muted uppercase tracking-wide text-[10px] opacity-70\">\r\n                        Billing Structure ({items.length} Items)\r\n                    </Label>\r\n                    <div className=\"table-container shadow-premium-hover border-none bg-app-surface/30\">\r\n                        <table className=\"w-full text-left\">\r\n                            <thead>\r\n                                <tr className=\"border-none bg-app-overlay/5\">\r\n                                    <th className=\"py-3 px-4 w-[60px]\"><Label className=\"text-[10px]\">#</Label></th>\r\n                                    <th className=\"py-3 px-4\"><Label className=\"text-[10px]\">Description</Label></th>\r\n                                    <th className=\"py-3 px-4 w-[120px]\"><Label className=\"text-[10px]\">HSN/SAC</Label></th>\r\n                                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label className=\"text-[10px]\">Qty</Label></th>\r\n                                    <th className=\"py-3 px-4 text-right w-[120px]\"><Label className=\"text-[10px]\">Rate</Label></th>\r\n                                    <th className=\"py-3 px-4 text-right w-[140px] bg-blue-50/10 dark:bg-blue-900/10\"><Label className=\"text-blue-600 dark:text-blue-400 text-[10px]\">Taxable</Label></th>\r\n                                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label className=\"text-[10px]\">Recd</Label></th>\r\n                                    <th className=\"py-3 px-4 w-[50px]\"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {groupedItems.map((group, groupIdx) => {\r\n                                    const parent = group[0];\r\n                                    const parentKey = parent.description || `item-${groupIdx}`;\r\n                                    const isExpanded = expandedItems.has(parentKey);\r\n                                    const tQty = group.reduce((sum, i) => sum + (i.quantity || 0), 0);\r\n                                    const tVal = group.reduce((sum, i) => sum + (i.taxable_value || i.amount || 0), 0);\r\n                                    const tRec = group.reduce((sum, i) => sum + (i.received_qty || 0), 0);\r\n\r\n                                    return (\r\n                                        <React.Fragment key={parentKey}>\r\n                                            <tr className={cn(\"transition-colors border-none\", isExpanded ? \"bg-app-overlay/10\" : \"bg-app-overlay/5\")}>\r\n                                                <td className=\"py-3 px-4\"><MonoCode className=\"text-app-accent/60 text-xs\">#S</MonoCode></td>\r\n                                                <td className=\"py-3 px-4\">\r\n                                                    <Body className=\"text-app-fg-muted/90 text-xs font-medium\">{parent.description}</Body>\r\n                                                    {parent.material_code && <SmallText className=\"text-app-fg-muted/40 uppercase tracking-tighter text-[10px]\">Code: {parent.material_code}</SmallText>}\r\n                                                </td>\r\n                                                <td className=\"py-3 px-4\"><SmallText className=\"text-app-fg-muted/40 uppercase tracking-wide text-[10px]\">{parent.hsn_sac || \"-\"}</SmallText></td>\r\n                                                <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-app-fg-muted/70 text-xs\">{tQty}</Accounting></td>\r\n                                                <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-app-fg-muted/40 text-xs\">{parent.rate}</Accounting></td>\r\n                                                <td className=\"py-3 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\"><Accounting className=\"text-blue-600/60 dark:text-blue-400/60 text-xs\">{tVal}</Accounting></td>\r\n                                                <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-app-fg-muted/70 text-xs\">{tRec}</Accounting></td>\r\n                                                <td className=\"py-3 px-4 text-center\">\r\n                                                    <button onClick={() => toggleItem(parentKey)} className=\"p-1.5 rounded-md hover:bg-app-accent/10 hover:text-app-accent transition-all text-app-fg-muted/30\">\r\n                                                        {isExpanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n                                                    </button>\r\n                                                </td>\r\n                                            </tr>\r\n                                            {isExpanded && group.map((item, idx) => (\r\n                                                <tr key={idx} className=\"bg-app-surface border-none last:border-none\">\r\n                                                    <td className=\"py-2 px-0 relative\">\r\n                                                        <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                                                        <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                                                            <span className=\"text-app-accent/30 text-[10px]\">L</span>\r\n                                                            <MonoCode className=\"text-app-fg-muted text-[10px]\">L-{item.po_sl_no}</MonoCode>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td colSpan={2} />\r\n                                                    <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-app-fg-muted text-xs\">{item.quantity}</Accounting></td>\r\n                                                    <td className=\"py-2 px-4 text-right\" />\r\n                                                    <td className=\"py-2 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                                                        <Accounting className=\"text-blue-600 dark:text-blue-400 text-xs\">{item.taxable_value || item.amount}</Accounting>\r\n                                                    </td>\r\n                                                    <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-app-fg-muted text-xs\">{item.received_qty || 0}</Accounting></td>\r\n                                                    <td />\r\n                                                </tr>\r\n                                            ))}\r\n                                        </React.Fragment>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Totals */}\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-4\">\r\n                    <div className=\"lg:col-start-2\">\r\n                        <Card className=\"p-8 bg-app-surface/50 border-none shadow-none elevation-2 backdrop-blur-xl\">\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"flex justify-between items-center pb-2 border-none\">\r\n                                    <Label className=\"uppercase tracking-wide text-app-fg-muted text-[10px]\">Net Taxable Value</Label>\r\n                                    <Accounting className=\"text-lg font-semibold text-app-fg\">{header.total_taxable_value || header.taxable_value}</Accounting>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center text-app-fg-muted\">\r\n                                    <Label className=\"uppercase tracking-wide text-[10px]\">Total GST (CGST + SGST)</Label>\r\n                                    <Accounting className=\"text-sm\">{((header.cgst_total || header.cgst || 0) + (header.sgst_total || header.sgst || 0)).toFixed(2)}</Accounting>\r\n                                </div>\r\n                                <div className=\"pt-6 mt-4 border-none flex justify-between items-end\">\r\n                                    <div className=\"space-y-2\">\r\n                                        <Label className=\"uppercase text-app-accent tracking-wide text-[10px]\">Grand Total</Label>\r\n                                        <SmallText className=\"text-app-fg-muted block max-w-[280px] leading-snug italic lowercase first-letter:uppercase text-xs\">\r\n                                            {amountInWords(header.total_invoice_value || 0)} Only\r\n                                        </SmallText>\r\n                                    </div>\r\n                                    <Accounting className=\"text-3xl text-app-fg tracking-tighter leading-none\">\r\n                                        {header.total_invoice_value || 0}\r\n                                    </Accounting>\r\n                                </div>\r\n                            </div>\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[943,946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[943,946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from \"react\";\r\nimport { api } from \"@/lib/api\";\r\nimport { normalizeId } from \"@/lib/routes\";\r\nimport { notFound } from \"next/navigation\";\r\nimport InvoiceDetailClient from \"./InvoiceDetailClient\";\r\n\r\nexport default async function InvoiceDetailPage({\r\n    params,\r\n}: {\r\n    params: Promise<{ id: string }>;\r\n}) {\r\n    const { id } = await params;\r\n\r\n    // Normalize logic consistent with client-side\r\n    const invoiceId = normalizeId(id);\r\n\r\n    if (!invoiceId) {\r\n        notFound();\r\n    }\r\n\r\n    try {\r\n        const decodedId = decodeURIComponent(invoiceId);\r\n        const data = await api.getInvoiceDetail(decodedId);\r\n\r\n        if (!data || !data.header) {\r\n            // If we get valid JSON but empty header, treat as 404\r\n            // console.error(`[InvoicePage] No header found for ID: ${decodedId}`);\r\n            notFound();\r\n        }\r\n\r\n        return <InvoiceDetailClient data={data} />;\r\n    } catch (error: any) {\r\n        // console.error(`[InvoicePage] Error fetching invoice ${invoiceId}:`, error);\r\n\r\n        // Handle 404 from API\r\n        if (error?.status === 404) {\r\n            notFound();\r\n        }\r\n\r\n        // For other errors, we could throw to trigger error.tsx\r\n        // or return a friendly error state here.\r\n        throw error;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":81},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useDragControls' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dcData' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":38,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isCheckingNumber' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":39,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setInvoice' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":41,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":73,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":73,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2055,2058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2055,2058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5071,5074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5071,5074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":175,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":175,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5244,5247],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5244,5247],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":196,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6176,6179],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6176,6179],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6305,6308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6305,6308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":208,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6467,6470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6467,6470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":255,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":255,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8330,8333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8330,8333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":452,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":452,"endColumn":81}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, Suspense, useMemo } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { cn, amountInWords } from \"@/lib/utils\";\r\nimport { Save, Loader2, AlertCircle, Search, ChevronDown, Check, X, CheckCircle2, Receipt } from \"lucide-react\";\r\nimport { api, type Buyer } from \"@/lib/api\";\r\nimport * as Select from \"@radix-ui/react-select\";\r\nimport { motion, useDragControls, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  H3,\r\n  Label,\r\n  SmallText,\r\n  Body,\r\n  Accounting,\r\n  Button,\r\n  Input,\r\n  Card,\r\n  DocumentTemplate,\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n  DocumentJourney,\r\n  MonoCode,\r\n} from \"@/components/design-system\";\r\nimport { useInvoiceStore } from \"@/store/invoiceStore\";\r\n\r\nconst TAX_RATES = { cgst: 9.0, sgst: 9.0 };\r\n\r\nfunction CreateInvoicePageContent() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const dcIdFromUrl = searchParams?.get(\"dc\") || \"\";\r\n\r\n  const {\r\n    data,\r\n    dcData,\r\n    isCheckingNumber,\r\n    isDuplicateNumber,\r\n    setInvoice,\r\n    setHeader,\r\n    updateHeader,\r\n    setDCData,\r\n    setItems,\r\n    setNumberStatus,\r\n  } = useInvoiceStore();\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [manualDcId, setManualDcId] = useState(dcIdFromUrl);\r\n\r\n  // Multi-Buyer States\r\n  const [buyers, setBuyers] = useState<Buyer[]>([]);\r\n  const [selectedBuyerId, setSelectedBuyerId] = useState<string>(\"\");\r\n  const [showWarning, setShowWarning] = useState(false);\r\n\r\n  const header = data?.header || {\r\n    invoice_number: \"\",\r\n    invoice_date: new Date().toISOString().split(\"T\")[0],\r\n    dc_number: dcIdFromUrl,\r\n    buyer_name: \"\",\r\n    buyer_gstin: \"\",\r\n    buyer_address: \"\",\r\n    buyer_state: \"\",\r\n    buyer_state_code: \"\",\r\n    place_of_supply: \"\",\r\n    total_taxable_value: 0,\r\n    cgst_total: 0,\r\n    sgst_total: 0,\r\n    total_invoice_value: 0,\r\n  } as any;\r\n\r\n  const items = data?.items || [];\r\n\r\n  // Memoized Item Grouping for Parent-Lot hierarchy\r\n  const groupedItems = useMemo(() => {\r\n    return Object.values(items.reduce((acc, item) => {\r\n      // In Invoice, po_sl_no is used for lot reference\r\n      const key = item.description || \"item\";\r\n      if (!acc[key]) acc[key] = [];\r\n      acc[key].push(item);\r\n      return acc;\r\n    }, {} as Record<string, typeof items>));\r\n  }, [items]);\r\n\r\n  useEffect(() => {\r\n    fetchInitialData();\r\n  }, [dcIdFromUrl]);\r\n\r\n  const fetchInitialData = async () => {\r\n    try {\r\n      const buyerList = await api.getBuyers();\r\n      setBuyers(buyerList);\r\n\r\n      const defaultBuyer = buyerList.find((b) => b.is_default);\r\n      if (defaultBuyer) {\r\n        setSelectedBuyerId(defaultBuyer.id.toString());\r\n        applyBuyerToStore(defaultBuyer);\r\n      } else if (buyerList.length > 0) {\r\n        setSelectedBuyerId(buyerList[0].id.toString());\r\n        applyBuyerToStore(buyerList[0]);\r\n      }\r\n\r\n      if (dcIdFromUrl) loadDC(dcIdFromUrl);\r\n    } catch {\r\n      // Failure not critical\r\n    }\r\n  };\r\n\r\n  const applyBuyerToStore = (buyer: Buyer) => {\r\n    const updatedHeader = {\r\n      ...header,\r\n      buyer_name: buyer.name,\r\n      buyer_gstin: buyer.gstin,\r\n      buyer_address: buyer.billing_address,\r\n      buyer_state: buyer.state || \"\",\r\n      buyer_state_code: buyer.state_code || \"\",\r\n      place_of_supply: buyer.place_of_supply,\r\n    };\r\n    setHeader(updatedHeader);\r\n  };\r\n\r\n  const handleBuyerChange = (id: string) => {\r\n    setSelectedBuyerId(id);\r\n    const buyer = buyers.find((b) => b.id.toString() === id);\r\n    if (buyer) applyBuyerToStore(buyer);\r\n  };\r\n\r\n  const checkNumberDuplicate = async (num: string, date: string) => {\r\n    if (!num || num.length < 3) return;\r\n    setNumberStatus(true, false);\r\n    try {\r\n      const res = await api.checkDuplicateNumber(\"Invoice\", num, date);\r\n      setNumberStatus(false, res.exists);\r\n    } catch {\r\n      setNumberStatus(false, false);\r\n    }\r\n  };\r\n\r\n  const loadDC = async (id: string) => {\r\n    if (!id) return;\r\n    setIsLoading(true);\r\n    setError(null);\r\n    try {\r\n      const dcDetail = await api.getDCDetail(id);\r\n\r\n      if (!dcDetail?.header) {\r\n        setError(\"Challan not found.\");\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      setDCData(dcDetail.header);\r\n\r\n      // Fetch latest header from store to avoid stale closure (e.g. buyer info just set)\r\n      const currentHeader = useInvoiceStore.getState().data?.header || header;\r\n\r\n      const newHeader = {\r\n        ...currentHeader,\r\n        dc_number: dcDetail.header.dc_number || \"\",\r\n        dc_date: dcDetail.header.dc_date || \"\",\r\n        buyers_order_no: dcDetail.header.po_number?.toString() || \"\",\r\n        buyers_order_date: dcDetail.header.po_date || \"\",\r\n        vehicle_no: dcDetail.header.vehicle_no || \"\",\r\n        lr_no: dcDetail.header.lr_no || \"\",\r\n        transporter: dcDetail.header.transporter || \"\",\r\n        destination: (dcDetail.header as any).destination || \"\",\r\n      };\r\n      setHeader(newHeader);\r\n\r\n      if (dcDetail.items?.length > 0) {\r\n        const mappedItems = dcDetail.items\r\n          .map((item: any) => {\r\n            const qty = item.dispatched_quantity || item.dispatch_qty || 0;\r\n            const rate = item.po_rate || 0;\r\n            const taxableValue = qty * rate;\r\n            const cgstAmount = (taxableValue * TAX_RATES.cgst) / 100;\r\n            const sgstAmount = (taxableValue * TAX_RATES.sgst) / 100;\r\n\r\n            return {\r\n              po_sl_no: item.lot_no?.toString() || \"1\",\r\n              description: item.description || item.material_description || \"\",\r\n              hsn_sac: item.hsn_code || \"\",\r\n              quantity: qty,\r\n              unit: item.unit || \"NOS\",\r\n              rate: rate,\r\n              taxable_value: taxableValue,\r\n              cgst_amount: cgstAmount,\r\n              sgst_amount: sgstAmount,\r\n              total_amount: taxableValue + cgstAmount + sgstAmount,\r\n              received_qty: item.received_quantity || 0,\r\n            };\r\n          })\r\n          .filter((item: any) => item.quantity > 0);\r\n\r\n        setItems(mappedItems);\r\n        calculateTotals(mappedItems);\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to load DC\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateTotals = (currentItems: any[]) => {\r\n    const taxable = currentItems.reduce((sum, item) => sum + (item.taxable_value || 0), 0);\r\n    const cgst = currentItems.reduce((sum, item) => sum + (item.cgst_amount || 0), 0);\r\n    const sgst = currentItems.reduce((sum, item) => sum + (item.sgst_amount || 0), 0);\r\n    const total = taxable + cgst + sgst;\r\n\r\n    updateHeader(\"total_taxable_value\", taxable);\r\n    updateHeader(\"cgst_total\", cgst);\r\n    updateHeader(\"sgst_total\", sgst);\r\n    updateHeader(\"total_invoice_value\", total);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setShowWarning(false);\r\n    setIsSaving(true);\r\n    setError(null);\r\n    try {\r\n      const payload = {\r\n        invoice_number: header.invoice_number,\r\n        invoice_date: header.invoice_date,\r\n        dc_number: header.dc_number,\r\n        buyer_name: header.buyer_name,\r\n        buyer_address: header.buyer_address,\r\n        buyer_gstin: header.buyer_gstin,\r\n        buyer_state: header.buyer_state,\r\n        buyer_state_code: header.buyer_state_code,\r\n        place_of_supply: header.place_of_supply,\r\n        buyers_order_no: header.buyers_order_no,\r\n        buyers_order_date: header.buyers_order_date,\r\n        vehicle_no: header.vehicle_no,\r\n        lr_no: header.lr_no,\r\n        transporter: header.transporter,\r\n        destination: header.destination,\r\n        terms_of_delivery: header.terms_of_delivery,\r\n        gemc_number: header.gemc_number,\r\n        gemc_date: header.gemc_date,\r\n        mode_of_payment: header.mode_of_payment,\r\n        payment_terms: header.payment_terms || \"45 Days\",\r\n        despatch_doc_no: header.despatch_doc_no,\r\n        srv_no: header.srv_no,\r\n        srv_date: header.srv_date,\r\n        remarks: header.remarks,\r\n        items: items,\r\n      };\r\n\r\n      await api.createInvoice(payload);\r\n      router.push(`/invoice/${header.invoice_number}`);\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to create invoice\");\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  const topActions = (\r\n    <div className=\"flex items-center gap-2\">\r\n      <Button variant=\"secondary\" onClick={() => router.back()} disabled={isSaving}>\r\n        Cancel\r\n      </Button>\r\n      <Button\r\n        variant=\"primary\"\r\n        onClick={() => setShowWarning(true)}\r\n        disabled={isSaving || items.length === 0 || isDuplicateNumber || !header.invoice_number}\r\n      >\r\n        {isSaving ? <Loader2 size={16} className=\"animate-spin\" /> : <Save size={16} />}\r\n        {isSaving ? \"Saving...\" : \"Generate Invoice\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"Create GST Invoice\"\r\n      description=\"Generate billing documentation from DC\"\r\n      actions={topActions}\r\n      onBack={() => router.back()}\r\n      icon={<Receipt size={20} className=\"text-app-accent\" />}\r\n      iconLayoutId=\"create-invoice-icon\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        <DocumentJourney currentStage=\"Invoice\" className=\"mb-2\" />\r\n\r\n        {error && (\r\n          <Card className=\"p-4 bg-app-status-error/10 border-none\">\r\n            <div className=\"flex items-center gap-2 text-app-status-error\">\r\n              <AlertCircle size={16} />\r\n              <SmallText className=\"text-app-status-error\">{error}</SmallText>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* DC Selection */}\r\n        {!dcIdFromUrl && (\r\n          <Card className=\"p-6\">\r\n            <Label className=\"mb-2 block\">Delivery Challan Reference</Label>\r\n            <div className=\"flex gap-3 mt-1\">\r\n              <div className=\"flex-1\">\r\n                <Input\r\n                  value={manualDcId}\r\n                  onChange={(e) => setManualDcId(e.target.value)}\r\n                  placeholder=\"Enter DC number\"\r\n                  className=\"text-app-fg text-lg\"\r\n                />\r\n              </div>\r\n              <Button variant=\"secondary\" onClick={() => loadDC(manualDcId)} disabled={!manualDcId || isLoading}>\r\n                {isLoading ? <Loader2 size={16} className=\"animate-spin mr-2\" /> : <Search size={16} className=\"mr-2\" />}\r\n                {isLoading ? \"Loading...\" : \"Load DC\"}\r\n              </Button>\r\n            </div>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Info Tabs */}\r\n        <Tabs defaultValue=\"buyer\" className=\"w-full\">\r\n          <TabsList className=\"mb-4 bg-app-overlay/5 p-1 rounded-xl inline-flex border-none shadow-none\">\r\n            <TabsTrigger value=\"buyer\">Buyer Info</TabsTrigger>\r\n            <TabsTrigger value=\"references\">References</TabsTrigger>\r\n            <TabsTrigger value=\"logistics\">Logistics</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 5 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -5 }}\r\n              transition={{ duration: 0.15 }}\r\n            >\r\n              <Card className=\"p-6 mt-0 border-none elevation-2 bg-app-surface/50 backdrop-blur-md\">\r\n                <TabsContent value=\"buyer\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                    <div className=\"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 border-r border-app-border/10 pr-6\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label>INVOICE NUMBER</Label>\r\n                        <Input\r\n                          value={header.invoice_number}\r\n                          onChange={(e) => {\r\n                            const val = e.target.value;\r\n                            updateHeader(\"invoice_number\", val);\r\n                            checkNumberDuplicate(val, header.invoice_date);\r\n                          }}\r\n                          className={cn(\"tabular-nums text-lg\", isDuplicateNumber ? \"border-app-status-error ring-app-status-error/10\" : \"\")}\r\n                          placeholder=\"INV/001/24-25\"\r\n                        />\r\n                        {isDuplicateNumber && <SmallText className=\"text-app-status-error\">This number already exists</SmallText>}\r\n                      </div>\r\n                      <div className=\"space-y-2\">\r\n                        <Label>INVOICE DATE</Label>\r\n                        <Input type=\"date\" value={header.invoice_date} onChange={(e) => updateHeader(\"invoice_date\", e.target.value)} />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"lg:col-span-1\">\r\n                      <Label className=\"text-app-accent mb-3 block uppercase tracking-wide\">Billed To</Label>\r\n                      <Select.Root value={selectedBuyerId} onValueChange={handleBuyerChange}>\r\n                        <Select.Trigger className=\"flex items-center justify-between w-full px-4 py-2 bg-app-surface border-none rounded-xl text-sm shadow-none mb-4 elevation-1 focus:elevation-2\">\r\n                          <Select.Value placeholder=\"Select Buyer\" />\r\n                          <Select.Icon><ChevronDown size={14} /></Select.Icon>\r\n                        </Select.Trigger>\r\n                        <Select.Portal>\r\n                          <Select.Content className=\"overflow-hidden bg-app-surface rounded-2xl elevation-3 z-50\">\r\n                            <Select.Viewport className=\"p-1\">\r\n                              {buyers.map((b) => (\r\n                                <Select.Item key={b.id} value={b.id.toString()} className=\"flex items-center px-8 py-3 text-sm text-app-fg-muted rounded-xl outline-none hover:bg-app-accent/10 hover:text-app-accent cursor-pointer\">\r\n                                  <Select.ItemText>{b.name}</Select.ItemText>\r\n                                </Select.Item>\r\n                              ))}\r\n                            </Select.Viewport>\r\n                          </Select.Content>\r\n                        </Select.Portal>\r\n                      </Select.Root>\r\n                      <div className=\"p-4 rounded-xl bg-app-overlay/5 border-none\">\r\n                        <H3 className=\"text-app-fg text-sm mb-1\">{header.buyer_name || \"---\"}</H3>\r\n                        <Body className=\"text-app-fg-muted leading-relaxed\">{header.buyer_address || \"---\"}</Body>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"references\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                    <div className=\"space-y-1.5\"><Label>Order Number</Label><Input value={header.buyers_order_no || \"\"} onChange={(e) => updateHeader(\"buyers_order_no\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>Order Date</Label><Input type=\"date\" value={header.buyers_order_date || \"\"} onChange={(e) => updateHeader(\"buyers_order_date\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>GEMC No</Label><Input value={header.gemc_number || \"\"} onChange={(e) => updateHeader(\"gemc_number\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>SRV No</Label><Input value={header.srv_no || \"\"} onChange={(e) => updateHeader(\"srv_no\", e.target.value)} /></div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"logistics\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                    <div className=\"space-y-1.5\"><Label>Vehicle No</Label><Input value={header.vehicle_no || \"\"} onChange={(e) => updateHeader(\"vehicle_no\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>LR Number</Label><Input value={header.lr_no || \"\"} onChange={(e) => updateHeader(\"lr_no\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>Transporter</Label><Input value={header.transporter || \"\"} onChange={(e) => updateHeader(\"transporter\", e.target.value)} /></div>\r\n                    <div className=\"space-y-1.5\"><Label>Payment Terms</Label><Input value={header.payment_terms || \"45 Days\"} onChange={(e) => updateHeader(\"payment_terms\", e.target.value)} /></div>\r\n                  </div>\r\n                </TabsContent>\r\n              </Card>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n        </Tabs>\r\n\r\n        {/* Items Table */}\r\n        {items.length > 0 && (\r\n          <div className=\"space-y-4\">\r\n            <Label className=\"m-0 text-app-fg-muted uppercase tracking-wide\">\r\n              Billing Structure ({items.length} Items)\r\n            </Label>\r\n            <div className=\"table-container border-none shadow-none bg-app-surface/30\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-none bg-app-overlay/10\">\r\n                    <th className=\"py-3 px-4 text-left w-[60px]\"><Label>Lot</Label></th>\r\n                    <th className=\"py-3 px-4 text-left\"><Label>Description</Label></th>\r\n                    <th className=\"py-3 px-4 text-left w-[120px]\"><Label>HSN/SAC</Label></th>\r\n                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label>Qty</Label></th>\r\n                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label>Rate</Label></th>\r\n                    <th className=\"py-3 px-4 text-right w-[120px] bg-blue-50/10 dark:bg-blue-900/10\"><Label className=\"text-blue-600 dark:text-blue-400\">Taxable</Label></th>\r\n                    <th className=\"py-3 px-4 text-right w-[100px]\"><Label>Recd</Label></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {groupedItems.map((group, groupIdx) => {\r\n                    const parent = group[0];\r\n                    const tQty = group.reduce((sum, i) => sum + (i.quantity || 0), 0);\r\n                    const tVal = group.reduce((sum, i) => sum + (i.taxable_value || 0), 0);\r\n                    const tRec = group.reduce((sum, i) => sum + (i.received_qty || 0), 0);\r\n\r\n                    return (\r\n                      <React.Fragment key={(parent.description || \"\") + groupIdx}>\r\n                        {/* Summary Header */}\r\n                        <tr className=\"bg-app-overlay/10 border-none\">\r\n                          <td className=\"py-3 px-4\"><MonoCode className=\"text-app-accent/60\">#S</MonoCode></td>\r\n                          <td className=\"py-3 px-4\"><Body className=\"text-xs text-app-fg-muted/80\">{parent.description}</Body></td>\r\n                          <td className=\"py-3 px-4\"><SmallText className=\"text-app-fg-muted/40 uppercase tracking-wide\">{parent.hsn_sac || \"-\"}</SmallText></td>\r\n                          <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-xs text-app-fg-muted/60\">{tQty}</Accounting></td>\r\n                          <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-xs text-app-fg-muted/40\">{parent.rate}</Accounting></td>\r\n                          <td className=\"py-3 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\"><Accounting className=\"text-xs text-blue-600/60 dark:text-blue-400/60\">{tVal}</Accounting></td>\r\n                          <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-xs text-app-fg-muted/60\">{tRec}</Accounting></td>\r\n                        </tr>\r\n                        {/* Lot Rows */}\r\n                        {group.map((item, idx) => (\r\n                          <tr key={idx} className=\"bg-app-surface border-none transition-colors\">\r\n                            <td className=\"py-2 px-0 relative\">\r\n                              <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                              <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                                <span className=\"text-app-accent/30 text-[10px]\">L</span>\r\n                                <MonoCode className=\"text-app-fg-muted\">L-{item.po_sl_no}</MonoCode>\r\n                              </div>\r\n                            </td>\r\n                            <td colSpan={2} />\r\n                            <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-app-fg-muted\">{item.quantity}</Accounting></td>\r\n                            <td className=\"py-2 px-4 text-right\" />\r\n                            <td className=\"py-2 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\">\r\n                              <Accounting className=\"text-blue-600 dark:text-blue-400\">{item.taxable_value}</Accounting>\r\n                            </td>\r\n                            <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-app-fg-muted\">{item.received_qty}</Accounting></td>\r\n                          </tr>\r\n                        ))}\r\n                      </React.Fragment>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Totals Card */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-4\">\r\n              <div className=\"lg:col-start-2\">\r\n                <Card className=\"p-8 bg-app-surface/50 border-none shadow-premium-hover backdrop-blur-xl\">\r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"flex justify-between items-center pb-2 border-none\">\r\n                      <Label className=\"uppercase tracking-wide text-app-fg-muted\">Net Taxable Value</Label>\r\n                      <Accounting className=\"text-xl text-app-fg\">{header.total_taxable_value}</Accounting>\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center text-app-fg-muted\">\r\n                      <Label className=\"uppercase tracking-wide\">CGST (9%) + SGST (9%)</Label>\r\n                      <Accounting className=\"text-sm\">{(header.cgst_total + header.sgst_total).toFixed(2)}</Accounting>\r\n                    </div>\r\n                    <div className=\"pt-6 mt-4 border-none flex justify-between items-end\">\r\n                      <div className=\"space-y-2\">\r\n                        <Label className=\"uppercase text-app-accent tracking-wide\">Total Invoice Value</Label>\r\n                        <SmallText className=\"text-app-fg-muted block max-w-[280px] leading-snug italic lowercase first-letter:uppercase\">\r\n                          {amountInWords(header.total_invoice_value)} Only\r\n                        </SmallText>\r\n                      </div>\r\n                      <Accounting className=\"text-4xl text-app-fg tracking-tighter leading-none\">\r\n                        {header.total_invoice_value}\r\n                      </Accounting>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Verification Modal */}\r\n      <AnimatePresence>\r\n        {showWarning && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-app-overlay/40 backdrop-blur-sm\"\r\n            onClick={() => setShowWarning(false)}\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.95, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.95, opacity: 0 }}\r\n              onClick={(e) => e.stopPropagation()}\r\n              className=\"relative w-full max-w-md\"\r\n            >\r\n              <Card className=\"p-0 overflow-hidden border-none elevation-3 bg-app-surface\">\r\n                <div className=\"p-8 pb-6 bg-gradient-to-br from-app-status-error/5 to-app-status-warning/5 border-none flex items-center gap-4\">\r\n                  <div className=\"w-12 h-12 rounded-2xl bg-app-status-error flex items-center justify-center shadow-lg shadow-app-status-error/20\">\r\n                    <AlertCircle className=\"w-6 h-6 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <H3 className=\"text-app-fg leading-none\">Generate Invoice?</H3>\r\n                    <SmallText className=\"text-app-fg-muted mt-1 uppercase tracking-wide\">Permanent Financial Action</SmallText>\r\n                  </div>\r\n                </div>\r\n                <div className=\"p-8\">\r\n                  <div className=\"p-4 rounded-2xl bg-app-status-error/5 border-none mb-6\">\r\n                    <Body className=\"text-sm text-app-status-error italic\">\r\n                      Warning: Generating this invoice will lock the associated DC and cannot be undone.\r\n                    </Body>\r\n                  </div>\r\n                  <div className=\"flex gap-3\">\r\n                    <Button variant=\"secondary\" className=\"flex-1\" onClick={() => setShowWarning(false)}>Cancel</Button>\r\n                    <Button variant=\"primary\" className=\"flex-1\" onClick={handleSave}>Confirm</Button>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\nexport default function CreateInvoicePage() {\r\n  return (\r\n    <Suspense fallback={<div className=\"h-screen w-full bg-app-bg animate-pulse\" />}>\r\n      <CreateInvoicePageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\invoice\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Metadata } from \"next\";\r\nimport \"./globals.css\";\r\nimport { SidebarNav as Sidebar } from \"@/components/design-system/organisms/SidebarNav\";\r\nimport { UploadProvider } from \"@/components/providers/UploadContext\";\r\nimport BatchUploadCard from \"@/components/global/BatchUploadCard\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { ThemeToggle } from \"@/components/ThemeToggle\";\r\nimport { Providers } from \"./providers\";\r\nimport { GlobalSearch } from \"@/components/design-system/organisms\";\r\n\r\nexport const metadata: Metadata = {\r\n    title: \"SenstoSales\",\r\n    description: \"Enterprise Procurement Management System\",\r\n};\r\n\r\nexport default function RootLayout({\r\n    children,\r\n}: Readonly<{\r\n    children: React.ReactNode;\r\n}>) {\r\n    return (\r\n        <html lang=\"en\" suppressHydrationWarning>\r\n            <body className=\"font-sans antialiased text-app-fg\">\r\n                <Providers>\r\n                    <UploadProvider>\r\n                        {/* \r\n                          Sonoma Wallpaper Background\r\n                          - Uses a high-quality abstract gradient or image simulating the Sonoma look\r\n                          - Serves as the backdrop for all glassmorphic elements\r\n                        */}\r\n                        <div className=\"flex h-screen bg-transparent overflow-hidden relative\">\r\n                            {/* Standardized Non-collapsible Sidebar */}\r\n                            <Sidebar />\r\n\r\n                            <div className=\"flex-1 flex flex-col relative overflow-hidden bg-transparent\">\r\n                                {/* Tahoe Header */}\r\n                                <header className=\"h-16 flex items-center justify-between px-8 py-3 z-10 header-glass\">\r\n                                    {/* Master Search Bar */}\r\n                                    <div className=\"flex-1 max-w-xl\">\r\n                                        <GlobalSearch />\r\n                                    </div>\r\n\r\n                                    {/* Right Header: Contextual Actions */}\r\n                                    <div className=\"flex items-center gap-5 ml-8\">\r\n                                        <ThemeToggle />\r\n                                        <div id=\"header-action-portal\" />\r\n                                    </div>\r\n                                </header>\r\n\r\n                                {/* Main Content Area */}\r\n                                <main\r\n                                    className=\"flex-1 overflow-y-auto px-8 pt-0 pb-6 scroll-smooth no-scrollbar\"\r\n                                >\r\n                                    <div className=\"mx-auto max-w-[1400px] w-full relative\">\r\n                                        {children}\r\n                                    </div>\r\n                                </main>\r\n                            </div>\r\n                        </div>\r\n                        <BatchUploadCard />\r\n                    </UploadProvider>\r\n                </Providers>\r\n            </body>\r\n        </html>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\organisms\\RevenueMomentum.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CartesianGrid' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Cell' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":16},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":16,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":16,"endColumn":76},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":17,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":17,"endColumn":83},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[487,490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[487,490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":43,"column":36,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":43,"endColumn":113},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4895,4898],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4895,4898],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    ResponsiveContainer,\r\n    Cell,\r\n} from \"recharts\";\r\nimport { TrendingUp } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Flex, Stack, Box } from \"@/components/design-system/atoms/Layout\";\r\nimport { Body, SmallText, H3 } from \"@/components/design-system/atoms/Typography\";\r\n\r\ninterface RevenueMomentumProps {\r\n    data: any[];\r\n    loading?: boolean;\r\n}\r\n\r\nexport function RevenueMomentum({ data, loading }: RevenueMomentumProps) {\r\n    if (loading) {\r\n        return (\r\n            <Box className=\"h-[400px] w-full rounded-3xl bg-app-surface/40 animate-pulse\" />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"tahoe-glass-card p-6 h-full flex flex-col\">\r\n            <Flex\r\n                align=\"center\"\r\n                justify=\"between\"\r\n                className=\"mb-8\"\r\n            >\r\n                <Stack gap={1}>\r\n                    <Flex align=\"center\" gap={2}>\r\n                        <div className=\"p-1.5 bg-system-blue/10 rounded-lg text-system-blue\">\r\n                            <TrendingUp size={14} />\r\n                        </div>\r\n                        <SmallText className=\"text-system-blue uppercase tracking-[0.2em] font-bold text-[10px]\">\r\n                            Revenue Analytics\r\n                        </SmallText>\r\n                    </Flex>\r\n                    <H3 className=\"text-h3 font-black tracking-tight uppercase text-vibrancy\">Revenue Momentum</H3>\r\n                </Stack>\r\n                <Flex align=\"center\" gap={2} className=\"px-3 py-1.5 bg-white/20 dark:bg-black/20 rounded-full shadow-inner border border-white/10 backdrop-blur-md\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-system-green animate-pulse shadow-[0_0_8px_rgba(var(--system-green-rgb),0.8)]\" />\r\n                    <SmallText className=\"font-bold text-text-secondary\">Live Forecast</SmallText>\r\n                </Flex>\r\n            </Flex>\r\n\r\n            <div className=\"flex-1 min-h-0 w-full\">\r\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                    <BarChart data={data} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                        <defs>\r\n                            <linearGradient id=\"barGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                <stop offset=\"0%\" stopColor=\"var(--system-blue)\" stopOpacity={0.8} />\r\n                                <stop offset=\"100%\" stopColor=\"var(--system-blue)\" stopOpacity={0.2} />\r\n                            </linearGradient>\r\n                        </defs>\r\n                        <XAxis\r\n                            dataKey=\"name\"\r\n                            axisLine={false}\r\n                            tickLine={false}\r\n                            tick={{\r\n                                fontSize: 10,\r\n                                fontWeight: 700,\r\n                                fill: \"var(--text-tertiary)\",\r\n                            }}\r\n                            dy={10}\r\n                        />\r\n                        <YAxis\r\n                            axisLine={false}\r\n                            tickLine={false}\r\n                            tick={{\r\n                                fontSize: 10,\r\n                                fontWeight: 700,\r\n                                fill: \"var(--text-tertiary)\",\r\n                            }}\r\n                            tickFormatter={(value) => {\r\n                                if (value === 0) return \"0\";\r\n                                const crValue = value / 10000000;\r\n                                return `${crValue.toFixed(1)}Cr`;\r\n                            }}\r\n                        />\r\n                        <Tooltip\r\n                            cursor={{ fill: 'rgba(255,255,255,0.05)', radius: 8 }}\r\n                            contentStyle={{\r\n                                borderRadius: \"16px\",\r\n                                border: \"1px solid rgba(255,255,255,0.2)\",\r\n                                boxShadow: \"0 8px 32px rgba(0,0,0,0.1)\",\r\n                                background: \"rgba(255,255,255,0.4)\",\r\n                                backdropFilter: \"blur(25px) saturate(180%)\",\r\n                                padding: \"12px\",\r\n                                color: \"var(--text-primary)\"\r\n                            }}\r\n                            itemStyle={{ color: \"var(--text-primary)\" }}\r\n                            labelStyle={{\r\n                                fontWeight: 800,\r\n                                color: \"var(--text-secondary)\",\r\n                                fontSize: \"12px\",\r\n                                marginBottom: \"4px\",\r\n                            }}\r\n                            formatter={(value: any) => [\r\n                                `${(value / 10000000).toFixed(2)} Cr`,\r\n                                \"Revenue\"\r\n                            ]}\r\n                        />\r\n                        <Bar\r\n                            dataKey=\"value\"\r\n                            radius={[6, 6, 6, 6]}\r\n                            barSize={40}\r\n                            animationDuration={1500}\r\n                            fill=\"url(#barGradient)\"\r\n                        />\r\n                    </BarChart>\r\n                </ResponsiveContainer>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po-notes\\PONoteListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Stack' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Flex' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useCallback } from \"react\";\r\nimport { Quote, Plus, FileText } from \"lucide-react\";\r\nimport { api, PONote } from \"@/lib/api\";\r\nimport {\r\n    Stack,\r\n    Grid,\r\n    Flex,\r\n    Button,\r\n    Label,\r\n    H3,\r\n    Body,\r\n    Box,\r\n    Card,\r\n} from \"@/components/design-system\";\r\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\r\nimport { PONoteCard } from \"./organisms/PONoteCard\";\r\nimport { PONoteDialog } from \"./organisms/PONoteDialog\";\r\nimport { PONoteDeleteDialog } from \"./organisms/PONoteDeleteDialog\";\r\n\r\ninterface PONoteListClientProps {\r\n    initialTemplates: PONote[];\r\n}\r\n\r\nexport function PONoteListClient({ initialTemplates }: PONoteListClientProps) {\r\n    const [templates, setTemplates] = useState<PONote[]>(initialTemplates);\r\n    const [loading, setLoading] = useState(false);\r\n    const [showForm, setShowForm] = useState(false);\r\n    const [editingId, setEditingId] = useState<number | null>(null);\r\n    const [deleteId, setDeleteId] = useState<number | null>(null);\r\n    const [formData, setFormData] = useState({ title: \"\", content: \"\" });\r\n\r\n    const loadTemplates = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const data = await api.getPONotes();\r\n            setTemplates(data || []);\r\n        } catch (err) {\r\n            console.error(\"Failed to load templates:\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleSubmit = useCallback(\r\n        async (e: React.FormEvent) => {\r\n            e.preventDefault();\r\n            try {\r\n                if (editingId) {\r\n                    await api.updatePONote(editingId.toString(), formData);\r\n                } else {\r\n                    await api.createPONote(formData);\r\n                }\r\n                setFormData({ title: \"\", content: \"\" });\r\n                setEditingId(null);\r\n                setShowForm(false);\r\n                loadTemplates();\r\n            } catch (err) {\r\n                console.error(\"Failed to save template:\", err);\r\n            }\r\n        },\r\n        [editingId, formData, loadTemplates]\r\n    );\r\n\r\n    const handleEdit = useCallback((template: PONote) => {\r\n        setFormData({ title: template.title, content: template.content });\r\n        setEditingId(template.id);\r\n        setShowForm(true);\r\n    }, []);\r\n\r\n    const handleDeleteConfirm = useCallback(async () => {\r\n        if (!deleteId) return;\r\n        try {\r\n            await api.deletePONote(deleteId.toString());\r\n            loadTemplates();\r\n            setDeleteId(null);\r\n        } catch (err) {\r\n            console.error(\"Failed to delete template:\", err);\r\n        }\r\n    }, [deleteId, loadTemplates]);\r\n\r\n    const handleCreate = () => {\r\n        setFormData({ title: \"\", content: \"\" });\r\n        setEditingId(null);\r\n        setShowForm(true);\r\n    };\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title=\"Policy & Terms\"\r\n            description=\"Configure reusable clauses, standard T&Cs, and document policies for POs & DCs.\"\r\n            icon={<Quote className=\"w-5 h-5\" />}\r\n            actions={\r\n                <Button\r\n                    onClick={handleCreate}\r\n                    disabled={loading}\r\n                    size=\"compact\"\r\n                    className=\"h-9 px-6 active-glow\"\r\n                >\r\n                    <Plus className=\"w-4 h-4 mr-2\" />\r\n                    Provision Clause\r\n                </Button>\r\n            }\r\n        >\r\n            <Box className=\"mt-2\">\r\n                {templates.length > 0 ? (\r\n                    <Grid\r\n                        cols={1}\r\n                        className=\"sm:grid-cols-2 xl:grid-cols-3\"\r\n                        gap={4}\r\n                    >\r\n                        {templates.map((template) => (\r\n                            <PONoteCard\r\n                                key={template.id}\r\n                                template={template}\r\n                                onEdit={handleEdit}\r\n                                onDelete={setDeleteId}\r\n                            />\r\n                        ))}\r\n                    </Grid>\r\n                ) : (\r\n                    <Card className=\"p-16 flex flex-col items-center justify-center text-center bg-app-surface/30 border-dashed border-2 border-app-border/30\">\r\n                        <div className=\"w-16 h-16 rounded-full bg-app-overlay/5 flex items-center justify-center text-app-fg-muted mb-4\">\r\n                            <FileText className=\"w-8 h-8 opacity-20\" />\r\n                        </div>\r\n                        <H3 className=\"text-lg mb-2\">Null Policy Matrix</H3>\r\n                        <Body className=\"text-app-fg-muted mb-6 max-w-sm\">\r\n                            No standardized clauses detected. Provision a new term to accelerate document lifecycle.\r\n                        </Body>\r\n                        <Button\r\n                            variant=\"primary\"\r\n                            onClick={handleCreate}\r\n                            className=\"active-glow\"\r\n                        >\r\n                            Start Provisioning\r\n                        </Button>\r\n                    </Card>\r\n                )}\r\n            </Box>\r\n\r\n            <PONoteDialog\r\n                isOpen={showForm}\r\n                onClose={() => setShowForm(false)}\r\n                title={editingId ? \"Update Template\" : \"New Template\"}\r\n                formData={formData}\r\n                setFormData={setFormData}\r\n                onSubmit={handleSubmit}\r\n                isEditing={!!editingId}\r\n            />\r\n\r\n            <PONoteDeleteDialog\r\n                isOpen={!!deleteId}\r\n                onClose={() => setDeleteId(null)}\r\n                onConfirm={handleDeleteConfirm}\r\n            />\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po-notes\\organisms\\PONoteCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckSquare' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":12},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":42,"column":39,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":42,"endColumn":127},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":71,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":71,"endColumn":168},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":83,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":83,"endColumn":120},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":87,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":87,"endColumn":164}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n    Edit2,\r\n    Trash2,\r\n    FileText,\r\n    CheckSquare,\r\n    Clock,\r\n    Hash\r\n} from \"lucide-react\";\r\nimport { PONote } from \"@/lib/api\";\r\nimport { Card, Button, Badge, H3, SmallText, Flex, Stack, Box } from \"@/components/design-system\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface PONoteCardProps {\r\n    template: PONote;\r\n    onEdit: (template: PONote) => void;\r\n    onDelete: (id: number) => void;\r\n}\r\n\r\nexport const PONoteCard = ({ template, onEdit, onDelete }: PONoteCardProps) => {\r\n    return (\r\n        <Card\r\n            className=\"group relative flex flex-col h-full bg-app-surface/50 border-none elevation-2 hover:elevation-3 transition-all duration-500 overflow-hidden\"\r\n        >\r\n            {/* Background Decorative Element */}\r\n            <div className=\"absolute -top-12 -right-12 w-32 h-32 bg-app-accent/5 rounded-full blur-3xl group-hover:bg-app-accent/10 transition-colors\" />\r\n\r\n            <div className=\"p-5 flex-1 flex flex-col relative z-10\">\r\n                <Flex justify=\"between\" align=\"start\" className=\"mb-5\">\r\n                    <Flex align=\"center\" gap={3} className=\"flex-1\">\r\n                        <div className=\"w-10 h-10 bg-app-overlay/10 rounded-2xl flex items-center justify-center shrink-0 border-none group-hover:bg-app-accent/10 transition-all duration-300 elevation-1\">\r\n                            <FileText className=\"w-5 h-5 text-app-fg-muted group-hover:text-app-accent transition-colors\" />\r\n                        </div>\r\n                        <Stack gap={1}>\r\n                            <H3 className=\"text-sm font-black tracking-tight text-app-fg line-clamp-1 group-hover:text-app-accent transition-colors\">\r\n                                {template.title}\r\n                            </H3>\r\n                            <Flex align=\"center\" gap={1.5}>\r\n                                <Hash className=\"w-2.5 h-2.5 text-app-fg-muted\" />\r\n                                <span className=\"text-[10px] font-bold text-app-fg-muted uppercase tracking-widest opacity-50\">\r\n                                    TERM-{template.id.toString().padStart(4, '0')}\r\n                                </span>\r\n                            </Flex>\r\n                        </Stack>\r\n                    </Flex>\r\n                    <Flex gap={1} className=\"opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => onEdit(template)}\r\n                            className=\"w-8 h-8 rounded-lg hover:bg-app-overlay/10\"\r\n                            title=\"Edit Provision\"\r\n                        >\r\n                            <Edit2 size={12} className=\"text-app-fg-muted hover:text-app-accent transition-colors\" />\r\n                        </Button>\r\n                        <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={() => onDelete(template.id)}\r\n                            className=\"w-8 h-8 rounded-lg hover:bg-app-status-error/10 text-app-fg-muted hover:text-app-status-error transition-colors\"\r\n                            title=\"Purge Clause\"\r\n                        >\r\n                            <Trash2 size={12} />\r\n                        </Button>\r\n                    </Flex>\r\n                </Flex>\r\n\r\n                <Box className=\"flex-1 bg-app-overlay/5 rounded-xl p-4 border-none group-hover:bg-app-overlay/10 transition-all\">\r\n                    <p className=\"text-[12px] text-app-fg-muted font-medium leading-relaxed whitespace-pre-wrap line-clamp-5 group-hover:text-app-fg transition-colors\">\r\n                        {template.content}\r\n                    </p>\r\n                </Box>\r\n\r\n                <Flex\r\n                    align=\"center\"\r\n                    justify=\"between\"\r\n                    className=\"mt-5 pt-4 border-t border-app-border/20\"\r\n                >\r\n                    <Flex align=\"center\" gap={2}>\r\n                        <Clock className=\"w-3 h-3 text-app-fg-muted opacity-40\" />\r\n                        <span className=\"text-[9px] font-black text-app-fg-muted uppercase tracking-[0.2em] opacity-40\">\r\n                            v.{new Date(template.updated_at).getFullYear()}.{new Date(template.updated_at).getMonth() + 1}\r\n                        </span>\r\n                    </Flex>\r\n                    <Badge variant=\"success\" className=\"px-2 py-0.5 rounded-lg text-[9px] font-black uppercase tracking-widest border-none bg-app-status-success/5\">\r\n                        Operational\r\n                    </Badge>\r\n                </Flex>\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po-notes\\organisms\\PONoteDeleteDialog.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":30,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":30,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":37,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":37,"endColumn":145},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":51,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":51,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":56,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":56,"endColumn":76}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Button, Body, H3, Flex, Stack } from \"@/components/design-system\";\r\nimport { Dialog } from \"@/components/design-system/molecules/Dialog\";\r\nimport { AlertTriangle } from \"lucide-react\";\r\n\r\ninterface PONoteDeleteDialogProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onConfirm: () => void;\r\n}\r\n\r\nexport const PONoteDeleteDialog = ({\r\n    isOpen,\r\n    onClose,\r\n    onConfirm,\r\n}: PONoteDeleteDialogProps) => {\r\n    return (\r\n        <Dialog\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            title=\"Termination Protocol\"\r\n            maxWidth=\"max-w-md\"\r\n            footer={\r\n                <Flex gap={3} className=\"w-full\">\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        onClick={onClose}\r\n                        className=\"flex-1 font-black text-[10px] uppercase tracking-widest h-10 rounded-xl\"\r\n                    >\r\n                        Abort\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"destructive\"\r\n                        onClick={onConfirm}\r\n                        className=\"flex-1 font-black text-[10px] uppercase tracking-widest h-10 rounded-xl shadow-md shadow-app-status-error/20\"\r\n                    >\r\n                        Purge Clause\r\n                    </Button>\r\n                </Flex>\r\n            }\r\n        >\r\n            <Stack gap={4} className=\"py-2\">\r\n                <Flex align=\"center\" gap={4} className=\"p-4 bg-app-status-error/5 border-none rounded-2xl elevation-1\">\r\n                    <div className=\"w-12 h-12 rounded-full bg-app-status-error/10 flex items-center justify-center text-app-status-error shrink-0\">\r\n                        <AlertTriangle className=\"w-6 h-6\" />\r\n                    </div>\r\n                    <Stack gap={1}>\r\n                        <H3 className=\"text-sm text-app-status-error\">Irreversible Action</H3>\r\n                        <p className=\"text-[11px] font-medium text-app-fg opacity-80 leading-snug\">\r\n                            This clause will be permanently purged from the policy matrix. Existing documents will retain their snapshot, but new provisions will be restricted.\r\n                        </p>\r\n                    </Stack>\r\n                </Flex>\r\n                <Body className=\"text-app-fg-muted italic text-[13px] px-1\">\r\n                    Confirmed termination will immediately restrict this preset from the global provision engine. Are you sure you wish to proceed?\r\n                </Body>\r\n            </Stack>\r\n        </Dialog>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po-notes\\organisms\\PONoteDialog.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H3' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":12},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":47,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":47,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":55,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":55,"endColumn":122},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":67,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":67,"endColumn":95},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":73,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":73,"endColumn":104},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":87,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":87,"endColumn":104}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n    Label,\r\n    Button,\r\n    Input,\r\n    Stack,\r\n    Flex,\r\n    SmallText,\r\n    H3\r\n} from \"@/components/design-system\";\r\nimport { Dialog } from \"@/components/design-system/molecules/Dialog\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { FileEdit, Info } from \"lucide-react\";\r\n\r\ninterface PONoteDialogProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    title: string;\r\n    formData: { title: string; content: string };\r\n    setFormData: (data: { title: string; content: string }) => void;\r\n    onSubmit: (e: React.FormEvent) => void;\r\n    isEditing: boolean;\r\n}\r\n\r\nexport const PONoteDialog = ({\r\n    isOpen,\r\n    onClose,\r\n    title,\r\n    formData,\r\n    setFormData,\r\n    onSubmit,\r\n    isEditing,\r\n}: PONoteDialogProps) => {\r\n    return (\r\n        <Dialog\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            title={title}\r\n            maxWidth=\"max-w-xl\"\r\n            footer={\r\n                <Flex gap={3} className=\"w-full\">\r\n                    <Button\r\n                        variant=\"ghost\"\r\n                        onClick={onClose}\r\n                        className=\"flex-1 font-black text-[10px] uppercase tracking-widest h-10 rounded-xl\"\r\n                    >\r\n                        Abort\r\n                    </Button>\r\n                    <Button\r\n                        type=\"button\"\r\n                        variant=\"primary\"\r\n                        onClick={onSubmit}\r\n                        className=\"flex-[2] font-black text-[10px] uppercase tracking-widest h-10 rounded-xl active-glow\"\r\n                    >\r\n                        {isEditing ? \"Commit Provision\" : \"Instantiate Clause\"}\r\n                    </Button>\r\n                </Flex>\r\n            }\r\n        >\r\n            <Stack gap={5} className=\"py-2\">\r\n                <Flex align=\"center\" gap={3} className=\"p-3 bg-app-accent/5 rounded-2xl border-none\">\r\n                    <div className=\"w-8 h-8 rounded-xl bg-app-accent/10 flex items-center justify-center text-app-accent\">\r\n                        <Info className=\"w-4 h-4\" />\r\n                    </div>\r\n                    <p className=\"text-[11px] font-medium text-app-fg opacity-80 leading-snug\">\r\n                        Standardized clauses ensure legal consistency across all purchase orders and dispatch documents.\r\n                    </p>\r\n                </Flex>\r\n\r\n                <Stack gap={2}>\r\n                    <Label className=\"text-[10px] font-black uppercase tracking-widest text-app-accent\">Identifier</Label>\r\n                    <Input\r\n                        value={formData.title}\r\n                        onChange={(e) =>\r\n                            setFormData({ ...formData, title: e.target.value })\r\n                        }\r\n                        placeholder=\"e.g., Warranty Protocol v2.0\"\r\n                        className=\"h-10 bg-app-overlay/10 border-app-border/30 rounded-xl font-bold text-sm text-app-fg focus:ring-app-accent/20\"\r\n                        required\r\n                        autoFocus\r\n                    />\r\n                </Stack>\r\n\r\n                <Stack gap={2}>\r\n                    <Label className=\"text-[10px] font-black uppercase tracking-widest text-app-accent\">Provision Schema</Label>\r\n                    <div className=\"relative group\">\r\n                        <div className=\"absolute top-3 left-3 pointer-events-none opacity-20 group-focus-within:opacity-50 transition-opacity\">\r\n                            <FileEdit className=\"w-4 h-4 text-app-fg\" />\r\n                        </div>\r\n                        <textarea\r\n                            value={formData.content}\r\n                            onChange={(e) =>\r\n                                setFormData({ ...formData, content: e.target.value })\r\n                            }\r\n                            rows={8}\r\n                            className=\"w-full pl-10 pr-4 py-3 text-sm text-app-fg bg-app-overlay/10 border-none rounded-2xl focus:outline-none focus:bg-app-overlay/20 resize-none transition-all font-medium placeholder:text-app-fg-muted/30\"\r\n                            placeholder=\"Enter the full legal text for this provision...\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <SmallText className=\"px-1 opacity-50 uppercase tracking-tighter\">Markdown and standard text accepted.</SmallText>\r\n                </Stack>\r\n            </Stack>\r\n        </Dialog>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po-notes\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\POListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":15},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":19,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":19,"endColumn":66},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":20,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":20,"endColumn":108},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":54},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/StatusBadge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":21,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":21,"endColumn":76},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":27,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":27,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo, useRef, useCallback, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { POListItem, POStats } from \"@/lib/api\";\r\nimport {\r\n    FileText,\r\n    Clock,\r\n    Plus,\r\n    IndianRupee,\r\n    Upload,\r\n    TrendingUp,\r\n    Package,\r\n} from \"lucide-react\";\r\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\r\nimport { useDebouncedValue } from \"@/lib/hooks/useDebounce\";\r\n\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Body, Footnote, Accounting, Label, SmallText } from \"@/components/design-system/atoms/Typography\";\r\nimport { StatusBadge } from \"@/components/design-system/atoms/StatusBadge\";\r\nimport { useUpload } from \"@/components/providers/UploadContext\";\r\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\r\nimport { ListPageTemplate } from \"@/components/design-system/templates/ListPageTemplate\";\r\nimport { type Column } from \"@/components/design-system/organisms/DataTable\";\r\nimport { type SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\r\nimport { Flex } from \"@/components/design-system/atoms/Layout\";\r\n\r\nconst columns: Column<POListItem>[] = [\r\n    {\r\n        key: \"po_number\",\r\n        label: \"NUMBER\",\r\n        width: \"15%\",\r\n        render: (_value, po) => (\r\n            <Link href={`/po/${po.po_number}`} className=\"block group\">\r\n                <Footnote className=\"group-hover:text-app-accent transition-colors\">\r\n                    #{po.po_number}\r\n                </Footnote>\r\n            </Link>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_date\",\r\n        label: \"DATE\",\r\n        width: \"15%\",\r\n        render: (v) => (\r\n            <Footnote className=\"text-text-secondary\">\r\n                {formatDate(String(v))}\r\n            </Footnote>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_items_count\",\r\n        label: \"ITM\",\r\n        width: \"8%\",\r\n        align: \"center\",\r\n        render: (v) => (\r\n            <Footnote className=\"text-text-secondary\">{v || 1}</Footnote>\r\n        )\r\n    },\r\n    {\r\n        key: \"total_ordered_quantity\",\r\n        label: \"ORD\",\r\n        width: \"12%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-app-fg pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_dispatched_quantity\",\r\n        label: \"DLV\",\r\n        width: \"12%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-app-fg pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_pending_quantity\",\r\n        label: \"BAL\",\r\n        width: \"12%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting\r\n                className={Number(v) > 0 ? \"text-app-fg pr-2\" : \"text-app-fg/30 pr-2\"}\r\n            >\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"total_received_quantity\",\r\n        label: \"RECD\",\r\n        width: \"12%\",\r\n        align: \"right\",\r\n        isNumeric: true,\r\n        render: (v) => (\r\n            <Accounting className=\"text-text-primary pr-2\">\r\n                {v}\r\n            </Accounting>\r\n        ),\r\n    },\r\n    {\r\n        key: \"po_status\",\r\n        label: \"STATUS\",\r\n        width: \"14%\",\r\n        align: \"center\",\r\n        render: (v) => (\r\n            <div className=\"flex justify-center\">\r\n                <StatusBadge\r\n                    status={String(v).toUpperCase()}\r\n                    className=\"border-none shadow-none bg-app-overlay/5\"\r\n                />\r\n            </div>\r\n        ),\r\n    },\r\n];\r\n\r\ninterface POListClientProps {\r\n    initialPOs: POListItem[];\r\n    initialStats: POStats;\r\n}\r\n\r\nexport function POListClient({ initialPOs, initialStats }: POListClientProps) {\r\n    const router = useRouter();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const debouncedSearch = useDebouncedValue(searchQuery, 300);\r\n    const [page, setPage] = useState(1);\r\n    const [pageSize] = useState(10);\r\n\r\n    // Global Upload Hook\r\n    const { startUpload, isUploading } = useUpload();\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Refresh data when upload completes\r\n    const prevUploading = useRef(false);\r\n\r\n    useEffect(() => {\r\n        if (prevUploading.current && !isUploading) {\r\n            router.refresh();\r\n        }\r\n        prevUploading.current = isUploading;\r\n    }, [isUploading, router]);\r\n\r\n    const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const files = Array.from(e.target.files || []);\r\n        if (files.length > 0) {\r\n            startUpload(files, \"PO\");\r\n        }\r\n    };\r\n\r\n    const handleUploadClick = () => {\r\n        fileInputRef.current?.click();\r\n    };\r\n\r\n    const filteredPOs = useMemo(() => {\r\n        return initialPOs.filter(\r\n            (po) =>\r\n                po.po_number.toString().toLowerCase().includes(debouncedSearch.toLowerCase()) ||\r\n                po.supplier_name?.toLowerCase().includes(debouncedSearch.toLowerCase())\r\n        );\r\n    }, [initialPOs, debouncedSearch]);\r\n\r\n    const summaryCards = useMemo(\r\n        (): SummaryCardProps[] => [\r\n            {\r\n                title: \"Total Orders\",\r\n                value: initialPOs.length,\r\n                icon: <FileText size={18} />,\r\n                variant: \"primary\",\r\n            },\r\n            {\r\n                title: \"Open Orders\",\r\n                value: initialStats?.open_orders_count || 0,\r\n                icon: <Package size={18} />,\r\n                variant: \"success\",\r\n            },\r\n            {\r\n                title: \"Pending Approval\",\r\n                value: initialStats?.pending_approval_count || 0,\r\n                icon: <Clock size={18} />,\r\n                variant: \"warning\",\r\n            },\r\n            {\r\n                title: \"Total Value\",\r\n                value: formatIndianCurrency(initialStats?.total_value_ytd || 0),\r\n                icon: <IndianRupee size={18} />,\r\n                variant: \"primary\",\r\n                // progress: 75, // Removed dummy data\r\n            },\r\n        ],\r\n        [initialPOs.length, initialStats]\r\n    );\r\n\r\n    const handleSearch = useCallback((val: string) => {\r\n        setSearchQuery(val);\r\n        setPage(1); // Reset to first page on search\r\n    }, []);\r\n\r\n    const toolbar = (\r\n        <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\r\n            <SearchBar\r\n                id=\"po-search\"\r\n                value={searchQuery}\r\n                onChange={handleSearch}\r\n                placeholder=\"Search orders, items, or status...\"\r\n                className=\"w-full max-w-sm\"\r\n            />\r\n            <Flex align=\"center\" gap={3}>\r\n                <input\r\n                    ref={fileInputRef}\r\n                    type=\"file\"\r\n                    multiple\r\n                    accept=\".pdf,.html\"\r\n                    onChange={handleFileSelect}\r\n                    className=\"hidden\"\r\n                />\r\n\r\n                <Button\r\n                    variant=\"secondary\"\r\n                    onClick={handleUploadClick}\r\n                    className=\"min-w-[140px] border-none\"\r\n                >\r\n                    <Upload size={16} />\r\n                    Upload PO\r\n                </Button>\r\n\r\n                <Button\r\n                    variant=\"primary\"\r\n                    onClick={() => router.push(\"/po/create\")}\r\n                    className=\"min-w-[180px] border-none\"\r\n                >\r\n                    <Plus size={18} />\r\n                    New Purchase Order\r\n                </Button>\r\n            </Flex>\r\n        </Flex>\r\n    );\r\n\r\n    return (\r\n        <ListPageTemplate\r\n            title=\"Purchase Orders\"\r\n            subtitle=\"Manage procurement contracts and track delivery schedules.\"\r\n            toolbar={toolbar}\r\n            summaryCards={summaryCards}\r\n            columns={columns}\r\n            data={filteredPOs}\r\n            keyField=\"po_number\"\r\n            page={page}\r\n            pageSize={pageSize}\r\n            totalItems={filteredPOs.length}\r\n            onPageChange={(newPage) => setPage(newPage)}\r\n            emptyMessage=\"No purchase orders found\"\r\n            density=\"normal\"\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\PODetailCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Suspense' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":25},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":65},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[569,572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[569,572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'header' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":27,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { Suspense } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { Stack } from \"@/components/design-system/atoms/Layout\";\r\nimport { DocumentJourney } from \"@/components/design-system/molecules/DocumentJourney\";\r\nimport { PODetailInfo } from \"./PODetailInfo\";\r\n\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\n// Lazy load heavy table data for zero-waterfall effect\r\nconst PODetailItems = dynamic(() => import(\"./PODetailItems\").then(mod => mod.PODetailItems), {\r\n    ssr: false,\r\n});\r\n\r\ninterface PODetailCardProps {\r\n    srvs: any[];\r\n    editMode: boolean;\r\n    expandedItems: Set<number>;\r\n    activeTab: string;\r\n    setActiveTab: (tab: string) => void;\r\n    toggleItem: (itemNo: number) => void;\r\n    onSRVClick: (srvNumber: string) => void;\r\n}\r\n\r\nexport const PODetailCard = (props: PODetailCardProps) => {\r\n    const header = usePOStore((state) => state.data?.header);\r\n\r\n    // Actions are used inside children, but we pass editMode/expandedItems as before\r\n    // to maintain control flow from the client parent if desired,\r\n    // OR we could move those to store too. For now let's stick to the plan.\r\n\r\n    return (\r\n        <Stack gap={6}>\r\n            <DocumentJourney currentStage=\"PO\" className=\"mb-2\" />\r\n\r\n            <PODetailInfo\r\n                srvs={props.srvs}\r\n                editMode={props.editMode}\r\n                activeTab={props.activeTab}\r\n                setActiveTab={props.setActiveTab}\r\n                onSRVClick={props.onSRVClick}\r\n            />\r\n\r\n            <PODetailItems\r\n                editMode={props.editMode}\r\n                expandedItems={props.expandedItems}\r\n                toggleItem={props.toggleItem}\r\n            />\r\n        </Stack>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\PODetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PODelivery' is defined but never used. Allowed unused vars must match /^_/u.","line":14,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateHeader' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":40,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateItem' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":41,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":41,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addItem' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'removeItem' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":43,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'addDelivery' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":44,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'removeDelivery' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":45,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'items' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":120,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useCallback, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n    Edit2,\r\n    Save,\r\n    X,\r\n    FileText,\r\n    FileDown,\r\n} from \"lucide-react\";\r\nimport { api } from \"@/lib/api\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\nimport { PODetail, POItem, PODelivery, SRVListItem } from \"@/types\";\r\nimport {\r\n    DocumentTemplate,\r\n    Button,\r\n    Flex,\r\n    Box,\r\n} from \"@/components/design-system\";\r\nimport { PODetailCard } from \"./PODetailCard\";\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\ninterface PODetailClientProps {\r\n    initialPO: PODetail | null;\r\n    initialSrvs: SRVListItem[];\r\n    initialDC: { has_dc: boolean; dc_id?: string } | null;\r\n}\r\n\r\nexport default function PODetailClient({\r\n    initialPO,\r\n    initialSrvs,\r\n    initialDC,\r\n}: PODetailClientProps) {\r\n    const router = useRouter();\r\n\r\n    // Zustand Store Integration\r\n    const data = usePOStore((state) => state.data);\r\n    const setPO = usePOStore((state) => state.setPO);\r\n    const updateHeader = usePOStore((state) => state.updateHeader);\r\n    const updateItem = usePOStore((state) => state.updateItem);\r\n    const addItem = usePOStore((state) => state.addItem);\r\n    const removeItem = usePOStore((state) => state.removeItem);\r\n    const addDelivery = usePOStore((state) => state.addDelivery);\r\n    const removeDelivery = usePOStore((state) => state.removeDelivery);\r\n\r\n    // Initialize store with server data\r\n    useEffect(() => {\r\n        if (initialPO) {\r\n            setPO(initialPO);\r\n        }\r\n    }, [initialPO, setPO]);\r\n\r\n    const [srvs] = useState<SRVListItem[]>(initialSrvs);\r\n    const [hasDC] = useState(initialDC?.has_dc || false);\r\n    const [dcId] = useState(initialDC?.dc_id || null);\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [expandedItems, setExpandedItems] = useState<Set<number>>(\r\n        new Set(initialPO?.items?.map((item: POItem) => item.po_item_no) || [])\r\n    );\r\n    const [activeTab, setActiveTab] = useState(\"basic\");\r\n\r\n    // Handle Not Found State\r\n    if (!initialPO || !initialPO.header) {\r\n        return (\r\n            <DocumentTemplate\r\n                title=\"Purchase Order Not Found\"\r\n                description=\"The requested purchase order could not be found or has been deleted.\"\r\n                onBack={() => router.back()}\r\n                layoutId=\"po-not-found\"\r\n                icon={<FileText size={20} className=\"text-app-fg-muted\" />}\r\n                iconLayoutId=\"po-icon-not-found\"\r\n            >\r\n                <div className=\"flex flex-col items-center justify-center p-12 text-center h-[50vh]\">\r\n                    <div className=\"w-16 h-16 rounded-full bg-app-surface-hover flex items-center justify-center mb-4\">\r\n                        <FileText size={32} className=\"text-app-fg-muted\" />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-medium text-app-fg-primary mb-2\">\r\n                        PO Not Found\r\n                    </h3>\r\n                    <p className=\"text-sm text-app-fg-muted max-w-md mb-6\">\r\n                        We couldn't find the Purchase Order you're looking for. It may have been deleted or the ID is incorrect.\r\n                    </p>\r\n                    <Button onClick={() => router.push(\"/po/list\")}>\r\n                        Return to List\r\n                    </Button>\r\n                </div>\r\n            </DocumentTemplate>\r\n        );\r\n    }\r\n\r\n    const handleSave = useCallback(async () => {\r\n        if (!data || !data.header) return;\r\n        setLoading(true);\r\n        try {\r\n            await api.updatePO(data.header.po_number, data.header, data.items);\r\n            setEditMode(false);\r\n        } catch {\r\n            // console.error(err.message || \"Failed to sync changes\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [data]);\r\n\r\n    const toggleItem = useCallback((itemNo: number) => {\r\n        const s = new Set(expandedItems);\r\n        if (s.has(itemNo)) {\r\n            s.delete(itemNo);\r\n        } else {\r\n            s.add(itemNo);\r\n        }\r\n        setExpandedItems(s);\r\n    }, [expandedItems]);\r\n\r\n    // Safe destructuring after Not Found check\r\n    if (!data || !data.header) return null;\r\n\r\n    const { header, items } = data;\r\n\r\n    const renderActions = () => {\r\n        if (editMode) {\r\n            return (\r\n                <Flex align=\"center\" gap={3}>\r\n                    <Button\r\n                        variant=\"secondary\"\r\n                        onClick={() => setEditMode(false)}\r\n                    >\r\n                        Discard\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"primary\"\r\n                        onClick={handleSave}\r\n                        disabled={loading}\r\n                    >\r\n                        {loading ? <Save className=\"animate-spin\" size={16} /> : <Save size={16} />}\r\n                        Save Changes\r\n                    </Button>\r\n                </Flex>\r\n            );\r\n        }\r\n        return (\r\n            <Flex align=\"center\" gap={3}>\r\n                <Flex align=\"center\" gap={3}>\r\n                    <Button\r\n                        variant=\"excel\"\r\n                        asChild\r\n                    >\r\n                        <a\r\n                            href={`/api/po/${header.po_number}/download`}\r\n                            target=\"_blank\"\r\n                            rel=\"noreferrer\"\r\n                        >\r\n                            <FileDown size={16} /> Excel\r\n                        </a>\r\n                    </Button>\r\n                    <Button\r\n                        variant=\"secondary\"\r\n                        onClick={() =>\r\n                            hasDC && dcId\r\n                                ? router.push(`/dc/${dcId}`)\r\n                                : router.push(`/dc/create?po=${header.po_number}`)\r\n                        }\r\n                    >\r\n                        <FileText size={16} />\r\n                        {hasDC ? \"View DC\" : \"Generate DC\"}\r\n                    </Button>\r\n                    <div className=\"w-[1px] h-4 bg-app-border/20 mx-1\" />\r\n                    <Button\r\n                        variant=\"primary\"\r\n                        onClick={() => setEditMode(true)}\r\n                    >\r\n                        <Edit2 size={16} /> Modify Record\r\n                    </Button>\r\n                </Flex>\r\n            </Flex>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title={`PO #${header.po_number}`}\r\n            description={`${header.supplier_name} â€¢ ${formatDate(header.po_date)}`}\r\n            actions={renderActions()}\r\n            onBack={() => router.back()}\r\n            layoutId={`po-title-${header.po_number}`}\r\n            icon={<FileText size={20} className=\"text-app-accent\" />}\r\n            iconLayoutId={`po-icon-${header.po_number}`}\r\n        >\r\n            <PODetailCard\r\n                srvs={srvs}\r\n                editMode={editMode}\r\n                expandedItems={expandedItems}\r\n                activeTab={activeTab}\r\n                setActiveTab={setActiveTab}\r\n                toggleItem={toggleItem}\r\n                onSRVClick={(srvNo: string) => router.push(`/srv/${srvNo}`)}\r\n            />\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\PODetailInfo.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Input' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":64},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":122},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H3' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":36},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":76},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Box' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":26},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":7,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":16},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Badge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":8,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":8,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":15},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":9,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":9,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SummaryCards' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileText' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used. Allowed unused vars must match /^_/u.","line":20,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1071,1074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1071,1074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":41,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":41,"endColumn":98},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":55,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":55,"endColumn":134},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":67,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":67,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2636,2639],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2636,2639],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":169,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":169,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10615,10618],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10615,10618],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":180,"column":58,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":180,"endColumn":162}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"; // v1.0.1 - HMR Refresh\r\n\r\nimport React from \"react\";\r\nimport { Input } from \"@/components/design-system/atoms/Input\";\r\nimport { Body, H3, Label, SmallText, Accounting, Caption1, Caption2 } from \"@/components/design-system/atoms/Typography\";\r\nimport { Stack, Flex, Box } from \"@/components/design-system/atoms/Layout\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Badge } from \"@/components/design-system/atoms/Badge\";\r\nimport { Card } from \"@/components/design-system/atoms/Card\";\r\nimport {\r\n    Tabs,\r\n    TabsList,\r\n    TabsTrigger,\r\n    TabsContent\r\n} from \"@/components/design-system/molecules/Tabs\";\r\nimport { SummaryCards } from \"@/components/design-system/organisms/SummaryCards\";\r\nimport {\r\n    Info,\r\n    FileText,\r\n    ShieldCheck,\r\n    Receipt,\r\n    Calendar\r\n} from \"lucide-react\";\r\nimport { formatDate, formatIndianCurrency } from \"@/lib/utils\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\ninterface FieldProps {\r\n    label: string;\r\n    value: any;\r\n    field?: string;\r\n    readonly?: boolean;\r\n    editMode: boolean;\r\n}\r\n\r\nconst Field = ({ label, value, field, readonly = false, editMode }: FieldProps) => {\r\n    const updateHeader = usePOStore((state) => state.updateHeader);\r\n    return (\r\n        <div className=\"min-h-[42px] flex flex-col justify-center\">\r\n            <Caption1 className=\"mb-0.5 text-text-tertiary uppercase tracking-widest text-[10px]\">{label}</Caption1>\r\n            <div className=\"h-7 flex items-center\">\r\n                {editMode && field && !readonly ? (\r\n                    <Input\r\n                        value={value ?? \"\"}\r\n                        onChange={(e: React.ChangeEvent<HTMLInputElement>) => updateHeader(field, e.target.value)}\r\n                        className=\"h-7 px-2 py-1 border-none bg-app-overlay/5 focus:bg-app-overlay/10 transition-all font-regular text-app-fg text-footnote\"\r\n                    />\r\n                ) : (\r\n                    <div\r\n                        className=\"text-footnote font-regular text-text-primary leading-tight py-0.5 truncate\"\r\n                        title={value?.toString()}\r\n                    >\r\n                        {value || (\r\n                            <span className=\"text-text-tertiary font-regular italic opacity-40 uppercase tracking-widest text-[10px]\">\r\n                                Empty\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface PODetailInfoProps {\r\n    srvs: any[];\r\n    editMode: boolean;\r\n    onSRVClick: (srvNumber: string) => void;\r\n    activeTab: string;\r\n    setActiveTab: (tab: string) => void;\r\n}\r\n\r\nexport const PODetailInfo = ({\r\n    srvs,\r\n    editMode,\r\n    onSRVClick,\r\n    activeTab,\r\n    setActiveTab,\r\n}: PODetailInfoProps) => {\r\n    const header = usePOStore((state) => state.data?.header);\r\n    const updateHeader = usePOStore((state) => state.updateHeader);\r\n\r\n    if (!header) return null;\r\n    return (\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n            <TabsList className=\"mb-4 bg-app-overlay/5 p-1 rounded-xl w-fit border-none shadow-none backdrop-blur-sm\">\r\n                <TabsTrigger value=\"basic\">Basic Info</TabsTrigger>\r\n                <TabsTrigger value=\"references\">References</TabsTrigger>\r\n                <TabsTrigger value=\"financial\">Financial Details</TabsTrigger>\r\n                <TabsTrigger value=\"issuer\">Issuing Authority</TabsTrigger>\r\n                <TabsTrigger value=\"srvs\">Store Receipts ({srvs.length})</TabsTrigger>\r\n            </TabsList>\r\n            <AnimatePresence mode=\"wait\">\r\n                <motion.div\r\n                    key={activeTab}\r\n                    initial={{ opacity: 0, y: 5 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -5 }}\r\n                    transition={{ duration: 0.15 }}\r\n                >\r\n                    <div className=\"bg-app-surface rounded-xl elevation-2 p-5 min-h-[160px] border-none\">\r\n                        <TabsContent value=\"basic\" className=\"m-0\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-3\">\r\n                                <Field label=\"PO Number\" value={header.po_number} field=\"po_number\" readonly editMode={editMode} />\r\n                                <Field label=\"PO Date\" value={formatDate(header.po_date)} field=\"po_date\" readonly editMode={editMode} />\r\n                                <Field label=\"Supplier Name\" value={header.supplier_name} field=\"supplier_name\" editMode={editMode} />\r\n                                <Field label=\"Supplier Code\" value={header.supplier_code} field=\"supplier_code\" editMode={editMode} />\r\n                                <Field label=\"Phone\" value={header.supplier_phone} field=\"supplier_phone\" editMode={editMode} />\r\n                                <Field label=\"Fax\" value={header.supplier_fax} field=\"supplier_fax\" editMode={editMode} />\r\n                                <Field label=\"Email\" value={header.supplier_email} field=\"supplier_email\" editMode={editMode} />\r\n                                <Field label=\"Dept No (DVN)\" value={header.department_no} field=\"department_no\" editMode={editMode} />\r\n                            </div>\r\n                        </TabsContent>\r\n                        <TabsContent value=\"references\" className=\"m-0\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-3\">\r\n                                <Field label=\"Enquiry Number\" value={header.enquiry_no} field=\"enquiry_no\" editMode={editMode} />\r\n                                <Field label=\"Enquiry Date\" value={formatDate(header.enquiry_date)} field=\"enquiry_date\" editMode={editMode} />\r\n                                <Field label=\"Quotation Ref\" value={header.quotation_ref} field=\"quotation_ref\" editMode={editMode} />\r\n                                <Field label=\"Quotation Date\" value={formatDate(header.quotation_date)} field=\"quotation_date\" editMode={editMode} />\r\n                                <Field label=\"RC Number\" value={header.rc_no} field=\"rc_no\" editMode={editMode} />\r\n                                <Field label=\"Order Type\" value={header.order_type} field=\"order_type\" editMode={editMode} />\r\n                                <Field label=\"PO Status\" value={header.po_status} field=\"po_status\" editMode={editMode} />\r\n                                <Field label=\"AMD Number\" value={header.amend_no} field=\"amend_no\" editMode={editMode} />\r\n                            </div>\r\n                        </TabsContent>\r\n                        <TabsContent value=\"financial\" className=\"m-0\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-3\">\r\n                                <Field label=\"PO Value\" value={formatIndianCurrency(header.po_value)} field=\"po_value\" editMode={editMode} />\r\n                                <Field label=\"FOB Value\" value={formatIndianCurrency(header.fob_value)} field=\"fob_value\" editMode={editMode} />\r\n                                <Field label=\"Net Value\" value={formatIndianCurrency(header.net_po_value)} field=\"net_po_value\" editMode={editMode} />\r\n                                <Field label=\"TIN No\" value={header.tin_no} field=\"tin_no\" editMode={editMode} />\r\n                                <Field label=\"ECC No\" value={header.ecc_no} field=\"ecc_no\" editMode={editMode} />\r\n                                <Field label=\"MPCT No\" value={header.mpct_no} field=\"mpct_no\" editMode={editMode} />\r\n                                <Field label=\"Currency\" value={header.currency} field=\"currency\" editMode={editMode} />\r\n                                <Field label=\"Ex Rate\" value={header.ex_rate} field=\"ex_rate\" editMode={editMode} />\r\n                            </div>\r\n                        </TabsContent>\r\n                        <TabsContent value=\"issuer\" className=\"m-0\">\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-x-8 gap-y-4\">\r\n                                <Field label=\"Inspection By\" value={header.inspection_by} field=\"inspection_by\" editMode={editMode} />\r\n                                <Field label=\"Issuer Name\" value={header.issuer_name} field=\"issuer_name\" editMode={editMode} />\r\n                                <Field label=\"Designation\" value={header.issuer_designation} field=\"issuer_designation\" editMode={editMode} />\r\n                                <Field label=\"Issuer Phone\" value={header.issuer_phone} field=\"issuer_phone\" editMode={editMode} />\r\n                                <div className=\"col-span-2 md-col-span-4 mt-2\">\r\n                                    <div className=\"flex flex-col\">\r\n                                        <Caption1 className=\"text-text-tertiary uppercase tracking-wide mb-1 leading-none\">\r\n                                            Remarks\r\n                                        </Caption1>\r\n                                        {editMode ? (\r\n                                            <input\r\n                                                value={header.remarks || \"\"}\r\n                                                onChange={(e: React.ChangeEvent<HTMLInputElement>) => updateHeader(\"remarks\", e.target.value)}\r\n                                                className=\"w-full h-8 px-2 text-footnote border-none bg-app-overlay/5 rounded focus:bg-app-overlay/10 transition-all font-regular text-app-fg\"\r\n                                                placeholder=\"Enter remarks...\"\r\n                                            />\r\n                                        ) : (\r\n                                            <div className=\"text-footnote text-text-primary font-regular line-clamp-1 italic px-0.5 opacity-90\" title={header.remarks || \"\"}>\r\n                                                {header.remarks || \"No remarks provided.\"}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </TabsContent>\r\n                        <TabsContent value=\"srvs\" className=\"m-0\">\r\n                            {srvs.length > 0 ? (\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                                    {srvs.map((srv: any) => (\r\n                                        <div\r\n                                            key={srv.srv_number}\r\n                                            className=\"p-4 rounded-xl elevation-1 hover:elevation-2 hover:bg-app-accent/5 transition-all duration-300 group cursor-pointer border-none\"\r\n                                            onClick={() => onSRVClick(srv.srv_number)}\r\n                                        >\r\n                                            <Flex justify=\"between\" align=\"start\" className=\"mb-3\">\r\n                                                <Stack gap={1}>\r\n                                                    <Caption1 className=\"text-text-primary uppercase tracking-wide group-hover:text-app-accent\">\r\n                                                        SRV-{srv.srv_number}\r\n                                                    </Caption1>\r\n                                                    <div className=\"text-[10px] font-regular text-text-tertiary flex items-center gap-1 uppercase tracking-tight\">\r\n                                                        <Calendar className=\"w-2.5 h-2.5\" />\r\n                                                        {formatDate(srv.srv_date)}\r\n                                                    </div>\r\n                                                </Stack>\r\n                                                <Stack align=\"end\" gap={2}>\r\n                                                    <div className=\"w-6 h-6 rounded-lg bg-app-accent/10 flex items-center justify-center text-app-accent\">\r\n                                                        <Receipt className=\"w-3 h-3\" />\r\n                                                    </div>\r\n                                                </Stack>\r\n                                            </Flex>\r\n                                            <div className=\"grid grid-cols-2 pt-2 border-none mt-2 gap-2\">\r\n                                                <div>\r\n                                                    <Caption2 className=\"text-app-status-success uppercase tracking-wide leading-tight\">\r\n                                                        Accepted\r\n                                                    </Caption2>\r\n                                                    <Accounting variant=\"success\" className=\"text-footnote\">\r\n                                                        {srv.total_accepted_qty || 0}\r\n                                                    </Accounting>\r\n                                                </div>\r\n                                                <div className=\"text-right\">\r\n                                                    <Caption2 className=\"text-app-status-error uppercase tracking-wide leading-tight\">\r\n                                                        Rejected\r\n                                                    </Caption2>\r\n                                                    <Accounting variant=\"error\" className=\"text-footnote\">\r\n                                                        {srv.total_rejected_qty || 0}\r\n                                                    </Accounting>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"text-center py-6 text-app-fg-muted italic text-sm\">\r\n                                    No linked SRVs found.\r\n                                </div>\r\n                            )}\r\n                        </TabsContent>\r\n                    </div>\r\n                </motion.div>\r\n            </AnimatePresence>\r\n        </Tabs>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\PODetailItems.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":66},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Input' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":64},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":123},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":44},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":7,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Layers' is defined but never used. Allowed unused vars must match /^_/u.","line":13,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":191,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7047,7050],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7047,7050],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":192,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":192,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7148,7151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7148,7151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":193,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7252,7255],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7252,7255],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":210,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":210,"endColumn":142},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":299,"column":109,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":299,"endColumn":213},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":323,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":323,"endColumn":99},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":337,"column":100,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":337,"endColumn":149},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":338,"column":99,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":338,"endColumn":148},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":339,"column":99,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":339,"endColumn":148},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":340,"column":89,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":340,"endColumn":138},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":341,"column":100,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":341,"endColumn":149},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":342,"column":99,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":342,"endColumn":148},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":343,"column":99,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":343,"endColumn":148},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":344,"column":132,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":344,"endColumn":214},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":345,"column":132,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":345,"endColumn":214},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":346,"column":99,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":346,"endColumn":148}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":23,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useMemo } from \"react\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Input } from \"@/components/design-system/atoms/Input\";\r\nimport { Accounting, SmallText, Body, Label, MonoCode, Card, Caption1, Caption2 } from \"@/components/design-system/atoms\";\r\nimport { Flex, Stack } from \"@/components/design-system/atoms/Layout\";\r\nimport {\r\n    Plus,\r\n    Trash2,\r\n    ChevronDown,\r\n    ChevronUp,\r\n    Layers,\r\n    AlertCircle\r\n} from \"lucide-react\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\ninterface PODetailItemsProps {\r\n    editMode: boolean;\r\n    expandedItems: Set<number>;\r\n    toggleItem: (itemNo: number) => void;\r\n}\r\n\r\nconst QuantityInput = React.memo(({\r\n    value,\r\n    onUpdate,\r\n    min,\r\n    max,\r\n    className\r\n}: {\r\n    value: number;\r\n    onUpdate: (val: number) => void;\r\n    min?: number;\r\n    max?: number;\r\n    className?: string;\r\n}) => {\r\n    const [localValue, setLocalValue] = React.useState(value.toString());\r\n\r\n    React.useEffect(() => {\r\n        setLocalValue(value.toString());\r\n    }, [value]);\r\n\r\n    const handleCommit = () => {\r\n        const newVal = parseFloat(localValue) || 0;\r\n        // Balance Guard: Clamp value if needed, or let user know.\r\n        // For PO Detail, we allow manual override but within reason?\r\n        // User said: \"Delivered quantity cannot exceed ordered quantity\" (Validation already exists in backend).\r\n        // Let's implement some basic checks.\r\n        if (min !== undefined && newVal < min) {\r\n            setLocalValue(min.toString());\r\n            onUpdate(min);\r\n            return;\r\n        }\r\n        if (max !== undefined && newVal > max) {\r\n            setLocalValue(max.toString());\r\n            onUpdate(max);\r\n            return;\r\n        }\r\n        if (newVal !== value) {\r\n            onUpdate(newVal);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Input\r\n            type=\"number\"\r\n            value={localValue}\r\n            onChange={(e) => setLocalValue(e.target.value)}\r\n            onBlur={handleCommit}\r\n            onKeyDown={(e) => {\r\n                if (e.key === 'Enter') handleCommit();\r\n            }}\r\n            className={cn(\"h-7 px-2 font-mono text-footnote text-right transition-all\", className)}\r\n        />\r\n    );\r\n});\r\nQuantityInput.displayName = \"QuantityInput\";\r\n\r\nconst LotRow = React.memo(({\r\n    itemIdx,\r\n    lotIdx,\r\n    editMode,\r\n}: {\r\n    itemIdx: number;\r\n    lotIdx: number;\r\n    editMode: boolean;\r\n}) => {\r\n    const delivery = usePOStore((state) => state.data?.items[itemIdx].deliveries[lotIdx]);\r\n    const updateDelivery = usePOStore((state) => state.updateDelivery);\r\n    const removeDelivery = usePOStore((state) => state.removeDelivery);\r\n\r\n    if (!delivery) return null;\r\n\r\n    const ord = delivery.ordered_quantity || 0;\r\n    const dlv = delivery.delivered_quantity || 0;\r\n    const recd = delivery.received_quantity || 0;\r\n    const bal = Math.max(0, ord - dlv);\r\n\r\n    return (\r\n        <tr className=\"bg-app-overlay/5\">\r\n            <td className=\"py-2 px-0 relative w-[60px]\">\r\n                {/* Visual Indent Pipe */}\r\n                <div className=\"absolute left-[30px] top-0 bottom-0 w-[1.5px] bg-app-accent/20\" />\r\n                <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                    <Caption2 className=\"text-app-accent font-bold\">L</Caption2>\r\n                </div>\r\n            </td>\r\n            <td className=\"py-2 px-4\" />\r\n            <td className=\"py-2 px-4\">\r\n                <MonoCode className=\"text-text-tertiary\">L-{delivery.lot_no}</MonoCode>\r\n            </td>\r\n            <td className=\"py-2 px-4\">\r\n                {editMode ? (\r\n                    <Input\r\n                        type=\"date\"\r\n                        value={delivery.dely_date ? delivery.dely_date.split('T')[0] : ''}\r\n                        onChange={(e) => updateDelivery(itemIdx, lotIdx, 'dely_date', e.target.value)}\r\n                        className=\"h-7 px-1 border-none bg-app-overlay/5\"\r\n                    />\r\n                ) : (\r\n                    <Body className=\"text-text-primary text-footnote\">\r\n                        {delivery.dely_date ? formatDate(delivery.dely_date) : '-'}\r\n                    </Body>\r\n                )}\r\n            </td>\r\n            <td className=\"py-2 px-4\" />\r\n            <td className=\"py-2 px-4\" />\r\n            <td className=\"py-2 px-4 text-right\">\r\n                {editMode ? (\r\n                    <QuantityInput\r\n                        value={ord}\r\n                        onUpdate={(val) => updateDelivery(itemIdx, lotIdx, 'ordered_quantity', val)}\r\n                        className=\"border-none bg-app-overlay/5\"\r\n                    />\r\n                ) : (\r\n                    <Accounting className=\"text-footnote text-text-tertiary\">{ord}</Accounting>\r\n                )}\r\n            </td>\r\n            <td className=\"py-2 px-4 text-right bg-blue-600/5 dark:bg-blue-400/5\">\r\n                {editMode ? (\r\n                    <QuantityInput\r\n                        value={dlv}\r\n                        max={ord}\r\n                        onUpdate={(val) => updateDelivery(itemIdx, lotIdx, 'delivered_quantity', val)}\r\n                        className=\"text-system-blue border-none bg-app-overlay/5\"\r\n                    />\r\n                ) : (\r\n                    <Accounting className=\"text-footnote text-system-blue\">{dlv}</Accounting>\r\n                )}\r\n            </td>\r\n            <td className=\"py-2 px-4 text-right bg-blue-600/5 dark:bg-blue-400/5\">\r\n                <Accounting className=\"text-footnote text-system-blue\">{bal}</Accounting>\r\n            </td>\r\n            <td className=\"py-2 px-4 text-right\">\r\n                <Accounting className=\"text-footnote text-text-tertiary\">{recd}</Accounting>\r\n            </td>\r\n            <td className=\"py-2 px-4 text-center\">\r\n                {editMode && (\r\n                    <button onClick={() => removeDelivery(itemIdx, lotIdx)} className=\"text-app-status-error/40 hover:text-app-status-error transition-all p-1 hover:bg-app-status-error/5 rounded\">\r\n                        <Trash2 size={12} />\r\n                    </button>\r\n                )}\r\n            </td>\r\n        </tr>\r\n    );\r\n});\r\nLotRow.displayName = \"LotRow\";\r\n\r\nconst ItemRow = React.memo(({\r\n    idx,\r\n    editMode,\r\n    isExpanded,\r\n    toggleItem,\r\n}: {\r\n    idx: number;\r\n    editMode: boolean;\r\n    isExpanded: boolean;\r\n    toggleItem: (n: number) => void;\r\n}) => {\r\n    const item = usePOStore((state) => state.data?.items[idx]);\r\n    const updateItem = usePOStore((state) => state.updateItem);\r\n    const removeItem = usePOStore((state) => state.removeItem);\r\n    const addDelivery = usePOStore((state) => state.addDelivery);\r\n\r\n    if (!item) return null;\r\n\r\n    // Memoize aggregations for performance\r\n    const { tOrd, tDlv, tRecd, tBal } = useMemo(() => {\r\n        const deliveries = item.deliveries || [];\r\n        const ord = deliveries.reduce((acc: number, d: any) => acc + (d.ordered_quantity || 0), 0);\r\n        const dlv = deliveries.reduce((acc: number, d: any) => acc + (d.delivered_quantity || 0), 0);\r\n        const recd = deliveries.reduce((acc: number, d: any) => acc + (d.received_quantity || 0), 0);\r\n        return {\r\n            tOrd: ord,\r\n            tDlv: dlv,\r\n            tRecd: recd,\r\n            tBal: Math.max(0, ord - dlv)\r\n        };\r\n    }, [item.deliveries]);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <tr className={cn(\r\n                \"transition-colors h-10 items-center justify-center border-none\",\r\n                isExpanded ? \"bg-app-overlay/10\" : \"bg-transparent hover:bg-app-overlay/5\"\r\n            )}>\r\n                <td className=\"py-0 px-3 text-center h-10 border-none\">\r\n                    <div className=\"flex items-center justify-center h-full\">\r\n                        <MonoCode className=\"text-[10px] text-app-accent leading-none border-none bg-transparent p-0 opacity-100 font-medium\">#{item.po_item_no}</MonoCode>\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 h-10 border-none\">\r\n                    <div className=\"flex items-center h-full\">\r\n                        {editMode ? (\r\n                            <Input value={item.material_code} onChange={(e) => updateItem(idx, \"material_code\", e.target.value)} className=\"h-7 w-full text-footnote bg-app-overlay/5 border-none\" />\r\n                        ) : (\r\n                            <Accounting className=\"text-footnote text-text-primary opacity-90\">{item.material_code}</Accounting>\r\n                        )}\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 h-10 border-none\">\r\n                    <div className=\"flex items-center h-full\">\r\n                        {editMode ? (\r\n                            <Input value={item.drg_no} onChange={(e) => updateItem(idx, \"drg_no\", e.target.value)} className=\"h-7 w-full text-footnote bg-app-overlay/5 border-none\" />\r\n                        ) : (\r\n                            <Caption2 className=\"text-text-tertiary\">{item.drg_no || \"-\"}</Caption2>\r\n                        )}\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 h-10 border-none\">\r\n                    <div className=\"flex items-center h-full\">\r\n                        {editMode ? (\r\n                            <Input value={item.material_description} onChange={(e) => updateItem(idx, \"material_description\", e.target.value)} className=\"h-7 w-full text-footnote bg-app-overlay/5 border-none\" />\r\n                        ) : (\r\n                            <Body className=\"text-footnote text-text-primary opacity-80 truncate max-w-[200px]\" title={item.material_description}>{item.material_description}</Body>\r\n                        )}\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 text-center h-10 border-none\">\r\n                    <div className=\"flex items-center justify-center h-full\">\r\n                        <Caption2 className=\"text-text-tertiary\">{item.unit}</Caption2>\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 text-right h-10 border-none\">\r\n                    <div className=\"flex items-center justify-end h-full\">\r\n                        {editMode ? (\r\n                            <Input type=\"number\" value={item.po_rate} onChange={(e) => updateItem(idx, \"po_rate\", parseFloat(e.target.value))} className=\"h-7 w-full text-footnote text-right bg-app-overlay/5 border-none pr-2\" />\r\n                        ) : (\r\n                            <Accounting className=\"text-footnote text-text-primary opacity-90 pr-2\">{item.po_rate}</Accounting>\r\n                        )}\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 text-right h-10 border-none\">\r\n                    <div className=\"flex items-center justify-end h-full\">\r\n                        <Accounting className=\"text-footnote text-text-tertiary pr-2\">{tOrd}</Accounting>\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 text-right font-medium h-10 bg-blue-600/5 dark:bg-blue-400/5 border-none\">\r\n                    <div className=\"flex items-center justify-end h-full\">\r\n                        <Accounting className=\"text-footnote text-blue-600 dark:text-blue-400 pr-2\">{tDlv}</Accounting>\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 text-right font-medium h-10 bg-blue-600/5 dark:bg-blue-400/5 border-none\">\r\n                    <div className=\"flex items-center justify-end h-full\">\r\n                        <Accounting className=\"text-footnote text-blue-600 dark:text-blue-400 pr-2\">{tBal}</Accounting>\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 text-right h-10 border-none\">\r\n                    <div className=\"flex items-center justify-end h-full\">\r\n                        <Accounting className=\"text-footnote text-text-tertiary pr-2\">{tRecd}</Accounting>\r\n                    </div>\r\n                </td>\r\n                <td className=\"py-0 px-3 text-center h-10 border-none\">\r\n                    <div className=\"flex items-center justify-center h-full gap-1\">\r\n                        <button onClick={() => toggleItem(item.po_item_no)} className={cn(\"p-1.5 rounded-md transition-all\", isExpanded ? \"bg-app-accent/10 text-app-accent\" : \"text-text-tertiary hover:text-text-primary\")}>\r\n                            {isExpanded ? <ChevronUp size={14} /> : <ChevronDown size={14} />}\r\n                        </button>\r\n                        {editMode && (\r\n                            <button onClick={() => removeItem(idx)} className=\"p-1.5 text-app-status-error/40 hover:text-app-status-error hover:bg-app-status-error/5 rounded-md transition-all\">\r\n                                <Trash2 size={14} />\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n\r\n            {isExpanded && (\r\n                <React.Fragment>\r\n                    {item.deliveries?.map((d, dIdx) => (\r\n                        <LotRow key={`${item.id}-lot-${d.lot_no}`} itemIdx={idx} lotIdx={dIdx} editMode={editMode} />\r\n                    ))}\r\n                    {editMode && (\r\n                        <tr className=\"bg-app-overlay/5 border-none\">\r\n                            <td className=\"py-2 px-0 relative w-[60px]\">\r\n                                <div className=\"absolute left-[30px] top-0 bottom-0 w-[2.5px] bg-app-accent/10\" />\r\n                            </td>\r\n                            <td colSpan={10} className=\"py-2 px-4 border-none\">\r\n                                <Button variant=\"secondary\" size=\"compact\" onClick={() => addDelivery(idx)} className=\"h-6 text-[10px] text-app-accent bg-transparent hover:bg-app-accent/5 border-none shadow-none\">\r\n                                    <Plus size={12} /> Add Delivery Lot\r\n                                </Button>\r\n                            </td>\r\n                        </tr>\r\n                    )}\r\n                </React.Fragment>\r\n            )}\r\n        </React.Fragment>\r\n    );\r\n});\r\nItemRow.displayName = \"ItemRow\";\r\n\r\nexport const PODetailItems = ({\r\n    editMode,\r\n    expandedItems,\r\n    toggleItem,\r\n}: PODetailItemsProps) => {\r\n    const items = usePOStore((state) => state.data?.items || []);\r\n    const addItem = usePOStore((state) => state.addItem);\r\n\r\n    return (\r\n        <Stack gap={3}>\r\n            <Flex align=\"center\" justify=\"between\" className=\"mb-2\">\r\n                <Caption1 className=\"m-0 text-text-tertiary uppercase tracking-widest text-[10px]\">\r\n                    Procurement Structure\r\n                </Caption1>\r\n                {editMode && (\r\n                    <Button onClick={addItem} variant=\"secondary\" className=\"h-8 text-xs\">\r\n                        <Plus className=\"w-4 h-4\" /> New Item\r\n                    </Button>\r\n                )}\r\n            </Flex>\r\n\r\n            <Card className=\"p-0 overflow-hidden border-none elevation-2\">\r\n                <table className=\"table-standard w-full border-collapse\">\r\n                    <thead>\r\n                        <tr className=\"header-glass border-none\">\r\n                            <th className=\"py-2.5 px-3 text-center w-[50px] border-none\"><Caption2 className=\"uppercase tracking-widest text-[10px]\">#</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-left w-[120px] border-none\"><Caption2 className=\"uppercase tracking-widest text-[10px]\">Code</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-left w-[120px] border-none\"><Caption2 className=\"uppercase tracking-widest text-[10px]\">Drawing</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-left border-none\"><Caption2 className=\"uppercase tracking-widest text-[10px]\">Description</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-center w-[70px] border-none\"><Caption2 className=\"uppercase tracking-widest text-[10px]\">Unit</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-right w-[90px] border-none\"><Caption2 className=\"uppercase tracking-widest text-[10px]\">Rate</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-right w-[90px] border-none\"><Caption2 className=\"uppercase tracking-widest text-[10px]\">Ord</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-right w-[90px] bg-blue-600/5 dark:bg-blue-400/5 border-none\"><Caption2 className=\"text-blue-600 dark:text-blue-400 uppercase tracking-widest text-[10px]\">DLV</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-right w-[90px] bg-blue-600/5 dark:bg-blue-400/5 border-none\"><Caption2 className=\"text-blue-600 dark:text-blue-400 uppercase tracking-widest text-[10px]\">BAL</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 text-right w-[90px] border-none\"><Caption2 className=\"uppercase tracking-widest text-[10px]\">RECD</Caption2></th>\r\n                            <th className=\"py-2.5 px-3 w-[60px] border-none\"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {items.map((item, idx) => (\r\n                            <ItemRow\r\n                                key={item.po_item_no}\r\n                                idx={idx}\r\n                                editMode={editMode}\r\n                                isExpanded={expandedItems.has(item.po_item_no)}\r\n                                toggleItem={toggleItem}\r\n                            />\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </Card>\r\n\r\n            {items.length === 0 && (\r\n                <Card className=\"p-12 flex flex-col items-center justify-center bg-app-surface/30 border-none text-center elevation-1\">\r\n                    <div className=\"p-3 bg-app-surface-hover rounded-full mb-3 text-app-fg-muted/20\">\r\n                        <AlertCircle size={32} />\r\n                    </div>\r\n                    <Body className=\"text-app-fg-muted\">No items found in this Purchase Order.</Body>\r\n                    {editMode && (\r\n                        <Button variant=\"ghost\" className=\"mt-4 text-app-accent\" onClick={addItem}>\r\n                            Add the first item\r\n                        </Button>\r\n                    )}\r\n                </Card>\r\n            )}\r\n        </Stack>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H3' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":5},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":113,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":113,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2982,2985],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2982,2985],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16233,16236],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16233,16236],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":523,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":523,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24620,24623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24620,24623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useCallback, useEffect, Suspense } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Save, Plus, Trash2, Package, Loader2, FileText, Calendar } from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  H3,\r\n  Label,\r\n  Body,\r\n  Accounting,\r\n  Button,\r\n  Input,\r\n  Card,\r\n  DocumentJourney,\r\n  DocumentTemplate,\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n  SmallText,\r\n} from \"@/components/design-system\";\r\nimport { api } from \"@/lib/api\";\r\nimport { usePOStore } from \"@/store/poStore\";\r\n\r\nfunction CreatePOPageContent() {\r\n  const router = useRouter();\r\n  const {\r\n    data,\r\n    setHeader,\r\n    updateHeader,\r\n    addItem,\r\n    removeItem,\r\n    updateItem,\r\n    reset\r\n  } = usePOStore();\r\n\r\n  const [activeTab, setActiveTab] = useState(\"basic\");\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  // Initialize store with default structure on mount\r\n  useEffect(() => {\r\n    reset();\r\n    const defaultHeader = {\r\n      po_number: \"\",\r\n      po_date: new Date().toISOString().split(\"T\")[0],\r\n      supplier_name: \"\",\r\n      supplier_code: \"\",\r\n      supplier_phone: \"\",\r\n      supplier_fax: \"\",\r\n      supplier_email: \"\",\r\n      department_no: \"\",\r\n      enquiry_no: \"\",\r\n      enquiry_date: \"\",\r\n      quotation_ref: \"\",\r\n      quotation_date: \"\",\r\n      rc_no: \"\",\r\n      order_type: \"\",\r\n      po_status: \"New\",\r\n      amend_no: 0,\r\n      po_value: 0,\r\n      fob_value: 0,\r\n      net_po_value: 0,\r\n      tin_no: \"\",\r\n      ecc_no: \"\",\r\n      mpct_no: \"\",\r\n      inspection_by: \"\",\r\n      inspection_at: \"\",\r\n      consignee_name: \"\",\r\n      consignee_address: \"\",\r\n      issuer_name: \"\",\r\n      issuer_designation: \"\",\r\n      issuer_phone: \"\",\r\n      remarks: \"\",\r\n    };\r\n    setHeader(defaultHeader);\r\n\r\n    const fetchDefaults = async () => {\r\n      try {\r\n        const settings = await api.getSettings();\r\n        updateHeader(\"consignee_name\", settings.supplier_name || \"\");\r\n        updateHeader(\"consignee_address\", settings.supplier_address || \"\");\r\n        updateHeader(\"inspection_at\", settings.supplier_address || \"BHEL Works\");\r\n      } catch (e) {\r\n        console.error(\"Failed to load defaults\", e);\r\n      }\r\n    };\r\n    fetchDefaults();\r\n  }, [setHeader, updateHeader, reset]);\r\n\r\n  const handleSave = useCallback(async () => {\r\n    if (!data?.header?.po_number) {\r\n      alert(\"PO Number is required\");\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const payload = {\r\n        header: {\r\n          ...data.header,\r\n          po_number: parseInt(data.header.po_number),\r\n        },\r\n        items: (data.items || []).map((item) => ({\r\n          ...item,\r\n          ordered_quantity: item.ordered_quantity,\r\n          deliveries: [], // Simple manual PO creation defaults to one delivery in backend\r\n        })),\r\n      };\r\n\r\n      await api.createPO(payload);\r\n      router.push(`/po/${data.header.po_number}`);\r\n    } catch (err: any) {\r\n      alert(err.message || \"Failed to save Purchase Order\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }, [data, router]);\r\n\r\n  if (!data || !data.header) return (\r\n    <div className=\"flex items-center justify-center min-h-[400px]\">\r\n      <Loader2 className=\"animate-spin text-app-accent\" size={32} />\r\n    </div>\r\n  );\r\n\r\n  const { header, items = [] } = data;\r\n\r\n  const topActions = (\r\n    <div className=\"flex items-center gap-2\">\r\n      <Button variant=\"secondary\" onClick={() => router.back()} disabled={saving}>\r\n        Cancel\r\n      </Button>\r\n      <Button variant=\"primary\" onClick={handleSave} disabled={saving}>\r\n        {saving ? (\r\n          <Loader2 size={16} className=\"animate-spin\" />\r\n        ) : (\r\n          <Save size={16} />\r\n        )}\r\n        {saving ? \"Saving...\" : \"Save PO\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"Create Purchase Order\"\r\n      description=\"Enter procurement contract details manually\"\r\n      actions={topActions}\r\n      onBack={() => router.back()}\r\n      icon={<FileText size={20} className=\"text-app-accent\" />}\r\n      iconLayoutId=\"create-po-icon\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        <DocumentJourney currentStage=\"PO\" className=\"mb-2\" />\r\n\r\n        {/* Info Tabs */}\r\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\r\n          <TabsList className=\"mb-4 bg-app-overlay/5 p-1 rounded-xl inline-flex overflow-x-auto max-w-full border-none shadow-none\">\r\n            <TabsTrigger value=\"basic\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:elevation-1 transition-all whitespace-nowrap\">Basic Info</TabsTrigger>\r\n            <TabsTrigger value=\"supplier\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:elevation-1 transition-all whitespace-nowrap\">Supplier</TabsTrigger>\r\n            <TabsTrigger value=\"references\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:elevation-1 transition-all whitespace-nowrap\">References</TabsTrigger>\r\n            <TabsTrigger value=\"financial\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:elevation-1 transition-all whitespace-nowrap\">Financial</TabsTrigger>\r\n            <TabsTrigger value=\"issuer\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:elevation-1 transition-all whitespace-nowrap\">Issuer</TabsTrigger>\r\n            <TabsTrigger value=\"consignee\" className=\"px-6 py-2 rounded-lg data-[state=active]:bg-app-surface data-[state=active]:elevation-1 transition-all whitespace-nowrap\">Consignee</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              key={activeTab}\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              exit={{ opacity: 0, y: -10 }}\r\n              transition={{ duration: 0.2 }}\r\n            >\r\n              <Card className=\"p-6 mt-0 border-none elevation-2 bg-app-surface/50 backdrop-blur-md\">\r\n                <TabsContent value=\"basic\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>PO NUMBER</Label>\r\n                      <Input\r\n                        value={header.po_number}\r\n                        onChange={(e) => updateHeader(\"po_number\", e.target.value)}\r\n                        placeholder=\"e.g. 4500012345\"\r\n                        className=\"text-app-fg tabular-nums\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>PO DATE</Label>\r\n                      <Input\r\n                        type=\"date\"\r\n                        value={header.po_date}\r\n                        onChange={(e) => updateHeader(\"po_date\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>DEPARTMENT NO</Label>\r\n                      <Input\r\n                        value={header.department_no}\r\n                        onChange={(e) => updateHeader(\"department_no\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"supplier\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>SUPPLIER NAME</Label>\r\n                      <Input\r\n                        value={header.supplier_name}\r\n                        onChange={(e) => updateHeader(\"supplier_name\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>SUPPLIER CODE</Label>\r\n                      <Input\r\n                        value={header.supplier_code}\r\n                        onChange={(e) => updateHeader(\"supplier_code\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>PHONE</Label>\r\n                      <Input\r\n                        value={header.supplier_phone}\r\n                        onChange={(e) => updateHeader(\"supplier_phone\", e.target.value)}\r\n                        className=\"text-app-fg tabular-nums\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>EMAIL</Label>\r\n                      <Input\r\n                        type=\"email\"\r\n                        value={header.supplier_email}\r\n                        onChange={(e) => updateHeader(\"supplier_email\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"references\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>ENQUIRY NO</Label>\r\n                      <Input\r\n                        value={header.enquiry_no}\r\n                        onChange={(e) => updateHeader(\"enquiry_no\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>RC NUMBER</Label>\r\n                      <Input\r\n                        value={header.rc_no}\r\n                        onChange={(e) => updateHeader(\"rc_no\", e.target.value)}\r\n                        className=\"text-app-fg tabular-nums\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>ORDER TYPE</Label>\r\n                      <Input\r\n                        value={header.order_type}\r\n                        onChange={(e) => updateHeader(\"order_type\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"financial\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>TIN NUMBER</Label>\r\n                      <Input\r\n                        value={header.tin_no}\r\n                        onChange={(e) => updateHeader(\"tin_no\", e.target.value)}\r\n                        className=\"text-app-fg tabular-nums uppercase\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>ECC NUMBER</Label>\r\n                      <Input\r\n                        value={header.ecc_no}\r\n                        onChange={(e) => updateHeader(\"ecc_no\", e.target.value)}\r\n                        className=\"text-app-fg tabular-nums uppercase\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>MPCT NUMBER</Label>\r\n                      <Input\r\n                        value={header.mpct_no}\r\n                        onChange={(e) => updateHeader(\"mpct_no\", e.target.value)}\r\n                        className=\"text-app-fg tabular-nums uppercase\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"issuer\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>ISSUER NAME</Label>\r\n                      <Input\r\n                        value={header.issuer_name}\r\n                        onChange={(e) => updateHeader(\"issuer_name\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>DESIGNATION</Label>\r\n                      <Input\r\n                        value={header.issuer_designation}\r\n                        onChange={(e) => updateHeader(\"issuer_designation\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"col-span-full space-y-2\">\r\n                      <Label>ADDITIONAL REMARKS</Label>\r\n                      <textarea\r\n                        value={header.remarks}\r\n                        onChange={(e) => updateHeader(\"remarks\", e.target.value)}\r\n                        className=\"w-full px-4 py-3 text-app-fg bg-app-surface border-none rounded-2xl focus:outline-none focus:bg-app-surface-hover resize-none transition-all font-medium text-sm leading-relaxed\"\r\n                        rows={4}\r\n                        placeholder=\"Additional project information...\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"consignee\" className=\"mt-0\">\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label>CONSIGNEE NAME</Label>\r\n                      <Input\r\n                        value={header.consignee_name}\r\n                        onChange={(e) => updateHeader(\"consignee_name\", e.target.value)}\r\n                        className=\"text-app-fg\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                      <Label>CONSIGNEE ADDRESS</Label>\r\n                      <textarea\r\n                        value={header.consignee_address}\r\n                        onChange={(e) => updateHeader(\"consignee_address\", e.target.value)}\r\n                        className=\"w-full px-4 py-3 text-app-fg bg-app-surface border-none rounded-2xl focus:outline-none focus:bg-app-surface-hover resize-none transition-all font-medium text-sm leading-relaxed\"\r\n                        rows={4}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </TabsContent>\r\n              </Card>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n        </Tabs>\r\n\r\n        {/* Items Section */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <Label className=\"m-0 text-app-fg uppercase tracking-wide font-semibold text-xs\">\r\n              Material Items ({items.length})\r\n            </Label>\r\n            <Button variant=\"secondary\" onClick={addItem}>\r\n              <Plus size={16} />\r\n              Add Item\r\n            </Button>\r\n          </div>\r\n\r\n          <Suspense fallback={<div className=\"h-64 w-full bg-app-surface/50 rounded-xl animate-pulse border-none\" />}>\r\n            <div className=\"table-container border-none shadow-none overflow-visible\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"border-none bg-app-overlay/5\">\r\n                    <th className=\"py-3 px-6 text-left w-16 px-6\"><Label>#</Label></th>\r\n                    <th className=\"py-3 px-6 text-left\"><Label>Material Details</Label></th>\r\n                    <th className=\"py-3 px-6 text-right w-32\"><Label>Ordered Qty</Label></th>\r\n                    <th className=\"py-3 px-6 text-right w-40\"><Label>Value / Rate</Label></th>\r\n                    <th className=\"py-3 px-6 w-16\"></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <AnimatePresence mode=\"popLayout\">\r\n                    {items.length > 0 ? (\r\n                      items.map((item: any, idx: number) => (\r\n                        <motion.tr\r\n                          key={`item-${idx}`}\r\n                          initial={{ opacity: 0, scale: 0.98 }}\r\n                          animate={{ opacity: 1, scale: 1 }}\r\n                          exit={{ opacity: 0, x: -20 }}\r\n                          className=\"border-none hover:bg-app-surface-hover/30 transition-colors bg-app-surface\"\r\n                        >\r\n                          <td className=\"py-6 px-6 align-top\">\r\n                            <Accounting className=\"text-app-accent text-center block\">\r\n                              {item.po_item_no}\r\n                            </Accounting>\r\n                          </td>\r\n                          <td className=\"py-6 px-6 space-y-4\">\r\n                            <div className=\"space-y-1.5\">\r\n                              <Label className=\"tracking-wide text-xs font-semibold text-app-fg-muted\">DESCRIPTION</Label>\r\n                              <Input\r\n                                value={item.material_description}\r\n                                onChange={(e) => updateItem(idx, \"material_description\", e.target.value)}\r\n                                placeholder=\"Enter material specification...\"\r\n                                className=\"text-app-fg\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-3 gap-4\">\r\n                              <div className=\"space-y-1.5\">\r\n                                <Label className=\"tracking-wide text-xs font-semibold text-app-fg-muted\">CODE</Label>\r\n                                <Input\r\n                                  value={item.material_code}\r\n                                  onChange={(e) => updateItem(idx, \"material_code\", e.target.value)}\r\n                                  placeholder=\"Code\"\r\n                                  className=\"text-app-fg h-10 text-xs tabular-nums\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"space-y-1.5\">\r\n                                <Label className=\"tracking-wide text-xs font-semibold text-app-fg-muted\">DRAWING</Label>\r\n                                <Input\r\n                                  value={item.drg_no}\r\n                                  onChange={(e) => updateItem(idx, \"drg_no\", e.target.value)}\r\n                                  placeholder=\"DRG\"\r\n                                  className=\"text-app-fg h-10 text-xs tabular-nums\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"space-y-1.5\">\r\n                                <Label className=\"tracking-wide text-xs font-semibold text-app-fg-muted\">UNIT</Label>\r\n                                <Input\r\n                                  value={item.unit}\r\n                                  onChange={(e) => updateItem(idx, \"unit\", e.target.value)}\r\n                                  placeholder=\"Unit\"\r\n                                  className=\"text-app-fg h-10 text-xs uppercase\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-6 px-6 align-top text-right\">\r\n                            <div className=\"space-y-1.5\">\r\n                              <Label className=\"tracking-wide text-xs font-semibold text-app-fg-muted\">QTY</Label>\r\n                              <Input\r\n                                type=\"number\"\r\n                                value={item.ordered_quantity}\r\n                                onChange={(e) => updateItem(idx, \"ordered_quantity\", parseFloat(e.target.value))}\r\n                                className=\"text-right tabular-nums border-app-accent/20 focus:border-app-accent\"\r\n                              />\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-6 px-6 align-top text-right\">\r\n                            <div className=\"space-y-4\">\r\n                              <div className=\"space-y-1.5\">\r\n                                <Label className=\"tracking-wide text-xs font-semibold text-app-fg-muted\">UNIT RATE</Label>\r\n                                <Input\r\n                                  type=\"number\"\r\n                                  value={item.po_rate}\r\n                                  onChange={(e) => updateItem(idx, \"po_rate\", parseFloat(e.target.value))}\r\n                                  className=\"text-right tabular-nums\"\r\n                                />\r\n                              </div>\r\n                              <div className=\"pt-2 border-none\">\r\n                                <Label className=\"tracking-wide text-xs font-semibold text-app-fg-muted block mb-1\">ITEM VALUE</Label>\r\n                                <Accounting isCurrency className=\"text-app-accent text-right block text-base\">\r\n                                  {item.item_value}\r\n                                </Accounting>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"py-6 px-6 align-top text-center\">\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => removeItem(idx)}\r\n                              className=\"text-app-fg-muted hover:text-app-status-error hover:bg-app-status-error/10 transition-all mt-6\"\r\n                            >\r\n                              <Trash2 size={16} />\r\n                            </Button>\r\n                          </td>\r\n                        </motion.tr>\r\n                      ))\r\n                    ) : (\r\n                      <tr>\r\n                        <td colSpan={5} className=\"py-32 text-center bg-app-surface\">\r\n                          <div className=\"flex flex-col items-center justify-center gap-4 opacity-50\">\r\n                            <div className=\"w-16 h-16 rounded-2xl bg-app-overlay/5 flex items-center justify-center\">\r\n                              <Package className=\"w-8 h-8 text-app-fg-muted mb-0 stroke-[1.5]\" />\r\n                            </div>\r\n                            <div className=\"space-y-1\">\r\n                              <Body className=\"text-app-fg-muted uppercase tracking-wide font-medium\">No items defined</Body>\r\n                              <SmallText>Define material items for this purchase order</SmallText>\r\n                            </div>\r\n                            <Button variant=\"secondary\" size=\"sm\" onClick={addItem} className=\"mt-2\">\r\n                              <Plus size={14} className=\"mr-2\" /> Add Your First Item\r\n                            </Button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </AnimatePresence>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </Suspense>\r\n\r\n          {items.length > 0 && (\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-4\">\r\n              <div className=\"lg:col-start-2\">\r\n                <Card className=\"p-10 bg-app-surface/50 border-none shadow-premium-hover backdrop-blur-md relative overflow-hidden\">\r\n                  <div className=\"absolute top-0 right-0 w-32 h-32 bg-app-accent/5 rounded-bl-full -mr-16 -mt-16 pointer-events-none\" />\r\n                  <div className=\"flex justify-between items-end\">\r\n                    <div className=\"space-y-2\">\r\n                      <Label className=\"uppercase tracking-wide font-semibold text-xs text-app-fg-muted\">Estimated Contract Value</Label>\r\n                      <Body className=\"text-app-fg-muted italic lowercase first-letter:uppercase max-w-[250px] leading-tight block\">\r\n                        Net value including all materials and quantities\r\n                      </Body>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <Accounting\r\n                        isCurrency\r\n                        className=\"text-4xl text-app-fg tracking-tighter\"\r\n                      >\r\n                        {items.reduce((acc: number, cur: any) => acc + (cur.item_value || 0), 0)}\r\n                      </Accounting>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\nexport default function CreatePOPage() {\r\n  return (\r\n    <Suspense\r\n      fallback={\r\n        <div className=\"flex items-center justify-center min-h-screen bg-app-bg\">\r\n          <div className=\"flex flex-col items-center gap-4\">\r\n            <Loader2 className=\"animate-spin text-app-accent\" size={48} />\r\n            <Body className=\"text-app-fg-muted animate-pulse uppercase tracking-wide text-xs font-medium\">Preparing Workspace</Body>\r\n          </div>\r\n        </div>\r\n      }\r\n    >\r\n      <CreatePOPageContent />\r\n    </Suspense>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\po\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\providers.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\organisms\\ReportNavGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { NavigationCard, NavigationCardProps } from \"@/components/design-system/molecules/NavigationCard\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport interface ReportNavGridProps {\r\n    items: (Omit<NavigationCardProps, \"onClick\"> & { id: string })[];\r\n    activeId: string;\r\n    onSelect: (id: string) => void;\r\n    className?: string;\r\n}\r\n\r\nexport const ReportNavGrid = ({\r\n    items,\r\n    activeId,\r\n    onSelect,\r\n    className,\r\n}: ReportNavGridProps) => {\r\n    return (\r\n        <div className={cn(\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4\", className)}>\r\n            {items.map((item) => (\r\n                <NavigationCard\r\n                    key={item.id}\r\n                    {...item}\r\n                    active={item.id === activeId}\r\n                    onClick={() => onSelect(item.id)}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\organisms\\ReportsCharts.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":18,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":18,"endColumn":82},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":19,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":19,"endColumn":79},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[539,542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[539,542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":130,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":130,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6603,6606],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6603,6606],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":148,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":148,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7773,7776],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7773,7776],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":204,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":204,"endColumn":130},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":210,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":210,"endColumn":112},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":223,"column":44,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":223,"endColumn":133},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":238,"column":40,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":238,"endColumn":116}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport {\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    ResponsiveContainer,\r\n    Cell,\r\n    PieChart,\r\n    Pie,\r\n} from \"recharts\";\r\nimport { Activity } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Flex, Stack, Box, Grid } from \"@/components/design-system/atoms/Layout\";\r\nimport { Body, SmallText } from \"@/components/design-system/atoms/Typography\";\r\n\r\ninterface ReportsChartsProps {\r\n    activeTab: string;\r\n    chartData: any[];\r\n}\r\n\r\nconst ReportsCharts = ({ activeTab, chartData }: ReportsChartsProps) => {\r\n    return (\r\n        <motion.div\r\n            key={`chart-${activeTab}`}\r\n            initial={{ opacity: 0, scale: 0.98 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.98 }}\r\n        >\r\n            <Grid cols=\"1\" gap={6} className=\"lg:grid-cols-3\">\r\n                {/* Main Chart Card */}\r\n                <Box className=\"lg:col-span-2 p-6 rounded-2xl bg-app-surface/40 backdrop-blur-md shadow-clay-surface transition-all duration-300 hover:shadow-premium-hover\">\r\n                    <Flex\r\n                        align=\"center\"\r\n                        justify=\"between\"\r\n                        className=\"mb-4 shadow-none pb-2\"\r\n                    >\r\n                        <Box>\r\n                            <Body className=\"font-bold text-app-accent uppercase tracking-wide text-xs\">\r\n                                {activeTab === \"sales\" ? \"Revenue Momentum\" : \"Quality Distribution\"}\r\n                            </Body>\r\n                        </Box>\r\n                    </Flex>\r\n                    <Box className=\"h-[240px] w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            {activeTab === \"sales\" ? (\r\n                                <BarChart data={chartData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                                    <CartesianGrid\r\n                                        strokeDasharray=\"3 3\"\r\n                                        vertical={false}\r\n                                        stroke=\"#E0E0E0\"\r\n                                        opacity={0.3}\r\n                                    />\r\n                                    <XAxis\r\n                                        dataKey=\"name\"\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 600,\r\n                                            fill: \"rgb(var(--app-fg-secondary))\",\r\n                                        }}\r\n                                        dy={8}\r\n                                    />\r\n                                    <YAxis\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 600,\r\n                                            fill: \"rgb(var(--app-fg-secondary))\",\r\n                                        }}\r\n                                        tickFormatter={(value) => {\r\n                                            if (value >= 10000000) return `${(value / 10000000).toFixed(1)}Cr`;\r\n                                            if (value >= 100000) return `${(value / 100000).toFixed(1)}L`;\r\n                                            if (value >= 1000) return `${(value / 1000).toFixed(1)}k`;\r\n                                            return String(value);\r\n                                        }}\r\n                                    />\r\n                                    <Tooltip\r\n                                        contentStyle={{\r\n                                            borderRadius: \"12px\",\r\n                                            border: \"1px solid #E0E0E0\",\r\n                                            boxShadow: \"var(--shadow-lg)\",\r\n                                            color: \"rgb(var(--app-fg-primary))\",\r\n                                            fontSize: \"11px\",\r\n                                            marginBottom: \"4px\",\r\n                                        }}\r\n                                        itemStyle={{\r\n                                            fontSize: \"10px\",\r\n                                            fontWeight: 600,\r\n                                        }}\r\n                                    />\r\n                                    <Bar\r\n                                        name=\"Ordered\"\r\n                                        dataKey=\"ordered_value\"\r\n                                        fill=\"rgb(var(--app-accent))\"\r\n                                        radius={[6, 6, 0, 0]}\r\n                                        maxBarSize={40}\r\n                                        opacity={0.9}\r\n                                    />\r\n                                    <Bar\r\n                                        name=\"Delivered\"\r\n                                        dataKey=\"delivered_value\"\r\n                                        fill=\"rgb(var(--app-success))\"\r\n                                        radius={[6, 6, 0, 0]}\r\n                                        maxBarSize={40}\r\n                                        opacity={0.9}\r\n                                    />\r\n                                </BarChart>\r\n                            ) : (\r\n                                <BarChart data={chartData} layout=\"vertical\" margin={{ left: 40, right: 10 }}>\r\n                                    <XAxis type=\"number\" hide />\r\n                                    <YAxis\r\n                                        dataKey=\"name\"\r\n                                        type=\"category\"\r\n                                        axisLine={false}\r\n                                        tickLine={false}\r\n                                        tick={{\r\n                                            fontSize: 10,\r\n                                            fontWeight: 600,\r\n                                            fill: \"var(--app-fg-muted)\",\r\n                                        }}\r\n                                    />\r\n                                    <Tooltip\r\n                                        formatter={(value: any) => [\r\n                                            typeof value === \"number\" ? Math.round(value) : value,\r\n                                            \"\",\r\n                                        ]}\r\n                                        contentStyle={{\r\n                                            borderRadius: \"12px\",\r\n                                            border: \"1px solid #E0E0E0\",\r\n                                            boxShadow: \"var(--shadow-lg)\",\r\n                                            background: \"rgb(var(--app-surface))\",\r\n                                            backdropFilter: \"blur(10px)\",\r\n                                            padding: \"8px 12px\",\r\n                                        }}\r\n                                        itemStyle={{\r\n                                            fontSize: \"10px\",\r\n                                            fontWeight: 600,\r\n                                        }}\r\n                                    />\r\n                                    <Bar dataKey=\"value\" radius={[0, 6, 6, 0]} maxBarSize={28}>\r\n                                        {chartData.map((entry: any, index: number) => {\r\n                                            // Use theme-aware CSS variables\r\n                                            const colors = [\r\n                                                \"rgb(var(--app-success))\",\r\n                                                \"rgb(var(--app-error))\",\r\n                                                \"rgb(var(--app-warning))\",\r\n                                            ];\r\n                                            const color = entry.color || colors[index % colors.length];\r\n\r\n                                            return (\r\n                                                <Cell\r\n                                                    key={`cell-${index}`}\r\n                                                    fill={color}\r\n                                                    fillOpacity={0.9}\r\n                                                />\r\n                                            );\r\n                                        })}\r\n                                    </Bar>\r\n                                </BarChart>\r\n                            )}\r\n                        </ResponsiveContainer>\r\n                    </Box>\r\n                </Box>\r\n\r\n                {/* Secondary Charts Stack */}\r\n                <Stack gap={4}>\r\n                    <Flex\r\n                        align=\"center\"\r\n                        justify=\"center\"\r\n                        direction=\"col\"\r\n                        className=\"p-5 rounded-2xl bg-app-surface/40 backdrop-blur-md shadow-clay-surface text-center\"\r\n                    >\r\n                        <Flex align=\"center\" justify=\"center\" className=\"relative w-28 h-28\">\r\n                            <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                                <PieChart>\r\n                                    <Pie\r\n                                        data={[\r\n                                            { name: \"Growth\", value: 75, fill: \"rgb(var(--app-accent))\" },\r\n                                            { name: \"Remaining\", value: 25, fill: \"rgb(var(--app-border))\" },\r\n                                        ]}\r\n                                        cx=\"50%\"\r\n                                        cy=\"50%\"\r\n                                        innerRadius={42}\r\n                                        outerRadius={56}\r\n                                        dataKey=\"value\"\r\n                                        startAngle={90}\r\n                                        endAngle={-270}\r\n                                        stroke=\"#FFFFFF\"\r\n                                        strokeWidth={3}\r\n                                    />\r\n                                </PieChart>\r\n                            </ResponsiveContainer>\r\n                            <Stack align=\"center\" justify=\"center\" className=\"absolute inset-0\">\r\n                                <Body className=\"font-bold text-app-accent text-lg\">\r\n                                    75%\r\n                                </Body>\r\n                                <SmallText className=\"text-[9px] text-app-accent font-bold uppercase tracking-wider leading-none\">\r\n                                    Margin\r\n                                </SmallText>\r\n                            </Stack>\r\n                        </Flex>\r\n                        <Box className=\"mt-3\">\r\n                            <Body className=\"text-[10px] font-bold text-app-fg-muted uppercase tracking-widest\">\r\n                                Gross Profit Margin\r\n                            </Body>\r\n                        </Box>\r\n                    </Flex>\r\n\r\n                    <Flex\r\n                        justify=\"between\"\r\n                        direction=\"col\"\r\n                        className=\"p-5 rounded-2xl bg-app-surface/40 backdrop-blur-md shadow-clay-surface transition-all duration-300 hover:shadow-premium-hover\"\r\n                    >\r\n                        <Flex align=\"center\" justify=\"between\">\r\n                            <Stack>\r\n                                <SmallText className=\"text-[9px] font-bold text-app-fg-muted uppercase tracking-widest leading-none\">\r\n                                    Quick Ratio\r\n                                </SmallText>\r\n                                <Body className=\"font-bold text-app-fg mt-1 text-sm\">\r\n                                    0.9:8\r\n                                </Body>\r\n                            </Stack>\r\n                            <Box className=\"w-9 h-9 rounded-xl flex items-center justify-center bg-app-status-warning/10 text-app-status-warning\">\r\n                                <Activity size={18} />\r\n                            </Box>\r\n                        </Flex>\r\n                        <Box className=\"mt-3\">\r\n                            <Box className=\"w-full bg-app-border/30 h-2 rounded-full overflow-hidden\">\r\n                                <Box className=\"bg-gradient-to-r from-amber-400 to-amber-600 h-full rounded-full w-[45%]\" />\r\n                            </Box>\r\n                            <SmallText className=\"text-[9px] text-app-fg-muted/70 font-medium mt-2 leading-relaxed\">\r\n                                Liquid assets vs Current liabilities\r\n                            </SmallText>\r\n                        </Box>\r\n                    </Flex>\r\n                </Stack>\r\n            </Grid>\r\n        </motion.div>\r\n    );\r\n};\r\n\r\nexport default ReportsCharts;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\organisms\\ReportsDataCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":77},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":71}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H3, SmallText } from \"@/components/design-system/atoms/Typography\";\r\nimport { Stack, Flex } from \"@/components/design-system/atoms/Layout\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface ReportsDataCardProps {\r\n    title: string;\r\n    subtitle?: string;\r\n    children: React.ReactNode;\r\n    actions?: React.ReactNode;\r\n    className?: string;\r\n}\r\n\r\nexport const ReportsDataCard = ({\r\n    title,\r\n    subtitle,\r\n    children,\r\n    actions,\r\n    className,\r\n}: ReportsDataCardProps) => {\r\n    return (\r\n        <div className={cn(\"bg-app-surface border-none rounded-xl elevation-2 p-6 space-y-6\", className)}>\r\n            <Flex justify=\"between\" align=\"start\">\r\n                <Stack gap={1}>\r\n                    <H3 className=\"m-0 text-app-accent font-bold tracking-tight uppercase leading-none\">\r\n                        {title}\r\n                    </H3>\r\n                    {subtitle && (\r\n                        <SmallText className=\"text-app-fg-muted font-medium opacity-70\">\r\n                            {subtitle}\r\n                        </SmallText>\r\n                    )}\r\n                </Stack>\r\n                {actions && <Flex gap={2}>{actions}</Flex>}\r\n            </Flex>\r\n            <div className=\"w-full relative\">\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\organisms\\ReportsToolbar.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":66},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":64},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":46,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":46,"endColumn":136},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":53,"column":21,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":53,"endColumn":136},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":67,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":67,"endColumn":89}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Flex } from \"@/components/design-system/atoms/Layout\";\r\nimport { FileSpreadsheet, Calendar, ArrowRight } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ReportsToolbar Organism - Atomic Design System v1.0\r\n * Date range selector + Module selector + Export buttons\r\n * Used in Reports page\r\n */\r\nexport interface ReportsToolbarProps {\r\n    startDate: string;\r\n    endDate: string;\r\n    onDateChange: (start: string, end: string) => void;\r\n    onExport?: () => void;\r\n    loading?: boolean;\r\n    className?: string;\r\n}\r\n\r\nexport const ReportsToolbar: React.FC<ReportsToolbarProps> = ({\r\n    startDate,\r\n    endDate,\r\n    onDateChange,\r\n    onExport,\r\n    loading = false,\r\n    className,\r\n}) => {\r\n    return (\r\n        <div\r\n            className={cn(\r\n                \"flex flex-col sm:flex-row items-center justify-between gap-4 py-2 px-3\",\r\n                \"bg-app-surface/40 backdrop-blur-md rounded-xl border-none elevation-2\",\r\n                className\r\n            )}\r\n        >\r\n            {/* Date Range Selection */}\r\n            <Flex align=\"center\" gap={2} className=\"bg-app-overlay/10 px-3 py-1.5 rounded-xl border-none elevation-1 group focus-within:bg-app-overlay/20 transition-all duration-300\">\r\n                <Calendar size={14} className=\"text-app-accent opacity-60 group-hover:opacity-100 transition-opacity\" />\r\n                <input\r\n                    type=\"date\"\r\n                    value={startDate}\r\n                    onChange={(e) => onDateChange(e.target.value, endDate)}\r\n                    className=\"bg-transparent border-none p-0 text-[12px] font-black text-app-fg focus:ring-0 w-[110px] cursor-pointer\"\r\n                />\r\n                <ArrowRight size={10} className=\"text-app-fg-muted opacity-30 mx-1\" />\r\n                <input\r\n                    type=\"date\"\r\n                    value={endDate}\r\n                    onChange={(e) => onDateChange(startDate, e.target.value)}\r\n                    className=\"bg-transparent border-none p-0 text-[12px] font-black text-app-fg focus:ring-0 w-[110px] cursor-pointer\"\r\n                />\r\n            </Flex>\r\n\r\n            {/* Export Action */}\r\n            {onExport && (\r\n                <Button\r\n                    onClick={onExport}\r\n                    variant=\"secondary\"\r\n                    size=\"sm\"\r\n                    loading={loading}\r\n                    className=\"h-8 px-4 gap-2 bg-app-overlay/10 border-app-border/30 text-app-fg hover:bg-app-overlay/20 active-glow transition-all rounded-xl\"\r\n                >\r\n                    <FileSpreadsheet size={13} className=\"text-app-status-success\" />\r\n                    <span className=\"text-[10px] font-black uppercase tracking-[0.15em]\">\r\n                        Export Ledger\r\n                    </span>\r\n                </Button>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\reports\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createPortal' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1146,1149],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1146,1149],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":85,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2373,2376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2373,2376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":126,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3307,3310],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3307,3310],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":168,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":168,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4432,4435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4432,4435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5816,5819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5816,5819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":285,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":285,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7575,7578],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7575,7578],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'headerPortal' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":291,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":291,"endColumn":22},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":352,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":352,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9730,9733],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9730,9733],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport {\r\n  Download,\r\n  Truck,\r\n  Receipt,\r\n  TrendingUp,\r\n  Calendar,\r\n  AlertTriangle,\r\n  Activity,\r\n} from \"lucide-react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport dynamic from \"next/dynamic\";\r\n\r\nconst ReportsCharts = dynamic(() => import(\"./organisms/ReportsCharts\"), {\r\n  ssr: false,\r\n});\r\nimport { api } from \"@/lib/api\";\r\nimport { formatDate, formatIndianCurrency, cn } from \"@/lib/utils\";\r\n\r\n// --- FIX 1: Direct Imports (No Barrel Files) ---\r\nimport {\r\n  Accounting,\r\n  Body,\r\n  type Column,\r\n  Flex,\r\n  Box,\r\n  DataTable,\r\n  Badge,\r\n  DocumentTemplate,\r\n} from \"@/components/design-system\";\r\nimport { ReportNavGrid } from \"./organisms/ReportNavGrid\";\r\nimport { ReportsDataCard } from \"./organisms/ReportsDataCard\";\r\n\r\ntype ReportType = \"sales\" | \"dc_register\" | \"invoice_register\" | \"pending\" | \"reconciliation\";\r\n\r\n// --- FIX 2: Static Column Definitions (Moved Outside Component) ---\r\n// This prevents the Table from re-rendering on every keystroke.\r\n\r\nconst salesColumns: Column<any>[] = [\r\n  {\r\n    key: \"month\",\r\n    label: \"MONTH\",\r\n    render: (_v, row) => (\r\n      <Body className=\"table-cell-text font-medium text-app-accent\">{row.month}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"ordered_value\",\r\n    label: \"ORDERED VALUE\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\r\n        {formatIndianCurrency(row.ordered_value)}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"delivered_value\",\r\n    label: \"DELIVERED VALUE\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-success font-mono text-right block\">\r\n        {formatIndianCurrency(row.delivered_value)}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"variance\",\r\n    label: \"VARIANCE\",\r\n    align: \"right\",\r\n    render: (_v, row) => {\r\n      const diff = (row.ordered_value || 0) - (row.delivered_value || 0);\r\n      return (\r\n        <Accounting className={cn(\"table-cell-number font-mono text-right block\", diff > 0 ? \"text-app-status-warning\" : \"text-app-fg-muted\")}>\r\n          {formatIndianCurrency(diff)}\r\n        </Accounting>\r\n      )\r\n    },\r\n  },\r\n];\r\n\r\nconst dcColumns: Column<any>[] = [\r\n  {\r\n    key: \"dc_number\",\r\n    label: \"DC NUMBER\",\r\n    render: (_v, row) => (\r\n      <Body className=\"text-app-accent\">DC-{row.dc_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"dc_date\",\r\n    label: \"DATE\",\r\n    render: (_v, row) => (\r\n      <Body className=\"text-app-fg-muted\">\r\n        {formatDate(row.dc_date)}\r\n      </Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"po_number\",\r\n    label: \"PO REF\",\r\n    render: (_v, row) => (\r\n      <Body className=\"text-app-fg-muted\">{row.po_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"consignee_name\",\r\n    label: \"CONSIGNEE\",\r\n    render: (_v, row) => (\r\n      <Body className=\"max-w-[200px] truncate\">{row.consignee_name}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_qty\",\r\n    label: \"QTY\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"font-medium font-mono text-right block\">{row.total_qty}</Accounting>\r\n    ),\r\n  },\r\n];\r\n\r\nconst invoiceColumns: Column<any>[] = [\r\n  {\r\n    key: \"invoice_number\",\r\n    label: \"INVOICE NO\",\r\n    render: (_v, row) => (\r\n      <Body className=\"table-cell-text text-app-accent\">{row.invoice_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"invoice_date\",\r\n    label: \"DATE\",\r\n    render: (_v, row) => <Body className=\"font-medium\">{formatDate(row.invoice_date)}</Body>,\r\n  },\r\n  {\r\n    key: \"customer_gstin\",\r\n    label: \"CUSTOMER GST\",\r\n    render: (_v, row) => (\r\n      <Body className=\"font-mono block\">{row.customer_gstin}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"taxable_value\",\r\n    label: \"TAXABLE\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\r\n        {formatIndianCurrency(row.taxable_value)}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_invoice_value\",\r\n    label: \"TOTAL\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-fg font-mono text-right block\">\r\n        {formatIndianCurrency(row.total_invoice_value)}\r\n      </Accounting>\r\n    ),\r\n  },\r\n];\r\n\r\nconst pendingColumns: Column<any>[] = [\r\n  {\r\n    key: \"po_number\",\r\n    label: \"PO NUMBER\",\r\n    width: \"15%\",\r\n    render: (_v, row) => (\r\n      <Body className=\"table-cell-text text-app-accent\">{row.po_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"material_description\",\r\n    label: \"MATERIAL\",\r\n    width: \"30%\",\r\n    render: (_v, row) => (\r\n      <Box className=\"w-[180px] lg:w-[280px] truncate\" title={row.material_description}>\r\n        <Body className=\"table-cell-text truncate block\">{row.material_description}</Body>\r\n      </Box>\r\n    ),\r\n  },\r\n  {\r\n    key: \"ord_qty\",\r\n    label: \"ORD\",\r\n    width: \"10%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">{row.ord_qty}</Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"delivered_qty\",\r\n    label: \"DELIVERED\",\r\n    width: \"20%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-success font-mono text-right block\">\r\n        {row.delivered_qty}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"pending_qty\",\r\n    label: \"PENDING\",\r\n    width: \"20%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-warning font-mono text-right block\">\r\n        {row.pending_qty}\r\n      </Accounting>\r\n    ),\r\n  },\r\n];\r\n\r\nconst reconciliationColumns: Column<any>[] = [\r\n  {\r\n    key: \"po_number\",\r\n    label: \"PO NUMBER\",\r\n    width: \"15%\",\r\n    render: (_v, row) => (\r\n      <Body className=\"table-cell-text text-app-accent\">{row.po_number}</Body>\r\n    ),\r\n  },\r\n  {\r\n    key: \"item_description\",\r\n    label: \"ITEM\",\r\n    width: \"35%\",\r\n    render: (_v, row) => (\r\n      <Box className=\"w-[200px] lg:w-[320px] truncate\" title={row.item_description}>\r\n        <Body className=\"table-cell-text truncate block\">{row.item_description}</Body>\r\n      </Box>\r\n    ),\r\n  },\r\n  {\r\n    key: \"ordered_qty\",\r\n    label: \"ORD\",\r\n    width: \"10%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">{row.ordered_qty}</Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_dispatched\",\r\n    label: \"DISP\",\r\n    width: \"10%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number font-medium font-mono text-right block\">\r\n        {row.total_dispatched}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_accepted\",\r\n    label: \"ACC\",\r\n    width: \"15%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-success font-mono text-right block\">\r\n        {row.total_accepted}\r\n      </Accounting>\r\n    ),\r\n  },\r\n  {\r\n    key: \"total_rejected\",\r\n    label: \"REJ\",\r\n    width: \"15%\",\r\n    align: \"right\",\r\n    render: (_v, row) => (\r\n      <Accounting className=\"table-cell-number text-app-status-error font-mono text-right block\">\r\n        {row.total_rejected}\r\n      </Accounting>\r\n    ),\r\n  },\r\n];\r\n\r\nexport default function ReportsPage() {\r\n  const [activeTab, setActiveTab] = useState<ReportType>(\"sales\");\r\n  const [data, setData] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize] = useState(10);\r\n  const [startDate, setStartDate] = useState<string>(\"2020-01-01\");\r\n  const [endDate, setEndDate] = useState<string>(new Date().toISOString().split(\"T\")[0]);\r\n  const [headerPortal, setHeaderPortal] = useState<HTMLElement | null>(null);\r\n\r\n  // --- CHART DATA GENERATION ---\r\n  const chartData = useMemo(() => {\r\n    if (!data || data.length === 0) return [];\r\n\r\n    if (activeTab === \"sales\") {\r\n      return [...data].reverse().map((item) => ({\r\n        name: item.month,\r\n        ordered_value: item.ordered_value,\r\n        delivered_value: item.delivered_value,\r\n      }));\r\n    }\r\n\r\n    // Skip chart generation for non-chart tabs\r\n    if ([\"dc_register\", \"invoice_register\", \"pending\"].includes(activeTab)) {\r\n      return [];\r\n    }\r\n\r\n    if (activeTab === \"reconciliation\") {\r\n      return [\r\n        {\r\n          name: \"Accepted\",\r\n          value: data.reduce((s, r) => s + (r.total_accepted || 0), 0),\r\n          color: \"hsl(142, 76%, 36%)\",  // Green\r\n        },\r\n        {\r\n          name: \"Rejected\",\r\n          value: data.reduce((s, r) => s + (r.total_rejected || 0), 0),\r\n          color: \"hsl(0, 84%, 60%)\",  // Red\r\n        },\r\n        {\r\n          name: \"Pending\",\r\n          value: data.reduce(\r\n            (s, r) =>\r\n              s +\r\n              Math.max(0, (r.ordered_qty || 0) - (r.total_accepted || 0) - (r.total_rejected || 0)),\r\n            0\r\n          ),\r\n          color: \"hsl(38, 92%, 50%)\",  // Amber\r\n        },\r\n      ].filter((d) => d.value > 0);\r\n    }\r\n\r\n    return [];\r\n  }, [data, activeTab]);\r\n\r\n  useEffect(() => {\r\n    setHeaderPortal(document.getElementById(\"header-action-portal\"));\r\n  }, []);\r\n\r\n  const loadReport = useCallback(async () => {\r\n    setLoading(true);\r\n    setData([]);\r\n    try {\r\n      const dateParams = `start_date=${startDate}&end_date=${endDate}`;\r\n\r\n      // Use centralized API for type-safe fetch\r\n      const result = await api.getReports(activeTab, dateParams);\r\n\r\n      const finalData = Array.isArray(result)\r\n        ? result.map((item: any, index: number) => ({\r\n          ...item,\r\n          unique_id: `${activeTab}-${index}-${item.id || item.number || item.po_number || item.dc_number || item.invoice_number || \"\"}`,\r\n        }))\r\n        : [];\r\n\r\n      setData(finalData);\r\n    } catch {\r\n      // Error handled by boundary or silent fail\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [activeTab, startDate, endDate]);\r\n\r\n  useEffect(() => {\r\n    setPage(1);\r\n    loadReport();\r\n  }, [loadReport]);\r\n\r\n  const handleExport = useCallback(() => {\r\n    const dateParams = `start_date=${startDate}&end_date=${endDate}`;\r\n    api.exportReport(activeTab, dateParams);\r\n  }, [activeTab, startDate, endDate]);\r\n\r\n\r\n  const activeColumns = useMemo(() => {\r\n    switch (activeTab) {\r\n      case \"sales\":\r\n        return salesColumns;\r\n      case \"dc_register\":\r\n        return dcColumns;\r\n      case \"invoice_register\":\r\n        return invoiceColumns;\r\n      case \"pending\":\r\n        return pendingColumns;\r\n      case \"reconciliation\":\r\n        return reconciliationColumns;\r\n      default:\r\n        return [];\r\n    }\r\n  }, [activeTab]);\r\n\r\n  const handlePageChange = useCallback((newPage: number) => {\r\n    setPage(newPage);\r\n  }, []);\r\n\r\n  // --- OPTIMIZATION: Toolbar Portal Content ---\r\n  const toolbarContent = (\r\n    <Flex align=\"center\" gap={3}>\r\n      <Flex\r\n        align=\"center\"\r\n        className=\"bg-app-surface/40 backdrop-blur-xl border-none rounded-2xl overflow-hidden shadow-sm p-1\"\r\n      >\r\n        <Flex\r\n          align=\"center\"\r\n          gap={3}\r\n          className=\"px-4 py-2 hover:bg-app-surface/40 transition-colors rounded-xl group\"\r\n        >\r\n          <Calendar\r\n            size={16}\r\n            className=\"text-app-accent group-hover:scale-110 transition-transform\"\r\n          />\r\n          <input\r\n            type=\"date\"\r\n            value={startDate}\r\n            onChange={(e) => setStartDate(e.target.value)}\r\n            className=\"outline-none bg-transparent text-app-fg-muted text-xs font-bold uppercase\"\r\n          />\r\n        </Flex>\r\n        <Box className=\"w-[1px] h-6 bg-app-fg-muted/10 mx-1\" />\r\n        <Flex\r\n          align=\"center\"\r\n          gap={3}\r\n          className=\"px-4 py-2 hover:bg-app-surface/40 transition-colors rounded-xl group\"\r\n        >\r\n          <input\r\n            type=\"date\"\r\n            value={endDate}\r\n            onChange={(e) => setEndDate(e.target.value)}\r\n            className=\"outline-none bg-transparent text-app-fg-muted text-xs font-bold uppercase\"\r\n          />\r\n        </Flex>\r\n      </Flex>\r\n      <button\r\n        onClick={handleExport}\r\n        className=\"group flex items-center gap-3 px-6 py-3 bg-app-accent text-white rounded-2xl hover:brightness-110 shadow-lg transition-all active:scale-95 uppercase tracking-[0.1em]\"\r\n      >\r\n        <Download size={16} className=\"group-hover:translate-y-0.5 transition-transform\" />\r\n        Export\r\n      </button>\r\n    </Flex>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"Analytics\"\r\n      description=\"Multi-dimensional trend analysis and reconciliation\"\r\n      actions={toolbarContent}\r\n    >\r\n      <div className=\"space-y-6\">\r\n        <ReportNavGrid\r\n          items={[\r\n            {\r\n              id: \"sales\",\r\n              title: \"Growth\",\r\n              description: \"Revenue and tax velocity trends\",\r\n              icon: <TrendingUp />,\r\n            },\r\n            {\r\n              id: \"dc_register\",\r\n              title: \"DC Register\",\r\n              description: \"Dispatch and logistics tracking\",\r\n              icon: <Truck />,\r\n            },\r\n            {\r\n              id: \"invoice_register\",\r\n              title: \"Invoices\",\r\n              description: \"Billing and payment ledger\",\r\n              icon: <Receipt />,\r\n            },\r\n            {\r\n              id: \"pending\",\r\n              title: \"Shortages\",\r\n              description: \"Active pending supply gaps\",\r\n              icon: <AlertTriangle />,\r\n            },\r\n            {\r\n              id: \"reconciliation\",\r\n              title: \"Ledger Audit\",\r\n              description: \"Physical vs System inventory audit\",\r\n              icon: <Activity />,\r\n            },\r\n          ]}\r\n          activeId={activeTab}\r\n          onSelect={(id) => {\r\n            setLoading(true);\r\n            setData([]);\r\n            setActiveTab(id as ReportType);\r\n          }}\r\n          className=\"w-full\"\r\n        />\r\n\r\n        {/* --- DYNAMIC CHART SECTION --- */}\r\n        <AnimatePresence mode=\"wait\">\r\n          {data.length > 0 && (activeTab === \"sales\" || activeTab === \"reconciliation\") && (\r\n            <ReportsDataCard\r\n              title=\"Analytics Overview\"\r\n              subtitle=\"Multi-dimensional trend analysis\"\r\n              className=\"bg-app-accent/5 border-app-accent/10\"\r\n            >\r\n              <ReportsCharts activeTab={activeTab} chartData={chartData} />\r\n            </ReportsDataCard>\r\n          )}\r\n        </AnimatePresence>\r\n\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={activeTab}\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            transition={{ duration: 0.2 }}\r\n            className=\"w-full\"\r\n          >\r\n            <ReportsDataCard\r\n              title={\r\n                activeTab === \"dc_register\"\r\n                  ? \"Distribution Flow\"\r\n                  : activeTab === \"invoice_register\"\r\n                    ? \"Revenue Ledger\"\r\n                    : activeTab === \"sales\"\r\n                      ? \"Growth Momentum\"\r\n                      : activeTab === \"pending\"\r\n                        ? \"Active Shortages\"\r\n                        : \"Quality Audit\"\r\n              }\r\n              subtitle=\"Real-time multi-dimensional intelligence\"\r\n              actions={\r\n                <Badge variant=\"outline\" className=\"font-mono\">\r\n                  {data.length} RECORDS\r\n                </Badge>\r\n              }\r\n            >\r\n              <DataTable\r\n                columns={activeColumns}\r\n                data={data}\r\n                keyField=\"unique_id\"\r\n                page={page}\r\n                pageSize={pageSize}\r\n                totalItems={data.length}\r\n                onPageChange={handlePageChange}\r\n                loading={loading}\r\n              />\r\n            </ReportsDataCard>\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\settings\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1167,1170],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1167,1170],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4676,4679],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4676,4679],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":774,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":774,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useCallback } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  Building2,\r\n  Users,\r\n  Settings as SettingsIcon,\r\n  Save,\r\n  Loader2,\r\n  Check,\r\n  Plus,\r\n  Trash2,\r\n  ShieldAlert,\r\n  MapPin,\r\n  Phone,\r\n  Mail,\r\n  Edit2,\r\n  X,\r\n} from \"lucide-react\";\r\nimport { api, API_BASE_URL, type Buyer } from \"@/lib/api\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { DocumentTemplate } from \"@/components/design-system/templates/DocumentTemplate\";\r\nimport {\r\n  Tabs,\r\n  TabsList,\r\n  TabsTrigger,\r\n  TabsContent,\r\n} from \"@/components/design-system/molecules/Tabs\";\r\nimport {\r\n  H2,\r\n  H3,\r\n  Label,\r\n  Body,\r\n  SmallText,\r\n  Accounting,\r\n  Button,\r\n  Input,\r\n  Card,\r\n  Badge,\r\n  Stack,\r\n  Grid,\r\n  Flex,\r\n  Box,\r\n  SpotlightCard,\r\n} from \"@/components/design-system\";\r\n\r\nexport default function SettingsPage() {\r\n  const [activeTab, setActiveTab] = useState(\"supplier\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // --- States ---\r\n  const [settings, setSettings] = useState<any>({});\r\n  const [buyers, setBuyers] = useState<Buyer[]>([]);\r\n  const [isAddingBuyer, setIsAddingBuyer] = useState(false);\r\n  const [editingBuyerId, setEditingBuyerId] = useState<number | null>(null);\r\n\r\n  // Buyer Form State\r\n  const [buyerForm, setBuyerForm] = useState<Partial<Buyer>>({\r\n    name: \"\",\r\n    gstin: \"\",\r\n    billing_address: \"\",\r\n    place_of_supply: \"\",\r\n    state: \"\",\r\n    state_code: \"\",\r\n  });\r\n\r\n  // System Reset States\r\n  const [showResetConfirm, setShowResetConfirm] = useState(false);\r\n  const [isResetting, setIsResetting] = useState(false);\r\n\r\n  // --- Init ---\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [settingsData, buyersData] = await Promise.all([api.getSettings(), api.getBuyers()]);\r\n      setSettings(settingsData);\r\n      setBuyers(buyersData);\r\n    } catch {\r\n      setError(\"Failed to load settings data.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // --- Handlers ---\r\n  const handleSaveSettings = useCallback(async (keys: string[]) => {\r\n    setSaving(true);\r\n    setError(null);\r\n    try {\r\n      const batch = keys.map((key) => ({\r\n        key,\r\n        value: settings[key]?.toString() || \"\",\r\n      }));\r\n      await api.updateSettingsBatch(batch);\r\n    } catch {\r\n      setError(\"Failed to save settings.\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }, [settings]);\r\n\r\n  const handleStartEditBuyer = useCallback((buyer: Buyer) => {\r\n    setEditingBuyerId(buyer.id);\r\n    setBuyerForm(buyer);\r\n    setIsAddingBuyer(false);\r\n  }, []);\r\n\r\n  const handleCancelBuyerForm = useCallback(() => {\r\n    setEditingBuyerId(null);\r\n    setIsAddingBuyer(false);\r\n    setBuyerForm({\r\n      name: \"\",\r\n      gstin: \"\",\r\n      billing_address: \"\",\r\n      place_of_supply: \"\",\r\n      state: \"\",\r\n      state_code: \"\",\r\n    });\r\n  }, []);\r\n\r\n  const handleSaveBuyer = async () => {\r\n    if (!buyerForm.name || !buyerForm.gstin) return;\r\n    setSaving(true);\r\n    try {\r\n      if (editingBuyerId) {\r\n        await api.updateBuyer(editingBuyerId, { ...buyerForm });\r\n      } else {\r\n        await api.createBuyer({ ...buyerForm, is_active: true });\r\n      }\r\n      await loadData();\r\n      handleCancelBuyerForm();\r\n    } catch {\r\n      setError(\"Failed to save buyer.\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteBuyer = async (id: number) => {\r\n    if (!confirm(\"Are you sure you want to delete this buyer?\")) return;\r\n    try {\r\n      await api.deleteBuyer(id);\r\n      await loadData();\r\n    } catch {\r\n      setError(\"Failed to delete buyer.\");\r\n    }\r\n  };\r\n\r\n  const handleSystemReset = async () => {\r\n    setIsResetting(true);\r\n    setError(null);\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/api/system/reset-db`, {\r\n        method: \"POST\",\r\n      });\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        const clearedCount = data.tables_cleared?.length || 0;\r\n        const preservedList = data.preserved?.join(\", \") || \"None\";\r\n        alert(\r\n          `âœ… ${data.message || \"Database reset successfully.\"}\\n\\n` +\r\n          `Business Entities Purged: ${clearedCount}\\n` +\r\n          `Configuration Preserved: ${preservedList}\\n\\n` +\r\n          `Returning to dashboard.`\r\n        );\r\n        window.location.href = \"/\";\r\n      } else {\r\n        setError(data.detail || \"System reset failed. Database might be locked by another process.\");\r\n      }\r\n    } catch (err: any) {\r\n      setError(`Network error: ${err.message || \"Could not reach server\"}`);\r\n    } finally {\r\n      setIsResetting(false);\r\n      setShowResetConfirm(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center p-20 text-app-fg-muted\">\r\n        <Loader2 className=\"animate-spin mb-4\" size={32} />\r\n        <Body>Loading System Configuration...</Body>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const topActions = (\r\n    <div className=\"flex gap-3\">\r\n      <Button variant=\"secondary\" onClick={loadData}>\r\n        Sync\r\n      </Button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <DocumentTemplate\r\n      title=\"SETTINGS\"\r\n      description=\"Enterprise orchestration and entity lifecycle management\"\r\n      actions={topActions}\r\n      layoutId=\"settings-title\"\r\n      icon={<SettingsIcon size={20} className=\"text-app-accent\" />}\r\n      iconLayoutId=\"settings-icon\"\r\n    >\r\n      <div className=\"space-y-6\">\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\r\n          <TabsList className=\"mb-4 bg-transparent p-0 border-none w-full justify-start rounded-none gap-6\">\r\n            <TabsTrigger value=\"supplier\">\r\n              <Building2 size={14} className=\"mr-2\" />\r\n              Supplier Identity\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"buyer\">\r\n              <Users size={14} className=\"mr-2\" />\r\n              Market Entities\r\n            </TabsTrigger>\r\n            <TabsTrigger value=\"system\">\r\n              <SettingsIcon size={14} className=\"mr-2\" />\r\n              System Governance\r\n            </TabsTrigger>\r\n          </TabsList>\r\n\r\n          {error && (\r\n            <Card className=\"p-4 bg-app-status-error/10 text-app-status-error flex items-center gap-2 mb-4 shadow-sm border-none\">\r\n              <ShieldAlert size={16} />\r\n              <SmallText className=\"font-semibold\">{error}</SmallText>\r\n            </Card>\r\n          )}\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            <motion.div\r\n              key={activeTab}\r\n              initial={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              exit={{ opacity: 0 }}\r\n              transition={{ duration: 0.15 }}\r\n            >\r\n              {/* --- Tab: Supplier --- */}\r\n              <TabsContent value=\"supplier\" className=\"mt-0\">\r\n                <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={6}>\r\n                  <div className=\"lg:col-span-8\">\r\n                    <div className=\"bg-app-surface rounded-2xl border-none p-6 elevation-2 relative overflow-hidden group\">\r\n                      {/* Ambient Blobs */}\r\n                      <Box className=\"absolute top-0 right-0 w-64 h-64 bg-app-accent/5 rounded-full -mr-20 -mt-20 blur-3xl group-hover:bg-app-accent/10 transition-all duration-700\" />\r\n\r\n                      <div className=\"relative z-10\">\r\n                        <Stack gap={10}>\r\n                          <section>\r\n                            <Flex align=\"center\" justify=\"between\" className=\"mb-8\">\r\n                              <H3>Business Profile</H3>\r\n                              <Button\r\n                                variant=\"primary\"\r\n                                onClick={() =>\r\n                                  handleSaveSettings([\r\n                                    \"supplier_name\",\r\n                                    \"supplier_address\",\r\n                                    \"supplier_gstin\",\r\n                                    \"supplier_contact\",\r\n                                    \"supplier_email\",\r\n                                    \"supplier_state\",\r\n                                    \"supplier_state_code\",\r\n                                  ])\r\n                                }\r\n                                disabled={saving}\r\n                              >\r\n                                {saving ? (\r\n                                  <Loader2 className=\"animate-spin\" size={14} />\r\n                                ) : (\r\n                                  <Save size={14} />\r\n                                )}\r\n                                Confirm Profile\r\n                              </Button>\r\n                            </Flex>\r\n\r\n                            <Grid cols={3} gap={4} className=\"items-end\">\r\n                              <FormGroup label=\"Business Name\" className=\"col-span-2\">\r\n                                <Input\r\n                                  value={settings.supplier_name || \"\"}\r\n                                  onChange={(e) =>\r\n                                    setSettings({\r\n                                      ...settings,\r\n                                      supplier_name: e.target.value,\r\n                                    })\r\n                                  }\r\n                                  className=\"bg-app-surface-hover/30 h-9\"\r\n                                />\r\n                              </FormGroup>\r\n                              <FormGroup label=\"GSTIN\">\r\n                                <Input\r\n                                  className=\"bg-app-surface-hover/30 h-9 font-mono uppercase\"\r\n                                  value={settings.supplier_gstin || \"\"}\r\n                                  onChange={(e) =>\r\n                                    setSettings({\r\n                                      ...settings,\r\n                                      supplier_gstin: e.target.value.toUpperCase(),\r\n                                    })\r\n                                  }\r\n                                />\r\n                              </FormGroup>\r\n                              <Box className=\"col-span-3\">\r\n                                <FormGroup label=\"Registered Office Address\">\r\n                                  <Input\r\n                                    value={settings.supplier_address || \"\"}\r\n                                    onChange={(e) =>\r\n                                      setSettings({\r\n                                        ...settings,\r\n                                        supplier_address: e.target.value,\r\n                                      })\r\n                                    }\r\n                                    className=\"bg-app-surface-hover/30 h-9\"\r\n                                  />\r\n                                </FormGroup>\r\n                              </Box>\r\n                              <FormGroup label=\"Contact Phone\">\r\n                                <Input\r\n                                  value={settings.supplier_contact || \"\"}\r\n                                  onChange={(e) =>\r\n                                    setSettings({\r\n                                      ...settings,\r\n                                      supplier_contact: e.target.value,\r\n                                    })\r\n                                  }\r\n                                  className=\"bg-app-surface-hover/30 h-9\"\r\n                                />\r\n                              </FormGroup>\r\n                              <FormGroup label=\"Email ID\" className=\"col-span-2\">\r\n                                <Input\r\n                                  value={settings.supplier_email || \"\"}\r\n                                  onChange={(e) =>\r\n                                    setSettings({\r\n                                      ...settings,\r\n                                      supplier_email: e.target.value,\r\n                                    })\r\n                                  }\r\n                                  className=\"bg-app-surface-hover/30 h-9\"\r\n                                />\r\n                              </FormGroup>\r\n                            </Grid>\r\n                          </section>\r\n                        </Stack>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"lg:col-span-4 space-y-6\">\r\n                    <div className=\"rounded-3xl p-6 bg-app-accent text-white border-none elevation-3 relative overflow-hidden group\">\r\n                      <motion.div\r\n                        className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:rotate-12 transition-transform duration-500\"\r\n                        whileHover={{ scale: 1.2 }}\r\n                      >\r\n                        <Building2 size={120} />\r\n                      </motion.div>\r\n                      <Label className=\"text-white/60 mb-6 tracking-[0.2em]\">\r\n                        IDENTITY PREVIEW\r\n                      </Label>\r\n                      <H2 className=\"mb-2 text-white line-clamp-2\">\r\n                        {settings.supplier_name || \"Enterprise Identity\"}\r\n                      </H2>\r\n                      <Accounting className=\"text-white/80 text-sm mb-8 block\">\r\n                        {settings.supplier_gstin || \"GSTIN NOT SET\"}\r\n                      </Accounting>\r\n\r\n                      <Stack gap={4} className=\"pt-6 shadow-none\">\r\n                        <Flex align=\"start\" gap={3}>\r\n                          <MapPin size={14} className=\"mt-0.5 text-white/60\" />\r\n                          <Body className=\"text-xs text-white/80 leading-relaxed font-normal\">\r\n                            {settings.supplier_address || \"Awaiting address...\"}\r\n                          </Body>\r\n                        </Flex>\r\n                        <Flex align=\"center\" gap={3}>\r\n                          <Phone size={14} className=\"text-white/60\" />\r\n                          <Body className=\"text-xs text-white/80 font-normal\">\r\n                            {settings.supplier_contact || \"Awaiting contact...\"}\r\n                          </Body>\r\n                        </Flex>\r\n                        <Flex align=\"center\" gap={3}>\r\n                          <Mail size={14} className=\"text-white/60\" />\r\n                          <Body className=\"text-xs text-white/80 font-normal\">\r\n                            {settings.supplier_email || \"Awaiting communication...\"}\r\n                          </Body>\r\n                        </Flex>\r\n                      </Stack>\r\n                    </div>\r\n\r\n                    <Card className=\"p-4 bg-app-surface-hover/30 border-none\">\r\n                      <Flex align=\"center\" gap={3}>\r\n                        <ShieldAlert size={16} className=\"text-app-accent\" />\r\n                        <SmallText className=\"font-medium text-app-fg-muted\">\r\n                          Profile changes affect all future documentation.\r\n                        </SmallText>\r\n                      </Flex>\r\n                    </Card>\r\n                  </div>\r\n                </Grid>\r\n              </TabsContent>\r\n\r\n              {/* --- Tab: Buyer --- */}\r\n              <TabsContent value=\"buyer\" className=\"space-y-6 mt-0\">\r\n                <Flex align=\"center\" justify=\"between\" className=\"mb-4\">\r\n                  <Stack gap={1}>\r\n                    <H3>Counterparty Registry</H3>\r\n                    <SmallText>Management of external entities for transaction mapping.</SmallText>\r\n                  </Stack>\r\n                  <Button\r\n                    variant=\"primary\"\r\n                    onClick={() => {\r\n                      handleCancelBuyerForm();\r\n                      setIsAddingBuyer(true);\r\n                    }}\r\n                    disabled={isAddingBuyer || !!editingBuyerId}\r\n                  >\r\n                    <Plus size={16} /> Registered Entity\r\n                  </Button>\r\n                </Flex>\r\n\r\n                <AnimatePresence mode=\"wait\">\r\n                  {(isAddingBuyer || editingBuyerId) && (\r\n                    <motion.div\r\n                      initial={{ opacity: 0, y: -10 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      exit={{ opacity: 0, y: -10 }}\r\n                      className=\"mb-8\"\r\n                    >\r\n                      <Card className=\"p-8 border-none bg-app-surface elevation-3\">\r\n                        <Flex\r\n                          align=\"center\"\r\n                          justify=\"between\"\r\n                          className=\"mb-8 pb-4 shadow-none\"\r\n                        >\r\n                          <Flex align=\"center\" gap={2}>\r\n                            <div className=\"p-2 rounded-lg bg-app-accent/10 text-app-accent\">\r\n                              {editingBuyerId ? <Edit2 size={16} /> : <Plus size={16} />}\r\n                            </div>\r\n                            <H3 className=\"text-sm\">\r\n                              {editingBuyerId ? \"Modify Market Entity\" : \"New Market Entity\"}\r\n                            </H3>\r\n                          </Flex>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            onClick={handleCancelBuyerForm}\r\n                            className=\"rounded-full\"\r\n                          >\r\n                            <X size={16} />\r\n                          </Button>\r\n                        </Flex>\r\n\r\n                        <Grid cols={1} className=\"md:grid-cols-2 lg:grid-cols-3\" gap={8}>\r\n                          <FormGroup label=\"Legal Entity Name\">\r\n                            <Input\r\n                              placeholder=\"e.g. Bharat Electronics Ltd\"\r\n                              value={buyerForm.name}\r\n                              onChange={(e) => setBuyerForm({ ...buyerForm, name: e.target.value })}\r\n                              className=\"bg-app-overlay/30\"\r\n                            />\r\n                          </FormGroup>\r\n                          <FormGroup label=\"GSTIN\">\r\n                            <Input\r\n                              placeholder=\"Valid 15-char GSTIN\"\r\n                              className=\"font-mono uppercase bg-app-overlay/30\"\r\n                              value={buyerForm.gstin}\r\n                              onChange={(e) =>\r\n                                setBuyerForm({\r\n                                  ...buyerForm,\r\n                                  gstin: e.target.value.toUpperCase(),\r\n                                })\r\n                              }\r\n                            />\r\n                          </FormGroup>\r\n                          <FormGroup label=\"Operating Region\">\r\n                            <Input\r\n                              placeholder=\"e.g. Bengaluru\"\r\n                              value={buyerForm.place_of_supply}\r\n                              onChange={(e) =>\r\n                                setBuyerForm({\r\n                                  ...buyerForm,\r\n                                  place_of_supply: e.target.value,\r\n                                })\r\n                              }\r\n                              className=\"bg-app-overlay/30\"\r\n                            />\r\n                          </FormGroup>\r\n                          <Box className=\"md:col-span-2\">\r\n                            <FormGroup label=\"Consignee Address\">\r\n                              <Input\r\n                                placeholder=\"Complete registered billing address\"\r\n                                value={buyerForm.billing_address}\r\n                                onChange={(e) =>\r\n                                  setBuyerForm({\r\n                                    ...buyerForm,\r\n                                    billing_address: e.target.value,\r\n                                  })\r\n                                }\r\n                                className=\"bg-app-overlay/30\"\r\n                              />\r\n                            </FormGroup>\r\n                          </Box>\r\n                          <FormGroup label=\"State / Jurisdiction\">\r\n                            <Flex gap={2}>\r\n                              <Input\r\n                                placeholder=\"Karnataka\"\r\n                                value={buyerForm.state}\r\n                                onChange={(e) =>\r\n                                  setBuyerForm({\r\n                                    ...buyerForm,\r\n                                    state: e.target.value,\r\n                                  })\r\n                                }\r\n                                className=\"flex-1 bg-app-overlay/5 border-none\"\r\n                              />\r\n                              <Input\r\n                                placeholder=\"29\"\r\n                                className=\"w-16 font-mono text-center bg-app-overlay/5 border-none\"\r\n                                value={buyerForm.state_code}\r\n                                onChange={(e) =>\r\n                                  setBuyerForm({\r\n                                    ...buyerForm,\r\n                                    state_code: e.target.value,\r\n                                  })\r\n                                }\r\n                              />\r\n                            </Flex>\r\n                          </FormGroup>\r\n                        </Grid>\r\n\r\n                        <Flex\r\n                          justify=\"end\"\r\n                          gap={3}\r\n                          className=\"mt-10 pt-6 shadow-none\"\r\n                        >\r\n                          <Button variant=\"secondary\" onClick={handleCancelBuyerForm}>\r\n                            Cancel\r\n                          </Button>\r\n                          <Button variant=\"primary\" onClick={handleSaveBuyer} disabled={saving} className=\"px-10\">\r\n                            {saving ? (\r\n                              <Loader2 className=\"animate-spin\" size={14} />\r\n                            ) : (\r\n                              <Check size={14} />\r\n                            )}\r\n                            Commit Record\r\n                          </Button>\r\n                        </Flex>\r\n                      </Card>\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n\r\n                <Grid cols={1} className=\"md:grid-cols-2 lg:grid-cols-3\" gap={6}>\r\n                  {buyers.map((buyer) => (\r\n                    <SpotlightCard\r\n                      key={buyer.id}\r\n                      className=\"p-6 h-full flex flex-col group border-none elevation-1 hover:elevation-2\"\r\n                    >\r\n                      <Flex justify=\"between\" align=\"start\" className=\"mb-6\">\r\n                        <Stack gap={1} className=\"flex-1 min-w-0\">\r\n                          <Flex align=\"center\" gap={2}>\r\n                            <Body className=\"font-bold truncate group-hover:text-app-accent transition-colors\">\r\n                              {buyer.name}\r\n                            </Body>\r\n                            {buyer.is_default && (\r\n                              <Badge variant=\"success\" className=\"text-xs h-4\">\r\n                                Default\r\n                              </Badge>\r\n                            )}\r\n                          </Flex>\r\n                          <Accounting className=\"text-app-fg-muted uppercase\">\r\n                            {buyer.gstin}\r\n                          </Accounting>\r\n                        </Stack>\r\n                        <Flex gap={1} className=\"shrink-0\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-8 w-8 rounded-full hover:bg-app-accent/10 text-app-fg-muted hover:text-app-accent\"\r\n                            onClick={() => handleStartEditBuyer(buyer)}\r\n                          >\r\n                            <Edit2 size={12} />\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-8 w-8 rounded-full hover:bg-app-status-error/10 text-app-fg-muted hover:text-app-status-error\"\r\n                            onClick={() => handleDeleteBuyer(buyer.id)}\r\n                          >\r\n                            <Trash2 size={12} />\r\n                          </Button>\r\n                        </Flex>\r\n                      </Flex>\r\n\r\n                      <Stack gap={4} className=\"flex-1\">\r\n                        <Flex\r\n                          align=\"start\"\r\n                          gap={3}\r\n                          className=\"text-app-fg-muted h-10\"\r\n                        >\r\n                          <MapPin\r\n                            size={14}\r\n                            className=\"mt-0.5 text-app-fg-muted shrink-0\"\r\n                          />\r\n                          <span className=\"line-clamp-2 leading-relaxed\">\r\n                            {buyer.billing_address}\r\n                          </span>\r\n                        </Flex>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-2 pt-4 shadow-none opacity-80\">\r\n                          <Stack gap={0.5}>\r\n                            <Label className=\"mb-0 opacity-60\">REGIONAL ZONE</Label>\r\n                            <Body className=\"font-semibold\">{buyer.state || \"N/A\"}</Body>\r\n                          </Stack>\r\n                          <Stack gap={0.5}>\r\n                            <Label className=\"mb-0 opacity-60\">SUPPLY CODE</Label>\r\n                            <Accounting className=\"font-bold text-left\">\r\n                              {buyer.state_code || \"00\"}\r\n                            </Accounting>\r\n                          </Stack>\r\n                        </div>\r\n                      </Stack>\r\n\r\n                      {!buyer.is_default && (\r\n                        <button\r\n                          onClick={() => api.setBuyerDefault(buyer.id).then(loadData)}\r\n                          className=\"mt-6 uppercase text-app-fg-muted hover:text-app-accent transition-colors opacity-0 group-hover:opacity-100 self-end\"\r\n                        >\r\n                          Set as Primary\r\n                        </button>\r\n                      )}\r\n                    </SpotlightCard>\r\n                  ))}\r\n                </Grid>\r\n              </TabsContent>\r\n\r\n              {/* --- Tab: System & Governance --- */}\r\n              <TabsContent value=\"system\" className=\"mt-0\">\r\n                <Grid cols=\"1\" className=\"lg:grid-cols-12\" gap={6}>\r\n                  <div className=\"lg:col-span-8\">\r\n                    <div className=\"bg-app-surface rounded-3xl border-none p-8 elevation-2 relative overflow-hidden\">\r\n                      <Box className=\"absolute bottom-0 left-0 w-40 h-40 bg-app-status-error/5 rounded-full -ml-10 -mb-10 blur-2xl transition-all duration-700\" />\r\n                      <div className=\"relative z-10\">\r\n                        <Box className=\"mt-4\">\r\n                          <Label className=\"mb-4\">Operational Invariants</Label>\r\n                          <Flex\r\n                            align=\"center\"\r\n                            gap={4}\r\n                            className=\"p-5 bg-app-accent/5 rounded-2xl border-none elevation-1\"\r\n                          >\r\n                            <div className=\"h-10 w-10 rounded-full bg-app-accent/10 flex items-center justify-center text-app-accent\">\r\n                              <ShieldAlert size={20} />\r\n                            </div>\r\n                            <Stack gap={0.5}>\r\n                              <Body className=\"text-sm text-app-accent\">\r\n                                Mandatory SRV Ingestion\r\n                              </Body>\r\n                              <SmallText className=\"text-app-accent/70\">\r\n                                PO balances are strictly coupled with Stores Receipt Vouchers.\r\n                              </SmallText>\r\n                            </Stack>\r\n                          </Flex>\r\n                        </Box>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"lg:col-span-4\">\r\n                    <Stack gap={4}>\r\n                      <Flex\r\n                        align=\"center\"\r\n                        gap={2}\r\n                        className=\"px-1 text-app-status-error\"\r\n                      >\r\n                        <ShieldAlert size={14} />\r\n                        <Label className=\"text-app-status-error mb-0\">\r\n                          CRITICAL DESTRUCTION\r\n                        </Label>\r\n                      </Flex>\r\n\r\n                      <Card className=\"p-8 border-none bg-app-status-error/5 elevation-1 backdrop-blur-sm\">\r\n                        <Stack gap={6}>\r\n                          <Stack gap={2}>\r\n                            <H3 className=\"text-app-status-error\">\r\n                              Nuclear System Reset\r\n                            </H3>\r\n                            <Body className=\"text-app-status-error/80 text-xs leading-relaxed\">\r\n                              Permanently purge all POs, Invoices, and DC history. Identity records\r\n                              are preserved.\r\n                            </Body>\r\n                          </Stack>\r\n\r\n                          <AnimatePresence mode=\"wait\">\r\n                            {!showResetConfirm ? (\r\n                              <motion.div\r\n                                key=\"reset-init\"\r\n                                initial={{ opacity: 0 }}\r\n                                animate={{ opacity: 1 }}\r\n                                exit={{ opacity: 0 }}\r\n                              >\r\n                                <Button\r\n                                  variant=\"primary\"\r\n                                  onClick={() => setShowResetConfirm(true)}\r\n                                  className=\"w-full bg-app-status-error hover:bg-app-status-error/90 text-white rounded-full uppercase\"\r\n                                >\r\n                                  Initiate Purge\r\n                                </Button>\r\n                              </motion.div>\r\n                            ) : (\r\n                              <motion.div\r\n                                key=\"reset-confirm\"\r\n                                initial={{ opacity: 0, scale: 0.95 }}\r\n                                animate={{ opacity: 1, scale: 1 }}\r\n                                className=\"flex gap-2\"\r\n                              >\r\n                                <Button\r\n                                  variant=\"primary\"\r\n                                  onClick={handleSystemReset}\r\n                                  disabled={isResetting}\r\n                                  className=\"flex-1 bg-app-status-error hover:bg-app-status-error/90 text-white\"\r\n                                >\r\n                                  {isResetting && (\r\n                                    <Loader2 className=\"animate-spin\" size={12} />\r\n                                  )}\r\n                                  EXECUTE\r\n                                </Button>\r\n                                <Button\r\n                                  variant=\"secondary\"\r\n                                  onClick={() => setShowResetConfirm(false)}\r\n                                  className=\"flex-1\"\r\n                                >\r\n                                  ABORT\r\n                                </Button>\r\n                              </motion.div>\r\n                            )}\r\n                          </AnimatePresence>\r\n                        </Stack>\r\n                      </Card>\r\n                    </Stack>\r\n                  </div>\r\n                </Grid>\r\n              </TabsContent>\r\n            </motion.div>\r\n          </AnimatePresence>\r\n        </Tabs>\r\n      </div>\r\n    </DocumentTemplate>\r\n  );\r\n}\r\n\r\n// --- Subcomponents ---\r\n\r\n// TabTrigger removed as we use TabsTrigger from DS directly\r\n\r\nfunction FormGroup({\r\n  label,\r\n  help,\r\n  className,\r\n  children,\r\n}: {\r\n  label: string;\r\n  help?: string;\r\n  className?: string;\r\n  children: React.ReactNode;\r\n}) {\r\n  return (\r\n    <div className={cn(\"flex flex-col justify-center\", className)}>\r\n      <div className=\"flex items-center justify-between mb-1\">\r\n        <Label className=\"leading-none mb-1\">\r\n          {label}\r\n        </Label>\r\n        {help && (\r\n          <SmallText className=\"text-app-fg-muted/40 italic text-[9px]\">\r\n            {help}\r\n          </SmallText>\r\n        )}\r\n      </div>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\SRVListClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRouter' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Trash2' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Layers' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":11},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Stack' is defined but never used. Allowed unused vars must match /^_/u.","line":28,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SummaryCards' is defined but never used. Allowed unused vars must match /^_/u.","line":29,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'InspectionManifest' is defined but never used. Allowed unused vars must match /^_/u.","line":30,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SummaryCardProps' is defined but never used. Allowed unused vars must match /^_/u.","line":33,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleDelete' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":73,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":73,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":136,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4591,4594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4591,4594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":203,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":203,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7153,7156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7153,7156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":211,"column":31,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":211,"endColumn":83}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useMemo, useCallback, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport {\r\n    Upload,\r\n    CheckCircle2,\r\n    XCircle,\r\n    Trash2,\r\n    Layers,\r\n    AlertCircle,\r\n    ChevronRight,\r\n} from \"lucide-react\";\r\nimport { api, SRVListItem, SRVStats } from \"@/lib/api\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\nimport { useUpload } from \"@/components/providers/UploadContext\";\r\nimport {\r\n    Body,\r\n    SmallText,\r\n    Accounting,\r\n    Button,\r\n    ListPageTemplate,\r\n    type Column,\r\n    Badge,\r\n    DataTable,\r\n    Flex,\r\n    Stack,\r\n    SummaryCards,\r\n    InspectionManifest,\r\n} from \"@/components/design-system\";\r\nimport { SearchBar } from \"@/components/design-system/molecules/SearchBar\";\r\nimport { type SummaryCardProps } from \"@/components/design-system/organisms/SummaryCards\";\r\n\r\ninterface SRVListClientProps {\r\n    initialSRVs: SRVListItem[];\r\n    initialStats: SRVStats | null;\r\n}\r\n\r\nexport function SRVListClient({ initialSRVs, initialStats }: SRVListClientProps) {\r\n    // const router = useRouter();\r\n    const [srvs, setSrvs] = useState<SRVListItem[]>(initialSRVs);\r\n    const [stats, setStats] = useState<SRVStats | null>(initialStats);\r\n    const [loading, setLoading] = useState(false);\r\n    const [page, setPage] = useState(1);\r\n    const pageSize = 10;\r\n\r\n    const { startUpload } = useUpload();\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n    const loadData = useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const [srvData, statsData] = await Promise.all([api.listSRVs(), api.getSRVStats()]);\r\n            setSrvs(srvData);\r\n            setStats(statsData);\r\n        } catch {\r\n            // console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, []);\r\n\r\n    const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (e.target.files && e.target.files.length > 0) {\r\n            const files = Array.from(e.target.files);\r\n            startUpload(files, \"SRV\");\r\n            e.target.value = \"\";\r\n        }\r\n    }, [startUpload]);\r\n\r\n    const handleDelete = useCallback(\r\n        async (srvNumber: string) => {\r\n            if (!confirm(`Permanently delete SRV #${srvNumber}?`)) return;\r\n            try {\r\n                await api.deleteSRV(srvNumber);\r\n                await loadData();\r\n            } catch {\r\n                // console.error(err);\r\n            }\r\n        },\r\n        [loadData]\r\n    );\r\n\r\n    const groupedSRVs = useMemo(() => {\r\n        const groups: Record<string, {\r\n            po_number: string;\r\n            po_found: boolean;\r\n            total_ord: number;\r\n            total_recd: number;\r\n            total_rejd: number;\r\n            last_srv_date: string;\r\n            po_status: string;\r\n            srvs: SRVListItem[];\r\n        }> = {};\r\n\r\n        srvs.forEach(s => {\r\n            const po = String(s.po_number);\r\n            if (!groups[po]) {\r\n                groups[po] = {\r\n                    po_number: po,\r\n                    po_found: s.po_found ?? true,\r\n                    total_ord: s.total_order_qty, // First SRV gives a baseline, though it might be partial.\r\n                    // In a better system, we'd fetch PO totals directly.\r\n                    total_recd: 0,\r\n                    total_rejd: 0,\r\n                    last_srv_date: s.srv_date,\r\n                    po_status: s.total_received_qty >= s.total_order_qty ? \"Closed\" : (s.total_received_qty > 0 ? \"Pending\" : \"Draft\"),\r\n                    srvs: []\r\n                };\r\n            }\r\n\r\n            groups[po].total_recd += s.total_received_qty;\r\n            groups[po].total_rejd += s.total_rejected_qty;\r\n            if (new Date(s.srv_date) > new Date(groups[po].last_srv_date)) {\r\n                groups[po].last_srv_date = s.srv_date;\r\n            }\r\n            groups[po].srvs.push(s);\r\n        });\r\n\r\n        return Object.values(groups).sort((a, b) =>\r\n            new Date(b.last_srv_date).getTime() - new Date(a.last_srv_date).getTime()\r\n        );\r\n    }, [srvs]);\r\n\r\n    const filteredData = useMemo(() => {\r\n        if (!searchQuery) return groupedSRVs;\r\n        const q = searchQuery.toLowerCase();\r\n        return groupedSRVs.filter(\r\n            (g) => g.po_number.toLowerCase().includes(q) ||\r\n                g.srvs.some(s => s.srv_number.toLowerCase().includes(q))\r\n        );\r\n    }, [groupedSRVs, searchQuery]);\r\n\r\n    const poColumns: Column<any>[] = useMemo(\r\n        () => [\r\n            {\r\n                key: \"po_number\",\r\n                label: \"PO\",\r\n                width: \"25%\",\r\n                render: (v, row) => (\r\n                    <Flex align=\"center\" gap={3}>\r\n                        <Link href={`/po/${v}`} className=\"group flex items-center gap-1.5 p-1 px-2 rounded-lg bg-app-accent/5 border-none elevation-1 transition-all hover:bg-app-accent/10\">\r\n                            <Body className=\"text-app-accent tracking-tight\">#{v}</Body>\r\n                            {!row.po_found && <AlertCircle size={14} className=\"text-app-status-error\" />}\r\n                        </Link>\r\n                    </Flex>\r\n                )\r\n            },\r\n            {\r\n                key: \"last_srv_date\",\r\n                label: \"DATE\",\r\n                width: \"15%\",\r\n                render: (v) => <SmallText className=\"font-mono text-app-fg-muted\">{formatDate(v as string)}</SmallText>\r\n            },\r\n            {\r\n                key: \"total_ord\",\r\n                label: \"ORD\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting className=\"text-right block\">{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"total_recd\",\r\n                label: \"REC\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting variant=\"highlight\" className=\"text-right block\">{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"total_rejd\",\r\n                label: \"REJ\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => (\r\n                    <Accounting\r\n                        className={cn(\"text-right block\", Number(v) > 0 ? \"text-app-status-error\" : \"text-app-fg-muted/40\")}\r\n                    >\r\n                        {v}\r\n                    </Accounting>\r\n                )\r\n            },\r\n            {\r\n                key: \"po_status\",\r\n                label: \"STATUS\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => (\r\n                    <Badge variant={\r\n                        v === \"Closed\" ? \"success\" :\r\n                            v === \"Pending\" ? \"warning\" :\r\n                                v === \"Delivered\" ? \"accent\" : \"secondary\"\r\n                    }>\r\n                        {v}\r\n                    </Badge>\r\n                )\r\n            }\r\n        ],\r\n        []\r\n    );\r\n\r\n    const renderSRVSubTable = (poGroup: any) => {\r\n        const srvColumns: Column<SRVListItem>[] = [\r\n            {\r\n                key: \"srv_number\",\r\n                label: \"SRV #\",\r\n                width: \"25%\",\r\n                render: (v) => (\r\n                    <div className=\"flex items-center gap-2 pl-[42px]\">\r\n                        <span className=\"text-app-fg-muted opacity-30 text-[10px]\">â†³</span>\r\n                        <Link href={`/srv/${v}`} className=\"flex items-center gap-2 group\">\r\n                            <Body className=\"text-app-accent group-hover:underline font-mono\">{v}</Body>\r\n                            <ChevronRight size={10} className=\"text-app-accent opacity-0 group-hover:opacity-100 transition-opacity\" />\r\n                        </Link>\r\n                    </div>\r\n                )\r\n            },\r\n            {\r\n                key: \"srv_date\",\r\n                label: \"DATE\",\r\n                width: \"15%\",\r\n                render: (v) => <SmallText className=\"font-mono text-app-fg-muted/60\">{formatDate(v as string)}</SmallText>\r\n            },\r\n            {\r\n                key: \"total_order_qty\",\r\n                label: \"Order\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting className=\"text-app-fg-muted\">{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"total_received_qty\",\r\n                label: \"Received\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting className=\"text-app-accent\">{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"total_rejected_qty\",\r\n                label: \"Rejected\",\r\n                width: \"15%\",\r\n                align: \"right\",\r\n                render: (v) => <Accounting className={cn(Number(v) > 0 ? \"text-app-status-error\" : \"text-app-fg-muted/20\")}>{v}</Accounting>\r\n            },\r\n            {\r\n                key: \"status_spacer\",\r\n                label: \"\",\r\n                width: \"15%\",\r\n                render: () => <div />\r\n            }\r\n        ];\r\n\r\n        return (\r\n            <div className=\"bg-app-border/10 py-1 border-y border-app-border/10\">\r\n                <DataTable\r\n                    columns={srvColumns}\r\n                    data={poGroup.srvs}\r\n                    keyField=\"srv_number\"\r\n                    density=\"compact\"\r\n                    hideHeader\r\n                />\r\n            </div>\r\n        );\r\n    };\r\n\r\n\r\n    const handleUploadClick = useCallback(() => {\r\n        fileInputRef.current?.click();\r\n    }, []);\r\n\r\n    const handleSearch = useCallback((val: string) => {\r\n        setSearchQuery(val);\r\n        setPage(1);\r\n    }, []);\r\n\r\n    const toolbar = (\r\n        <Flex align=\"center\" justify=\"between\" className=\"w-full\" gap={4}>\r\n            <SearchBar\r\n                value={searchQuery}\r\n                onChange={handleSearch}\r\n                placeholder=\"Find PO or Voucher...\"\r\n                className=\"w-80\"\r\n            />\r\n            <Flex align=\"center\" gap={3}>\r\n                <input\r\n                    ref={fileInputRef}\r\n                    type=\"file\"\r\n                    multiple\r\n                    accept=\".pdf,.html\"\r\n                    onChange={handleFileSelect}\r\n                    className=\"hidden\"\r\n                />\r\n                <Button\r\n                    variant=\"primary\"\r\n                    onClick={handleUploadClick}\r\n                    className=\"h-9 px-4 font-medium active-glow shadow-md shadow-app-accent/20 rounded-xl\"\r\n                >\r\n                    <Upload size={16} className=\"mr-2\" />\r\n                    Provision SRV\r\n                </Button>\r\n            </Flex>\r\n        </Flex>\r\n    );\r\n\r\n    const summaryCards = [\r\n        {\r\n            title: \"Active Vouchers\",\r\n            value: stats?.total_srvs || 0,\r\n            variant: \"primary\" as const\r\n        },\r\n        {\r\n            title: \"Receipt Volume\",\r\n            value: `${(stats?.total_received_qty || 0).toLocaleString()} MT`,\r\n            variant: \"success\" as const,\r\n            trend: { value: \"Fully Received\", direction: \"neutral\" as const }\r\n        },\r\n        {\r\n            title: \"Rejection Rate\",\r\n            value: `${stats?.rejection_rate || 0}%`,\r\n            variant: Number(stats?.rejection_rate || 0) > 0 ? (\"error\" as const) : (\"default\" as const)\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <ListPageTemplate\r\n            title=\"MATERIAL RECEIPTS\"\r\n            subtitle=\"Order-centric audit trail for Stores Receipt Vouchers (SRV)\"\r\n            columns={poColumns}\r\n            data={filteredData}\r\n            loading={loading}\r\n            keyField=\"po_number\"\r\n            toolbar={toolbar}\r\n            summaryCards={summaryCards}\r\n            page={page}\r\n            pageSize={pageSize}\r\n            totalItems={filteredData.length}\r\n            onPageChange={(newPage) => setPage(newPage)}\r\n            emptyMessage=\"No receipts found\"\r\n            density=\"compact\"\r\n            renderSubRow={renderSRVSubTable}\r\n        />\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\[id]\\SRVDetailClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDate' is defined but never used. Allowed unused vars must match /^_/u.","line":19,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[476,479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[476,479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[925,928],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[925,928],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[971,974],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[971,974],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'groupIdx' is defined but never used. Allowed unused args must match /^_/u.","line":96,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":96,"endColumn":63},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":112,"column":64,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":112,"endColumn":135},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":113,"column":64,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":113,"endColumn":133},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":117,"column":82,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":117,"endColumn":158},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":134,"column":63,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":134,"endColumn":105},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":135,"column":67,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":135,"endColumn":108},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":140,"column":68,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":140,"endColumn":122},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":141,"column":68,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":141,"endColumn":122}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useMemo, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ClipboardCheck, ChevronDown, ChevronUp } from \"lucide-react\";\r\n\r\nimport {\r\n    Button,\r\n    SmallText,\r\n    Accounting,\r\n    DocumentTemplate,\r\n    Flex,\r\n    Stack,\r\n    Body,\r\n    Label,\r\n    Card,\r\n    MonoCode,\r\n} from \"@/components/design-system\";\r\nimport { formatDate, cn } from \"@/lib/utils\";\r\n\r\ninterface SRVDetailClientProps {\r\n    initialSRV: any;\r\n}\r\n\r\nexport default function SRVDetailClient({ initialSRV }: SRVDetailClientProps) {\r\n    const router = useRouter();\r\n    const [expandedParents, setExpandedParents] = useState<Set<number>>(new Set());\r\n\r\n    const header = initialSRV?.header || {};\r\n    const rawItems = initialSRV?.items || [];\r\n\r\n    // Group SRV Items by PO Item No for Parent-Lot hierarchy\r\n    const groupedItems = useMemo(() => {\r\n        const groups: Record<number, any[]> = {};\r\n        rawItems.forEach((item: any) => {\r\n            const key = item.po_item_no;\r\n            if (!groups[key]) groups[key] = [];\r\n            groups[key].push(item);\r\n        });\r\n        return Object.values(groups);\r\n    }, [rawItems]);\r\n\r\n    const toggleParent = (itemNo: number) => {\r\n        const newSet = new Set(expandedParents);\r\n        if (newSet.has(itemNo)) newSet.delete(itemNo);\r\n        else newSet.add(itemNo);\r\n        setExpandedParents(newSet);\r\n    };\r\n\r\n    const actions = (\r\n        <Flex gap={2}>\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={() => router.push(\"/srv\")} className=\"border-app-border/20\">\r\n                Registry\r\n            </Button>\r\n            <Button variant=\"secondary\" size=\"sm\" onClick={() => window.print()} className=\"border-app-border/20\">\r\n                PDF Export\r\n            </Button>\r\n        </Flex>\r\n    );\r\n\r\n    return (\r\n        <DocumentTemplate\r\n            title={`Store Receipt Voucher - ${header.srv_number}`}\r\n            description=\"Official material receipt and inspection document\"\r\n            actions={actions}\r\n            icon={<ClipboardCheck size={20} className=\"text-app-status-success\" />}\r\n            iconLayoutId=\"srv-detail-icon\"\r\n        >\r\n            <Stack gap={6}>\r\n                <div className=\"flex items-center justify-between px-1\">\r\n                    <Label className=\"m-0 text-app-fg-muted uppercase tracking-wide text-xs\">\r\n                        Inspection Manifest ({rawItems.length} Entries)\r\n                    </Label>\r\n                    <SmallText className=\"text-app-fg-muted opacity-50 uppercase tracking-tighter\">\r\n                        PO: {header.po_number}\r\n                    </SmallText>\r\n                </div>\r\n\r\n                <div className=\"table-container shadow-premium-hover bg-app-surface/30 border-none\">\r\n                    <table className=\"w-full text-left\">\r\n                        <thead>\r\n                            <tr className=\"border-b border-app-border/10 bg-app-overlay/10\">\r\n                                <th className=\"py-3 px-4 w-[60px]\"><Label># ITM</Label></th>\r\n                                <th className=\"py-3 px-4\"><Label>Details</Label></th>\r\n                                <th className=\"py-3 px-4 w-[110px]\"><Label>SRV No</Label></th>\r\n                                <th className=\"py-3 px-4 w-[100px]\"><Label>Tax Inv</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[90px]\"><Label>Order</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[90px]\"><Label>Challan</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[90px] bg-blue-50/10 dark:bg-blue-900/10\"><Label className=\"text-blue-600 dark:text-blue-400\">Recvd</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[90px] bg-green-50/10 dark:bg-green-900/10\"><Label className=\"text-green-600 dark:text-green-400\">Accepted</Label></th>\r\n                                <th className=\"py-3 px-4 text-right w-[70px] bg-red-50/10 dark:bg-red-900/10\"><Label className=\"text-red-500\">Rej</Label></th>\r\n                                <th className=\"py-3 px-4 w-[50px]\"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {groupedItems.map((group, groupIdx) => {\r\n                                const parent = group[0];\r\n                                const isExpanded = expandedParents.has(parent.po_item_no);\r\n                                const tOrd = group.reduce((sum, i) => sum + (i.order_qty || 0), 0);\r\n                                const tCha = group.reduce((sum, i) => sum + (i.challan_qty || 0), 0);\r\n                                const tRec = group.reduce((sum, i) => sum + (i.received_qty || 0), 0);\r\n                                const tAcc = group.reduce((sum, i) => sum + (i.accepted_qty || 0), 0);\r\n                                const tRej = group.reduce((sum, i) => sum + (i.rejected_qty || 0), 0);\r\n\r\n                                return (\r\n                                    <React.Fragment key={parent.po_item_no}>\r\n                                        <tr className={cn(\"transition-colors border-b border-app-border/10\", isExpanded ? \"bg-app-overlay/10\" : \"bg-app-overlay/5\")}>\r\n                                            <td className=\"py-3 px-4\"><MonoCode className=\"text-app-accent leading-none\">#{parent.po_item_no}</MonoCode></td>\r\n                                            <td className=\"py-3 px-4\">\r\n                                                <Body className=\"text-xs text-app-fg-muted/80\">{parent.material_description || \"Material\"}</Body>\r\n                                                <div className=\"flex gap-3 mt-0.5\">\r\n                                                    <SmallText className=\"text-[10px] text-app-fg-muted/40 uppercase tracking-tighter\">Code: {parent.material_code || \"-\"}</SmallText>\r\n                                                    <SmallText className=\"text-[10px] text-app-accent/40 uppercase tracking-tighter\">Unit: {parent.unit}</SmallText>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"py-3 px-4\"><Accounting className=\"text-xs text-app-accent/60\">{parent.srv_number || header.srv_number}</Accounting></td>\r\n                                            <td className=\"py-3 px-4\"><SmallText className=\"text-app-fg-muted/40 text-[10px] uppercase truncate max-w-[80px]\">{parent.invoice_no || \"-\"}</SmallText></td>\r\n                                            <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-xs text-app-fg-muted/60\">{tOrd}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-right\"><Accounting className=\"text-xs text-app-fg-muted/60\">{tCha}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\"><Accounting className=\"text-xs text-blue-600/60 dark:text-blue-400/60\">{tRec}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-right bg-green-50/5 dark:bg-green-900/5\"><Accounting className=\"text-xs text-green-600/60 dark:text-green-400/60\">{tAcc}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-right bg-red-50/5 dark:bg-red-900/5\"><Accounting className={cn(\"text-xs\", tRej > 0 ? \"text-red-500/60\" : \"text-app-fg-muted/20\")}>{tRej}</Accounting></td>\r\n                                            <td className=\"py-3 px-4 text-center\">\r\n                                                <button onClick={() => toggleParent(parent.po_item_no)} className=\"p-1.5 rounded-md hover:bg-app-accent/10 hover:text-app-accent transition-all text-app-fg-muted/30\">\r\n                                                    {isExpanded ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                        {isExpanded && group.map((item, idx) => (\r\n                                            <tr key={idx} className=\"bg-app-surface border-b border-app-border/5\">\r\n                                                <td className=\"py-2 px-0 relative\">\r\n                                                    <div className=\"absolute left-[30px] top-0 bottom-0 w-[2px] bg-app-accent/20\" />\r\n                                                    <div className=\"flex items-center gap-2 pl-[38px]\">\r\n                                                        <span className=\"text-[10px] text-app-accent/30\">L</span>\r\n                                                        <MonoCode className=\"text-[10px] text-app-fg-muted\">L-{item.lot_no || 0}</MonoCode>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td className=\"py-2 px-4\">\r\n                                                    <div className=\"flex gap-4\">\r\n                                                        <SmallText className=\"text-[10px] text-app-fg-muted/60 uppercase\">Challan: {item.challan_no || \"-\"}</SmallText>\r\n                                                        <SmallText className=\"text-[10px] text-app-fg-muted/40 uppercase\">PMIR: {item.pmir_no || \"-\"}</SmallText>\r\n                                                    </div>\r\n                                                </td>\r\n                                                <td colSpan={2} />\r\n                                                <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-xs text-app-fg-muted/40\">{item.order_qty}</Accounting></td>\r\n                                                <td className=\"py-2 px-4 text-right\"><Accounting className=\"text-xs text-app-fg-muted/40\">{item.challan_qty}</Accounting></td>\r\n                                                <td className=\"py-2 px-4 text-right bg-blue-50/5 dark:bg-blue-900/5\"><Accounting className=\"text-xs text-blue-600 dark:text-blue-400\">{item.received_qty}</Accounting></td>\r\n                                                <td className=\"py-2 px-4 text-right bg-green-50/5 dark:bg-green-900/5\"><Accounting className=\"text-xs text-green-600 dark:text-green-400\">{item.accepted_qty}</Accounting></td>\r\n                                                <td className=\"py-2 px-4 text-right bg-red-50/5 dark:bg-red-900/5\"><Accounting className={cn(\"text-xs\", (item.rejected_qty || 0) > 0 ? \"text-red-500\" : \"text-app-fg-muted/10\")}>{item.rejected_qty || 0}</Accounting></td>\r\n                                                <td />\r\n                                            </tr>\r\n                                        ))}\r\n                                    </React.Fragment>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </Stack>\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\organisms\\SRVDetailCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Layout' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":71},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Badge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":64},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":7,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":7,"endColumn":83},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[498,501],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[498,501],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[517,520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[517,520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { SummaryCards } from \"@/components/design-system/organisms/SummaryCards\";\r\nimport { Flex, Stack } from \"@/components/design-system/atoms/Layout\";\r\nimport { Badge } from \"@/components/design-system/atoms/Badge\";\r\nimport { H3, Body, SmallText } from \"@/components/design-system/atoms/Typography\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { Package, Calendar, User } from \"lucide-react\";\r\n\r\ninterface SRVDetailCardProps {\r\n    header: any;\r\n    summary: any;\r\n}\r\n\r\nexport const SRVDetailCard = ({ header, summary }: SRVDetailCardProps) => {\r\n    const router = useRouter();\r\n\r\n    return (\r\n        <Stack gap={6}>\r\n            <SummaryCards cards={summary} />\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                <div className=\"bg-app-surface border-none rounded-xl elevation-2 p-6 border-l-4 border-l-app-accent\">\r\n                    <Stack gap={3}>\r\n                        <Flex align=\"center\" gap={2}>\r\n                            <Package size={16} className=\"text-app-accent\" />\r\n                            <H3 className=\"m-0 text-app-accent font-semibold\">Source PO</H3>\r\n                        </Flex>\r\n                        <Flex direction=\"col\" gap={1}>\r\n                            <Badge\r\n                                variant=\"accent\"\r\n                                className=\"w-fit cursor-pointer hover:scale-105 active:scale-95 transition-transform\"\r\n                                onClick={() => router.push(`/po/${header.po_number}`)}\r\n                            >\r\n                                PO #{header.po_number}\r\n                            </Badge>\r\n                            <SmallText className=\"text-app-fg-muted\">\r\n                                Source identifying document for this SRV\r\n                            </SmallText>\r\n                        </Flex>\r\n                    </Stack>\r\n                </div>\r\n            </div>\r\n        </Stack>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\app\\srv\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\ThemeToggle.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Badge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\DownloadButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Icon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\SpotlightCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'opacity' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useRef, useState } from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Card, CardProps } from \"./Card\";\r\n\r\ninterface SpotlightCardProps extends CardProps {\r\n    children: React.ReactNode;\r\n    active?: boolean;\r\n}\r\n\r\nconst SpotlightCardInternal = React.forwardRef<HTMLDivElement, SpotlightCardProps>(\r\n    ({ children, className, active = false, variant = \"default\", ...props }, ref) => {\r\n        const divRef = useRef<HTMLDivElement>(null);\r\n        const [position, setPosition] = useState({ x: 0, y: 0 });\r\n        const [opacity, setOpacity] = useState(0);\r\n\r\n        const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\r\n            if (!divRef.current) return;\r\n            const rect = divRef.current.getBoundingClientRect();\r\n            setPosition({ x: e.clientX - rect.left, y: e.clientY - rect.top });\r\n            setOpacity(1);\r\n        };\r\n\r\n        const handleMouseLeave = () => {\r\n            setOpacity(0);\r\n        };\r\n\r\n        return (\r\n            <div\r\n                ref={divRef}\r\n                onMouseMove={handleMouseMove}\r\n                onMouseLeave={handleMouseLeave}\r\n                className=\"relative group rounded-2xl\"\r\n            >\r\n                <div\r\n                    className={cn(\r\n                        \"absolute -inset-px rounded-[17px] opacity-0 transition duration-300 group-hover:opacity-100\",\r\n                        active && \"opacity-100\"\r\n                    )}\r\n                    style={{\r\n                        background: `radial-gradient(600px circle at ${position.x}px ${position.y}px, rgba(var(--color-accent), 0.15), transparent 40%)`,\r\n                    }}\r\n                />\r\n                <Card\r\n                    ref={ref}\r\n                    variant={variant}\r\n                    className={cn(\r\n                        \"relative z-10 h-full transition-all duration-300\",\r\n                        active && \"border-app-accent/20 ring-1 ring-app-accent/20\",\r\n                        className\r\n                    )}\r\n                    {...props}\r\n                >\r\n                    {children}\r\n                </Card>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nSpotlightCardInternal.displayName = \"SpotlightCard\";\r\n\r\nexport const SpotlightCard = React.memo(SpotlightCardInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\StatusBadge.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2916,2919],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2916,2919],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { memo } from \"react\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport * as LucideIcons from \"lucide-react\";\r\n\r\n/**\r\n * StatusBadge Atom - Atomic Design System v6.0\r\n * Consolidates StatusTag and legacy StatusBadge into a unified, chromatic atom.\r\n * Includes automatic variant mapping and optional icon support.\r\n */\r\n\r\nconst statusBadgeVariants = cva(\r\n    \"inline-flex items-center justify-center gap-1.5 px-3 py-1 rounded-full text-[10px] font-medium uppercase tracking-[0.1em] transition-all duration-300 border cursor-default active:scale-[0.97] hover:bg-white/5\",\r\n    {\r\n        variants: {\r\n            variant: {\r\n                success: \"bg-transparent text-text-primary border-black/80 dark:border-white/80\",\r\n                warning: \"bg-transparent text-[#B38F00] dark:text-system-yellow border-[#B38F00]/60 dark:border-system-yellow/60\",\r\n                error: \"bg-transparent text-system-red border-system-red/60\",\r\n                info: \"bg-transparent text-system-blue border-system-blue/60\",\r\n                neutral: \"bg-transparent border-black/20 dark:border-white/20 text-text-tertiary\",\r\n                // Mappings for common statuses\r\n                pending: \"bg-transparent text-[#B38F00] dark:text-system-yellow border-[#B38F00]/60 dark:border-system-yellow/60\",\r\n                closed: \"bg-transparent text-text-primary border-black/80 dark:border-white/80\",\r\n                delivered: \"bg-transparent text-system-blue border-system-blue/60\",\r\n                draft: \"bg-transparent border-black/20 dark:border-white/20 text-text-tertiary\",\r\n            },\r\n        },\r\n        defaultVariants: {\r\n            variant: \"info\",\r\n        },\r\n    }\r\n);\r\n\r\n// Map common statuses to variants automatically\r\nconst getVariantFromStatus = (status: string) => {\r\n    const lower = String(status || \"\").toLowerCase();\r\n    if ([\"received\", \"completed\", \"closed\", \"paid\", \"approved\", \"valid\", \"active\", \"fulfilled\"].includes(lower)) return \"success\";\r\n    if ([\"delivered\", \"processing\", \"open\", \"shipped\"].includes(lower)) return \"info\";\r\n    if ([\"pending\", \"partial\", \"awaiting\"].includes(lower)) return \"warning\";\r\n    if ([\"draft\", \"inactive\", \"hold\"].includes(lower)) return \"neutral\";\r\n    if ([\"rejected\", \"failed\", \"cancelled\", \"overdue\", \"missing\", \"error\"].includes(lower)) return \"error\";\r\n    return \"info\";\r\n};\r\n\r\nexport interface StatusBadgeProps\r\n    extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof statusBadgeVariants> {\r\n    status?: string;\r\n    icon?: keyof typeof LucideIcons;\r\n    outline?: boolean;\r\n}\r\n\r\nconst StatusBadgeInternal = React.forwardRef<HTMLDivElement, StatusBadgeProps>(\r\n    ({ className, status, variant, icon, outline, children, ...props }, ref) => {\r\n        const finalVariant = variant || (status ? (getVariantFromStatus(status) as any) : \"info\");\r\n        const displayLabel = children || status;\r\n\r\n        const IconComponent = icon ? (LucideIcons[icon] as React.ComponentType<LucideIcons.LucideProps>) : null;\r\n\r\n        return (\r\n            <div\r\n                ref={ref}\r\n                className={cn(\r\n                    statusBadgeVariants({ variant: finalVariant, className }),\r\n                    outline && \"bg-transparent border-2\" // Outline override\r\n                )}\r\n                {...props}\r\n            >\r\n                {IconComponent && <IconComponent size={10} strokeWidth={2} className=\"shrink-0\" />}\r\n                <span className=\"truncate tabular-nums\">{displayLabel}</span>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nStatusBadgeInternal.displayName = \"StatusBadge\";\r\n\r\nexport const StatusBadge = memo(StatusBadgeInternal);\r\nexport { statusBadgeVariants };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\Typography.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":299,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":299,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8278,8281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8278,8281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'short' is defined but never used. Allowed unused args must match /^_/u.","line":303,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":303,"endColumn":75}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { cn } from '@/lib/utils';\r\nimport { type HTMLAttributes, type ReactNode } from 'react';\r\n\r\n/* ============================================\r\n   TYPOGRAPHY COMPONENT SYSTEM\r\n   macOS Semantic Text Styles\r\n   ============================================ */\r\n\r\ninterface TypographyProps extends HTMLAttributes<HTMLElement> {\r\n    children: ReactNode;\r\n    className?: string;\r\n}\r\n\r\n/* ==========================================\r\n   DISPLAY TYPOGRAPHY\r\n   ========================================== */\r\n\r\n/**\r\n * LargeTitle - Hero sections, main navigation (34px, Bold)\r\n * Usage: Primary app title, hero headers\r\n */\r\nexport function LargeTitle({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <h1\r\n            className={cn(\r\n                'font-display text-large-title font-regular tracking-tight text-text-primary text-vibrancy',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </h1>\r\n    );\r\n}\r\n\r\n/**\r\n * Title1 - Page titles (28px, Semibold)\r\n * Usage: \"Purchase Orders\", \"Dashboard\", \"Invoice #1222\"\r\n */\r\nexport function Title1({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <h1\r\n            className={cn(\r\n                'font-display text-[32px] font-regular tracking-tight text-text-primary text-vibrancy leading-tight',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </h1>\r\n    );\r\n}\r\n\r\n/**\r\n * Title2 - Section headers (22px, Medium)\r\n * Usage: \"Transaction Ledger\", \"Execution Center\", major sections\r\n */\r\nexport function Title2({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <h2\r\n            className={cn(\r\n                'font-display text-title-2 font-regular text-text-primary text-vibrancy',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </h2>\r\n    );\r\n}\r\n\r\n/**\r\n * Title3 - Subsection titles (20px, Medium)\r\n * Usage: Card titles, widget headers, \"Basic Info\", \"Financial Details\"\r\n */\r\nexport function Title3({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <h3\r\n            className={cn(\r\n                'font-text text-title-3 font-regular text-text-primary text-vibrancy',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </h3>\r\n    );\r\n}\r\n\r\n/**\r\n * Headline - Emphasized body text (17px, Medium)\r\n * Usage: List item titles, emphasized content\r\n */\r\nexport function Headline({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <p\r\n            className={cn(\r\n                'font-text text-headline font-regular text-text-primary text-vibrancy',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </p>\r\n    );\r\n}\r\n\r\n/* ==========================================\r\n   BODY TEXT\r\n   ========================================== */\r\n\r\n/**\r\n * Body - PRIMARY text style (17px, Regular)\r\n * Usage: Paragraphs, descriptions, most content\r\n * THIS IS THE MOST COMMON TEXT STYLE\r\n */\r\nexport function Body({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <p\r\n            className={cn(\r\n                'font-text text-body font-regular text-text-primary text-vibrancy',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </p>\r\n    );\r\n}\r\n\r\n/**\r\n * Callout - Slightly smaller (16px, Regular)\r\n * Usage: Secondary content, button labels, form values\r\n */\r\nexport function Callout({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <p\r\n            className={cn(\r\n                'font-text text-callout font-regular text-text-primary text-vibrancy',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </p>\r\n    );\r\n}\r\n\r\n/**\r\n * Subhead - Tertiary content (15px, Regular)\r\n * Usage: Subtitles, less important descriptions\r\n */\r\nexport function Subhead({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <p\r\n            className={cn(\r\n                'font-text text-subhead font-regular text-text-secondary text-vibrancy',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </p>\r\n    );\r\n}\r\n\r\n/* ==========================================\r\n   SMALL TEXT / METADATA\r\n   ========================================== */\r\n\r\n/**\r\n * Footnote - Small text (13px, Regular)\r\n * Usage: Timestamps, helper text, metadata, \"10-Sep-2020\"\r\n */\r\nexport function Footnote({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <p\r\n            className={cn(\r\n                'font-text text-footnote font-regular text-text-secondary text-vibrancy',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </p>\r\n    );\r\n}\r\n\r\n/**\r\n * Caption1 - Tiny labels (12px, Medium)\r\n * Usage: Badge text, small labels, card headers\r\n */\r\nexport function Caption1({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <p\r\n            className={cn(\r\n                'font-text text-caption-1 font-regular text-text-tertiary text-vibrancy tracking-loose',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </p>\r\n    );\r\n}\r\n\r\n/**\r\n * Caption2 - Ultra-tiny (11px, Medium)\r\n * Usage: Very small metadata, legal text\r\n */\r\nexport function Caption2({ children, className, ...props }: TypographyProps) {\r\n    return (\r\n        <p\r\n            className={cn(\r\n                'font-text text-caption-2 font-regular text-text-tertiary text-vibrancy tracking-looser',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </p>\r\n    );\r\n}\r\n\r\n/* ==========================================\r\n   SPECIALIZED COMPONENTS\r\n   ========================================== */\r\n\r\ninterface MonospacedProps extends TypographyProps {\r\n    size?: 'small' | 'body' | 'large';\r\n}\r\n\r\n/**\r\n * Monospaced - Numbers, dates, codes (SF Mono)\r\n * Usage: Financial figures, quantities, dates\r\n * ALWAYS use for numbers in tables/cards\r\n */\r\nexport function Monospaced({ children, className, size = 'body', ...props }: MonospacedProps) {\r\n    return (\r\n        <span\r\n            className={cn(\r\n                'font-text tabular-nums text-text-primary text-vibrancy',\r\n                size === 'small' && 'text-footnote',\r\n                size === 'body' && 'text-callout',\r\n                size === 'large' && 'text-title-3',\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </span>\r\n    );\r\n}\r\n\r\n/* ============================================\r\n   LEGACY ALIASES (Transition Support)\r\n   ============================================ */\r\n\r\nexport const Label = ({ className, children, ...props }: React.LabelHTMLAttributes<HTMLLabelElement>) => (\r\n    <label\r\n        className={cn(\r\n            'font-text text-subhead font-regular text-text-secondary text-vibrancy',\r\n            className\r\n        )}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </label>\r\n);\r\n\r\nexport const H1 = Title1;\r\nexport const H2 = Title2;\r\nexport const H3 = Title3;\r\nexport const H4 = ({ className, children, ...props }: TypographyProps) => (\r\n    <Caption2 className={cn(\"uppercase tracking-widest font-medium\", className)} {...props}>\r\n        {children}\r\n    </Caption2>\r\n);\r\nexport const SmallText = Caption1;\r\nexport const TableText = Body;\r\nexport const Mono = Monospaced;\r\nexport const MonoCode = ({ className, children, ...props }: TypographyProps) => (\r\n    <code\r\n        className={cn(\r\n            \"text-[11px] font-mono font-regular bg-white/5 border-none px-1 rounded text-text-primary opacity-80\",\r\n            className\r\n        )}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </code>\r\n);\r\n\r\nexport interface AccountingProps extends TypographyProps {\r\n    isCurrency?: boolean;\r\n    short?: boolean;\r\n    precision?: number;\r\n    variant?: \"default\" | \"highlight\" | \"success\" | \"warning\" | \"error\";\r\n    size?: any;\r\n    value?: number;\r\n}\r\n\r\nexport const Accounting = ({ className, children, value, isCurrency, short, precision, variant = \"default\", ...props }: AccountingProps) => {\r\n    const rawValue = value !== undefined ? value : children;\r\n\r\n    let content = rawValue;\r\n    if (typeof rawValue === \"number\") {\r\n        if (isCurrency) {\r\n            content = new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR' }).format(rawValue);\r\n        } else {\r\n            content = rawValue.toLocaleString(\"en-IN\", {\r\n                minimumFractionDigits: 0,\r\n                maximumFractionDigits: precision ?? 3,\r\n            });\r\n        }\r\n    }\r\n\r\n    const variantStyles = {\r\n        default: \"text-text-primary\",\r\n        highlight: \"text-text-link\",\r\n        success: \"text-app-success\",\r\n        warning: \"text-app-warning\",\r\n        error: \"text-app-error\",\r\n    };\r\n\r\n    return (\r\n        <Monospaced\r\n            className={cn(\r\n                variantStyles[variant as keyof typeof variantStyles] || \"text-text-primary\",\r\n                className\r\n            )}\r\n            {...props}\r\n        >\r\n            {content as ReactNode}\r\n        </Monospaced>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\atoms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\ActionButtonGroup.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\ActionConfirmationModal.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":66},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":78},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":14},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":59,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":59,"endColumn":118},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":60,"column":48,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":60,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":130},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":80,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":80,"endColumn":198},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":86,"column":37,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":86,"endColumn":193}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Card, H3, SmallText, Body } from \"@/components/design-system/atoms\";\r\nimport { AlertCircle } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface ActionConfirmationModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onConfirm: () => void;\r\n    title?: string;\r\n    subtitle?: string;\r\n    warningText?: string;\r\n    confirmLabel?: string;\r\n    cancelLabel?: string;\r\n    variant?: \"warning\" | \"error\"; // For future styling flexibility\r\n}\r\n\r\n// Standalone Draggable Modal Component (like Upload UI but centered)\r\nexport const ActionConfirmationModal = ({\r\n    isOpen,\r\n    onClose,\r\n    onConfirm,\r\n    title = \"Are you sure?\",\r\n    subtitle = \"This action cannot be undone\",\r\n    warningText,\r\n    confirmLabel = \"Confirm\",\r\n    cancelLabel = \"Cancel\",\r\n}: ActionConfirmationModalProps) => {\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <motion.div\r\n                    drag\r\n                    dragMomentum={false}\r\n                    // Centered initial position: 50% left, translated -50% to visually center\r\n                    initial={{ opacity: 0, y: 50, x: \"-50%\", left: \"50%\", scale: 0.95 }}\r\n                    animate={{ opacity: 1, y: 0, x: \"-50%\", left: \"50%\", scale: 1 }}\r\n                    exit={{ opacity: 0, y: 50, x: \"-50%\", left: \"50%\", scale: 0.95 }}\r\n                    className=\"fixed bottom-12 z-[100] w-[420px]\"\r\n                >\r\n                    <div\r\n                        className={cn(\r\n                            \"rounded-[2.5rem] overflow-hidden transition-all duration-300\",\r\n                            \"glass-panel shadow-macos-soft border border-white/40 dark:border-white/10\",\r\n                            \"cursor-grab active:cursor-grabbing\"\r\n                        )}\r\n                    >\r\n                        <div className=\"p-8\">\r\n                            {/* Header Section */}\r\n                            <div className=\"flex items-start gap-4 mb-6\">\r\n                                <div className=\"w-14 h-14 rounded-[20px] bg-red-50 dark:bg-red-500/10 flex items-center justify-center shadow-sm border border-red-100 dark:border-red-500/20\">\r\n                                    <AlertCircle className=\"w-7 h-7 text-red-500\" />\r\n                                </div>\r\n                                <div className=\"flex-1 space-y-1\">\r\n                                    <H3 className=\"text-app-fg leading-none text-[20px] font-semibold tracking-tight\">{title}</H3>\r\n                                    <SmallText className=\"text-gray-500 dark:text-gray-400 mt-1 uppercase tracking-widest text-[11px] font-bold opacity-80\">\r\n                                        {subtitle}\r\n                                    </SmallText>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Warning Content */}\r\n                            {warningText && (\r\n                                <div className=\"p-5 rounded-[20px] bg-red-50/50 dark:bg-red-500/5 border border-red-500/10 mb-8 relative overflow-hidden group\">\r\n                                    <div className=\"absolute left-0 top-0 bottom-0 w-1 bg-red-500/40\" />\r\n                                    <Body className=\"text-[13px] text-red-600 dark:text-red-400 leading-relaxed font-medium pl-2\">\r\n                                        {warningText}\r\n                                    </Body>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Actions (Standardized with Upload UI buttons) */}\r\n                            <div className=\"flex gap-3\">\r\n                                <Button\r\n                                    variant=\"outline\"\r\n                                    className=\"flex-1 h-12 rounded-[18px] font-bold text-[13px] uppercase tracking-wider border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/5\"\r\n                                    onClick={onClose}\r\n                                >\r\n                                    {cancelLabel}\r\n                                </Button>\r\n                                <Button\r\n                                    className=\"flex-1 h-12 rounded-[18px] bg-primary hover:bg-primary/90 text-white font-bold text-[13px] uppercase tracking-wider shadow-lg shadow-blue-500/25\"\r\n                                    onClick={onConfirm}\r\n                                >\r\n                                    {confirmLabel}\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\DetailField.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":18,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":18,"endColumn":103}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { SmallText } from \"../atoms/Typography\";\r\n\r\ninterface DetailFieldProps {\r\n    label: string;\r\n    value: string | number | null | undefined;\r\n    icon?: React.ReactNode;\r\n    className?: string;\r\n}\r\n\r\nexport const DetailField = ({ label, value, icon, className }: DetailFieldProps) => (\r\n    <div className={cn(\"space-y-1 group transition-all duration-300\", className)}>\r\n        <div className=\"flex items-center gap-2 opacity-50 group-hover:opacity-100 transition-opacity\">\r\n            {icon && <div className=\"text-app-accent\">{icon}</div>}\r\n            <SmallText className=\"text-[9px] font-semibold uppercase tracking-widest m-0 leading-none\">\r\n                {label}\r\n            </SmallText>\r\n        </div>\r\n        <div className=\"font-medium text-app-fg tracking-tight leading-snug break-words\">\r\n            {value || (\r\n                <span className=\"text-app-fg-muted font-normal italic uppercase tracking-tighter opacity-50\">\r\n                    Empty\r\n                </span>\r\n            )}\r\n        </div>\r\n    </div>\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\DocumentJourney.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'STAGE_LABELS' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":6,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isPending' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":20,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"; export type DocumentStage = \"PO\" | \"DC\" | \"Invoice\" | \"SRV\"; interface DocumentJourneyProps {\r\n    currentStage: DocumentStage; stages?: DocumentStage[]; className?: string;\r\n} const STAGE_LABELS: Record<DocumentStage, string> = {\r\n    PO: \"Purchase Order\",\r\n    DC: \"Delivery Challan\",\r\n    Invoice: \"Tax Invoice\",\r\n    SRV: \"Service Receipt\",\r\n};\r\n\r\nexport const DocumentJourney = ({ currentStage, stages = [\"PO\", \"DC\", \"Invoice\"], className }: DocumentJourneyProps) => {\r\n    const currentIndex = stages.indexOf(currentStage);\r\n    return (\r\n        <div className={cn(\"flex items-center gap-1.5\", className)}>\r\n            {stages.map((stage, index) => {\r\n                const isCompleted = index < currentIndex;\r\n                const isActive = index === currentIndex;\r\n                const isPending = index > currentIndex;\r\n                return (\r\n                    <React.Fragment key={stage}>\r\n                        <div className={cn(\r\n                            \"flex items-center gap-2 px-3 py-1.5 rounded-full transition-all duration-300\",\r\n                            isActive\r\n                                ? \"bg-app-surface elevation-1 text-text-primary\"\r\n                                : isCompleted\r\n                                    ? \"bg-system-green/10 text-system-green\"\r\n                                    : \"bg-transparent text-text-tertiary\",\r\n                        )}>\r\n                            {isCompleted ? (\r\n                                <Check size={10} strokeWidth={3} className=\"text-system-green\" />\r\n                            ) : isActive ? (\r\n                                <div className=\"w-1.5 h-1.5 rounded-full bg-app-accent\" />\r\n                            ) : (\r\n                                <Circle size={10} className=\"text-text-tertiary opacity-50\" />\r\n                            )}\r\n                            <span className={cn(\r\n                                \"text-caption-2 uppercase tracking-wider font-regular\",\r\n                                isActive ? \"text-text-primary\" : isCompleted ? \"text-system-green\" : \"text-text-tertiary\",\r\n                            )}>\r\n                                {stage}\r\n                            </span>\r\n                        </div>\r\n                        {index < stages.length - 1 && (\r\n                            <div className=\"w-4 h-[1px] bg-transparent\" />\r\n                        )}\r\n                    </React.Fragment>\r\n                );\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\FormField.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":53,"column":28,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":53,"endColumn":79},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport { Input, InputProps } from \"../atoms/Input\";\r\nimport { Label } from \"../atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * FormField Molecule - Atomic Design System v1.0\r\n * Composition: Label (16px) + Input + Error Message\r\n */\r\nexport interface FormFieldProps extends InputProps {\r\n    label?: string;\r\n    error?: string;\r\n    helperText?: string;\r\n    required?: boolean;\r\n    floating?: boolean;\r\n}\r\n\r\nexport const FormField = React.forwardRef<HTMLInputElement, FormFieldProps>(\r\n    (\r\n        { label, error, helperText, required, floating, className, ...inputProps },\r\n        ref\r\n    ) => {\r\n        if (floating) {\r\n            return (\r\n                <div className={cn(\"relative space-y-0\", className)}>\r\n                    <Input\r\n                        ref={ref}\r\n                        error={error}\r\n                        required={required}\r\n                        className={cn(\r\n                            \"peer pt-6 pb-2 h-14 bg-app-surface/50 border-app-border/20 focus:bg-app-surface placeholder:text-transparent\",\r\n                            error && \"border-app-status-error\"\r\n                        )}\r\n                        placeholder=\"\" // Required for peer-placeholder-shown\r\n                        {...inputProps}\r\n                    />\r\n                    {label && (\r\n                        <Label\r\n                            htmlFor={inputProps.id}\r\n                            className={cn(\r\n                                \"absolute left-3 top-4 z-10 origin-[0] -translate-y-2.5 scale-75 transform text-app-fg-muted duration-200\",\r\n                                \"peer-placeholder-shown:translate-y-0 peer-placeholder-shown:scale-100 peer-placeholder-shown:text-app-fg-muted\",\r\n                                \"peer-focus:-translate-y-2.5 peer-focus:scale-75 peer-focus:text-app-accent\",\r\n                                error && \"text-app-status-error peer-focus:text-app-status-error\"\r\n                            )}\r\n                        >\r\n                            {label}{\" \"}\r\n                            {required && <span className=\"ml-1 text-app-status-error\">*</span>}\r\n                        </Label>\r\n                    )}\r\n                    {helperText && !error && (\r\n                        <p className=\"mt-1 text-[11px] text-app-fg-muted pl-1\">\r\n                            {helperText}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className={cn(\"space-y-1.5\", className)}>\r\n                {label && (\r\n                    <Label htmlFor={inputProps.id} className=\"block\">\r\n                        {label} {required && <span className=\"text-app-status-error ml-1\">*</span>}\r\n                    </Label>\r\n                )}\r\n                <Input ref={ref} error={error} required={required} {...inputProps} />\r\n                {helperText && !error && (\r\n                    <p className=\"text-[12px] text-app-fg-muted\">{helperText}</p>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n);\r\nFormField.displayName = \"FormField\";\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\FormFields.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":28,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":28,"endColumn":111},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":111},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":111,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":111,"endColumn":111},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":149,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":149,"endColumn":111},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":191,"column":20,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":191,"endColumn":111}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Shared Form Components\r\n * Used in DC and Invoice pages for consistent form styling\r\n */\r\nimport React from \"react\";\r\n\r\ninterface TextFieldProps {\r\n    label: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    placeholder?: string;\r\n    required?: boolean;\r\n    disabled?: boolean;\r\n    type?: \"text\" | \"email\" | \"tel\" | \"date\";\r\n}\r\n\r\nexport const TextField = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    placeholder = \"\",\r\n    required = false,\r\n    disabled = false,\r\n    type = \"text\",\r\n}: TextFieldProps) => {\r\n    return (\r\n        <div>\r\n            <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-app-fg-muted mb-1\">\r\n                {label} {required && <span className=\"text-app-status-error\">*</span>}\r\n            </label>\r\n            <input\r\n                type={type}\r\n                value={value}\r\n                onChange={(e) => onChange(e.target.value)}\r\n                placeholder={placeholder}\r\n                disabled={disabled}\r\n                required={required}\r\n                className={`w-full px-3 py-2 border border-app-border rounded-lg focus:ring-1 focus:ring-app-accent focus:border-app-accent text-app-fg bg-app-surface ${disabled ? \"bg-app-overlay text-app-fg-muted cursor-not-allowed\" : \"\"\r\n                    }`}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface NumberFieldProps {\r\n    label: string;\r\n    value: number;\r\n    onChange: (value: number) => void;\r\n    min?: number;\r\n    max?: number;\r\n    step?: number;\r\n    required?: boolean;\r\n    disabled?: boolean;\r\n    placeholder?: string;\r\n}\r\n\r\nexport const NumberField = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    min,\r\n    max,\r\n    step = 1,\r\n    required = false,\r\n    disabled = false,\r\n    placeholder = \"\",\r\n}: NumberFieldProps) => {\r\n    return (\r\n        <div>\r\n            <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-app-fg-muted mb-1\">\r\n                {label} {required && <span className=\"text-app-status-error\">*</span>}\r\n            </label>\r\n            <input\r\n                type=\"number\"\r\n                value={value}\r\n                onChange={(e) => onChange(parseFloat(e.target.value) || 0)}\r\n                min={min}\r\n                max={max}\r\n                step={step}\r\n                disabled={disabled}\r\n                required={required}\r\n                placeholder={placeholder}\r\n                className={`w-full px-3 py-2 border border-app-border rounded-lg focus:ring-1 focus:ring-app-accent focus:border-app-accent text-app-fg bg-app-surface ${disabled ? \"bg-app-overlay text-app-fg-muted cursor-not-allowed\" : \"\"\r\n                    }`}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface TextAreaFieldProps {\r\n    label: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    placeholder?: string;\r\n    required?: boolean;\r\n    disabled?: boolean;\r\n    rows?: number;\r\n}\r\n\r\nexport const TextAreaField = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    placeholder = \"\",\r\n    required = false,\r\n    disabled = false,\r\n    rows = 3,\r\n}: TextAreaFieldProps) => {\r\n    return (\r\n        <div>\r\n            <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-app-fg-muted mb-1\">\r\n                {label} {required && <span className=\"text-app-status-error\">*</span>}\r\n            </label>\r\n            <textarea\r\n                value={value}\r\n                onChange={(e) => onChange(e.target.value)}\r\n                placeholder={placeholder}\r\n                disabled={disabled}\r\n                required={required}\r\n                rows={rows}\r\n                className={`w-full px-3 py-2 border border-app-border rounded-lg focus:ring-1 focus:ring-app-accent focus:border-app-accent text-app-fg bg-app-surface resize-none ${disabled ? \"bg-app-overlay text-app-fg-muted cursor-not-allowed\" : \"\"\r\n                    }`}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface SelectFieldProps {\r\n    label: string;\r\n    value: string | number;\r\n    onChange: (value: string) => void;\r\n    options: { value: string | number; label: string }[];\r\n    required?: boolean;\r\n    disabled?: boolean;\r\n    placeholder?: string;\r\n}\r\n\r\nexport const SelectField = ({\r\n    label,\r\n    value,\r\n    onChange,\r\n    options,\r\n    required = false,\r\n    disabled = false,\r\n    placeholder = \"Select...\",\r\n}: SelectFieldProps) => {\r\n    return (\r\n        <div>\r\n            <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-app-fg-muted mb-1\">\r\n                {label} {required && <span className=\"text-app-status-error\">*</span>}\r\n            </label>\r\n            <select\r\n                value={value}\r\n                onChange={(e) => onChange(e.target.value)}\r\n                disabled={disabled}\r\n                required={required}\r\n                className={`w-full px-3 py-2 border border-app-border rounded-lg focus:ring-1 focus:ring-app-accent focus:border-app-accent text-app-fg bg-app-surface ${disabled ? \"bg-app-overlay text-app-fg-muted cursor-not-allowed\" : \"\"\r\n                    }`}\r\n            >\r\n                {placeholder && <option value=\"\">{placeholder}</option>}\r\n                {options.map((option) => (\r\n                    <option key={option.value} value={option.value}>\r\n                        {option.label}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface ReadOnlyFieldProps {\r\n    label: string;\r\n    value: string | number;\r\n    isCurrency?: boolean;\r\n}\r\n\r\nexport const ReadOnlyField = ({\r\n    label,\r\n    value,\r\n    isCurrency = false,\r\n}: ReadOnlyFieldProps) => {\r\n    const displayValue =\r\n        isCurrency && typeof value === \"number\"\r\n            ? `â‚¹${value.toLocaleString(\"en-IN\", {\r\n                minimumFractionDigits: 2,\r\n                maximumFractionDigits: 2,\r\n            })}`\r\n            : value;\r\n    return (\r\n        <div>\r\n            <label className=\"block text-[11px] uppercase tracking-wider font-semibold text-app-fg-muted mb-1\">\r\n                {label}\r\n            </label>\r\n            <div className=\"px-3 py-2 bg-app-overlay border border-app-border rounded-lg text-app-fg\">\r\n                {displayValue || \"-\"}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\NavigationCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1485,1488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1485,1488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Body, Caption1 } from \"../atoms/Typography\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nexport interface NavigationCardProps {\r\n    title: string;\r\n    description?: string;\r\n    icon?: React.ReactNode;\r\n    active?: boolean;\r\n    onClick?: () => void;\r\n    className?: string;\r\n}\r\n\r\nexport const NavigationCard = ({\r\n    title,\r\n    description,\r\n    icon,\r\n    active,\r\n    onClick,\r\n    className,\r\n}: NavigationCardProps) => {\r\n    return (\r\n        <Card\r\n            asChild\r\n            variant={active ? \"glass\" : \"default\"}\r\n            padding=\"md\"\r\n            className={cn(\r\n                \"relative flex flex-col items-start text-left cursor-pointer group\",\r\n                active ? \"border-system-blue/30 ring-1 ring-system-blue/30 bg-system-blue/5\" : \"hover:bg-surface-secondary\",\r\n                className\r\n            )}\r\n            onClick={onClick}\r\n        >\r\n            <motion.div whileTap={{ scale: 0.98 }}>\r\n                {icon && (\r\n                    <div\r\n                        className={cn(\r\n                            \"p-2.5 rounded-xl mb-3 transition-colors\",\r\n                            active ? \"bg-system-blue text-white shadow-md\" : \"bg-surface-tertiary text-text-secondary\"\r\n                        )}\r\n                    >\r\n                        {React.isValidElement(icon) ? React.cloneElement(icon as any, { size: 20 }) : icon}\r\n                    </div>\r\n                )}\r\n\r\n                <Body className={cn(\"font-medium\", active ? \"text-system-blue\" : \"text-text-primary\")}>\r\n                    {title}\r\n                </Body>\r\n\r\n                {description && (\r\n                    <Caption1 className=\"mt-1.5 line-clamp-2 text-text-secondary\">\r\n                        {description}\r\n                    </Caption1>\r\n                )}\r\n            </motion.div>\r\n        </Card>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\PaginationControls.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'itemName' is assigned a value but never used. Allowed unused args must match /^_/u.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":13},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":22,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":22,"endColumn":95}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\r\n\r\ninterface PaginationControlsProps {\r\n    currentPage: number;\r\n    totalPages: number;\r\n    onPageChange: (page: number) => void;\r\n    itemName?: string;\r\n}\r\n\r\nexport default function PaginationControls({\r\n    currentPage,\r\n    totalPages,\r\n    onPageChange,\r\n    itemName = \"Items\",\r\n}: PaginationControlsProps) {\r\n    if (totalPages <= 1) return null;\r\n\r\n    return (\r\n        <div className=\"flex items-center justify-between px-6 py-4 border-t border-app-border bg-app-overlay/30 backdrop-blur-md rounded-b-2xl\">\r\n            <div className=\"text-[10px] font-bold uppercase tracking-widest text-app-fg-muted\">\r\n                Page <span className=\"text-app-fg\">{currentPage}</span> of{\" \"}\r\n                <span className=\"text-app-fg\">{totalPages}</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n                <button\r\n                    onClick={() => onPageChange(currentPage - 1)}\r\n                    disabled={currentPage === 1}\r\n                    className=\"p-2 rounded-xl hover:bg-app-surface hover:shadow-app-spotlight disabled:opacity-20 disabled:cursor-not-allowed transition-all text-app-fg-muted hover:text-app-accent border border-transparent hover:border-app-accent/20\"\r\n                >\r\n                    <ChevronLeft className=\"w-4 h-4\" />\r\n                </button>\r\n                <button\r\n                    onClick={() => onPageChange(currentPage + 1)}\r\n                    disabled={currentPage >= totalPages}\r\n                    className=\"p-2 rounded-xl hover:bg-app-surface hover:shadow-app-spotlight disabled:opacity-20 disabled:cursor-not-allowed transition-all text-app-fg-muted hover:text-app-accent border border-transparent hover:border-app-accent/20\"\r\n                >\r\n                    <ChevronRight className=\"w-4 h-4\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\SearchBar.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":85,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":85,"endColumn":202}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { Input } from \"../atoms/Input\";\r\nimport { Search, X } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useDebounce } from \"@/hooks/useDebounce\";\r\n\r\n/**\r\n * SearchBar Molecule - Atomic Design System v1.0\r\n * Composition: Input + Search Icon + Clear Button + Keyboard Shortcut\r\n * Performance: 300ms debounce to prevent excessive re-renders\r\n */\r\nexport interface SearchBarProps {\r\n    id?: string;\r\n    name?: string;\r\n    value: string;\r\n    onChange: (value: string) => void;\r\n    onSearch?: () => void;\r\n    placeholder?: string;\r\n    shortcut?: string;\r\n    className?: string;\r\n    variant?: \"default\" | \"neumorphic\";\r\n}\r\n\r\nconst SearchBarInternal = React.forwardRef<HTMLInputElement, SearchBarProps>(\r\n    ({ id, name, value, onChange, onSearch, placeholder = \"Search...\", shortcut, className, variant = \"default\" }, ref) => {\r\n        const [localValue, setLocalValue] = useState(value);\r\n        const debouncedValue = useDebounce(localValue, 300);\r\n\r\n        // Sync debounced value to parent\r\n        useEffect(() => {\r\n            if (debouncedValue !== value) {\r\n                onChange(debouncedValue);\r\n            }\r\n        }, [debouncedValue, onChange, value]);\r\n\r\n        // Sync external value changes back to local state\r\n        useEffect(() => {\r\n            if (value !== localValue) {\r\n                setLocalValue(value);\r\n            }\r\n        }, [value]);\r\n\r\n        const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n            if (e.key === \"Enter\" && onSearch) {\r\n                onSearch();\r\n            }\r\n        };\r\n\r\n        const handleClear = () => {\r\n            setLocalValue(\"\");\r\n            onChange(\"\"); // Immediate clear\r\n        };\r\n\r\n        return (\r\n            <div className={cn(\"relative group max-w-2xl w-full\", className)}>\r\n                <Input\r\n                    ref={ref}\r\n                    id={id}\r\n                    name={name}\r\n                    variant={variant === \"neumorphic\" ? \"neumorphic\" : \"default\"}\r\n                    value={localValue}\r\n                    onChange={(e) => setLocalValue(e.target.value)}\r\n                    onKeyDown={handleKeyDown}\r\n                    placeholder={placeholder}\r\n                    icon={<Search size={18} className=\"text-app-fg/40 group-focus-within:text-app-accent transition-colors\" />}\r\n                    className={cn(\r\n                        \"pr-20 h-[44px] rounded-full transition-all duration-300 pl-12 border-none\",\r\n                        variant === \"default\" && \"bg-app-overlay/10 focus:shadow-xl focus:shadow-app-accent/5 focus:bg-app-overlay/20 shadow-none\"\r\n                    )}\r\n                />\r\n                {/* Actions Group */}\r\n                <div className=\"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2\">\r\n                    {localValue && (\r\n                        <button\r\n                            onClick={handleClear}\r\n                            className=\"text-app-fg/30 hover:text-rose-500 transition-colors p-1.5 hover:bg-rose-500/5 rounded-full\"\r\n                            aria-label=\"Clear search\"\r\n                        >\r\n                            <X size={16} />\r\n                        </button>\r\n                    )}\r\n                    {shortcut && !localValue && (\r\n                        <kbd className=\"hidden sm:flex px-2 py-0.5 text-[9px] font-black text-app-fg/40 bg-app-fg/5 rounded-md border border-app-border/20 pointer-events-none tracking-widest uppercase\">\r\n                            {shortcut}\r\n                        </kbd>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nSearchBarInternal.displayName = \"SearchBar\";\r\n\r\nexport const SearchBar = React.memo(SearchBarInternal);\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\SearchTrigger.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":28,"column":23,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":28,"endColumn":76}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { Search } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface SearchTriggerProps {\r\n    className?: string;\r\n}\r\n\r\nexport const SearchTrigger = ({ className }: SearchTriggerProps) => {\r\n    return (\r\n        <button\r\n            onClick={() => document.dispatchEvent(new CustomEvent(\"open-command-palette\"))}\r\n            className={cn(\r\n                \"group relative flex items-center gap-2 px-4 py-2 rounded-xl\",\r\n                \"bg-app-surface/50 hover:bg-app-surface hover:shadow-app-spotlight\", // Subtle glass input look\r\n                \"border border-app-border\",\r\n                \"transition-all duration-200\",\r\n                \"text-app-fg-muted hover:text-app-fg w-full md:w-64 lg:w-80\",\r\n                className\r\n            )}\r\n        >\r\n            <Search className=\"w-4 h-4 text-app-fg-muted group-hover:text-app-fg transition-colors\" />\r\n            <span className=\"text-sm text-app-fg-muted group-hover:text-app-fg/80 flex-1 text-left\">\r\n                Search...\r\n            </span>\r\n            <div className=\"hidden md:flex items-center gap-1 border border-app-border/50 rounded px-1.5 py-0.5 bg-app-overlay/20\">\r\n                <span className=\"text-[10px] font-medium text-app-fg-muted\">âŒ˜ K</span>\r\n            </div>\r\n        </button>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\StatBlock.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\StatusTag.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\TableCells.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\TableHeaderCell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\Toast.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":93,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":93,"endColumn":92},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":94,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":94,"endColumn":105}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useState, useCallback, ReactNode, useEffect } from \"react\";\r\nimport { X, CheckCircle, AlertCircle, Info } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport type ToastType = \"success\" | \"error\" | \"info\" | \"warning\";\r\n\r\ninterface ToastMessage {\r\n    id: string;\r\n    type: ToastType;\r\n    title: string;\r\n    message?: string;\r\n}\r\n\r\ninterface ToastContextType {\r\n    toast: (title: string, message?: string, type?: ToastType) => void;\r\n    success: (title: string, message?: string) => void;\r\n    error: (title: string, message?: string) => void;\r\n}\r\n\r\nconst ToastContext = createContext<ToastContextType | undefined>(undefined);\r\n\r\nexport function useToast() {\r\n    const context = useContext(ToastContext);\r\n    if (!context) {\r\n        throw new Error(\"useToast must be used within a ToastProvider\");\r\n    }\r\n    return context;\r\n}\r\n\r\nexport function ToastProvider({ children }: { children: ReactNode }) {\r\n    const [toasts, setToasts] = useState<ToastMessage[]>([]);\r\n\r\n    const addToast = useCallback(\r\n        (title: string, message?: string, type: ToastType = \"info\") => {\r\n            const id = Math.random().toString(36).substring(2, 9);\r\n            setToasts((prev) => [...prev, { id, title, message, type }]);\r\n            setTimeout(() => {\r\n                setToasts((prev) => prev.filter((t) => t.id !== id));\r\n            }, 4000);\r\n        },\r\n        []\r\n    );\r\n\r\n    useEffect(() => {\r\n        const handleApiError = (event: Event) => {\r\n            const customEvent = event as CustomEvent;\r\n            const detail = customEvent.detail || {};\r\n            addToast(\r\n                detail.title || \"Error\",\r\n                detail.message || \"Something went wrong\",\r\n                detail.type || \"error\"\r\n            );\r\n        };\r\n        window.addEventListener(\"api-error\", handleApiError);\r\n        return () => window.removeEventListener(\"api-error\", handleApiError);\r\n    }, [addToast]);\r\n\r\n    const removeToast = useCallback((id: string) => {\r\n        setToasts((prev) => prev.filter((t) => t.id !== id));\r\n    }, []);\r\n\r\n    const helpers = {\r\n        toast: (title: string, message?: string, type: ToastType = \"info\") => addToast(title, message, type),\r\n        success: (title: string, message?: string) => addToast(title, message, \"success\"),\r\n        error: (title: string, message?: string) => addToast(title, message, \"error\"),\r\n    };\r\n\r\n    return (\r\n        <ToastContext.Provider value={helpers}>\r\n            {children}\r\n            <div className=\"fixed bottom-6 right-6 z-[100] flex flex-col gap-3 pointer-events-none\">\r\n                {toasts.map((t) => (\r\n                    <div\r\n                        key={t.id}\r\n                        className={cn(\r\n                            \"pointer-events-auto min-w-[320px] max-w-sm rounded-2xl shadow-app-spotlight border px-4 py-4 flex gap-4 transform transition-all duration-500 animate-in slide-in-from-right-12 fade-in backdrop-blur-md\",\r\n                            \"bg-app-surface/90 border-app-border\",\r\n                            t.type === \"success\" && \"border-l-4 border-l-app-status-success\",\r\n                            t.type === \"error\" && \"border-l-4 border-l-app-status-error\",\r\n                            t.type === \"warning\" && \"border-l-4 border-l-app-status-warning\",\r\n                            t.type === \"info\" && \"border-l-4 border-l-app-accent\"\r\n                        )}\r\n                    >\r\n                        <div className=\"shrink-0 mt-0.5\">\r\n                            {t.type === \"success\" && <CheckCircle className=\"w-5 h-5 text-app-status-success\" />}\r\n                            {t.type === \"error\" && <AlertCircle className=\"w-5 h-5 text-app-status-error\" />}\r\n                            {t.type === \"warning\" && <AlertCircle className=\"w-5 h-5 text-app-status-warning\" />}\r\n                            {t.type === \"info\" && <Info className=\"w-5 h-5 text-app-accent\" />}\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                            <h4 className=\"font-bold text-app-fg text-[14px] leading-tight\">{t.title}</h4>\r\n                            {t.message && <p className=\"text-app-fg-muted mt-1 text-[12px] leading-snug\">{t.message}</p>}\r\n                        </div>\r\n                        <button onClick={() => removeToast(t.id)} className=\"shrink-0 text-app-fg-muted hover:text-app-fg transition-colors\">\r\n                            <X className=\"w-4 h-4\" />\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </ToastContext.Provider>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\molecules\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\AlertsPanel.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'panelRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":23,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":89,"column":27,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":89,"endColumn":168},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":109,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":109,"endColumn":146},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":151,"column":58,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":151,"endColumn":158},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":176,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":176,"endColumn":178}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { Bell, CheckCircle, AlertTriangle, Info, X } from \"lucide-react\";\r\nimport { api } from \"@/lib/api\";\r\n\r\ninterface Alert {\r\n    id: string;\r\n    alert_type: string;\r\n    entity_type: string;\r\n    entity_id: string;\r\n    message: string;\r\n    severity: string;\r\n    is_acknowledged: boolean;\r\n    created_at: string;\r\n}\r\n\r\nexport default function AlertsPanel() {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [alerts, setAlerts] = useState<Alert[]>([]);\r\n    const [unreadCount, setUnreadCount] = useState(0);\r\n    const [loading, setLoading] = useState(true);\r\n    const panelRef = useRef<HTMLDivElement>(null);\r\n\r\n    const fetchAlerts = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const data = await api.listAlerts(); // Updated from getAlerts\r\n            setAlerts(data);\r\n            setUnreadCount(data.length);\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch alerts:\", error);\r\n            setAlerts([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchAlerts();\r\n        const interval = setInterval(fetchAlerts, 60000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const handleAcknowledge = async (alertId: string) => {\r\n        try {\r\n            await api.acknowledgeAlert(alertId);\r\n            fetchAlerts();\r\n        } catch (error) {\r\n            console.error(\"Failed to acknowledge alert:\", error);\r\n        }\r\n    };\r\n\r\n    const getSeverityIcon = (severity: string) => {\r\n        switch (severity) {\r\n            case \"error\":\r\n                return <AlertTriangle className=\"w-5 h-5 text-app-status-error\" />;\r\n            case \"warning\":\r\n                return <AlertTriangle className=\"w-5 h-5 text-app-status-warning\" />;\r\n            case \"info\":\r\n                return <Info className=\"w-5 h-5 text-app-accent\" />;\r\n            default:\r\n                return <Info className=\"w-5 h-5 text-app-fg-muted\" />;\r\n        }\r\n    };\r\n\r\n    const getSeverityColor = (severity: string) => {\r\n        switch (severity) {\r\n            case \"error\":\r\n                return \"bg-app-status-error/10 border-app-status-error/20\";\r\n            case \"warning\":\r\n                return \"bg-app-status-warning/10 border-app-status-warning/20\";\r\n            case \"info\":\r\n                return \"bg-app-accent/10 border-app-accent/20\";\r\n            default:\r\n                return \"bg-app-overlay border-app-border/20\";\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Alert Bell Button */}\r\n            <button\r\n                onClick={() => setIsOpen(!isOpen)}\r\n                className=\"relative p-2 text-app-fg-muted hover:text-app-fg hover:bg-app-overlay rounded-lg transition-colors\"\r\n            >\r\n                <Bell className=\"w-5 h-5\" />\r\n                {unreadCount > 0 && (\r\n                    <span className=\"absolute top-0 right-0 w-5 h-5 bg-app-status-error text-white font-bold rounded-full flex items-center justify-center text-[10px]\">\r\n                        {unreadCount}\r\n                    </span>\r\n                )}\r\n            </button>\r\n\r\n            {/* Alerts Panel */}\r\n            {isOpen && (\r\n                <>\r\n                    <div\r\n                        className=\"fixed inset-0 bg-app-overlay/40 backdrop-blur-sm z-40\"\r\n                        onClick={() => setIsOpen(false)}\r\n                    />\r\n                    <div className=\"fixed top-16 right-4 w-96 bg-app-surface border border-app-border rounded-2xl shadow-app-spotlight z-50 max-h-[600px] flex flex-col overflow-hidden\">\r\n                        {/* Header */}\r\n                        <div className=\"px-6 py-4 border-b border-app-border flex items-center justify-between bg-app-surface/80 backdrop-blur-xl\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Bell className=\"w-5 h-5 text-app-fg\" />\r\n                                <h3 className=\"font-bold text-app-fg uppercase tracking-tight\">Alerts</h3>\r\n                                {unreadCount > 0 && (\r\n                                    <span className=\"px-2 py-0.5 bg-app-status-error/10 text-app-status-error font-bold rounded-full text-[10px]\">\r\n                                        {unreadCount}\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            <button onClick={() => setIsOpen(false)} className=\"hover:bg-app-overlay p-1 rounded-full transition-colors\">\r\n                                <X className=\"w-5 h-5 text-app-fg-muted hover:text-app-fg\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Alerts List */}\r\n                        <div className=\"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar\">\r\n                            {loading && (\r\n                                <div className=\"text-center py-12 text-app-fg-muted\">\r\n                                    <Loader2 className=\"w-8 h-8 animate-spin mx-auto mb-2 opacity-20\" />\r\n                                    <p className=\"text-xs font-medium uppercase tracking-widest\">Scanning Network...</p>\r\n                                </div>\r\n                            )}\r\n                            {!loading && alerts.length === 0 && (\r\n                                <div className=\"text-center py-12\">\r\n                                    <CheckCircle className=\"w-12 h-12 text-app-status-success mx-auto mb-4 opacity-50\" />\r\n                                    <div className=\"text-app-fg font-bold uppercase tracking-tight mb-1\">Station Clear</div>\r\n                                    <div className=\"text-app-fg-muted text-xs\">No pending operations require attention</div>\r\n                                </div>\r\n                            )}\r\n                            {!loading && alerts.length > 0 && (\r\n                                <div className=\"space-y-3\">\r\n                                    {alerts.map((alert) => (\r\n                                        <div\r\n                                            key={alert.id}\r\n                                            className={`p-4 rounded-xl border transition-all duration-300 hover:shadow-md ${getSeverityColor(\r\n                                                alert.severity\r\n                                            )}`}\r\n                                        >\r\n                                            <div className=\"flex items-start gap-4\">\r\n                                                <div className=\"flex-shrink-0 mt-1\">\r\n                                                    {getSeverityIcon(alert.severity)}\r\n                                                </div>\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"font-bold text-app-fg text-sm mb-1 leading-tight\">\r\n                                                        {alert.message}\r\n                                                    </div>\r\n                                                    <div className=\"flex items-center gap-3 text-[10px] text-app-fg-muted font-bold uppercase tracking-wider\">\r\n                                                        <span className=\"px-2 py-0.5 bg-app-surface/50 rounded-md border border-app-border\">\r\n                                                            {alert.entity_type}\r\n                                                        </span>\r\n                                                        <span>\r\n                                                            {new Date(alert.created_at).toLocaleDateString()}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <button\r\n                                                    onClick={() => handleAcknowledge(alert.id)}\r\n                                                    className=\"flex-shrink-0 p-1.5 hover:bg-app-surface/80 rounded-full transition-colors group\"\r\n                                                    title=\"Acknowledge\"\r\n                                                >\r\n                                                    <X className=\"w-4 h-4 text-app-fg-muted group-hover:text-app-status-error\" />\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Footer */}\r\n                        {alerts.length > 0 && (\r\n                            <div className=\"px-6 py-3 border-t border-app-border bg-app-overlay/20 text-app-fg-muted text-[10px] text-center font-bold uppercase tracking-widest\">\r\n                                Acknowledge alerts to dismiss from deck\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nimport { Loader2 } from \"lucide-react\";\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\CommandBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used. Allowed unused vars must match /^_/u.","line":15,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":6},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":62,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":25},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":147,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":147,"endColumn":214},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":158,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":158,"endColumn":127},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":240,"column":34,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":240,"endColumn":127},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":275,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":275,"endColumn":132},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":281,"column":30,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":281,"endColumn":132}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport {\r\n    Search,\r\n    FileText,\r\n    Truck,\r\n    ShoppingCart,\r\n    LayoutDashboard,\r\n    Plus,\r\n    Box,\r\n    BarChart2,\r\n    Receipt,\r\n    ArrowRight,\r\n    Loader2,\r\n    X,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { api, SearchResult } from \"@/lib/api\";\r\nimport { StatusBadge } from \"../atoms/StatusBadge\";\r\n\r\nexport function CommandBar() {\r\n    const [open, setOpen] = useState(false);\r\n    const [search, setSearch] = useState(\"\");\r\n    const [results, setResults] = useState<SearchResult[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const router = useRouter();\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    // Toggle on Cmd+K and handle global shortcuts\r\n    useEffect(() => {\r\n        const down = (e: KeyboardEvent) => {\r\n            if (e.key === \"k\" && (e.metaKey || e.ctrlKey)) {\r\n                e.preventDefault();\r\n                setOpen((o) => !o);\r\n            }\r\n            if (e.key === \"Escape\") setOpen(false);\r\n        };\r\n        document.addEventListener(\"keydown\", down);\r\n        return () => document.removeEventListener(\"keydown\", down);\r\n    }, []);\r\n\r\n    // Database Search\r\n    useEffect(() => {\r\n        if (!open) {\r\n            setSearch(\"\");\r\n            setResults([]);\r\n            return;\r\n        }\r\n        const performSearch = async () => {\r\n            if (search.length < 2) {\r\n                setResults([]);\r\n                return;\r\n            }\r\n            setLoading(true);\r\n            try {\r\n                const data = await api.searchGlobal(search);\r\n                setResults(data);\r\n                setSelectedIndex(0);\r\n            } catch (err) {\r\n                setResults([]);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        const debounce = setTimeout(performSearch, 300);\r\n        return () => clearTimeout(debounce);\r\n    }, [search, open]);\r\n\r\n    // Keyboard Navigation\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        const totalItems = results.length + navigationItems.length;\r\n        if (e.key === \"ArrowDown\") {\r\n            e.preventDefault();\r\n            setSelectedIndex((prev) => (prev + 1) % totalItems);\r\n        } else if (e.key === \"ArrowUp\") {\r\n            e.preventDefault();\r\n            setSelectedIndex((prev) => (prev - 1 + totalItems) % totalItems);\r\n        } else if (e.key === \"Enter\") {\r\n            if (search.length >= 2) {\r\n                if (selectedIndex < results.length) {\r\n                    handleResultClick(results[selectedIndex]);\r\n                } else {\r\n                    handleNavigate(navigationItems[selectedIndex - results.length].path);\r\n                }\r\n            } else {\r\n                handleNavigate(navigationItems[selectedIndex].path);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleNavigate = (path: string) => {\r\n        setOpen(false);\r\n        router.push(path);\r\n    };\r\n\r\n    const handleResultClick = (result: SearchResult) => {\r\n        setOpen(false);\r\n        if (result.type === \"PO\") router.push(`/po/${result.number}`);\r\n        else if (result.type === \"DC\") router.push(`/dc/${result.number}`);\r\n        else if (result.type === \"Invoice\")\r\n            router.push(`/invoice/${encodeURIComponent(result.number)}`);\r\n        else if (result.type === \"SRV\")\r\n            router.push(`/reports?tab=reconciliation&search=${result.number}`);\r\n    };\r\n\r\n    const navigationItems = [\r\n        { label: \"Dashboard\", path: \"/\", icon: LayoutDashboard },\r\n        { label: \"Purchase Orders\", path: \"/po\", icon: ShoppingCart },\r\n        { label: \"Delivery Challans\", path: \"/dc\", icon: Truck },\r\n        { label: \"Invoices\", path: \"/invoice\", icon: Receipt },\r\n        { label: \"Reports\", path: \"/reports\", icon: BarChart2 },\r\n    ];\r\n\r\n    if (!open) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-start justify-center pt-[15vh] px-4\">\r\n            <div\r\n                className=\"fixed inset-0 bg-app-overlay/40 backdrop-blur-sm transition-opacity\"\r\n                onClick={() => setOpen(false)}\r\n            />\r\n            <div className=\"relative w-full max-w-3xl bg-app-surface/95 backdrop-blur-2xl rounded-3xl overflow-hidden shadow-app-spotlight border border-app-border/60 animate-in fade-in zoom-in-95 duration-200 ring-1 ring-app-accent/5\">\r\n                {/* Header / Search Area */}\r\n                <div className=\"flex items-center px-6 py-5 border-b border-app-border\">\r\n                    <Search\r\n                        className={cn(\r\n                            \"mr-4 h-6 w-6 transition-colors\",\r\n                            loading ? \"text-app-accent animate-pulse\" : \"text-app-fg-muted\"\r\n                        )}\r\n                    />\r\n                    <input\r\n                        ref={inputRef}\r\n                        autoFocus\r\n                        className=\"flex-1 bg-transparent font-medium text-app-fg outline-none placeholder:text-app-fg-muted/60\"\r\n                        placeholder=\"Search POs, DCs, Invoices, Actions...\"\r\n                        value={search}\r\n                        onChange={(e) => setSearch(e.target.value)}\r\n                        onKeyDown={handleKeyDown}\r\n                    />\r\n                    {loading ? (\r\n                        <Loader2 className=\"h-5 w-5 text-app-accent animate-spin\" />\r\n                    ) : (\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <kbd className=\"hidden sm:flex h-6 select-none items-center gap-1 rounded-lg border border-app-border/20 bg-app-overlay px-2 font-mono text-[10px] font-bold text-app-fg-muted shadow-sm\">\r\n                                ESC\r\n                            </kbd>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Scrollable Content */}\r\n                <div className=\"max-h-[60vh] overflow-y-auto custom-scrollbar\">\r\n                    {search.length >= 2 ? (\r\n                        <div className=\"p-3\">\r\n                            <div className=\"px-3 py-2 text-[10px] font-bold text-app-fg-muted uppercase tracking-[0.2em] mb-1\">\r\n                                Database Matches\r\n                            </div>\r\n                            {results.length > 0 ? (\r\n                                results.map((result, idx) => (\r\n                                    <button\r\n                                        key={idx}\r\n                                        onClick={() => handleResultClick(result)}\r\n                                        onMouseEnter={() => setSelectedIndex(idx)}\r\n                                        className={cn(\r\n                                            \"w-full flex items-center justify-between p-3 rounded-2xl transition-all duration-200 text-left mb-1 group\",\r\n                                            selectedIndex === idx\r\n                                                ? \"bg-app-accent text-white shadow-lg\"\r\n                                                : \"hover:bg-app-overlay text-app-fg\"\r\n                                        )}\r\n                                    >\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            <div\r\n                                                className={cn(\r\n                                                    \"p-2.5 rounded-xl flex items-center justify-center transition-colors\",\r\n                                                    selectedIndex === idx\r\n                                                        ? \"bg-white/20 text-white\"\r\n                                                        : \"bg-app-overlay text-app-fg-muted group-hover:bg-app-surface\"\r\n                                                )}\r\n                                            >\r\n                                                {result.type === \"PO\" ? (\r\n                                                    <ShoppingCart size={18} />\r\n                                                ) : result.type === \"DC\" ? (\r\n                                                    <Truck size={18} />\r\n                                                ) : result.type === \"Invoice\" ? (\r\n                                                    <Receipt size={18} />\r\n                                                ) : result.type === \"SRV\" ? (\r\n                                                    <FileText size={18} />\r\n                                                ) : (\r\n                                                    <Box size={18} />\r\n                                                )}\r\n                                            </div>\r\n                                            <div>\r\n                                                <div className=\"font-bold tracking-tight\">\r\n                                                    {result.number}\r\n                                                </div>\r\n                                                <div\r\n                                                    className={cn(\r\n                                                        \"text-[11px] font-medium opacity-70\",\r\n                                                        selectedIndex === idx\r\n                                                            ? \"text-white/80\"\r\n                                                            : \"text-app-fg-muted\"\r\n                                                    )}\r\n                                                >\r\n                                                    {result.type_label} â€¢{\" \"}\r\n                                                    {result.party || \"No Reference Data\"}\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-3 pr-2\">\r\n                                            {result.amount && (\r\n                                                <div className=\"font-mono font-bold tracking-tighter\">\r\n                                                    â‚¹{result.amount.toLocaleString(\"en-IN\")}\r\n                                                </div>\r\n                                            )}\r\n                                            <StatusBadge\r\n                                                status={result.status || \"Active\"}\r\n                                                variant={selectedIndex === idx ? \"neutral\" : \"success\"}\r\n                                                className={cn(\r\n                                                    \"px-2 py-0.5 text-[9px]\",\r\n                                                    selectedIndex === idx &&\r\n                                                    \"bg-white/20 text-white border-transparent\"\r\n                                                )}\r\n                                            />\r\n                                        </div>\r\n                                    </button>\r\n                                ))\r\n                            ) : (\r\n                                !loading && (\r\n                                    <div className=\"py-12 text-center text-app-fg-muted\">\r\n                                        No results for \"{search}\"\r\n                                    </div>\r\n                                )\r\n                            )}\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"p-3\">\r\n                            <div className=\"px-3 py-2 text-[10px] font-bold text-app-fg-muted uppercase tracking-[0.2em] mb-1\">\r\n                                Quick Navigation\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-2\">\r\n                                {navigationItems.map((item, idx) => (\r\n                                    <button\r\n                                        key={idx}\r\n                                        onClick={() => handleNavigate(item.path)}\r\n                                        onMouseEnter={() => setSelectedIndex(idx)}\r\n                                        className={cn(\r\n                                            \"flex items-center gap-4 p-4 rounded-2xl border transition-all duration-200 text-left\",\r\n                                            selectedIndex === idx\r\n                                                ? \"bg-app-accent text-white border-app-accent shadow-xl\"\r\n                                                : \"bg-app-surface border-app-border hover:border-app-fg-muted/30 text-app-fg-muted\"\r\n                                        )}\r\n                                    >\r\n                                        <item.icon\r\n                                            size={20}\r\n                                            className={\r\n                                                selectedIndex === idx ? \"text-white\" : \"text-app-fg-muted\"\r\n                                            }\r\n                                        />\r\n                                        <span className=\"font-bold tracking-tight\">\r\n                                            {item.label}\r\n                                        </span>\r\n                                    </button>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"bg-app-overlay/50 backdrop-blur-xl px-6 py-4 flex items-center justify-between border-t border-app-border\">\r\n                    <div className=\"flex items-center gap-6\">\r\n                        <div className=\"flex items-center gap-1.5 font-bold text-[9px] text-app-fg-muted uppercase tracking-widest\">\r\n                            <span className=\"p-1 px-1.5 bg-app-surface border border-app-border/20 rounded text-app-fg-muted\">\r\n                                Enter\r\n                            </span>\r\n                            <span>to Select</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1.5 font-bold text-[9px] text-app-fg-muted uppercase tracking-widest\">\r\n                            <span className=\"p-1 px-1.5 bg-app-surface border border-app-border/20 rounded text-app-fg-muted\">\r\n                                Esc\r\n                            </span>\r\n                            <span>to Close</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DataTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Caption1' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[537,540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[537,540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[671,674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[671,674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[820,823],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[820,823],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1731,1734],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1731,1734],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":304,"column":73,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":304,"endColumn":111},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":306,"column":67,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":306,"endColumn":152},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":330,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":330,"endColumn":116},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":339,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":339,"endColumn":133},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":371,"column":33,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":371,"endColumn":133},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":383,"column":97,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":383,"endColumn":100,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[21405,21408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[21405,21408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState, useMemo, useCallback } from \"react\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { Checkbox } from \"../atoms/Checkbox\";\r\nimport { Body, Caption1, Accounting, Caption2 } from \"../atoms/Typography\";\r\nimport { ChevronLeft, ChevronRight, FileDown, Inbox, ChevronDown } from \"lucide-react\"; // Replaced custom sort icon with lucide\r\nimport { TableRowSkeleton } from \"../atoms/Skeleton\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface Column<T = any> {\r\n    key: string;\r\n    label: string;\r\n    sortable?: boolean;\r\n    align?: \"left\" | \"center\" | \"right\";\r\n    render?: (value: any, row: T) => React.ReactNode;\r\n    width?: string;\r\n    isNumeric?: boolean;\r\n    isCurrency?: boolean;\r\n}\r\n\r\nexport interface DataTableProps<T = any> {\r\n    columns: Column<T>[];\r\n    data: T[];\r\n    keyField?: string;\r\n    page?: number;\r\n    pageSize?: number;\r\n    totalItems?: number;\r\n    onPageChange?: (page: number) => void;\r\n    renderSubRow?: (row: T) => React.ReactNode;\r\n    onRowExpand?: (row: T, isExpanded: boolean) => void;\r\n    onRowClick?: (row: T) => void;\r\n    density?: \"compact\" | \"normal\";\r\n    sortKey?: string;\r\n    sortDirection?: \"asc\" | \"desc\";\r\n    onSort?: (key: string) => void;\r\n    selectable?: boolean;\r\n    selectedRows?: string[];\r\n    onSelectionChange?: (selected: string[]) => void;\r\n    exportable?: boolean;\r\n    onExport?: () => void;\r\n    exportLabel?: string;\r\n    loading?: boolean;\r\n    error?: string;\r\n    emptyMessage?: string;\r\n    emptyIcon?: React.ReactNode;\r\n    className?: string;\r\n    hideHeader?: boolean;\r\n    no_subrow_padding?: boolean;\r\n}\r\n\r\nconst DataTableComponent = <T extends Record<string, any>,>({\r\n    columns,\r\n    data,\r\n    keyField = \"id\",\r\n    page,\r\n    pageSize = 10,\r\n    totalItems,\r\n    onPageChange,\r\n    sortKey,\r\n    sortDirection,\r\n    onSort,\r\n    selectable = false,\r\n    selectedRows = [],\r\n    onSelectionChange,\r\n    exportable = false,\r\n    onExport,\r\n    exportLabel = \"Export\",\r\n    loading = false,\r\n    error,\r\n    emptyMessage = \"No data available\",\r\n    emptyIcon,\r\n    className,\r\n    renderSubRow,\r\n    onRowExpand,\r\n    onRowClick,\r\n    density = \"normal\",\r\n    hideHeader = false,\r\n    no_subrow_padding = false,\r\n}: DataTableProps<T>): React.ReactNode => {\r\n    const [internalSort, setInternalSort] = useState<{\r\n        key: string;\r\n        direction: \"asc\" | \"desc\";\r\n    } | null>(null);\r\n    const [internalPage, setInternalPage] = useState(1);\r\n    const [expandedRows, setExpandedRows] = useState<string[]>([]);\r\n\r\n    const currentPage = (page !== undefined) ? page : internalPage;\r\n    const currentSortKey = sortKey || internalSort?.key;\r\n    const currentSortDirection = sortDirection || internalSort?.direction;\r\n\r\n    const total = totalItems || (data ? data.length : 0);\r\n    const totalPages = Math.ceil(total / pageSize);\r\n    const startIndex = (currentPage - 1) * pageSize;\r\n    const endIndex = Math.min(startIndex + pageSize, total);\r\n\r\n    const processedData = useMemo(() => {\r\n        let result = data ? [...data] : [];\r\n        if (currentSortKey) {\r\n            result.sort((a, b) => {\r\n                const aVal = a[currentSortKey];\r\n                const bVal = b[currentSortKey];\r\n                if (aVal < bVal) return currentSortDirection === \"asc\" ? -1 : 1;\r\n                if (aVal > bVal) return currentSortDirection === \"asc\" ? 1 : -1;\r\n                return 0;\r\n            });\r\n        }\r\n        if (!totalItems || (data && totalItems === data.length)) {\r\n            result = result.slice(startIndex, endIndex);\r\n        }\r\n        return result;\r\n    }, [data, currentSortKey, currentSortDirection, startIndex, endIndex, totalItems]);\r\n\r\n    const handlePageChange = useCallback((newPage: number) => {\r\n        if (onPageChange) onPageChange(newPage);\r\n        else setInternalPage(newPage);\r\n    }, [onPageChange]);\r\n\r\n    const handleSort = useCallback((key: string) => {\r\n        if (onSort) onSort(key);\r\n        else {\r\n            setInternalSort((prev) => ({\r\n                key,\r\n                direction: prev?.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\r\n            }));\r\n        }\r\n    }, [onSort]);\r\n\r\n    const handleSelectAll = useCallback((checked: boolean) => {\r\n        if (!onSelectionChange) return;\r\n        if (checked) onSelectionChange(processedData.map((row) => String(row[keyField])));\r\n        else onSelectionChange([]);\r\n    }, [onSelectionChange, processedData, keyField]);\r\n\r\n    const handleSelectRow = useCallback((rowKey: string, checked: boolean) => {\r\n        if (!onSelectionChange) return;\r\n        if (checked) onSelectionChange([...selectedRows, rowKey]);\r\n        else onSelectionChange(selectedRows.filter((key) => key !== rowKey));\r\n    }, [onSelectionChange, selectedRows]);\r\n\r\n    const toggleRowExpansion = useCallback((rowKey: string, row: T) => {\r\n        const isCurrentlyExpanded = expandedRows.includes(rowKey);\r\n        const willBeExpanded = !isCurrentlyExpanded;\r\n        setExpandedRows(prev => isCurrentlyExpanded ? prev.filter(k => k !== rowKey) : [...prev, rowKey]);\r\n        if (onRowExpand) onRowExpand(row, willBeExpanded);\r\n    }, [expandedRows, onRowExpand]);\r\n\r\n    const allSelected = selectable && processedData.length > 0 && processedData.every((row) => selectedRows.includes(String(row[keyField])));\r\n    const selectedCount = selectedRows.length;\r\n\r\n    if (!loading && !error && (!data || data.length === 0)) {\r\n        return (\r\n            <Card variant=\"glass\" className={cn(\"p-12 text-center border-none\", className)}>\r\n                <div className=\"flex flex-col items-center gap-4\">\r\n                    <div className=\"p-3 rounded-xl bg-surface-secondary elevation-1\">\r\n                        {emptyIcon || <Inbox size={24} className=\"text-text-tertiary\" />}\r\n                    </div>\r\n                    <Body className=\"font-regular text-text-secondary\">{emptyMessage}</Body>\r\n                </div>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Card variant=\"glass\" className={cn(\"p-8 min-h-[140px] flex items-center justify-center border-none bg-system-red/5 backdrop-blur-md\", className)}>\r\n                <div className=\"text-system-red flex items-center gap-2 font-regular text-footnote\">\r\n                    <Inbox className=\"opacity-70\" size={16} />\r\n                    {error}\r\n                </div>\r\n            </Card>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className={cn(\"w-full space-y-4\", className)}>\r\n            {(exportable || selectable) && (\r\n                <div className=\"flex items-center justify-between px-2\">\r\n                    <div>\r\n                        {selectable && selectedCount > 0 && (\r\n                            <Caption2 className=\"text-system-blue font-regular uppercase tracking-wide opacity-90\">\r\n                                {selectedCount} row{selectedCount !== 1 ? \"s\" : \"\"} selected\r\n                            </Caption2>\r\n                        )}\r\n                    </div>\r\n                    {exportable && onExport && (\r\n                        <Button variant=\"secondary\" size=\"compact\" onClick={onExport} className=\"font-regular tracking-wide px-3 h-7 bg-white/50 backdrop-blur-sm elevation-1\">\r\n                            <FileDown size={12} className=\"mr-1.5\" />\r\n                            {exportLabel}\r\n                        </Button>\r\n                    )}\r\n                </div>\r\n            )}\r\n            <div className={cn(\"tahoe-glass-card overflow-visible elevation-2\", className)}>\r\n                <div className=\"overflow-x-auto no-scrollbar rounded-2xl\" style={{ minHeight: \"200px\" }}>\r\n                    <table className=\"table-standard\">\r\n                        {!hideHeader && (\r\n                            <thead>\r\n                                <tr className=\"border-none header-glass\">\r\n                                    {renderSubRow && <th className=\"w-12 sticky top-0 z-10 bg-inherit backdrop-blur-md\"></th>}\r\n                                    {selectable && (\r\n                                        <th className={cn(\"px-6 w-14 sticky top-0 z-10 bg-inherit backdrop-blur-md\", density === \"compact\" ? \"h-10\" : \"h-12\")}>\r\n                                            <Checkbox checked={allSelected} onChange={(e) => handleSelectAll(e.target.checked)} aria-label=\"Select all rows\" />\r\n                                        </th>\r\n                                    )}\r\n                                    {columns.map((column) => (\r\n                                        <th\r\n                                            key={column.key}\r\n                                            className={cn(\r\n                                                \"sticky top-0 z-10 py-3 px-6 backdrop-blur-md transition-colors border-none\",\r\n                                                (column.isNumeric || column.isCurrency || column.align === \"right\") ? \"text-right\" :\r\n                                                    column.align === \"center\" ? \"text-center\" : \"text-left\",\r\n                                                column.sortable && (currentSortKey === column.key ?\r\n                                                    \"text-system-blue opacity-100\" :\r\n                                                    \"hover:text-text-primary cursor-pointer\"),\r\n                                                (column.label === \"DLV\" || column.label === \"DELIVERED\") && \"bg-blue-600/5\",\r\n                                                column.label === \"BAL\" && \"bg-amber-600/5\"\r\n                                            )}\r\n                                            style={{ width: column.width }}\r\n                                            onClick={column.sortable ? () => handleSort(column.key) : undefined}\r\n                                        >\r\n                                            <div className={cn(\r\n                                                \"flex items-center gap-2\",\r\n                                                (column.isNumeric || column.isCurrency || column.align === \"right\") ? \"justify-end\" :\r\n                                                    column.align === \"center\" ? \"justify-center\" : \"justify-start\"\r\n                                            )}>\r\n                                                <Caption2 className=\"uppercase tracking-widest font-medium opacity-60\">\r\n                                                    {column.label}\r\n                                                </Caption2>\r\n                                                {column.sortable && currentSortKey === column.key && (\r\n                                                    <span className={cn(\"text-xs\", currentSortDirection === \"asc\" ? \"rotate-0\" : \"rotate-180\")}>\r\n                                                        â†‘\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </th>\r\n                                    ))}\r\n                                </tr>\r\n                            </thead>\r\n                        )}\r\n                        <tbody className=\"bg-transparent\">\r\n                            {loading ? Array.from({ length: Math.min(pageSize, 10) }).map((_, i) => (\r\n                                <tr key={`skeleton-${i}`}>\r\n                                    <td colSpan={columns.length + (selectable ? 1 : 0) + (renderSubRow ? 1 : 0)}>\r\n                                        <TableRowSkeleton columns={columns.length} />\r\n                                    </td>\r\n                                </tr>\r\n                            )) : processedData.map((row, index) => {\r\n                                const rowKey = (row[keyField] !== undefined && row[keyField] !== null)\r\n                                    ? String(row[keyField])\r\n                                    : `row-${index}`;\r\n                                const isSelected = selectedRows.includes(rowKey);\r\n                                const isExpanded = expandedRows.includes(rowKey);\r\n                                return (\r\n                                    <React.Fragment key={rowKey}>\r\n                                        <tr\r\n                                            onClick={() => onRowClick?.(row)}\r\n                                            className={cn(\r\n                                                \"group border-none transition-colors duration-200\",\r\n                                                isSelected && \"bg-system-blue/10\",\r\n                                                isExpanded && \"bg-system-blue/5\",\r\n                                                \"hover:bg-white/5 dark:hover:bg-white/5\",\r\n                                                onRowClick && \"cursor-pointer active:scale-[0.995]\"\r\n                                            )}>\r\n                                            {renderSubRow && (\r\n                                                <td className=\"w-12 px-0 pl-5\">\r\n                                                    <Button\r\n                                                        variant=\"ghost\"\r\n                                                        size=\"compact\"\r\n                                                        onClick={(e) => {\r\n                                                            e.stopPropagation();\r\n                                                            toggleRowExpansion(rowKey, row);\r\n                                                        }}\r\n                                                        className=\"w-7 h-7 p-0 text-text-tertiary hover:text-system-blue transition-all duration-300\"\r\n                                                    >\r\n                                                        <ChevronDown\r\n                                                            size={16}\r\n                                                            className={cn(\"transition-transform duration-300\", isExpanded ? \"rotate-0\" : \"-rotate-90\")}\r\n                                                        />\r\n                                                    </Button>\r\n                                                </td>\r\n                                            )}\r\n                                            {selectable && (\r\n                                                <td className=\"px-6 py-2\">\r\n                                                    <Checkbox checked={isSelected} onChange={(e) => handleSelectRow(rowKey, e.target.checked)} onClick={(e) => e.stopPropagation()} aria-label={`Select row`} />\r\n                                                </td>\r\n                                            )}\r\n                                            {columns.map((column) => (\r\n                                                <td\r\n                                                    key={column.key}\r\n                                                    className={cn(\r\n                                                        \"px-6 py-3.5\",\r\n                                                        \"align-middle\",\r\n                                                        (column.isNumeric || column.isCurrency) ? \"text-right tabular-nums text-text-primary\" : \"text-left\",\r\n                                                        column.align === \"right\" ? \"text-right\" :\r\n                                                            column.align === \"center\" ? \"text-center\" : \"text-left\",\r\n                                                        (column.label === \"DLV\" || column.label === \"DELIVERED\") && \"bg-blue-600/5\",\r\n                                                        column.label === \"BAL\" && \"bg-amber-600/5\"\r\n                                                    )}\r\n                                                >\r\n                                                    {column.render ? (column.render(row[column.key], row)) :\r\n                                                        column.isNumeric || column.isCurrency ? (\r\n                                                            <Accounting className=\"text-[13px] tracking-tight\" isCurrency={column.isCurrency}>{row[column.key]}</Accounting>\r\n                                                        ) : (\r\n                                                            <Body className=\"text-text-primary text-[13px] font-normal tracking-normal leading-relaxed\">\r\n                                                                {row[column.key]}\r\n                                                            </Body>\r\n                                                        )}\r\n                                                </td>\r\n                                            ))}\r\n                                        </tr>\r\n                                        {renderSubRow && isExpanded && (\r\n                                            <tr className=\"bg-surface-secondary/50 border-none\">\r\n                                                <td colSpan={columns.length + (selectable ? 1 : 0) + 1} className=\"p-0\">\r\n                                                    <div className={cn(!no_subrow_padding && \"p-6 pl-14 shadow-inner\")}>\r\n                                                        {renderSubRow(row)}\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n                                        )}\r\n                                    </React.Fragment>\r\n                                );\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                {totalPages > 1 && (\r\n                    <div className=\"flex items-center justify-between px-6 py-2.5 bg-[#EFEFEF] dark:bg-white/5 backdrop-blur-md rounded-b-[16px] border-none\">\r\n                        <Caption2 className=\"text-text-tertiary uppercase tracking-[0.15em] opacity-90 text-[10px]\">\r\n                            Showing {startIndex + 1} to {endIndex} of {total} results\r\n                        </Caption2>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <Button\r\n                                variant=\"glass\"\r\n                                size=\"compact\"\r\n                                onClick={() => handlePageChange(currentPage - 1)}\r\n                                disabled={currentPage === 1}\r\n                                className=\"h-8 px-4 text-[11px] font-medium bg-black/5 hover:bg-black/10 border-none transition-all\"\r\n                            >\r\n                                <ChevronLeft size={14} className=\"mr-1.5\" /> Previous\r\n                            </Button>\r\n                            <div className=\"flex items-center gap-1 mx-1\">\r\n                                {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\r\n                                    let pageNum: number;\r\n                                    if (totalPages <= 5) pageNum = i + 1;\r\n                                    else if (currentPage <= 3) pageNum = i + 1;\r\n                                    else if (currentPage >= totalPages - 2) pageNum = totalPages - 4 + i;\r\n                                    else pageNum = currentPage - 2 + i;\r\n                                    return (\r\n                                        <button\r\n                                            key={pageNum}\r\n                                            onClick={() => handlePageChange(pageNum)}\r\n                                            className={cn(\r\n                                                \"w-8 h-8 flex items-center justify-center text-[12px] font-medium rounded-lg transition-all\",\r\n                                                currentPage === pageNum\r\n                                                    ? \"bg-black/10 dark:bg-white/15 text-text-primary shadow-sm\"\r\n                                                    : \"text-text-tertiary hover:bg-black/5 dark:hover:bg-white/5\"\r\n                                            )}\r\n                                        >\r\n                                            {pageNum}\r\n                                        </button>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                            <Button\r\n                                variant=\"glass\"\r\n                                size=\"compact\"\r\n                                onClick={() => handlePageChange(currentPage + 1)}\r\n                                disabled={currentPage === totalPages}\r\n                                className=\"h-8 px-4 text-[11px] font-medium bg-black/5 hover:bg-black/10 border-none transition-all\"\r\n                            >\r\n                                Next <ChevronRight size={14} className=\"ml-1.5\" />\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const DataTable = React.memo(DataTableComponent) as unknown as <T extends Record<string, any>>(props: DataTableProps<T>) => React.ReactNode;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DocumentActions.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Button' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Button } from \"@/components/design-system/atoms/Button\";\r\nimport { Save, X, Edit2, Trash2, Plus, FileDown } from \"lucide-react\";\r\n\r\nexport interface DocumentActionsProps {\r\n    mode: \"view\" | \"edit\";\r\n    onEdit?: () => void;\r\n    onSave?: () => void;\r\n    onCancel?: () => void;\r\n    onDelete?: () => void;\r\n    onDownload?: () => void;\r\n    onCreate?: () => void;\r\n    isSaving?: boolean;\r\n    isDeleting?: boolean;\r\n    canDelete?: boolean;\r\n    customActions?: React.ReactNode;\r\n}\r\n\r\nexport function DocumentActions({\r\n    mode,\r\n    onEdit,\r\n    onSave,\r\n    onCancel,\r\n    onDelete,\r\n    onDownload,\r\n    onCreate,\r\n    isSaving = false,\r\n    isDeleting = false,\r\n    canDelete = true,\r\n    customActions,\r\n}: DocumentActionsProps) {\r\n    if (mode === \"edit\") {\r\n        return (\r\n            <div className=\"flex gap-3\">\r\n                {onCancel && (\r\n                    <Button variant=\"ghost\" size=\"sm\" onClick={onCancel} disabled={isSaving}>\r\n                        <X size={16} /> Cancel\r\n                    </Button>\r\n                )}\r\n                {onSave && (\r\n                    <Button variant=\"primary\" size=\"sm\" onClick={onSave} disabled={isSaving}>\r\n                        <Save size={16} /> {isSaving ? \"Saving...\" : \"Save\"}\r\n                    </Button>\r\n                )}\r\n                {customActions}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex gap-3\">\r\n            {onDownload && (\r\n                <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    onClick={onDownload}\r\n                    className=\"text-emerald-700 border-emerald-200 bg-emerald-50 hover:bg-emerald-100\"\r\n                >\r\n                    <FileDown size={16} /> Excel\r\n                </Button>\r\n            )}\r\n            {onCreate && (\r\n                <Button variant=\"secondary\" size=\"sm\" onClick={onCreate}>\r\n                    <Plus size={16} /> Create\r\n                </Button>\r\n            )}\r\n            {onEdit && (\r\n                <Button variant=\"primary\" size=\"sm\" onClick={onEdit}>\r\n                    <Edit2 size={16} /> Edit\r\n                </Button>\r\n            )}\r\n            {onDelete && canDelete && (\r\n                <Button variant=\"destructive\" size=\"sm\" onClick={onDelete} disabled={isDeleting}>\r\n                    <Trash2 size={16} /> {isDeleting ? \"Deleting...\" : \"Delete\"}\r\n                </Button>\r\n            )}\r\n            {customActions}\r\n        </div>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\DocumentTrace.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":72,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":72,"endColumn":83}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { H3, Body, SmallText } from \"../atoms/Typography\";\r\nimport { Badge } from \"../atoms/Badge\";\r\nimport { ArrowRight, FileText, Truck, Receipt } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * DocumentTrace Organism - Atomic Design System v1.0\r\n * Shows PO â†’ DC â†’ Invoice linkage hierarchy\r\n * Must display real document numbers and statuses\r\n */\r\n\r\nexport interface DocumentNode {\r\n    type: \"po\" | \"dc\" | \"invoice\";\r\n    number: string;\r\n    date: string;\r\n    status: \"pending\" | \"completed\" | \"active\";\r\n    link?: string;\r\n}\r\n\r\nexport interface DocumentTraceProps {\r\n    documents: DocumentNode[];\r\n    className?: string;\r\n}\r\n\r\nconst documentConfig = {\r\n    po: {\r\n        icon: FileText,\r\n        label: \"Purchase Order\",\r\n        color: \"text-app-accent\",\r\n        bgColor: \"bg-app-accent/10\",\r\n    },\r\n    dc: {\r\n        icon: Truck,\r\n        label: \"Delivery Challan\",\r\n        color: \"text-app-status-success\",\r\n        bgColor: \"bg-app-status-success/10\",\r\n    },\r\n    invoice: {\r\n        icon: Receipt,\r\n        label: \"GST Invoice\",\r\n        color: \"text-app-status-warning\",\r\n        bgColor: \"bg-app-status-warning/10\",\r\n    },\r\n};\r\n\r\nconst DocumentNodeComponent: React.FC<{ node: DocumentNode; isLast: boolean }> = ({\r\n    node,\r\n    isLast,\r\n}) => {\r\n    const config = documentConfig[node.type];\r\n    const Icon = config.icon;\r\n\r\n    const content = (\r\n        <div\r\n            className={cn(\r\n                \"flex items-center gap-3 p-4 rounded-xl border-2 transition-all\",\r\n                node.link\r\n                    ? \"cursor-pointer border-app-border/30 hover:border-app-accent hover:shadow-lg hover:shadow-app-accent/5 bg-app-surface/50 backdrop-blur-sm\"\r\n                    : \"border-app-border bg-app-surface/30\"\r\n            )}\r\n        >\r\n            <div className={cn(\"p-2 rounded\", config.bgColor)}>\r\n                <Icon size={20} className={config.color} />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n                <SmallText className=\"uppercase mb-0.5 text-app-fg-muted/60 font-black tracking-widest\">{config.label}</SmallText>\r\n                <div className=\"font-bold text-app-fg tracking-tight\">{node.number}</div>\r\n                <div className=\"text-[11px] text-app-fg-muted/80 font-bold mt-0.5\">{node.date}</div>\r\n            </div>\r\n            <Badge\r\n                variant={\r\n                    node.status === \"completed\"\r\n                        ? \"success\"\r\n                        : node.status === \"active\"\r\n                            ? \"default\"\r\n                            : \"warning\"\r\n                }\r\n            >\r\n                {node.status}\r\n            </Badge>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"flex items-center gap-4\">\r\n            {node.link ? (\r\n                <a href={node.link} className=\"flex-1\">\r\n                    {content}\r\n                </a>\r\n            ) : (\r\n                <div className=\"flex-1\">{content}</div>\r\n            )}\r\n            {!isLast && <ArrowRight size={20} className=\"text-app-fg-muted/30 shrink-0\" />}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const DocumentTrace: React.FC<DocumentTraceProps> = ({\r\n    documents,\r\n    className,\r\n}) => {\r\n    return (\r\n        <Card className={cn(\"p-6 bg-app-surface/40 backdrop-blur-md border-app-border/30\", className)}>\r\n            <H3 className=\"mb-2 text-app-fg uppercase tracking-tight\">Document Traceability</H3>\r\n            <Body className=\"text-app-fg-muted mb-6 font-medium\">\r\n                Track the complete document flow from purchase order to invoice\r\n            </Body>\r\n            <div className=\"flex items-center gap-4 overflow-x-auto pb-2\">\r\n                {documents.map((doc, index) => (\r\n                    <DocumentNodeComponent\r\n                        key={index}\r\n                        node={doc}\r\n                        isLast={index === documents.length - 1}\r\n                    />\r\n                ))}\r\n            </div>\r\n        </Card>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\GlobalCommandPalette.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[668,671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[668,671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":137,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":137,"endColumn":27},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":249,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":249,"endColumn":156},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":253,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":253,"endColumn":201},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":292,"column":67,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":292,"endColumn":174},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":310,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":310,"endColumn":171}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState, useRef, useMemo } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n    Search,\r\n    Loader2,\r\n    FileText,\r\n    Truck,\r\n    Receipt,\r\n    Package,\r\n    LayoutDashboard,\r\n    Settings,\r\n    PlusCircle,\r\n    X,\r\n} from \"lucide-react\";\r\nimport { api, SearchResult } from \"@/lib/api\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { Card } from \"../atoms/Card\";\r\n\r\ntype NavItem = {\r\n    type: \"NAV\";\r\n    id: string;\r\n    label: string;\r\n    subLabel?: string;\r\n    keywords: string[];\r\n    icon: any;\r\n    path: string;\r\n};\r\n\r\ntype GlobalItem = SearchResult | NavItem;\r\n\r\nconst NAV_COMMANDS: NavItem[] = [\r\n    {\r\n        type: \"NAV\",\r\n        id: \"nav-new-inv\",\r\n        label: \"Create New Invoice\",\r\n        subLabel: \"Go to invoice creation\",\r\n        keywords: [\"invoice\", \"new\", \"create\", \"bill\"],\r\n        icon: PlusCircle,\r\n        path: \"/invoice/create\",\r\n    },\r\n    {\r\n        type: \"NAV\",\r\n        id: \"nav-dashboard\",\r\n        label: \"Dashboard\",\r\n        subLabel: \"View overview & stats\",\r\n        keywords: [\"home\", \"main\", \"stats\"],\r\n        icon: LayoutDashboard,\r\n        path: \"/\",\r\n    },\r\n    {\r\n        type: \"NAV\",\r\n        id: \"nav-pos\",\r\n        label: \"Purchase Orders\",\r\n        subLabel: \"View all POs\",\r\n        keywords: [\"po\", \"order\", \"purchase\"],\r\n        icon: Package,\r\n        path: \"/po\",\r\n    },\r\n    {\r\n        type: \"NAV\",\r\n        id: \"nav-settings\",\r\n        label: \"Settings\",\r\n        subLabel: \"App configuration\",\r\n        keywords: [\"config\", \"admin\"],\r\n        icon: Settings,\r\n        path: \"/settings\",\r\n    },\r\n];\r\n\r\nexport const GlobalCommandPalette = () => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const [query, setQuery] = useState(\"\");\r\n    const [results, setResults] = useState<SearchResult[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [selectedIndex, setSelectedIndex] = useState(0);\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    const router = useRouter();\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n        return () => setMounted(false);\r\n    }, []);\r\n\r\n    // Toggle listener\r\n    useEffect(() => {\r\n        const onKeyDown = (e: KeyboardEvent) => {\r\n            if ((e.key === \"k\" && (e.metaKey || e.ctrlKey)) || e.key === \"/\") {\r\n                if (e.key === \"/\") {\r\n                    // Prevent search input from typing '/'\r\n                    if (document.activeElement?.tagName !== \"INPUT\" && document.activeElement?.tagName !== \"TEXTAREA\") {\r\n                        e.preventDefault();\r\n                        setIsOpen((open) => !open);\r\n                    }\r\n                } else {\r\n                    e.preventDefault();\r\n                    setIsOpen((open) => !open);\r\n                }\r\n            }\r\n        };\r\n\r\n        const onCustomOpen = () => setIsOpen(true);\r\n\r\n        document.addEventListener(\"keydown\", onKeyDown);\r\n        document.addEventListener(\"open-command-palette\", onCustomOpen);\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", onKeyDown);\r\n            document.removeEventListener(\"open-command-palette\", onCustomOpen);\r\n        };\r\n    }, []);\r\n\r\n    // Focus input on open\r\n    useEffect(() => {\r\n        if (isOpen && inputRef.current) {\r\n            // Tiny delay to allow animation mount\r\n            setTimeout(() => inputRef.current?.focus(), 100);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // Search Logic\r\n    useEffect(() => {\r\n        if (query.trim().length === 0) {\r\n            setResults([]);\r\n            return;\r\n        }\r\n\r\n        const search = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const data = await api.searchGlobal(query);\r\n                setResults(data);\r\n            } catch (error) {\r\n                setResults([]);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        const debounce = setTimeout(search, 300);\r\n        return () => clearTimeout(debounce);\r\n    }, [query]);\r\n\r\n    const filteredNavItems = useMemo(() => {\r\n        if (!query) return NAV_COMMANDS; // Show default navs on empty query? Or maybe just some. \r\n        // Showing all NAV_COMMANDS when empty is good for discovery.\r\n        const q = query.toLowerCase();\r\n        return NAV_COMMANDS.filter(\r\n            (cmd) =>\r\n                cmd.label.toLowerCase().includes(q) ||\r\n                cmd.keywords.some((k) => k.toLowerCase().includes(q))\r\n        );\r\n    }, [query]);\r\n\r\n    const allItems = useMemo<GlobalItem[]>(() => {\r\n        // When query is empty, show Nav items.\r\n        // When query exists, show merged.\r\n        const raw = [...filteredNavItems, ...results];\r\n        const seen = new Set<string>();\r\n        return raw.filter((item) => {\r\n            const key = `${item.type}-${item.id}`;\r\n            if (seen.has(key)) return false;\r\n            seen.add(key);\r\n            return true;\r\n        });\r\n    }, [filteredNavItems, results]);\r\n\r\n    useEffect(() => {\r\n        setSelectedIndex(0);\r\n    }, [allItems.length]);\r\n\r\n    const handleItemSelect = (item: GlobalItem) => {\r\n        setIsOpen(false);\r\n        setQuery(\"\");\r\n        if (item.type === \"NAV\") {\r\n            router.push(item.path);\r\n        } else {\r\n            if (item.type === \"PO\") router.push(`/po/${item.number}`);\r\n            else if (item.type === \"DC\") router.push(`/dc/${item.number}`);\r\n            else if (item.type === \"Invoice\")\r\n                router.push(`/invoice/${encodeURIComponent(item.number)}`);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === \"ArrowDown\") {\r\n            e.preventDefault();\r\n            setSelectedIndex((prev) => (prev + 1) % allItems.length);\r\n        } else if (e.key === \"ArrowUp\") {\r\n            e.preventDefault();\r\n            setSelectedIndex(\r\n                (prev) => (prev - 1 + allItems.length) % allItems.length\r\n            );\r\n        } else if (e.key === \"Enter\" && allItems[selectedIndex]) {\r\n            e.preventDefault();\r\n            handleItemSelect(allItems[selectedIndex]);\r\n        } else if (e.key === \"Escape\") {\r\n            setIsOpen(false);\r\n        }\r\n    };\r\n\r\n    const renderIcon = (item: GlobalItem) => {\r\n        const className = \"w-4 h-4\";\r\n        if (item.type === \"NAV\") {\r\n            const Icon = item.icon;\r\n            return <Icon className={className} />;\r\n        }\r\n        if (item.type === \"PO\") return <Package className={className} />;\r\n        if (item.type === \"DC\") return <Truck className={className} />;\r\n        if (item.type === \"Invoice\") return <Receipt className={className} />;\r\n        return <FileText className={className} />;\r\n    };\r\n\r\n    if (!mounted) return null;\r\n\r\n    return createPortal(\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <>\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        transition={{ duration: 0.15 }}\r\n                        className=\"fixed inset-0 bg-app-overlay/20 backdrop-blur-[2px] z-[100]\" // Light dimming\r\n                        onClick={() => setIsOpen(false)}\r\n                    />\r\n                    <div className=\"fixed inset-0 z-[101] flex items-start justify-center pt-[15vh] pointer-events-none\">\r\n                        <motion.div\r\n                            initial={{ opacity: 0, scale: 0.95, y: -20 }}\r\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                            exit={{ opacity: 0, scale: 0.95, y: -20 }}\r\n                            transition={{ duration: 0.2, type: \"spring\", damping: 25, stiffness: 300 }}\r\n                            className=\"w-full max-w-2xl px-4 pointer-events-auto\"\r\n                        >\r\n                            <Card className=\"flex flex-col overflow-hidden shadow-app-spotlight border-app-border/50 bg-app-surface/95 backdrop-blur-xl ring-1 ring-app-accent/5\">\r\n                                <div className=\"flex items-center px-4 py-3 border-b border-app-border/50\">\r\n                                    <Search className=\"w-5 h-5 text-app-fg-muted mr-3\" />\r\n                                    <input\r\n                                        ref={inputRef}\r\n                                        value={query}\r\n                                        onChange={(e) => setQuery(e.target.value)}\r\n                                        onKeyDown={handleKeyDown}\r\n                                        placeholder=\"Type a command or search...\"\r\n                                        className=\"flex-1 bg-transparent border-none outline-none text-[16px] text-app-fg placeholder:text-app-fg-muted/60\"\r\n                                    />\r\n                                    {loading && <Loader2 className=\"w-4 h-4 animate-spin text-app-fg-muted ml-2\" />}\r\n                                    <div className=\"flex items-center gap-2 ml-4\">\r\n                                        <kbd className=\"hidden sm:inline-flex h-5 items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100\">\r\n                                            <span className=\"text-xs\">ESC</span>\r\n                                        </kbd>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"max-h-[300px] overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-app-overlay/20\">\r\n                                    {allItems.length === 0 ? (\r\n                                        <div className=\"py-6 text-center text-app-fg-muted\">\r\n                                            <p className=\"text-sm\">No results found.</p>\r\n                                        </div>\r\n                                    ) : (\r\n                                        allItems.map((item, idx) => (\r\n                                            <button\r\n                                                key={`${item.type}-${item.id}`}\r\n                                                onClick={() => handleItemSelect(item)}\r\n                                                onMouseEnter={() => setSelectedIndex(idx)}\r\n                                                className={cn(\r\n                                                    \"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-colors duration-100\",\r\n                                                    selectedIndex === idx\r\n                                                        ? \"bg-app-accent/10 text-app-fg\"\r\n                                                        : \"text-app-fg-muted hover:bg-app-overlay\"\r\n                                                )}\r\n                                            >\r\n                                                <div\r\n                                                    className={cn(\r\n                                                        \"flex h-8 w-8 items-center justify-center rounded-md border shadow-sm\",\r\n                                                        selectedIndex === idx\r\n                                                            ? \"bg-app-surface border-app-accent/20 text-app-accent\"\r\n                                                            : \"bg-app-surface border-app-border text-app-fg-muted\"\r\n                                                    )}\r\n                                                >\r\n                                                    {renderIcon(item)}\r\n                                                </div>\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <span className={cn(\"text-sm font-medium\", selectedIndex === idx ? \"text-app-accent\" : \"\")}>\r\n                                                            {item.type === \"NAV\" ? item.label : item.number}\r\n                                                        </span>\r\n                                                        {item.type !== \"NAV\" && (\r\n                                                            <span className=\"text-[10px] uppercase tracking-wider text-app-fg-muted border border-app-border px-1 rounded-sm\">\r\n                                                                {item.type}\r\n                                                            </span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"text-xs text-app-fg-muted truncate\">\r\n                                                        {item.type === \"NAV\" ? item.subLabel : item.party}\r\n                                                    </div>\r\n                                                </div>\r\n                                                {selectedIndex === idx && (\r\n                                                    <div className=\"text-xs text-app-fg-muted/50\">\r\n                                                        Jump to\r\n                                                    </div>\r\n                                                )}\r\n                                            </button>\r\n                                        ))\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"px-4 py-2 bg-app-overlay/30 border-t border-app-border/50 flex items-center justify-between text-[10px] text-app-fg-muted\">\r\n                                    <div className=\"flex gap-2\">\r\n                                        <span>Protip: Press <kbd className=\"font-bold\">Ctrl K</kbd> anywhere</span>\r\n                                    </div>\r\n                                    <div>SenstoSales Search</div>\r\n                                </div>\r\n                            </Card>\r\n                        </motion.div>\r\n                    </div>\r\n                </>\r\n            )}\r\n        </AnimatePresence>,\r\n        document.body\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\GlobalSearch.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Label' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MonoCode' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Accounting' is defined but never used. Allowed unused vars must match /^_/u.","line":22,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":58},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[717,720],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[717,720],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clearRecents' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":119,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":119,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":135,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":135,"endColumn":21},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":321,"column":24,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":321,"endColumn":122},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":455,"column":25,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":455,"endColumn":60},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":489,"column":12,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":489,"endColumn":123},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":556,"column":18,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":556,"endColumn":78}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport {\r\n  Search,\r\n  Loader2,\r\n  FileText,\r\n  Truck,\r\n  Receipt,\r\n  Package,\r\n  ArrowRight,\r\n  X,\r\n  Settings,\r\n  PlusCircle,\r\n  LayoutDashboard,\r\n} from \"lucide-react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { api, SearchResult } from \"@/lib/api\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { StatusBadge } from \"../atoms/StatusBadge\";\r\nimport { H3, Body, SmallText, Label, MonoCode, Accounting, Caption1 } from \"../atoms/Typography\";\r\n\r\n// --- Types ---\r\ntype NavItem = {\r\n  type: \"NAV\";\r\n  id: string;\r\n  label: string;\r\n  subLabel?: string;\r\n  keywords: string[];\r\n  icon: any;\r\n  path: string;\r\n};\r\n\r\ntype GlobalItem = SearchResult | NavItem;\r\n\r\n// --- Static Navigation Commands ---\r\nconst NAV_COMMANDS: NavItem[] = [\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-new-inv\",\r\n    label: \"Create New Invoice\",\r\n    subLabel: \"Go to invoice creation\",\r\n    keywords: [\"invoice\", \"new\", \"create\", \"bill\"],\r\n    icon: PlusCircle,\r\n    path: \"/invoice/create\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-dashboard\",\r\n    label: \"Dashboard\",\r\n    subLabel: \"View overview & stats\",\r\n    keywords: [\"home\", \"main\", \"stats\"],\r\n    icon: LayoutDashboard,\r\n    path: \"/dashboard\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-pos\",\r\n    label: \"Purchase Orders\",\r\n    subLabel: \"View all POs\",\r\n    keywords: [\"po\", \"order\", \"purchase\"],\r\n    icon: Package,\r\n    path: \"/po\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-invs\",\r\n    label: \"All Invoices\",\r\n    subLabel: \"View invoice register\",\r\n    keywords: [\"bill\", \"history\"],\r\n    icon: Receipt,\r\n    path: \"/invoice\",\r\n  },\r\n  {\r\n    type: \"NAV\",\r\n    id: \"nav-settings\",\r\n    label: \"Settings\",\r\n    subLabel: \"App configuration\",\r\n    keywords: [\"config\", \"admin\"],\r\n    icon: Settings,\r\n    path: \"/settings\",\r\n  },\r\n];\r\n\r\nexport default function GlobalSearch() {\r\n  const [query, setQuery] = useState(\"\");\r\n  const [results, setResults] = useState<SearchResult[]>([]);\r\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedIndex, setSelectedIndex] = useState(0);\r\n\r\n  const router = useRouter();\r\n  const searchRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const listRef = useRef<HTMLDivElement>(null);\r\n  const portalRef = useRef<HTMLDivElement>(null);\r\n\r\n  // --- Logic: Load/Save Recents ---\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(\"senstosales-recent-searches\");\r\n    if (saved) setRecentSearches(JSON.parse(saved));\r\n  }, []);\r\n\r\n  const saveRecentSearch = (term: string) => {\r\n    if (!term) return;\r\n    const newRecents = [\r\n      term,\r\n      ...recentSearches.filter((r) => r !== term),\r\n    ].slice(0, 5);\r\n    setRecentSearches(newRecents);\r\n    localStorage.setItem(\r\n      \"senstosales-recent-searches\",\r\n      JSON.stringify(newRecents),\r\n    );\r\n  };\r\n\r\n  const clearRecents = () => {\r\n    setRecentSearches([]);\r\n    localStorage.removeItem(\"senstosales-recent-searches\");\r\n  };\r\n\r\n  // --- Logic: Search ---\r\n  useEffect(() => {\r\n    if (query.trim().length === 0) {\r\n      setResults([]);\r\n      return;\r\n    }\r\n    const search = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const data = await api.searchGlobal(query);\r\n        setResults(data);\r\n      } catch (error) {\r\n        setResults([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    const debounce = setTimeout(search, 300);\r\n    return () => clearTimeout(debounce);\r\n  }, [query]);\r\n\r\n  // --- Logic: Combined Items (Nav + Data) ---\r\n  const filteredNavItems = useMemo(() => {\r\n    if (!query) return [];\r\n    const q = query.toLowerCase();\r\n    return NAV_COMMANDS.filter(\r\n      (cmd) =>\r\n        cmd.label.toLowerCase().includes(q) ||\r\n        cmd.keywords.some((k) => k.includes(q)),\r\n    );\r\n  }, [query]);\r\n\r\n  const allItems = useMemo<GlobalItem[]>(() => {\r\n    const raw = [...filteredNavItems, ...results];\r\n    const seen = new Set<string>();\r\n    return raw.filter((item) => {\r\n      const key = `${item.type}-${item.id}`;\r\n      if (seen.has(key)) return false;\r\n      seen.add(key);\r\n      return true;\r\n    });\r\n  }, [filteredNavItems, results]);\r\n\r\n  // Reset selected index when items change\r\n  useEffect(() => {\r\n    setSelectedIndex(0);\r\n  }, [allItems.length]);\r\n\r\n  // --- Scroll to Active Item ---\r\n  useEffect(() => {\r\n    if (listRef.current) {\r\n      const activeEl = listRef.current.children[selectedIndex] as HTMLElement;\r\n      if (activeEl) {\r\n        activeEl.scrollIntoView({ block: \"nearest\", behavior: \"smooth\" });\r\n      }\r\n    }\r\n  }, [selectedIndex]);\r\n\r\n  // --- Logic: Handlers ---\r\n  const handleItemSelect = (item: GlobalItem) => {\r\n    setIsOpen(false);\r\n    setQuery(\"\");\r\n\r\n    if (item.type === \"NAV\") {\r\n      router.push(item.path);\r\n    } else {\r\n      // Search Result\r\n      saveRecentSearch(query);\r\n      if (item.type === \"PO\") router.push(`/po/${item.number}`);\r\n      else if (item.type === \"DC\") router.push(`/dc/${item.number}`);\r\n      else if (item.type === \"Invoice\")\r\n        router.push(`/invoice/${encodeURIComponent(item.number)}`);\r\n      else if (item.type === \"SRV\")\r\n        router.push(`/reports?tab=reconciliation&search=${item.number}`);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === \"ArrowDown\") {\r\n      e.preventDefault();\r\n      setSelectedIndex((prev) => (prev + 1) % allItems.length);\r\n    } else if (e.key === \"ArrowUp\") {\r\n      e.preventDefault();\r\n      setSelectedIndex(\r\n        (prev) => (prev - 1 + allItems.length) % allItems.length,\r\n      );\r\n    } else if (e.key === \"Enter\" && allItems[selectedIndex]) {\r\n      e.preventDefault();\r\n      handleItemSelect(allItems[selectedIndex]);\r\n    } else if (e.key === \"Escape\") {\r\n      setIsOpen(false);\r\n      inputRef.current?.blur();\r\n    }\r\n  };\r\n\r\n  // --- Global Ctrl+K ---\r\n  useEffect(() => {\r\n    const handleGlobalK = (e: KeyboardEvent) => {\r\n      if (e.key.toLowerCase() === \"k\" && (e.ctrlKey || e.metaKey)) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        inputRef.current?.focus();\r\n        setIsOpen(true);\r\n      }\r\n    };\r\n    document.addEventListener(\"keydown\", handleGlobalK);\r\n    return () => document.removeEventListener(\"keydown\", handleGlobalK);\r\n  }, []);\r\n\r\n  // --- Click Outside ---\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    return () => setMounted(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      const clickedMain = searchRef.current?.contains(e.target as Node);\r\n      const clickedPortal = portalRef.current?.contains(e.target as Node);\r\n      if (!clickedMain && !clickedPortal) setIsOpen(false);\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n    return () => document.removeEventListener(\"mousedown\", handleClickOutside);\r\n  }, []);\r\n\r\n  // --- Calculate Portal Position ---\r\n  const [position, setPosition] = useState<{\r\n    top: number;\r\n    left: number;\r\n    width: number;\r\n  } | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && searchRef.current) {\r\n      const rect = searchRef.current.getBoundingClientRect();\r\n      setPosition({\r\n        top: rect.bottom + 8,\r\n        left: rect.left,\r\n        width: rect.width,\r\n      });\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // --- Render Helpers ---\r\n  const selectedItem = allItems[selectedIndex];\r\n\r\n  const renderIcon = (item: GlobalItem, className?: string) => {\r\n    if (item.type === \"NAV\") {\r\n      const Icon = item.icon;\r\n      return <Icon className={className || \"w-4 h-4\"} />;\r\n    }\r\n    if (item.type === \"PO\") return <Package className={className} />;\r\n    if (item.type === \"DC\") return <Truck className={className} />;\r\n    if (item.type === \"Invoice\") return <Receipt className={className} />;\r\n    return <FileText className={className} />;\r\n  };\r\n\r\n  const portalContent = position ? (\r\n    <div\r\n      ref={portalRef}\r\n      className=\"fixed z-[9999] flex flex-col bg-app-surface/90 backdrop-blur-3xl elevation-4 border-none rounded-2xl overflow-hidden animate-in fade-in zoom-in-95 duration-200\"\r\n      style={{\r\n        top: position.top,\r\n        left: position.left,\r\n        width: position.width,\r\n        height: 520,\r\n        transformOrigin: \"top center\",\r\n      }}\r\n    >\r\n      {/* 2-Pane Layout */}\r\n      <div className=\"flex flex-1 overflow-hidden h-full\">\r\n        {/* Left Pane: List */}\r\n        <div className=\"w-[50%] flex flex-col bg-app-fg/5 border-none\">\r\n          {/* Empty State */}\r\n          {query && allItems.length === 0 && !loading && (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center text-slate-400\">\r\n              <Search className=\"w-8 h-8 opacity-20 mb-2\" />\r\n              <span className=\"text-xs\">No results found</span>\r\n            </div>\r\n          )}\r\n\r\n          {/* Initial Empty State */}\r\n          {!query && allItems.length === 0 && (\r\n            <div className=\"flex-1 flex flex-col items-center justify-center text-app-fg-muted/40 p-8 text-center\">\r\n              <Search className=\"w-8 h-8 opacity-20 mb-4\" />\r\n              <Body className=\"text-text-primary uppercase tracking-wide\">\r\n                Type to search...\r\n              </Body>\r\n              <Caption1 className=\"mt-1 text-text-tertiary\">\r\n                Find POs, Invoices, or jump to pages\r\n              </Caption1>\r\n\r\n              {/* Show Recents if any within empty state */}\r\n              {recentSearches.length > 0 && (\r\n                <div className=\"mt-8 w-full\">\r\n                  <div className=\"text-[10px] font-black uppercase tracking-widest text-app-fg-muted mb-4 text-left px-4\">\r\n                    Recent Activity\r\n                  </div>\r\n                  {recentSearches.map((term) => (\r\n                    <button\r\n                      key={term}\r\n                      onClick={() => {\r\n                        setQuery(term);\r\n                        inputRef.current?.focus();\r\n                      }}\r\n                      className=\"block w-full text-left px-4 py-2.5 text-footnote text-text-secondary hover:text-app-accent hover:bg-app-accent/5 rounded-xl transition-all\"\r\n                    >\r\n                      {term}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* Items List */}\r\n          {allItems.length > 0 && (\r\n            <div\r\n              ref={listRef}\r\n              className=\"flex-1 overflow-y-auto p-2 scrollbar-thin scrollbar-thumb-slate-200\"\r\n            >\r\n              {/* Header for Nav if present */}\r\n              {filteredNavItems.length > 0 && (\r\n                <div className=\"px-4 py-2 sticky top-0 bg-app-surface/80 backdrop-blur z-10\">\r\n                  <Caption1 className=\"text-text-tertiary uppercase tracking-wider\">Commands</Caption1>\r\n                </div>\r\n              )}\r\n\r\n              {allItems.map((item, idx) => {\r\n                const isSelected = selectedIndex === idx;\r\n                return (\r\n                  <button\r\n                    key={`${item.type}-${item.id}`}\r\n                    onClick={() => handleItemSelect(item)}\r\n                    onMouseEnter={() => setSelectedIndex(idx)}\r\n                    className={cn(\r\n                      \"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-all duration-150 mb-0.5\",\r\n                      isSelected\r\n                        ? \"active-glow text-white\"\r\n                        : \"hover:bg-app-fg/5 text-app-fg\",\r\n                    )}\r\n                  >\r\n                    {renderIcon(\r\n                      item,\r\n                      cn(\r\n                        \"w-4 h-4\",\r\n                        isSelected ? \"text-white\" : \"text-app-fg/40\",\r\n                      ),\r\n                    )}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <Body\r\n                        className={cn(\r\n                          \"truncate\",\r\n                          isSelected ? \"text-white\" : \"text-app-fg\",\r\n                        )}\r\n                      >\r\n                        {item.type === \"NAV\" ? item.label : item.number}\r\n                      </Body>\r\n                      <SmallText\r\n                        className={cn(\r\n                          \"truncate text-[11px]\",\r\n                          isSelected ? \"text-white/80\" : \"text-app-fg/60\",\r\n                        )}\r\n                      >\r\n                        {item.type === \"NAV\"\r\n                          ? item.subLabel\r\n                          : (item as SearchResult).party}\r\n                      </SmallText>\r\n                    </div>\r\n                    {isSelected && (\r\n                      <ArrowRight size={14} className=\"text-white opacity-80\" />\r\n                    )}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right Pane: Preview */}\r\n        <div className=\"w-[50%] bg-app-surface/20 backdrop-blur-md p-8 flex flex-col\">\r\n          {selectedItem ? (\r\n            <div className=\"animate-in fade-in zoom-in-95 duration-150\">\r\n              <div className=\"w-14 h-14 rounded-2xl bg-app-fg/5 flex items-center justify-center mb-6 border border-app-border/50\">\r\n                {renderIcon(selectedItem, \"w-7 h-7 text-app-fg\")}\r\n              </div>\r\n\r\n              <H3 className=\"text-text-primary mb-1 uppercase tracking-tight\">\r\n                {selectedItem.type === \"NAV\"\r\n                  ? selectedItem.label\r\n                  : selectedItem.number}\r\n              </H3>\r\n              <Body className=\"text-app-fg-muted mb-8\">\r\n                {selectedItem.type === \"NAV\"\r\n                  ? \"Navigation Command\"\r\n                  : selectedItem.type_label}\r\n              </Body>\r\n\r\n              {/* Metadata Grid */}\r\n              <div className=\"space-y-5\">\r\n                {selectedItem.type !== \"NAV\" && (\r\n                  <>\r\n                    {/* Removed Party Row completely as requested */}\r\n                    <div className=\"flex justify-between py-2 border-b border-app-border/10\">\r\n                      <Caption1 className=\"text-text-tertiary uppercase tracking-wider\">\r\n                        Date\r\n                      </Caption1>\r\n                      <span className=\"text-footnote text-text-secondary font-regular\">\r\n                        {(selectedItem as SearchResult).date || \"-\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between py-2 border-b border-app-border/10\">\r\n                      <Caption1 className=\"text-text-tertiary uppercase tracking-wider\">\r\n                        Amount\r\n                      </Caption1>\r\n                      <span className=\"text-footnote text-text-primary font-mono\">\r\n                        {(selectedItem as SearchResult).amount\r\n                          ? `â‚¹${(selectedItem as SearchResult).amount?.toLocaleString()}`\r\n                          : \"-\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex justify-between py-2\">\r\n                      <span className=\"text-xs text-app-fg/40 font-medium uppercase tracking-wider\">\r\n                        Status\r\n                      </span>\r\n                      <StatusBadge\r\n                        status={\r\n                          (selectedItem as SearchResult).status || \"Active\"\r\n                        }\r\n                        className=\"text-[10px] py-0.5 px-2\"\r\n                      />\r\n                    </div>\r\n                  </>\r\n                )}\r\n                {selectedItem.type === \"NAV\" && (\r\n                  <div className=\"p-4 bg-app-accent/10 rounded-xl text-sm text-app-accent leading-relaxed\">\r\n                    {selectedItem.subLabel}. <br />\r\n                    Press <strong className=\"font-semibold\">Enter</strong> to\r\n                    navigate immediately.\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"mt-auto pt-8 flex gap-3\">\r\n                <button\r\n                  onClick={() => handleItemSelect(selectedItem)}\r\n                  className=\"flex-1 active-glow hover:brightness-110 text-white text-sm font-bold py-3 rounded-xl transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center gap-2\"\r\n                >\r\n                  <ArrowRight size={16} />\r\n                  Open{\" \"}\r\n                  {selectedItem.type === \"NAV\" ? \"Page\" : selectedItem.type}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex-1 flex items-center justify-center\">\r\n              <SmallText className=\"text-app-fg-muted\">Select an item to preview</SmallText>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Footer / Shortcuts Hint */}\r\n      <div className=\"bg-app-surface px-4 py-2.5 flex items-center justify-between text-[10px] text-app-fg/40 border-none\">\r\n        <div className=\"flex gap-4\">\r\n          <span className=\"flex items-center gap-1.5\">\r\n            <kbd className=\"bg-app-surface shadow-sm rounded px-1.5 py-0.5 font-sans min-w-[20px] text-center\">\r\n              â†µ\r\n            </kbd>{\" \"}\r\n            Select\r\n          </span>\r\n          <span className=\"flex items-center gap-1.5\">\r\n            <kbd className=\"bg-app-surface shadow-sm rounded px-1.5 py-0.5 font-sans min-w-[20px] text-center\">\r\n              â†“\r\n            </kbd>{\" \"}\r\n            Navigate\r\n          </span>\r\n        </div>\r\n        <div className=\"font-regular opacity-50\">SenstoSales Raycast</div>\r\n      </div>\r\n    </div >\r\n  ) : null;\r\n\r\n  return (\r\n    <>\r\n      <div ref={searchRef} className=\"relative max-w-[700px] w-full group z-50\">\r\n        <div\r\n          className={cn(\r\n            \"flex items-center gap-4 px-6 py-2 transition-all duration-300 ease-out\",\r\n            \"bg-white/5 dark:bg-white/5 rounded-xl border-none\",\r\n            isOpen && \"bg-white/10 dark:bg-white/10 elevation-1\",\r\n          )}\r\n        >\r\n          {loading ? (\r\n            <Loader2 className=\"w-5 h-5 text-app-accent animate-spin\" />\r\n          ) : (\r\n            <Search\r\n              className={cn(\r\n                \"w-5 h-5 transition-colors\",\r\n                isOpen ? \"text-app-accent\" : \"text-app-fg/40\",\r\n              )}\r\n            />\r\n          )}\r\n\r\n          <input\r\n            ref={inputRef}\r\n            id=\"global-search\"\r\n            name=\"global-search\"\r\n            type=\"text\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            onFocus={() => setIsOpen(true)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Search items, vendors, invoices...\"\r\n            className=\"flex-1 bg-transparent border-none outline-none text-footnote font-regular text-text-primary placeholder:text-text-tertiary\"\r\n          />\r\n\r\n          {query && (\r\n            <button\r\n              onClick={() => {\r\n                setQuery(\"\");\r\n                inputRef.current?.focus();\r\n              }}\r\n              className=\"p-1 hover:bg-app-overlay rounded-lg transition-colors\"\r\n            >\r\n              <X size={14} className=\"text-app-fg-muted\" />\r\n            </button>\r\n          )}\r\n\r\n          <div className=\"hidden lg:flex items-center gap-1.5 px-2 py-1 bg-app-surface-elevated/50 rounded-lg shadow-sm pointer-events-none select-none\">\r\n            <kbd className=\"font-mono text-[9px] font-bold text-app-fg-muted\">\r\n              CTRL K\r\n            </kbd>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {mounted && isOpen && createPortal(portalContent, document.body)}\r\n    </>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\InspectionManifest.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[282,285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[282,285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[310,313],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[310,313],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { DataTable, type Column } from \"./DataTable\";\r\nimport { Flex, Stack } from \"../atoms/Layout\";\r\nimport { H3 } from \"../atoms/Typography\";\r\nimport { Badge } from \"../atoms/Badge\";\r\n\r\ninterface InspectionManifestProps {\r\n    items: any[];\r\n    columns: Column<any>[];\r\n}\r\n\r\nexport const InspectionManifest = ({ items, columns }: InspectionManifestProps) => {\r\n    return (\r\n        <Stack gap={3}>\r\n            <Flex align=\"center\" gap={3} justify=\"between\">\r\n                <H3 className=\"m-0 uppercase tracking-[0.2em]\">\r\n                    Inspection Manifest\r\n                </H3>\r\n                <Badge variant=\"outline\" className=\"opacity-60\">\r\n                    {items.length} Quality Nodes\r\n                </Badge>\r\n            </Flex>\r\n            <div className=\"surface-card bg-app-border/30 overflow-hidden\">\r\n                <div className=\"bg-app-surface overflow-x-auto\">\r\n                    <DataTable\r\n                        columns={columns}\r\n                        data={items}\r\n                        keyField=\"id\"\r\n                        density=\"compact\"\r\n                        className=\"w-full\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </Stack>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\SidebarNav.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used. Allowed unused vars must match /^_/u.","line":17,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Headline' is defined but never used. Allowed unused vars must match /^_/u.","line":18,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\nimport {\r\n  LayoutDashboard,\r\n  ShoppingCart,\r\n  Truck,\r\n  Receipt,\r\n  FileText,\r\n  Settings,\r\n  Package,\r\n  BarChart3,\r\n  Box,\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Caption1, Body, Headline, Footnote } from \"../atoms/Typography\";\r\n\r\nconst navGroups = [\r\n  {\r\n    label: \"Intelligence\",\r\n    items: [\r\n      { name: \"Dashboard\", href: \"/\", icon: LayoutDashboard },\r\n      { name: \"Reports\", href: \"/reports\", icon: BarChart3 },\r\n    ]\r\n  },\r\n  {\r\n    label: \"Operations\",\r\n    items: [\r\n      { name: \"Purchase Order\", href: \"/po\", icon: ShoppingCart },\r\n      { name: \"Delivery Challan\", href: \"/dc\", icon: Truck },\r\n      { name: \"Invoice\", href: \"/invoice\", icon: Receipt },\r\n      { name: \"SRV Ingestion\", href: \"/srv\", icon: Box },\r\n    ]\r\n  },\r\n  {\r\n    label: \"Configuration\",\r\n    items: [\r\n      { name: \"PO Notes\", href: \"/po-notes\", icon: FileText },\r\n      { name: \"Settings\", href: \"/settings\", icon: Settings },\r\n    ]\r\n  }\r\n];\r\n\r\nexport function SidebarNav() {\r\n  const pathname = usePathname();\r\n\r\n  return (\r\n    <aside className=\"w-64 flex-shrink-0 flex flex-col tahoe-glass z-20 m-4 ml-4 rounded-[24px] overflow-hidden\">\r\n      {/* Brand Header */}\r\n      <div className=\"h-16 flex items-center px-6\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 bg-gradient-to-br from-system-blue to-system-cyan rounded-xl elevation-1 flex items-center justify-center text-white\">\r\n            <Package className=\"w-5 h-5\" />\r\n          </div>\r\n          <div className=\"flex flex-col justify-center\">\r\n            <Body className=\"leading-tight text-text-primary\">Sensto Sales</Body>\r\n            <Caption2 className=\"text-text-secondary opacity-90 leading-tight\">Pro Enterprise</Caption2>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Navigation Groups */}\r\n      <nav className=\"flex-1 overflow-y-auto px-4 py-4 space-y-6 no-scrollbar\">\r\n        {navGroups.map((group) => (\r\n          <div key={group.label}>\r\n            <Caption1 className=\"px-3 mb-2 pl-4 text-text-tertiary tracking-wide uppercase opacity-80\">\r\n              {group.label}\r\n            </Caption1>\r\n            <ul className=\"space-y-1\">\r\n              {group.items.map((item) => {\r\n                const isActive =\r\n                  pathname === item.href ||\r\n                  (item.href !== \"/\" && pathname.startsWith(item.href + \"/\"));\r\n\r\n                return (\r\n                  <li key={item.href}>\r\n                    <Link\r\n                      href={item.href}\r\n                      className={cn(\r\n                        \"flex items-center px-3.5 py-2 rounded-xl transition-all duration-200 group relative active:scale-[0.98]\",\r\n                        isActive\r\n                          ? \"bg-system-blue/10 text-system-blue\"\r\n                          : \"text-text-secondary hover:bg-white/40 dark:hover:bg-white/10 hover:text-text-primary\"\r\n                      )}\r\n                    >\r\n                      <item.icon\r\n                        size={18}\r\n                        className={cn(\r\n                          \"mr-3 transition-colors\",\r\n                          isActive ? \"text-system-blue\" : \"text-text-tertiary group-hover:text-text-primary\"\r\n                        )}\r\n                      />\r\n                      <Body className={cn(\"text-[14px] transition-colors\", isActive ? \"text-system-blue\" : \"text-inherit\")}>\r\n                        {item.name}\r\n                      </Body>\r\n                    </Link>\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          </div>\r\n        ))}\r\n      </nav>\r\n\r\n      {/* Premium Profile Footer */}\r\n      <div className=\"p-4\">\r\n        <div className=\"flex items-center p-3 bg-white/5 dark:bg-black/5 rounded-xl transition-smooth active:scale-[0.98] group cursor-pointer hover:bg-white/10\">\r\n          <div className=\"w-9 h-9 rounded-full bg-gradient-to-tr from-system-gray to-slate-400 text-white flex items-center justify-center text-xs shadow-inner\">\r\n            <span>AS</span>\r\n          </div>\r\n          <div className=\"ml-3 flex-1 overflow-hidden\">\r\n            <Footnote className=\"text-text-primary truncate\">Abhijit S.</Footnote>\r\n            <div className=\"flex items-center mt-0.5\">\r\n              <span className=\"w-1.5 h-1.5 rounded-full bg-system-green mr-1.5 opacity-80\"></span>\r\n              <Caption2 className=\"text-text-secondary truncate\">Administrator</Caption2>\r\n            </div>\r\n          </div>\r\n          <Settings size={18} className=\"text-text-tertiary group-hover:text-text-primary transition-colors\" />\r\n        </div>\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n\r\nimport { Caption2 } from \"../atoms/Typography\";\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\StatusCard.tsx","messages":[{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Card' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":4,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":4,"endColumn":62},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Badge' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":5,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":5,"endColumn":64},{"ruleId":"no-restricted-imports","severity":1,"message":"'@/components/design-system/atoms/Typography' import is restricted from being used by a pattern. Pages must import Organisms or Templates only to maintain Atomic hierarchy.","line":6,"column":1,"nodeType":"ImportDeclaration","messageId":"patternWithCustomMessage","endLine":6,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Card } from \"@/components/design-system/atoms/Card\";\r\nimport { Badge } from \"@/components/design-system/atoms/Badge\";\r\nimport { Title3 } from \"@/components/design-system/atoms/Typography\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface StatusCardProps {\r\n    title?: string;\r\n    status?: string;\r\n    variant?: \"default\" | \"success\" | \"warning\" | \"error\";\r\n    children: React.ReactNode;\r\n    className?: string;\r\n    showBadge?: boolean;\r\n}\r\n\r\nexport function StatusCard({\r\n    title,\r\n    status,\r\n    variant = \"default\",\r\n    children,\r\n    className,\r\n    showBadge = false,\r\n}: StatusCardProps) {\r\n    return (\r\n        <Card className={cn(\"p-6\", className)}>\r\n            {(title || status) && (\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    {title && <Title3>{title}</Title3>}\r\n                    {status && showBadge && <Badge variant={variant}>{status}</Badge>}\r\n                </div>\r\n            )}\r\n            {children}\r\n        </Card>\r\n    );\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\SummaryCards.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H2' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Caption2' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":14},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":122,"column":35,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":122,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H2, SmallText, Caption1, Caption2 } from \"../atoms/Typography\";\r\nimport { Card } from \"../atoms/Card\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { SummaryCardSkeleton } from \"../atoms/Skeleton\";\r\nimport { motion, Variants } from \"framer-motion\";\r\n\r\n/**\r\n * SummaryCard Organism - Atomic Design System v6.0\r\n * KPI display component with restored chromatic vibrancy and intentional depth.\r\n * Composition: Card + Typography + Optional Icon/Trend\r\n */\r\nexport interface SummaryCardProps {\r\n    title: string;\r\n    value: React.ReactNode;\r\n    icon?: React.ReactNode;\r\n    trend?: {\r\n        value: string;\r\n        direction: \"up\" | \"down\" | \"neutral\";\r\n    };\r\n    progress?: number; // 0 to 100\r\n    variant?: \"default\" | \"primary\" | \"success\" | \"warning\" | \"error\";\r\n    className?: string;\r\n}\r\n\r\nconst variantStyles = {\r\n    default: \"text-gray-900 dark:text-gray-100\",\r\n    primary: \"text-primary\",\r\n    success: \"text-app-success\",\r\n    warning: \"text-app-warning\",\r\n    error: \"text-app-error\",\r\n};\r\n\r\nconst iconBackgrounds = {\r\n    default: \"bg-gradient-to-b from-gray-100 to-gray-50 dark:from-white/10 dark:to-white/5\",\r\n    primary: \"bg-gradient-to-b from-[#4facfe] to-[#00f2fe] shadow-blue-400/30\", // Blue-Cyan (Morning Briefing)\r\n    success: \"bg-gradient-to-b from-[#667eea] to-[#764ba2] shadow-indigo-500/30\", // Indigo-Purple (Invoiced Sales)\r\n    warning: \"bg-gradient-to-b from-[#a18cd1] to-[#fbc2eb] shadow-purple-500/30\", // Purple-Pink (Active Orders)\r\n    error: \"bg-gradient-to-b from-[#ff9a9e] to-[#fecfef] shadow-red-400/30\", // Red-Pink fallback\r\n    info: \"bg-gradient-to-b from-[#00c6fb] to-[#005bea] shadow-cyan-500/30\", // Cyan-Blue (Purchase Commitment)\r\n};\r\n\r\nconst glowColors = {\r\n    default: \"bg-gray-500/10\",\r\n    primary: \"bg-blue-500/10 group-hover:bg-blue-500/20\",\r\n    success: \"bg-indigo-500/10 group-hover:bg-indigo-500/20\",\r\n    warning: \"bg-purple-500/10 group-hover:bg-purple-500/20\",\r\n    error: \"bg-red-500/10 group-hover:bg-red-500/20\",\r\n    info: \"bg-cyan-500/10 group-hover:bg-cyan-500/20\", // Added for mapping\r\n};\r\n\r\nconst trendColors = {\r\n    up: \"text-system-green bg-system-green/10\",\r\n    down: \"text-system-red bg-system-red/10\",\r\n    neutral: \"text-system-gray bg-system-gray/10\",\r\n};\r\n\r\n\r\nexport const SummaryCard = React.memo(function SummaryCard({\r\n    title,\r\n    value,\r\n    icon,\r\n    trend,\r\n    progress,\r\n    variant = \"default\",\r\n    className,\r\n}: SummaryCardProps) {\r\n    // Map 'info' variant properly if needed, effectively using 'primary' or 'info'\r\n    const glowClass = glowColors[variant as keyof typeof glowColors] || glowColors.default;\r\n    const iconClass = iconBackgrounds[variant as keyof typeof iconBackgrounds] || iconBackgrounds.default;\r\n\r\n    return (\r\n        <div\r\n            className={cn(\"tahoe-glass-card h-[145px] group transition-all duration-300 hover:scale-[1.02] relative overflow-hidden\", className)}\r\n        >\r\n            {/* Glow Blob - Added from Reference */}\r\n            <div className={cn(\"absolute -right-6 -top-6 w-24 h-24 rounded-full blur-2xl transition-all duration-500 pointer-events-none\", glowClass)} />\r\n\r\n            <div className=\"p-5 h-full flex flex-col justify-between relative z-10\">\r\n                <div className=\"flex justify-between items-start\">\r\n                    <div className=\"min-w-0 flex-1\">\r\n                        <Caption1 className=\"uppercase tracking-wide text-text-tertiary opacity-80 mb-1 block\">\r\n                            {title}\r\n                        </Caption1>\r\n                        <div className={cn(\"text-title-2 tracking-tight transition-colors\", variantStyles[variant])}>\r\n                            {value}\r\n                        </div>\r\n                    </div>\r\n                    {icon && (\r\n                        <div className={cn(\r\n                            \"w-11 h-11 rounded-xl flex items-center justify-center transition-transform duration-500 shrink-0 elevation-1 group-hover:rotate-6\",\r\n                            iconClass,\r\n                            variant !== 'default' && \"text-white\"\r\n                        )}>\r\n                            {icon}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"mt-4 flex items-center justify-between\">\r\n                    {progress !== undefined ? (\r\n                        <div className=\"w-full bg-black/5 dark:bg-white/5 rounded-full h-1.5 overflow-hidden\">\r\n                            <motion.div\r\n                                initial={{ width: 0 }}\r\n                                animate={{ width: `${progress}%` }}\r\n                                transition={{ duration: 1, ease: \"easeOut\" }}\r\n                                className={cn(\r\n                                    \"h-full rounded-full transition-all\",\r\n                                    variant === \"default\" || variant === \"primary\" ? \"bg-system-blue\" :\r\n                                        variant === \"success\" ? \"bg-system-green\" :\r\n                                            variant === \"warning\" ? \"bg-system-yellow\" : \"bg-system-red\"\r\n                                )}\r\n                            />\r\n                        </div>\r\n                    ) : trend ? (\r\n                        <div className={cn(\r\n                            \"px-1.5 py-0.5 rounded-md text-caption-2 tracking-tight flex items-center gap-1 backdrop-blur-sm\",\r\n                            trendColors[trend.direction]\r\n                        )}>\r\n                            <span className=\"text-[10px]\">\r\n                                {trend.direction === \"up\" ? \"â†‘\" : trend.direction === \"down\" ? \"â†“\" : \"â€¢\"}\r\n                            </span>\r\n                            <span>{trend.value}</span>\r\n                        </div>\r\n                    ) : null}\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport interface SummaryCardsProps {\r\n    cards: SummaryCardProps[];\r\n    loading?: boolean;\r\n    className?: string;\r\n}\r\n\r\nconst container: Variants = {\r\n    hidden: { opacity: 0 },\r\n    show: {\r\n        opacity: 1,\r\n        transition: { staggerChildren: 0.05 },\r\n    },\r\n};\r\n\r\nconst item: Variants = {\r\n    hidden: { opacity: 0, y: 10 },\r\n    show: {\r\n        opacity: 1,\r\n        y: 0,\r\n        transition: { type: \"spring\", stiffness: 400, damping: 25 },\r\n    },\r\n};\r\n\r\nexport const SummaryCards = React.memo(function SummaryCards({\r\n    cards,\r\n    loading,\r\n    className,\r\n}: SummaryCardsProps) {\r\n    if (loading) {\r\n        return (\r\n            <div className={cn(\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\", className)}>\r\n                {Array.from({ length: 4 }).map((_, i) => (\r\n                    <SummaryCardSkeleton key={i} />\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n    return (\r\n        <motion.div\r\n            variants={container}\r\n            initial=\"hidden\"\r\n            animate=\"show\"\r\n            className={cn(\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\", className)}\r\n        >\r\n            {cards.map((card, index) => (\r\n                <motion.div key={index} variants={item} className=\"h-full\">\r\n                    <SummaryCard {...card} />\r\n                </motion.div>\r\n            ))}\r\n        </motion.div>\r\n    );\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\organisms\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\CreateEditFormTemplate.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":56,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":56,"endColumn":105}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\nimport React from \"react\";\r\nimport { H1, H2, Body } from \"../atoms/Typography\";\r\nimport { Button } from \"../atoms/Button\";\r\nimport { ActionButtonGroup, Action } from \"../molecules/ActionButtonGroup\";\r\nimport { ChevronRight } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * CreateEditFormTemplate - Atomic Design System v1.0\r\n * Standard layout for create/edit pages\r\n * Layout: Breadcrumbs â†’ Heading â†’ Form Sections â†’ Action Buttons\r\n */\r\nexport interface BreadcrumbItem {\r\n    label: string;\r\n    href?: string;\r\n    onClick?: () => void;\r\n}\r\n\r\nexport interface FormSection {\r\n    title: string;\r\n    description?: string;\r\n    content: React.ReactNode;\r\n}\r\n\r\nexport interface CreateEditFormTemplateProps {\r\n    // Navigation\r\n    breadcrumbs?: BreadcrumbItem[];\r\n    // Header\r\n    title: string;\r\n    subtitle?: string;\r\n    // Form sections\r\n    sections: FormSection[];\r\n    // Actions\r\n    primaryAction: Action;\r\n    secondaryActions?: Action[];\r\n    // State\r\n    loading?: boolean;\r\n    className?: string;\r\n}\r\n\r\nexport const CreateEditFormTemplate: React.FC<CreateEditFormTemplateProps> = ({\r\n    breadcrumbs,\r\n    title,\r\n    subtitle,\r\n    sections,\r\n    primaryAction,\r\n    secondaryActions = [],\r\n    loading = false,\r\n    className,\r\n}) => {\r\n    return (\r\n        <div className={cn(\"max-w-5xl mx-auto space-y-6\", className)}>\r\n            {/* Breadcrumbs */}\r\n            {breadcrumbs && breadcrumbs.length > 0 && (\r\n                <nav className=\"flex items-center gap-2 text-[12px] font-bold uppercase tracking-widest\">\r\n                    {breadcrumbs.map((crumb, index) => (\r\n                        <React.Fragment key={index}>\r\n                            {crumb.href ? (\r\n                                <a\r\n                                    href={crumb.href}\r\n                                    className=\"text-app-fg-muted hover:text-app-accent transition-colors\"\r\n                                >\r\n                                    {crumb.label}\r\n                                </a>\r\n                            ) : crumb.onClick ? (\r\n                                <button\r\n                                    onClick={crumb.onClick}\r\n                                    className=\"text-app-fg-muted hover:text-app-accent transition-colors\"\r\n                                >\r\n                                    {crumb.label}\r\n                                </button>\r\n                            ) : (\r\n                                <span className=\"text-app-fg\">\r\n                                    {crumb.label}\r\n                                </span>\r\n                            )}\r\n                            {index < breadcrumbs.length - 1 && (\r\n                                <ChevronRight size={12} className=\"text-app-fg-muted/40\" />\r\n                            )}\r\n                        </React.Fragment>\r\n                    ))}\r\n                </nav>\r\n            )}\r\n\r\n            {/* Page Header */}\r\n            <div className=\"space-y-2 pb-6 border-b border-app-border\">\r\n                <H1 className=\"text-app-fg tracking-tight\">{title}</H1>\r\n                {subtitle && <Body className=\"text-app-fg-muted font-bold tracking-tight\">{subtitle}</Body>}\r\n            </div>\r\n\r\n            {/* Form Sections */}\r\n            <div className=\"space-y-8\">\r\n                {sections.map((section, index) => (\r\n                    <div key={index} className=\"space-y-4\">\r\n                        <div className=\"space-y-1\">\r\n                            <H2 className=\"text-app-fg uppercase tracking-tight\">{section.title}</H2>\r\n                            {section.description && (\r\n                                <Body className=\"text-app-fg-muted font-bold\">{section.description}</Body>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"bg-app-surface/30 backdrop-blur-sm rounded-2xl border border-app-border/30 p-8 shadow-sm\">\r\n                            {section.content}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div className=\"sticky bottom-0 bg-app-overlay/80 backdrop-blur-xl border-t border-app-border/40 px-6 py-5 -mx-6 flex items-center justify-between gap-4 z-20\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    {secondaryActions.length > 0 && (\r\n                        <ActionButtonGroup actions={secondaryActions} align=\"left\" />\r\n                    )}\r\n                </div>\r\n                <Button\r\n                    variant={primaryAction.variant || \"primary\"}\r\n                    onClick={primaryAction.onClick}\r\n                    disabled={primaryAction.disabled || loading}\r\n                    className=\"min-w-32\"\r\n                >\r\n                    {primaryAction.icon}\r\n                    {primaryAction.label}\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\DetailViewTemplate.tsx","messages":[{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":70,"column":22,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":70,"endColumn":105}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { H1, Body } from \"../atoms/Typography\";\r\nimport { SummaryCards, SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport { DocumentTrace, DocumentNode } from \"../organisms/DocumentTrace\";\r\nimport { ActionButtonGroup, Action } from \"../molecules/ActionButtonGroup\";\r\nimport { ChevronRight } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * DetailViewTemplate - Atomic Design System v1.0\r\n * Standard layout for detail/view pages\r\n * Layout: Breadcrumbs â†’ Header + Actions â†’ Summary Cards â†’ Document Trace â†’ Tabbed Content\r\n */\r\n\r\nexport interface BreadcrumbItem {\r\n    label: string;\r\n    href?: string;\r\n}\r\n\r\nexport interface TabItem {\r\n    id: string;\r\n    label: string;\r\n    icon?: React.ReactNode;\r\n    content: React.ReactNode;\r\n}\r\n\r\nexport interface DetailViewTemplateProps {\r\n    // Navigation\r\n    breadcrumbs?: BreadcrumbItem[];\r\n    // Header\r\n    title: string;\r\n    subtitle?: string;\r\n    badge?: React.ReactNode;\r\n    // Header actions\r\n    actions?: Action[];\r\n    // Summary cards\r\n    summaryCards?: SummaryCardProps[];\r\n    // Document traceability\r\n    documentTrace?: DocumentNode[];\r\n    // Tabs\r\n    tabs?: TabItem[];\r\n    defaultTab?: string;\r\n    // Additional content (if not using tabs)\r\n    children?: React.ReactNode;\r\n    className?: string;\r\n}\r\n\r\nexport const DetailViewTemplate: React.FC<DetailViewTemplateProps> = ({\r\n    breadcrumbs,\r\n    title,\r\n    subtitle,\r\n    badge,\r\n    actions,\r\n    summaryCards,\r\n    documentTrace,\r\n    tabs,\r\n    defaultTab,\r\n    children,\r\n    className,\r\n}) => {\r\n    const [activeTab, setActiveTab] = useState(defaultTab || tabs?.[0]?.id || \"\");\r\n    const activeTabContent = tabs?.find((tab) => tab.id === activeTab)?.content;\r\n\r\n    return (\r\n        <div className={cn(\"space-y-6\", className)}>\r\n            {/* Breadcrumbs */}\r\n            {breadcrumbs && breadcrumbs.length > 0 && (\r\n                <nav className=\"flex items-center gap-2 text-[12px] font-bold uppercase tracking-widest\">\r\n                    {breadcrumbs.map((crumb, index) => (\r\n                        <React.Fragment key={index}>\r\n                            {crumb.href ? (\r\n                                <a\r\n                                    href={crumb.href}\r\n                                    className=\"text-app-fg-muted hover:text-app-accent transition-colors\"\r\n                                >\r\n                                    {crumb.label}\r\n                                </a>\r\n                            ) : (\r\n                                <span className=\"text-app-fg\">{crumb.label}</span>\r\n                            )}\r\n                            {index < breadcrumbs.length - 1 && (\r\n                                <ChevronRight size={12} className=\"text-app-fg-muted/40\" />\r\n                            )}\r\n                        </React.Fragment>\r\n                    ))}\r\n                </nav>\r\n            )}\r\n\r\n            {/* Header */}\r\n            <div className=\"flex items-start justify-between gap-4\">\r\n                <div className=\"space-y-1 flex-1\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <H1 className=\"uppercase tracking-tight text-app-fg\">{title}</H1>\r\n                        {badge}\r\n                    </div>\r\n                    {subtitle && (\r\n                        <Body className=\"text-app-fg-muted font-bold tracking-tight\">{subtitle}</Body>\r\n                    )}\r\n                </div>\r\n                {actions && actions.length > 0 && (\r\n                    <ActionButtonGroup actions={actions} align=\"right\" />\r\n                )}\r\n            </div>\r\n\r\n            {/* Summary Cards */}\r\n            {summaryCards && summaryCards.length > 0 && (\r\n                <SummaryCards cards={summaryCards} />\r\n            )}\r\n\r\n            {/* Document Trace */}\r\n            {documentTrace && documentTrace.length > 0 && (\r\n                <DocumentTrace documents={documentTrace} />\r\n            )}\r\n\r\n            {/* Tabs */}\r\n            {tabs && tabs.length > 0 ? (\r\n                <div className=\"space-y-4\">\r\n                    {/* Tab Headers */}\r\n                    <div className=\"border-b border-app-border\">\r\n                        <div className=\"flex items-center gap-1\">\r\n                            {tabs.map((tab) => (\r\n                                <button\r\n                                    key={tab.id}\r\n                                    onClick={() => setActiveTab(tab.id)}\r\n                                    className={cn(\r\n                                        \"flex items-center gap-2 px-6 py-4 text-[11px] font-black uppercase tracking-[0.2em] transition-all\",\r\n                                        \"border-b-2 -mb-px\",\r\n                                        activeTab === tab.id\r\n                                            ? \"border-app-accent text-app-accent\"\r\n                                            : \"border-transparent text-app-fg-muted hover:text-app-fg\"\r\n                                    )}\r\n                                >\r\n                                    {tab.icon}\r\n                                    {tab.label}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                    {/* Tab Content */}\r\n                    <div>{activeTabContent}</div>\r\n                </div>\r\n            ) : (\r\n                // Direct content if no tabs\r\n                children && <div>{children}</div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\DocumentTemplate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\ListPageTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H1' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[513,516],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[513,516],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1687,1690],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1687,1690],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'no_borders' is defined but never used. Allowed unused args must match /^_/u.","line":79,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":79,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'table_surface_solid' is defined but never used. Allowed unused args must match /^_/u.","line":80,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":80,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H1, SmallText } from \"../atoms/Typography\";\r\nimport { SummaryCards, type SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport { DataTable, type Column } from \"../organisms/DataTable\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ListPageTemplate - Atomic Design System v1.0\r\n * Standard layout for list pages (PO, DC, Invoice, SRV)\r\n * Layout: Heading â†’ Toolbar â†’ Summary Cards (optional) â†’ DataTable\r\n */\r\nexport interface ListPageTemplateProps<T = any> {\r\n    // Header\r\n    title: string;\r\n    subtitle?: string;\r\n    toolbar?: React.ReactNode;\r\n    // Summary Row (KPI Cards)\r\n    summaryCards?: SummaryCardProps[];\r\n    // Table\r\n    columns: Column<T>[];\r\n    data: T[];\r\n    keyField?: string;\r\n    page?: number;\r\n    pageSize?: number;\r\n    totalItems?: number;\r\n    onPageChange?: (page: number) => void;\r\n    sortKey?: string;\r\n    sortDirection?: \"asc\" | \"desc\";\r\n    onSort?: (key: string) => void;\r\n    selectable?: boolean;\r\n    selectedRows?: string[];\r\n    onSelectionChange?: (selected: string[]) => void;\r\n    exportable?: boolean;\r\n    onExport?: () => void;\r\n    loading?: boolean;\r\n    error?: string;\r\n    emptyMessage?: string;\r\n    density?: \"compact\" | \"normal\"; // Pass through to DataTable\r\n    // Customization\r\n    no_borders?: boolean;\r\n    table_surface_solid?: boolean;\r\n    renderSubRow?: (row: T) => React.ReactNode;\r\n    onRowExpand?: (row: T, isExpanded: boolean) => void;\r\n    no_subrow_padding?: boolean;\r\n    className?: string;\r\n    children?: React.ReactNode;\r\n}\r\n\r\nimport { DocumentTemplate } from \"./DocumentTemplate\";\r\n\r\nexport function ListPageTemplate<T extends Record<string, any>>({\r\n    title,\r\n    subtitle,\r\n    toolbar,\r\n    summaryCards,\r\n    columns,\r\n    data,\r\n    keyField = \"id\",\r\n    page,\r\n    pageSize,\r\n    totalItems,\r\n    onPageChange,\r\n    sortKey,\r\n    sortDirection,\r\n    onSort,\r\n    selectable,\r\n    selectedRows,\r\n    onSelectionChange,\r\n    exportable,\r\n    onExport,\r\n    loading,\r\n    error,\r\n    emptyMessage,\r\n    density = \"normal\",\r\n    className,\r\n    children,\r\n    no_borders,\r\n    table_surface_solid,\r\n    renderSubRow,\r\n    onRowExpand,\r\n    no_subrow_padding,\r\n}: ListPageTemplateProps<T>) {\r\n    return (\r\n        <DocumentTemplate\r\n            title={title}\r\n            description={subtitle}\r\n            actions={toolbar}\r\n            className={className}\r\n        >\r\n            <div className=\"space-y-8\">\r\n                {/* Summary Cards */}\r\n                {summaryCards && summaryCards.length > 0 && (\r\n                    <SummaryCards cards={summaryCards} loading={loading} />\r\n                )}\r\n\r\n                <div className=\"pb-10 min-h-[500px]\">\r\n                    {children ? (\r\n                        <div className=\"min-h-[400px]\">{children}</div>\r\n                    ) : (\r\n                        <DataTable\r\n                            columns={columns}\r\n                            data={data}\r\n                            keyField={keyField}\r\n                            page={page}\r\n                            pageSize={pageSize}\r\n                            totalItems={totalItems}\r\n                            onPageChange={onPageChange}\r\n                            sortKey={sortKey}\r\n                            sortDirection={sortDirection}\r\n                            onSort={onSort}\r\n                            selectable={selectable}\r\n                            selectedRows={selectedRows}\r\n                            onSelectionChange={onSelectionChange}\r\n                            exportable={exportable}\r\n                            onExport={onExport}\r\n                            loading={loading}\r\n                            error={error}\r\n                            emptyMessage={emptyMessage}\r\n                            emptyIcon={null}\r\n                            renderSubRow={renderSubRow}\r\n                            onRowExpand={onRowExpand}\r\n                            no_subrow_padding={no_subrow_padding}\r\n                            density={density}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </DocumentTemplate>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\design-system\\templates\\ReportsPageTemplate.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H1' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[497,500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[497,500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1254,1257],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1254,1257],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":79,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":79,"endColumn":114},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":91,"column":45,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":91,"endColumn":118}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { H1, Body, SmallText } from \"../atoms/Typography\";\r\nimport { SummaryCards, SummaryCardProps } from \"../organisms/SummaryCards\";\r\nimport { DataTable, Column } from \"../organisms/DataTable\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\n/**\r\n * ReportsPageTemplate - Atomic Design System v1.0\r\n * Standard layout for reports page\r\n * Layout: Heading â†’ Reports Toolbar â†’ KPI Cards â†’ Charts â†’ Data Table\r\n */\r\nexport interface ReportsPageTemplateProps<T = any> {\r\n    // Page header\r\n    title: string;\r\n    subtitle?: string;\r\n    // KPI Summary cards\r\n    kpiCards?: SummaryCardProps[];\r\n    // Charts section\r\n    charts?: React.ReactNode;\r\n    // Data table\r\n    tableTitle?: React.ReactNode;\r\n    columns?: Column<T>[];\r\n    data?: T[];\r\n    keyField?: string;\r\n    // Table features\r\n    page?: number;\r\n    pageSize?: number;\r\n    totalItems?: number;\r\n    onPageChange?: (page: number) => void;\r\n    exportable?: boolean;\r\n    onExport?: () => void;\r\n    // States\r\n    loading?: boolean;\r\n    error?: string;\r\n    emptyMessage?: string;\r\n    className?: string;\r\n}\r\n\r\nimport { DocumentTemplate } from \"./DocumentTemplate\";\r\n\r\nexport const ReportsPageTemplate = React.memo(\r\n    <T extends Record<string, any>>({\r\n        title,\r\n        subtitle,\r\n        kpiCards,\r\n        charts,\r\n        tableTitle,\r\n        columns,\r\n        data,\r\n        keyField = \"id\",\r\n        page,\r\n        pageSize,\r\n        totalItems,\r\n        onPageChange,\r\n        loading,\r\n        error,\r\n        emptyMessage,\r\n        className,\r\n    }: ReportsPageTemplateProps<T>) => {\r\n        return (\r\n            <DocumentTemplate\r\n                title={title}\r\n                description={subtitle}\r\n                className={className}\r\n            >\r\n                <div className=\"space-y-6\">\r\n                    {/* KPI Summary Cards */}\r\n                    {((kpiCards && kpiCards.length > 0) || loading) && (\r\n                        <SummaryCards cards={kpiCards || []} loading={loading} />\r\n                    )}\r\n\r\n                    {/* Main Content: Charts or Table */}\r\n                    <div className=\"space-y-4 w-full\">\r\n                        {charts && (\r\n                            <div className=\"bg-app-surface/30 backdrop-blur-sm border border-app-border/30 rounded-3xl p-6 w-full overflow-hidden shadow-sm\">\r\n                                <div className=\"mb-6 shadow-none pb-2 border-b border-app-border/20\">\r\n                                    <h3 className=\"font-black text-app-fg uppercase tracking-[0.2em] text-[11px]\">\r\n                                        Analytics Overview\r\n                                    </h3>\r\n                                </div>\r\n                                {charts}\r\n                            </div>\r\n                        )}\r\n\r\n                        {columns && data && (\r\n                            <div className=\"space-y-4 w-full\">\r\n                                {tableTitle && (\r\n                                    <div className=\"flex items-center justify-between px-1 mb-2\">\r\n                                        <h2 className=\"font-black text-app-fg uppercase tracking-[0.2em] text-[11px]\">\r\n                                            {tableTitle}\r\n                                        </h2>\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"surface-card p-0 overflow-hidden w-full\">\r\n                                    <div className=\"w-full overflow-x-auto\">\r\n                                        <DataTable\r\n                                            columns={columns}\r\n                                            data={data}\r\n                                            keyField={keyField}\r\n                                            page={page}\r\n                                            pageSize={pageSize}\r\n                                            totalItems={totalItems}\r\n                                            onPageChange={onPageChange}\r\n                                            loading={loading}\r\n                                            error={error}\r\n                                            emptyMessage={emptyMessage}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </DocumentTemplate>\r\n        );\r\n    }\r\n);\r\n\r\nReportsPageTemplate.displayName = \"ReportsPageTemplate\";\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\global\\BatchUploadCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Body' is defined but never used. Allowed unused vars must match /^_/u.","line":9,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":9},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SmallText' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Accounting' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'H4' is defined but never used. Allowed unused vars must match /^_/u.","line":16,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":7},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'uploadType' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":27,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":19},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":88,"column":43,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":88,"endColumn":89},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":94,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":94,"endColumn":101},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":95,"column":38,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":95,"endColumn":129},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":121,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":121,"endColumn":124},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":124,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":124,"endColumn":150},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":155,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":155,"endColumn":149},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":158,"column":46,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":158,"endColumn":122},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":184,"column":50,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":184,"endColumn":155},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":209,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":209,"endColumn":208},{"ruleId":"no-restricted-syntax","severity":1,"message":"VIOLATION: Use Typography atoms (H1, H2, Accounting) instead of manual font classes.","line":217,"column":41,"nodeType":"JSXAttribute","messageId":"restrictedSyntax","endLine":217,"endColumn":214}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { X, Minimize2, Maximize2, CheckCircle, AlertCircle, Loader2 } from \"lucide-react\";\r\nimport { useUpload } from \"@/components/providers/UploadContext\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport {\r\n    Body,\r\n    SmallText,\r\n    Accounting,\r\n    Button,\r\n    Flex,\r\n    Stack,\r\n    Box,\r\n    H4,\r\n} from \"@/components/design-system\";\r\n\r\nexport default function BatchUploadCard() {\r\n    const {\r\n        isUploading,\r\n        progress,\r\n        acceptedCount,\r\n        rejectedCount,\r\n        minimized,\r\n        files,\r\n        uploadType,\r\n        cancelUpload,\r\n        setMinimized,\r\n        resetUpload,\r\n    } = useUpload();\r\n\r\n    // Only show if there's active state or finding results\r\n    const isVisible = isUploading || (progress.total > 0 && progress.current === progress.total);\r\n\r\n    if (!isVisible) return null;\r\n\r\n    const isComplete = progress.total > 0 && progress.current === progress.total;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            <motion.div\r\n                drag\r\n                dragMomentum={false}\r\n                initial={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                exit={{ opacity: 0, y: -20, scale: 0.9 }}\r\n                className={cn(\r\n                    \"fixed bottom-12 right-8 z-[100] cursor-grab active:cursor-grabbing\",\r\n                    minimized ? \"w-auto\" : \"w-[400px]\"\r\n                )}\r\n            >\r\n                <div\r\n                    className={cn(\r\n                        \"rounded-[2.5rem] transition-all duration-300 overflow-hidden\",\r\n                        \"glass-panel shadow-macos-soft border border-white/40 dark:border-white/10\",\r\n                        minimized ? \"p-2 pr-6\" : \"p-0\"\r\n                    )}\r\n                >\r\n                    {minimized ? (\r\n                        <Flex align=\"center\" gap={3.5}>\r\n                            <Box className=\"relative w-12 h-12 flex items-center justify-center bg-gray-100/50 dark:bg-white/10 rounded-full shadow-inner border border-white/20 dark:border-white/5\">\r\n                                <svg className=\"w-full h-full transform -rotate-90 p-2\">\r\n                                    <circle\r\n                                        cx=\"16\"\r\n                                        cy=\"16\"\r\n                                        r=\"14\"\r\n                                        stroke=\"currentColor\"\r\n                                        strokeWidth=\"3\"\r\n                                        fill=\"transparent\"\r\n                                        className=\"text-gray-400/20\"\r\n                                        viewBox=\"0 0 32 32\"\r\n                                    />\r\n                                    <circle\r\n                                        cx=\"16\"\r\n                                        cy=\"16\"\r\n                                        r=\"14\"\r\n                                        stroke=\"#007AFF\"\r\n                                        strokeWidth=\"3\"\r\n                                        fill=\"transparent\"\r\n                                        strokeDasharray={88}\r\n                                        strokeDashoffset={88 - (88 * progress.current) / progress.total}\r\n                                        className=\"transition-all duration-500 ease-out shadow-[0_0_8px_rgba(0,122,255,0.4)]\"\r\n                                        viewBox=\"0 0 32 32\"\r\n                                    />\r\n                                </svg>\r\n                                <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                    <span className=\"text-[11px] font-bold text-primary\">\r\n                                        {Math.round((progress.current / (progress.total || 1)) * 100)}%\r\n                                    </span>\r\n                                </div>\r\n                            </Box>\r\n                            <Stack gap={0}>\r\n                                <div className=\"text-[12px] font-semibold text-app-fg leading-tight\">Processing</div>\r\n                                <div className=\"text-[10px] font-bold text-gray-500 dark:text-gray-400 uppercase tracking-tight\">\r\n                                    {progress.current}/{progress.total} Ingested\r\n                                </div>\r\n                            </Stack>\r\n                            <Button\r\n                                variant=\"ghost\"\r\n                                size=\"compact\"\r\n                                className=\"h-8 w-8 ml-3 hover:bg-white/40 dark:hover:bg-white/10 rounded-full\"\r\n                                onClick={() => setMinimized(false)}\r\n                            >\r\n                                <Maximize2 size={15} className=\"text-gray-500\" />\r\n                            </Button>\r\n                        </Flex>\r\n                    ) : (\r\n                        <div className=\"p-8\">\r\n                            <Flex justify=\"between\" align=\"start\" className=\"mb-8\">\r\n                                <Flex align=\"center\" gap={4.5}>\r\n                                    <Box className={cn(\r\n                                        \"w-16 h-16 rounded-[22px] flex items-center justify-center shadow-lg transition-all duration-500 border border-white/40 shadow-blue-500/20\",\r\n                                        isComplete\r\n                                            ? \"bg-green-500 text-white\"\r\n                                            : \"bg-primary text-white\"\r\n                                    )}>\r\n                                        {isComplete ? <CheckCircle size={32} /> : <Loader2 size={32} className=\"animate-spin\" />}\r\n                                    </Box>\r\n                                    <Stack gap={0.5}>\r\n                                        <div className=\"text-[22px] font-semibold text-app-fg tracking-tight leading-tight\">\r\n                                            {isComplete ? \"Finalized\" : `Matrix Ingestion`}\r\n                                        </div>\r\n                                        <div className=\"text-[11px] font-bold uppercase tracking-[0.1em] text-gray-500 dark:text-gray-400 opacity-70\">\r\n                                            {files.length} Document{files.length !== 1 ? 's' : ''} Streamed\r\n                                        </div>\r\n                                    </Stack>\r\n                                </Flex>\r\n                                <Flex gap={2}>\r\n                                    <Button\r\n                                        variant=\"ghost\"\r\n                                        size=\"compact\"\r\n                                        className=\"h-9 w-9 rounded-full bg-gray-100/50 dark:bg-white/10 hover:bg-white/70 dark:hover:bg-white/20 text-gray-500 transition-all\"\r\n                                        onClick={() => setMinimized(true)}\r\n                                    >\r\n                                        <Minimize2 size={16} />\r\n                                    </Button>\r\n                                    {isComplete && (\r\n                                        <Button\r\n                                            variant=\"ghost\"\r\n                                            size=\"compact\"\r\n                                            className=\"h-9 w-9 rounded-full bg-red-50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 text-red-500 transition-all\"\r\n                                            onClick={resetUpload}\r\n                                        >\r\n                                            <X size={16} />\r\n                                        </Button>\r\n                                    )}\r\n                                </Flex>\r\n                            </Flex>\r\n\r\n                            <Stack gap={8}>\r\n                                {/* Progress Bar */}\r\n                                <Box className=\"w-full\">\r\n                                    <Flex justify=\"between\" align=\"end\" className=\"mb-3 w-full px-1\">\r\n                                        <div className=\"text-[11px] font-bold uppercase tracking-widest text-gray-500 dark:text-gray-400 opacity-60\">\r\n                                            Parser Velocity\r\n                                        </div>\r\n                                        <div className=\"text-[26px] font-bold text-primary tracking-tighter tabular-nums\">\r\n                                            {Math.round((progress.current / (progress.total || 1)) * 100)}%\r\n                                        </div>\r\n                                    </Flex>\r\n                                    <div className=\"h-4 w-full bg-gray-200/50 dark:bg-white/5 rounded-full overflow-hidden border border-white/20 dark:border-white/5 p-1\">\r\n                                        <motion.div\r\n                                            className={cn(\r\n                                                \"h-full rounded-full shadow-[0_0_12px_rgba(0,122,255,0.4)] relative overflow-hidden transition-all duration-300\",\r\n                                                isComplete ? \"bg-green-500\" : \"bg-primary\"\r\n                                            )}\r\n                                            initial={{ width: 0 }}\r\n                                            animate={{\r\n                                                width: `${(progress.current / (progress.total || 1)) * 100}%`,\r\n                                            }}\r\n                                            transition={{ type: \"spring\", damping: 25, stiffness: 120 }}\r\n                                        >\r\n                                            <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-[shimmer_2s_infinite]\" />\r\n                                        </motion.div>\r\n                                    </div>\r\n                                </Box>\r\n\r\n                                {/* Grid Stats */}\r\n                                <div className=\"grid grid-cols-2 gap-5 w-full\">\r\n                                    <Box className=\"flex flex-col items-center justify-center p-6 bg-green-50/50 dark:bg-green-500/10 border border-green-500/20 rounded-[2rem] shadow-sm h-32 group hover:scale-[1.02] transition-all\">\r\n                                        <Flex align=\"center\" gap={2} className=\"mb-2\">\r\n                                            <CheckCircle size={14} className=\"text-green-500\" />\r\n                                            <div className=\"text-[11px] font-bold uppercase tracking-widest text-green-600 dark:text-green-400 opacity-80\">Accepted</div>\r\n                                        </Flex>\r\n                                        <div className=\"text-3xl font-bold text-green-600 dark:text-green-400 tracking-tighter tabular-nums\">{acceptedCount}</div>\r\n                                    </Box>\r\n\r\n                                    <Box className={cn(\r\n                                        \"flex flex-col items-center justify-center p-6 rounded-[2rem] shadow-sm h-32 border transition-all hover:scale-[1.02] group\",\r\n                                        rejectedCount > 0\r\n                                            ? \"bg-red-50/50 dark:bg-red-500/10 border-red-500/20\"\r\n                                            : \"bg-gray-50/50 dark:bg-white/5 border-gray-200/40 dark:border-white/10\"\r\n                                    )}>\r\n                                        <Flex align=\"center\" gap={2} className=\"mb-2\">\r\n                                            <AlertCircle size={14} className={rejectedCount > 0 ? \"text-red-500\" : \"text-gray-400\"} />\r\n                                            <div className={cn(\"text-[11px] font-bold uppercase tracking-widest opacity-80\", rejectedCount > 0 ? \"text-red-600 dark:text-red-400\" : \"text-gray-500 dark:text-gray-400\")}>Rejected</div>\r\n                                        </Flex>\r\n                                        <div className={cn(\"text-3xl font-bold tracking-tighter tabular-nums\", rejectedCount > 0 ? \"text-red-600 dark:text-red-400\" : \"text-gray-300 dark:text-gray-600\")}>{rejectedCount}</div>\r\n                                    </Box>\r\n                                </div>\r\n\r\n                                {/* Actions */}\r\n                                {!isComplete && (\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        size=\"lg\"\r\n                                        onClick={cancelUpload}\r\n                                        className=\"w-full text-red-500 hover:text-white hover:bg-red-500 border-red-500/20 h-14 font-bold tracking-[0.1em] text-[12px] uppercase rounded-[20px] transition-all\"\r\n                                    >\r\n                                        Halt Provisioning\r\n                                    </Button>\r\n                                )}\r\n                                {isComplete && (\r\n                                    <Button\r\n                                        onClick={resetUpload}\r\n                                        className=\"w-full bg-primary hover:bg-primary/90 text-white shadow-xl shadow-blue-500/30 h-14 font-bold tracking-[0.1em] text-[12px] uppercase rounded-[20px] transition-all\"\r\n                                    >\r\n                                        Dismiss Ledger\r\n                                    </Button>\r\n                                )}\r\n                            </Stack>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\providers\\ThemeProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\components\\providers\\UploadContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'accepted' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":75,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'rejected' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":76,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { createContext, useContext, useState, useRef, useCallback } from \"react\";\r\nimport { api } from \"@/lib/api\";\r\n\r\ntype UploadType = \"PO\" | \"SRV\" | null;\r\n\r\ninterface UploadContextType {\r\n    isUploading: boolean;\r\n    progress: { current: number; total: number };\r\n    files: File[];\r\n    acceptedCount: number;\r\n    rejectedCount: number;\r\n    uploadType: UploadType;\r\n    minimized: boolean;\r\n    startUpload: (files: File[], type: UploadType) => Promise<void>;\r\n    cancelUpload: () => void;\r\n    resetUpload: () => void;\r\n    setMinimized: (minimized: boolean) => void;\r\n}\r\n\r\nconst UploadContext = createContext<UploadContextType | undefined>(undefined);\r\n\r\nexport function UploadProvider({ children }: { children: React.ReactNode }) {\r\n    const [isUploading, setIsUploading] = useState(false);\r\n    const [files, setFiles] = useState<File[]>([]);\r\n    const [progress, setProgress] = useState({ current: 0, total: 0 });\r\n    const [acceptedCount, setAcceptedCount] = useState(0);\r\n    const [rejectedCount, setRejectedCount] = useState(0);\r\n    const [uploadType, setUploadType] = useState<UploadType>(null);\r\n    const [minimized, setMinimized] = useState(false);\r\n\r\n    const isCancelled = useRef(false);\r\n\r\n    const startUpload = useCallback(async (selectedFiles: File[], type: UploadType) => {\r\n        if (selectedFiles.length === 0) return;\r\n\r\n        setFiles(selectedFiles);\r\n        setUploadType(type);\r\n        // ATOMIC UI TRIGGER: Start loading state. \r\n        // Consumers must wait for this to flip back to false before reloading data.\r\n        setIsUploading(true);\r\n        setStatusReset();\r\n        setProgress({ current: 0, total: selectedFiles.length });\r\n        setMinimized(false);\r\n        isCancelled.current = false;\r\n\r\n        let processedCount = 0;\r\n        let accepted = 0;\r\n        let rejected = 0;\r\n\r\n        try {\r\n            const CHUNK_SIZE = 5;\r\n            for (let i = 0; i < selectedFiles.length; i += CHUNK_SIZE) {\r\n                if (isCancelled.current) break;\r\n\r\n                const chunk = selectedFiles.slice(i, i + CHUNK_SIZE);\r\n\r\n\r\n                if (type === \"PO\") {\r\n                    const response = await api.uploadPOBatch(chunk);\r\n                    const chunkAccepted = response.successful || 0;\r\n                    const chunkRejected = response.failed || 0;\r\n\r\n                    accepted += chunkAccepted;\r\n                    rejected += chunkRejected;\r\n\r\n                    setAcceptedCount((prev) => prev + chunkAccepted);\r\n                    setRejectedCount((prev) => prev + chunkRejected);\r\n                } else if (type === \"SRV\") {\r\n                    const response = await api.uploadSRVBatch(chunk);\r\n                    const chunkAccepted = response.successful || 0;\r\n                    const chunkRejected = response.failed || 0;\r\n\r\n                    accepted += chunkAccepted;\r\n                    rejected += chunkRejected;\r\n\r\n                    setAcceptedCount((prev) => prev + chunkAccepted);\r\n                    setRejectedCount((prev) => prev + chunkRejected);\r\n                }\r\n\r\n                processedCount += chunk.length;\r\n\r\n                // Atomic State Updates for Progress Ring\r\n                // setAcceptedCount moved to specific handlers above\r\n                // In future, parse API response for actual rejected count\r\n\r\n                setProgress({\r\n                    current: processedCount,\r\n                    total: selectedFiles.length,\r\n                });\r\n\r\n                // Yield to event loop to keep UI responsive\r\n                await new Promise((resolve) => setTimeout(resolve, 50));\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Upload failed in batch:\", error);\r\n            // In a real app, we'd mark the failed chunk as rejected\r\n        } finally {\r\n            // CRITICAL: Only turn off uploading state after EVERYTHING is done.\r\n            // This ensures the readiness check passes before the table tries to reload.\r\n            setIsUploading(false);\r\n            isCancelled.current = false;\r\n        }\r\n    }, []);\r\n\r\n    const cancelUpload = useCallback(() => {\r\n        isCancelled.current = true;\r\n        setIsUploading(false);\r\n    }, []);\r\n\r\n    const resetUpload = useCallback(() => {\r\n        setFiles([]);\r\n        setProgress({ current: 0, total: 0 });\r\n        setAcceptedCount(0);\r\n        setRejectedCount(0);\r\n        setUploadType(null);\r\n        setIsUploading(false);\r\n        setMinimized(false);\r\n    }, []);\r\n\r\n    const setStatusReset = () => {\r\n        setAcceptedCount(0);\r\n        setRejectedCount(0);\r\n    }\r\n\r\n    return (\r\n        <UploadContext.Provider\r\n            value={{\r\n                isUploading,\r\n                progress,\r\n                files,\r\n                acceptedCount,\r\n                rejectedCount,\r\n                uploadType,\r\n                minimized,\r\n                startUpload,\r\n                cancelUpload,\r\n                resetUpload,\r\n                setMinimized,\r\n            }}\r\n        >\r\n            {children}\r\n        </UploadContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useUpload() {\r\n    const context = useContext(UploadContext);\r\n    if (context === undefined) {\r\n        throw new Error(\"useUpload must be used within a UploadProvider\");\r\n    }\r\n    return context;\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\e2e\\dashboard.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\e2e\\dc-workflow.spec.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":44,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":44,"endColumn":24,"suggestions":[{"fix":{"range":[2020,2088],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\r\n\r\ntest.describe('Delivery Challan Workflow', () => {\r\n    test.beforeEach(async ({ page }) => {\r\n        await page.goto('/dc');\r\n        await page.waitForLoadState('networkidle');\r\n    });\r\n\r\n    test('should load the DC page and handle empty list or table', async ({ page }) => {\r\n        await expect(page.getByRole('heading', { name: /DELIVERY CHALLANS/i }).first()).toBeVisible();\r\n\r\n        // Check if either the table is present OR the empty message is shown\r\n        const dcTable = page.locator('table');\r\n        const emptyMessage = page.locator('text=No delivery challans found');\r\n\r\n        // Use a custom locator to check for one or the other\r\n        await expect(dcTable.or(emptyMessage)).toBeVisible();\r\n    });\r\n\r\n    test('should navigate to Create DC page from the list', async ({ page }) => {\r\n        // Look for the button more aggressively\r\n        const createBtn = page.getByRole('button', { name: /New DC/i });\r\n        await expect(createBtn).toBeVisible();\r\n        await createBtn.click();\r\n\r\n        // Wait for URL change\r\n        await expect(page).toHaveURL(/\\/dc\\/create$/, { timeout: 10000 });\r\n        await expect(page.getByRole('heading', { name: /Create Delivery Challan/i }).first()).toBeVisible();\r\n    });\r\n\r\n    test('should view a specific DC detail (if exists)', async ({ page }) => {\r\n        // This test will only run successfully if there is data\r\n        // If not, we skip it or just verify the empty state\r\n        const firstDCLink = page.locator('table tbody tr td a').first();\r\n        const count = await firstDCLink.count();\r\n\r\n        if (count > 0) {\r\n            const dcNumber = (await firstDCLink.textContent())?.trim();\r\n            await firstDCLink.click();\r\n            await expect(page).toHaveURL(new RegExp(`/dc/${encodeURIComponent(dcNumber!)}`));\r\n\r\n            await expect(page.getByRole('heading', { name: new RegExp(`DC #?${dcNumber}`, 'i') })).toBeVisible();\r\n        } else {\r\n            console.log('Skipping DC detail test: No DCs found in the system.');\r\n        }\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\e2e\\invoice-workflow.spec.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":46,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":46,"endColumn":24,"suggestions":[{"fix":{"range":[1992,2056],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\r\n\r\ntest.describe('Invoice Workflow', () => {\r\n    test.beforeEach(async ({ page }) => {\r\n        await page.goto('/invoice');\r\n        await page.waitForLoadState('networkidle');\r\n    });\r\n\r\n    test('should load the Invoice page and handle empty list or table', async ({ page }) => {\r\n        await expect(page.getByRole('heading', { name: /INVOICE/i }).first()).toBeVisible();\r\n\r\n        // Check if either table is present OR the empty message is shown\r\n        const invoiceTable = page.locator('table');\r\n        const emptyMessage = page.locator('text=No invoices found');\r\n\r\n        await expect(invoiceTable.or(emptyMessage)).toBeVisible();\r\n    });\r\n\r\n    test('should navigate to Create Invoice page', async ({ page }) => {\r\n        const createBtn = page.getByRole('button', { name: /New Invoice/i });\r\n        await expect(createBtn).toBeVisible();\r\n        await createBtn.click();\r\n\r\n        // Updated standard regex to handle query params if any\r\n        await expect(page).toHaveURL(/.*\\/invoice\\/create$/, { timeout: 10000 });\r\n        await expect(page.getByRole('heading', { name: /Create GST Invoice/i }).first()).toBeVisible();\r\n    });\r\n\r\n    test('should view a specific Invoice detail and verify print options (if exists)', async ({ page }) => {\r\n        const firstInvoiceLink = page.locator('table tbody tr td a').first();\r\n        const count = await firstInvoiceLink.count();\r\n\r\n        if (count > 0) {\r\n            const invNumber = (await firstInvoiceLink.textContent())?.trim();\r\n            await firstInvoiceLink.click();\r\n\r\n            // Check URL and heading\r\n            await expect(page).toHaveURL(\r\n                new RegExp(`/invoice/${encodeURIComponent(invNumber || '')}`)\r\n            );\r\n\r\n            // Verify presence of Print button\r\n            const printBtn = page.getByRole('button', { name: /Print/i });\r\n            await expect(printBtn).toBeVisible();\r\n        } else {\r\n            console.log('Skipping Invoice detail test: No Invoices found.');\r\n        }\r\n    });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\e2e\\po-workflow.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\hooks\\useDebounce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\hooks\\useFetch.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1735,1738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1735,1738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6816,6819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6816,6819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect, useCallback, useRef } from \"react\";\r\n\r\n/**\r\n * useFetch - Fetch hook with exponential backoff retry\r\n *\r\n * Automatically retries failed requests with exponential backoff:\r\n * - Retry 1: Wait 1 second\r\n * - Retry 2: Wait 2 seconds\r\n * - Retry 3: Wait 4 seconds\r\n *\r\n * Supports:\r\n * - Unified SuccessResponse format { status: \"success\", data: T }\r\n * - Legacy direct response format (fallback)\r\n * - Automatic cancellation on unmount\r\n * - TypeScript generics for type-safe data\r\n *\r\n * @example\r\n * ```tsx\r\n * const { data, loading, error, refetch } = useFetch<POListItem[]>('/api/po');\r\n *\r\n * if (loading) return <Skeleton />;\r\n * if (error) return <ErrorMessage error={error} />;\r\n * return <DataTable data={data} />;\r\n * ```\r\n */\r\nexport interface UseFetchOptions extends RequestInit {\r\n    /**\r\n     * Number of retry attempts (default: 3)\r\n     */\r\n    retries?: number;\r\n    /**\r\n     * Initial delay in ms before first retry (default: 1000)\r\n     * Subsequent retries use exponential backoff: delay * 2^attempt\r\n     */\r\n    retryDelay?: number;\r\n    /**\r\n     * Skip automatic execution on mount (default: false)\r\n     * Use when you want to trigger fetch manually via refetch()\r\n     */\r\n    manual?: boolean;\r\n}\r\n\r\nexport interface UseFetchResult<T> {\r\n    /**\r\n     * Response data (null until loaded)\r\n     */\r\n    data: T | null;\r\n    /**\r\n     * Loading state\r\n     */\r\n    loading: boolean;\r\n    /**\r\n     * Error if request failed after all retries\r\n     */\r\n    error: Error | null;\r\n    /**\r\n     * Manually trigger a refetch\r\n     */\r\n    refetch: () => Promise<void>;\r\n    /**\r\n     * Cancel any in-flight request\r\n     */\r\n    cancel: () => void;\r\n}\r\n\r\nexport function useFetch<T = any>(\r\n    url: string,\r\n    options: UseFetchOptions = {}\r\n): UseFetchResult<T> {\r\n    const {\r\n        retries = 3,\r\n        retryDelay = 1000,\r\n        manual = false,\r\n        ...fetchOptions\r\n    } = options;\r\n\r\n    const [data, setData] = useState<T | null>(null);\r\n    const [loading, setLoading] = useState(!manual);\r\n    const [error, setError] = useState<Error | null>(null);\r\n\r\n    // Track if component is mounted\r\n    const isMountedRef = useRef(true);\r\n    const abortControllerRef = useRef<AbortController | null>(null);\r\n\r\n    /**\r\n     * Fetch with retry logic\r\n     */\r\n    const fetchWithRetry = useCallback(\r\n        async (attempts = retries): Promise<void> => {\r\n            // Create new AbortController for this request\r\n            const abortController = new AbortController();\r\n            abortControllerRef.current = abortController;\r\n\r\n            for (let attempt = 0; attempt < attempts; attempt++) {\r\n                try {\r\n                    if (attempt === 0) {\r\n                        setLoading(true);\r\n                        setError(null);\r\n                    }\r\n\r\n                    const response = await fetch(url, {\r\n                        ...fetchOptions,\r\n                        signal: abortController.signal,\r\n                    });\r\n\r\n                    // Check if request was cancelled\r\n                    if (abortController.signal.aborted) {\r\n                        return;\r\n                    }\r\n\r\n                    // Handle HTTP errors\r\n                    if (!response.ok) {\r\n                        throw new Error(\r\n                            `HTTP ${response.status}: ${response.statusText}`\r\n                        );\r\n                    }\r\n\r\n                    const json = await response.json();\r\n\r\n                    // Handle unified SuccessResponse format\r\n                    // { status: \"success\", data: T, pagination?: {...} }\r\n                    const extractedData = json.data !== undefined ? json.data : json;\r\n\r\n                    // Only update state if component is still mounted\r\n                    if (isMountedRef.current) {\r\n                        setData(extractedData);\r\n                        setLoading(false);\r\n                        setError(null);\r\n                    }\r\n                    return; // Success - exit retry loop\r\n                } catch (err) {\r\n                    // Check if request was cancelled\r\n                    if (err instanceof Error && err.name === \"AbortError\") {\r\n                        return;\r\n                    }\r\n\r\n                    const error = err instanceof Error ? err : new Error(String(err));\r\n\r\n                    // Last attempt failed\r\n                    if (attempt === attempts - 1) {\r\n                        if (isMountedRef.current) {\r\n                            setError(error);\r\n                            setLoading(false);\r\n                        }\r\n                        console.error(`[useFetch] Failed after ${attempts} attempts:`, error);\r\n                        return;\r\n                    }\r\n\r\n                    // Calculate exponential backoff delay\r\n                    const delay = retryDelay * Math.pow(2, attempt);\r\n                    console.warn(\r\n                        `[useFetch] Attempt ${attempt + 1}/${attempts} failed. Retrying in ${delay}ms...`,\r\n                        error.message\r\n                    );\r\n\r\n                    // Wait before retrying\r\n                    await new Promise((resolve) => setTimeout(resolve, delay));\r\n                }\r\n            }\r\n        },\r\n        [url, retries, retryDelay, fetchOptions]\r\n    );\r\n\r\n    /**\r\n     * Cancel any in-flight request\r\n     */\r\n    const cancel = useCallback(() => {\r\n        if (abortControllerRef.current) {\r\n            abortControllerRef.current.abort();\r\n            abortControllerRef.current = null;\r\n        }\r\n    }, []);\r\n\r\n    /**\r\n     * Manual refetch function\r\n     */\r\n    const refetch = useCallback(async () => {\r\n        cancel(); // Cancel any existing request\r\n        await fetchWithRetry();\r\n    }, [cancel, fetchWithRetry]);\r\n\r\n    // Auto-fetch on mount (unless manual mode)\r\n    useEffect(() => {\r\n        if (!manual) {\r\n            fetchWithRetry();\r\n        }\r\n\r\n        // Cleanup: mark as unmounted and cancel request\r\n        // NOTE: We return the cleanup function but it only runs on actual unmount\r\n        return () => {\r\n            isMountedRef.current = false;\r\n            // Don't cancel immediately - let in-flight requests complete\r\n            // cancel();\r\n        };\r\n    }, [manual, fetchWithRetry]);\r\n\r\n    return {\r\n        data,\r\n        loading,\r\n        error,\r\n        refetch,\r\n        cancel,\r\n    };\r\n}\r\n\r\n/**\r\n * Specialized hook for paginated endpoints\r\n * Handles pagination metadata from SuccessResponse\r\n */\r\nexport interface PaginatedResponse<T> {\r\n    data: T[];\r\n    pagination: {\r\n        total_items: number;\r\n        page: number;\r\n        total_pages: number;\r\n        limit: number;\r\n    };\r\n}\r\n\r\nexport function useFetchPaginated<T = any>(\r\n    baseUrl: string,\r\n    page: number = 1,\r\n    limit: number = 10,\r\n    options: UseFetchOptions = {}\r\n) {\r\n    const url = `${baseUrl}?skip=${(page - 1) * limit}&limit=${limit}`;\r\n    const result = useFetch<PaginatedResponse<T>>(url, options);\r\n\r\n    return {\r\n        ...result,\r\n        items: result.data?.data || [],\r\n        pagination: result.data?.pagination || null,\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\adapters.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DCHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'POHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":10,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'InvoiceItem' is defined but never used. Allowed unused vars must match /^_/u.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'InvoiceHeader' is defined but never used. Allowed unused vars must match /^_/u.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":18},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4794,4797],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4794,4797],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[574,577],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[574,577],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4002,4005],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4002,4005],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Data Adapters for API â†” UI Transformation\r\n * Ensures type safety between backend (snake_case) and frontend (camelCase)\r\n */\r\n\r\nimport type {\r\n    DCItemRow,\r\n    DCHeader,\r\n    POItem,\r\n    POHeader,\r\n    InvoiceItem,\r\n    InvoiceHeader,\r\n} from \"@/types\";\r\n\r\n// ============================================================\r\n// DC ITEM ADAPTERS\r\n// ============================================================\r\n\r\n/**\r\n * Transform API DC item to UI format\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function dcItemFromAPI(apiItem: any): DCItemRow {\r\n    return {\r\n        id: apiItem.id || `${apiItem.po_item_id}-${apiItem.lot_no}`,\r\n        po_item_id: apiItem.po_item_id,\r\n        po_item_no: apiItem.po_item_no,\r\n        lot_no: apiItem.lot_no,\r\n        material_code: apiItem.material_code,\r\n        material_description: apiItem.material_description,\r\n        description: apiItem.material_description || apiItem.description,\r\n        unit: apiItem.unit,\r\n        po_rate: apiItem.po_rate,\r\n        lot_ordered_quantity:\r\n            apiItem.lot_ordered_qty || apiItem.lot_ordered_quantity,\r\n        ordered_quantity: apiItem.ordered_quantity || apiItem.lot_ordered_quantity,\r\n        already_dispatched: apiItem.already_dispatched,\r\n        remaining_quantity: apiItem.remaining_quantity || apiItem.remaining_qty,\r\n        dispatched_quantity: apiItem.dispatched_quantity || 0,\r\n        dispatch_quantity:\r\n            apiItem.dispatched_quantity || apiItem.dispatch_quantity || 0,\r\n        hsn_code: apiItem.hsn_code,\r\n        hsn_rate: apiItem.hsn_rate,\r\n        remaining_post_dc: apiItem.remaining_post_dc,\r\n    };\r\n}\r\n\r\n/**\r\n * Transform UI DC item to API format\r\n */\r\nexport function dcItemToAPI(uiItem: DCItemRow): Record<string, unknown> {\r\n    return {\r\n        po_item_id: uiItem.po_item_id,\r\n        lot_no: uiItem.lot_no ? parseInt(String(uiItem.lot_no)) : undefined,\r\n        dispatch_quantity: uiItem.dispatch_quantity || uiItem.dispatched_quantity,\r\n        // Backend expects 'dispatched_quantity' alias in models? No, create_dc uses dictionary.\r\n        // routers/dc.py create_dc uses \"items: List[dict]\".\r\n        // service_create_dc reads \"dispatch_qty\" usually?\r\n        // I need to check backend service creation logic.\r\n        // But assuming standardized naming, I should send \"dispatched_quantity\" or \"dispatch_qty\".\r\n        // The router aliases INPUT?\r\n        // `service_create_dc` validation: `item.get(\"dispatch_qty\")`.\r\n        // I did NOT update `service_create_dc` to use `dispatched_quantity` in logic yet?\r\n        // Phase 2 \"Move Business Logic\" might address that.\r\n        // But for now, backend expects `dispatch_qty` in `create_dc` payload likely.\r\n        // Wait, I updated `models.py` `DCListItem`.\r\n        // But `create_dc` accepts `items: List[dict]`.\r\n        // `routers/dc.py` documentation says `items format: [{ ... \"dispatch_qty\": 10 ... }]`\r\n        // So I must stick to `dispatch_qty` for POST payload unless I change backend acceptance.\r\n        // User said \"Standardize Quantity Field Naming (Backend)\".\r\n        // I should probably start sending `dispatched_quantity` and update backend to accept it.\r\n        // But safely, I can send BOTH. Or check backend logic.\r\n        // I'll check backend logic in next step. For now, sending `dispatch_qty` (legacy) is safer if backend not updated for INPUT.\r\n        // But `types/index.ts` `DCItemRow` has `dispatched_quantity`.\r\n        // `dcItemToAPI` returns `any`.\r\n        dispatch_qty: uiItem.dispatch_quantity || uiItem.dispatched_quantity,\r\n        hsn_code: uiItem.hsn_code,\r\n        hsn_rate: uiItem.hsn_rate,\r\n    };\r\n}\r\n\r\n// ============================================================\r\n// PO ITEM ADAPTERS\r\n// ============================================================\r\n\r\n/**\r\n * Transform API PO item to UI format\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport function poItemFromAPI(apiItem: any): POItem {\r\n    return {\r\n        id: apiItem.id,\r\n        po_item_no: apiItem.po_item_no,\r\n        material_code: apiItem.material_code,\r\n        material_description: apiItem.material_description,\r\n        drg_no: apiItem.drg_no,\r\n        mtrl_cat: apiItem.mtrl_cat,\r\n        unit: apiItem.unit,\r\n        po_rate: apiItem.po_rate,\r\n        ordered_quantity: apiItem.ordered_quantity || apiItem.ord_qty,\r\n        received_quantity: apiItem.received_quantity || apiItem.rcd_qty,\r\n        item_value: apiItem.item_value,\r\n        hsn_code: apiItem.hsn_code,\r\n        delivered_quantity: apiItem.delivered_quantity || apiItem.delivered_qty,\r\n        pending_quantity: apiItem.pending_quantity || apiItem.pending_qty,\r\n         \r\n        deliveries:\r\n            apiItem.deliveries?.map((d: any) => ({\r\n                id: d.id,\r\n                lot_no: d.lot_no,\r\n                delivered_quantity: d.delivered_quantity || d.dely_qty,\r\n                dely_date: d.dely_date,\r\n                entry_allow_date: d.entry_allow_date,\r\n                dest_code: d.dest_code,\r\n            })) || [],\r\n    };\r\n}\r\n\r\n// ============================================================\r\n// VALIDATION HELPERS\r\n// ============================================================\r\n\r\n/**\r\n * Validate DC item before sending to API\r\n * Throws error if validation fails\r\n */\r\nexport function validateDCItem(item: DCItemRow): void {\r\n    const dispatchQty = item.dispatch_quantity || item.dispatched_quantity;\r\n    if (!item.po_item_id) {\r\n        throw new Error(\"PO item ID is required\");\r\n    }\r\n    if (!dispatchQty || dispatchQty <= 0) {\r\n        throw new Error(\"Dispatch quantity must be greater than 0\");\r\n    }\r\n    if (\r\n        item.remaining_quantity !== undefined &&\r\n        dispatchQty > item.remaining_quantity\r\n    ) {\r\n        throw new Error(\r\n            `Cannot dispatch ${dispatchQty} units. Only ${item.remaining_quantity} remaining.`\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Batch validate DC items\r\n */\r\nexport function validateDCItems(items: DCItemRow[]): void {\r\n    if (items.length === 0) {\r\n        throw new Error(\"At least one item is required\");\r\n    }\r\n    items.forEach((item, index) => {\r\n        try {\r\n            validateDCItem(item);\r\n        } catch (error) {\r\n            throw new Error(\r\n                `Item ${index + 1}: ${error instanceof Error ? error.message : \"Invalid item\"\r\n                }`\r\n            );\r\n        }\r\n    });\r\n}\r\n\r\n// ============================================================\r\n// UTILITY FUNCTIONS\r\n// ============================================================\r\n\r\n/**\r\n * Safe number parsing with fallback\r\n */\r\nexport function parseNumber(value: unknown, fallback: number = 0): number {\r\n    const parsed = typeof value === \"string\" ? parseFloat(value) : Number(value);\r\n    return isNaN(parsed) ? fallback : parsed;\r\n}\r\n\r\n/**\r\n * Safe string conversion\r\n */\r\nexport function toString(value: unknown): string {\r\n    return value === null || value === undefined ? \"\" : String(value);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1064,1067],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1064,1067],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":55,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1381,1384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1381,1384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":88,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2096,2099],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2096,2099],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2184,2187],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2184,2187],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2249,2252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2249,2252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2264,2267],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2264,2267],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":104,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":104,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2544,2547],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2544,2547],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":154,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":154,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3662,3665],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3662,3665],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":193,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":193,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4464,4467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4464,4467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":201,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4611,4614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4611,4614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":205,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4786,4789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4786,4789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":219,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":219,"endColumn":20,"suggestions":[{"fix":{"range":[5233,5274],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":226,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":226,"endColumn":20,"suggestions":[{"fix":{"range":[5480,5531],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":245,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":245,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6057,6060],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6057,6060],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":253,"column":7,"nodeType":"MemberExpression","messageId":"limited","endLine":253,"endColumn":20,"suggestions":[{"fix":{"range":[6252,6295],"text":""},"messageId":"removeConsole","data":{"propertyName":"debug"},"desc":"Remove the console.debug()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":308,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":308,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7937,7940],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7937,7940],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":387,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":387,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10931,10934],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10931,10934],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":388,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":388,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11003,11006],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11003,11006],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":390,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":390,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11090,11093],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11090,11093],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":395,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":395,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11325,11328],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11325,11328],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":397,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":397,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11441,11444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11441,11444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":399,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":399,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11559,11562],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11559,11562],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":400,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":400,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11638,11641],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11638,11641],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":400,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":400,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11650,11653],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11650,11653],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":405,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":405,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11804,11807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11804,11807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":413,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":413,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12031,12034],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12031,12034],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":422,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":422,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12297,12300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12297,12300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":433,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12628,12631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12628,12631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":433,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":433,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12640,12643],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12640,12643],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":438,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":438,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12798,12801],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12798,12801],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":438,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":438,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12810,12813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12810,12813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":443,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":443,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12981,12984],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12981,12984],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":445,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":445,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13069,13072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13069,13072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":447,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":447,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13179,13182],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13179,13182],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":449,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":449,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13265,13268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13265,13268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":454,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":454,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13499,13502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13499,13502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":457,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":457,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13649,13652],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13649,13652],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":476,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":476,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14381,14384],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14381,14384],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":483,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":483,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14561,14564],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14561,14564],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":515,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":515,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15812,15815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15812,15815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":517,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":517,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15970,15973],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15970,15973],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":536,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":536,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16874,16877],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16874,16877],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":539,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":539,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16979,16982],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16979,16982],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":581,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":581,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18750,18753],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18750,18753],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":44,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ============================================================\r\n// CENTRALIZED API FETCH\r\n// ============================================================\r\n\r\nexport const API_BASE_URL =\r\n  typeof window !== \"undefined\"\r\n    ? \"\"\r\n    : process.env.NEXT_PUBLIC_API_URL || \"http://127.0.0.1:8000\";\r\n\r\nexport interface Buyer {\r\n  id: number;\r\n  name: string;\r\n  gstin: string;\r\n  billing_address: string;\r\n  shipping_address?: string;\r\n  designation?: string;\r\n  place_of_supply: string;\r\n  state?: string;\r\n  state_code?: string;\r\n  is_default: boolean;\r\n  is_active: boolean;\r\n  created_at: string;\r\n}\r\n\r\nexport interface POHeader {\r\n  po_number: string;\r\n  po_date: string;\r\n  supplier_name: string;\r\n  supplier_code: string;\r\n  supplier_email: string;\r\n  department_no: string;\r\n  po_value: number;\r\n  net_po_value: number;\r\n  tin_no: string;\r\n  ecc_no: string;\r\n  remarks: string;\r\n  project_name?: string;\r\n  status?: string;\r\n}\r\nexport interface POListItem {\r\n  po_number: number;\r\n  po_date: string;\r\n  vendor_name: string;\r\n  project_name: string;\r\n  items: any[];\r\n  total_amount?: number;\r\n  po_value?: number;\r\n  total_ordered_quantity?: number;\r\n  total_dispatched_quantity?: number;\r\n  total_received_quantity?: number;\r\n  total_rejected_quantity?: number;\r\n  total_pending_quantity?: number;\r\n  total_items_count?: number; // Added\r\n  status: string;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface POStats {\r\n  total_pos: number;\r\n  active_count: number; // Added for UI consumption\r\n  total_value: number;\r\n  pending_pos: number;\r\n  completed_pos: number;\r\n  open_orders_count: number;\r\n  pending_approval_count: number;\r\n  total_value_ytd: number;\r\n  total_value_change: number;\r\n  rejection_rate?: number; // Added\r\n}\r\n\r\nexport interface DCListItem {\r\n  dc_number: string;\r\n  dc_date: string;\r\n  po_number: number;\r\n  consignee_name: string;\r\n  total_value: number;\r\n  status: string;\r\n}\r\n\r\nexport interface DCStats {\r\n  total_challans: number;\r\n  pending_delivery: number;\r\n  completed_delivery: number;\r\n  total_value: number;\r\n}\r\n\r\nexport interface DCDetailResponse {\r\n  header: any; // Using any for flexibility during refactor, strictly typed in refactor\r\n  items: any[];\r\n}\r\n\r\nexport interface InvoiceDetailResponse {\r\n  header: any;\r\n  items: any[];\r\n}\r\n\r\nexport interface InvoiceListItem {\r\n  invoice_number: string;\r\n  invoice_date: string;\r\n  linked_dc_numbers: string; // Comma separated\r\n  customer_gstin: string;\r\n  total_invoice_value: number;\r\n  status?: string; // Optional if not always present\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface InvoiceStats {\r\n  total_invoiced: number;\r\n  total_invoiced_change: number;\r\n  gst_collected: number;\r\n  gst_collected_change: number;\r\n  pending_payments: number;\r\n  pending_payments_count: number;\r\n}\r\n\r\nexport interface Settings {\r\n  supplier_name: string;\r\n  supplier_description: string;\r\n  supplier_address: string;\r\n  supplier_gstin: string;\r\n  supplier_contact: string;\r\n  supplier_state: string;\r\n  supplier_state_code: string;\r\n}\r\n\r\nexport interface ReconciliationItem {\r\n  id: number;\r\n  po_item_no: number;\r\n  material_code: string;\r\n  material_description: string;\r\n  unit: string;\r\n  ord_qty: number;\r\n  dispatched_qty: number;\r\n  pending_qty: number;\r\n  status: string;\r\n}\r\n\r\nexport interface PONote {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface DashboardSummary {\r\n  total_sales_month: number;\r\n  sales_growth: number | string;\r\n  pending_pos: number;\r\n  new_pos_today: number;\r\n  active_challans: number;\r\n  total_po_value: number;\r\n  po_value_growth: number | string;\r\n  active_po_count: number;\r\n  revenue_momentum?: any[];\r\n  total_ordered?: number;\r\n  total_delivered?: number;\r\n  total_received?: number;\r\n}\r\n\r\n// Removed conflicting re-exports\r\n\r\nimport { SRVListItem, SRVStats } from \"@/types\";\r\nexport type { SRVListItem, SRVStats };\r\n\r\nexport interface ActivityItem {\r\n  type: \"PO\" | \"DC\" | \"Invoice\";\r\n  status: string;\r\n  number: string;\r\n  amount?: number;\r\n  date: string;\r\n}\r\n\r\nexport interface SearchResult {\r\n  id: string | number;\r\n  type: \"PO\" | \"DC\" | \"Invoice\" | \"SRV\";\r\n  number: string;\r\n  date: string;\r\n  party: string;\r\n  amount?: number;\r\n  type_label: string;\r\n  status?: string;\r\n}\r\n\r\ntype FetchOptions = RequestInit & {\r\n  retries?: number;\r\n  timeout?: number;\r\n};\r\n\r\nclass APIError extends Error {\r\n  constructor(\r\n    public status: number,\r\n    public message: string,\r\n    public data?: any,\r\n  ) {\r\n    super(message);\r\n    this.name = \"APIError\";\r\n  }\r\n}\r\n\r\n// --- SIMPLE CACHE SYSTEM ---\r\nconst GET_CACHE = new Map<string, { data: any; timestamp: number }>();\r\nconst CACHE_TTL = 5000; // 5 seconds cache for GET requests\r\n\r\n// --- DEDUPLICATION SYSTEM ---\r\nconst PENDING_REQUESTS = new Map<string, Promise<any>>();\r\n\r\nasync function apiFetch<T>(\r\n  endpoint: string,\r\n  options: FetchOptions = {},\r\n): Promise<T> {\r\n  const { retries = 0, timeout = 60000, ...fetchOptions } = options;\r\n  const url = `${API_BASE_URL}${endpoint}`;\r\n  const method = fetchOptions.method || \"GET\";\r\n\r\n  // Check Cache for GET requests\r\n  if (method === \"GET\") {\r\n    const cached = GET_CACHE.get(url);\r\n    if (cached && Date.now() - cached.timestamp < CACHE_TTL) {\r\n      console.debug(`[API] Cache Hit: ${url}`);\r\n      return cached.data as T;\r\n    }\r\n\r\n    // Deduplication: If a request for this URL is already in flight, reuse the promise\r\n    const pending = PENDING_REQUESTS.get(url);\r\n    if (pending) {\r\n      console.debug(`[API] Deduplication Reuse: ${url}`);\r\n      return pending as Promise<T>;\r\n    }\r\n  }\r\n\r\n  const fetchPromise = (async () => {\r\n    const headers: Record<string, string> = {\r\n      Accept: \"application/json\",\r\n      ...(fetchOptions.headers as Record<string, string>),\r\n    };\r\n\r\n    if (!(fetchOptions.body instanceof FormData)) {\r\n      headers[\"Content-Type\"] = \"application/json\";\r\n    }\r\n\r\n    // Add Auth Token if exists\r\n    if (typeof window !== \"undefined\") {\r\n      const token = localStorage.getItem(\"token\");\r\n      if (token) {\r\n        (headers as any)[\"Authorization\"] = `Bearer ${token}`;\r\n      }\r\n    }\r\n\r\n    try {\r\n      const controller = new AbortController();\r\n      const id = setTimeout(() => controller.abort(), timeout);\r\n\r\n      console.debug(`[API] Fetching ${url} ...`);\r\n      const response = await fetch(url, {\r\n        ...fetchOptions,\r\n        headers,\r\n        signal: controller.signal,\r\n      });\r\n      clearTimeout(id);\r\n\r\n      if (!response.ok) {\r\n        // Handle 401 Unauthorized globally\r\n        if (response.status === 401) {\r\n          if (\r\n            typeof window !== \"undefined\" &&\r\n            !window.location.pathname.startsWith(\"/auth\")\r\n          ) {\r\n            console.warn(\"[API] 401 Unauthorized - Redirecting to login\");\r\n            localStorage.removeItem(\"token\");\r\n            window.location.href = \"/auth/login\";\r\n          }\r\n          throw new APIError(401, \"Unauthorized\");\r\n        }\r\n\r\n        // Parse error response\r\n        let errorData;\r\n        try {\r\n          errorData = await response.json();\r\n        } catch {\r\n          errorData = { detail: response.statusText };\r\n        }\r\n\r\n        const errorMessage =\r\n          errorData.detail ||\r\n          errorData.message ||\r\n          `Request failed with status ${response.status}`;\r\n        throw new APIError(response.status, errorMessage, errorData);\r\n      }\r\n\r\n      // Handle 204 No Content\r\n      if (response.status === 204) {\r\n        return {} as T;\r\n      }\r\n\r\n      const data = await response.json();\r\n\r\n      // Populate Cache for GET requests\r\n      if (method === \"GET\") {\r\n        GET_CACHE.set(url, { data, timestamp: Date.now() });\r\n        // Cleanup old cache entries\r\n        if (GET_CACHE.size > 100) {\r\n          const oldestKey = GET_CACHE.keys().next().value;\r\n          if (oldestKey) GET_CACHE.delete(oldestKey);\r\n        }\r\n      }\r\n\r\n      return data;\r\n    } catch (error: any) {\r\n      if (error.name === \"AbortError\") {\r\n        console.error(`[API] Timeout for ${url}`);\r\n        throw new APIError(408, `Request timed out after ${timeout}ms`);\r\n      }\r\n\r\n      // Handle Network Errors (TypeError: Failed to fetch)\r\n      if (error instanceof TypeError && error.message === \"Failed to fetch\") {\r\n        console.error(`[API] Network Error: Could not connect to backend at ${url}. Is the server running?`);\r\n        if (typeof window !== \"undefined\") {\r\n          window.dispatchEvent(\r\n            new CustomEvent(\"api-error\", {\r\n              detail: {\r\n                title: \"Connection Failed\",\r\n                message: \"Could not connect to the server. Please check your internet connection or try again later.\",\r\n                type: \"critical\"\r\n              }\r\n            })\r\n          );\r\n        }\r\n        throw new APIError(0, \"Network Error: Backend Unreachable\");\r\n      }\r\n\r\n      if (retries > 0) {\r\n        console.warn(`[API] Retrying ${url} (${retries} attempts left)...`);\r\n        await new Promise((res) => setTimeout(res, 1000));\r\n        // Note: We don't recurse apiFetch here to avoid infinite deduplication loops if we were to just call apiFetch again.\r\n        // Instead we let the error propagate or handle retry logic differently if complex.\r\n        // For simplicity in this deductive model, we remove from pending map and re-throw to let upper layer retry,\r\n        // OR better: we can't easily retry inside the dedup promise without recursion complications.\r\n        // Let's keep it simple: Retries are valuable.\r\n        // We will simple RECURSE, but we need to be careful about PENDING_REQUESTS.\r\n        // Actually, if we recurse, the new call will find the PENDING entry (itself) and wait forever!\r\n        // FIX: Remove from pending before recursing.\r\n        PENDING_REQUESTS.delete(url);\r\n        return apiFetch<T>(endpoint, { ...options, retries: retries - 1 });\r\n      }\r\n\r\n      console.error(`[API] Error fetching ${url}:`, error);\r\n\r\n      // Dispatch global event for UI to verify\r\n      if (\r\n        typeof window !== \"undefined\" &&\r\n        options.method &&\r\n        options.method !== \"GET\"\r\n      ) {\r\n        window.dispatchEvent(\r\n          new CustomEvent(\"api-error\", {\r\n            detail: {\r\n              title: \"Operation Failed\",\r\n              message: error.message || \"Unknown error occurred\",\r\n              type: \"error\",\r\n            },\r\n          }),\r\n        );\r\n      }\r\n\r\n      throw error;\r\n    } finally {\r\n      // Clean up pending request\r\n      if (method === \"GET\") {\r\n        PENDING_REQUESTS.delete(url);\r\n      }\r\n    }\r\n  })();\r\n\r\n  if (method === \"GET\") {\r\n    PENDING_REQUESTS.set(url, fetchPromise);\r\n  }\r\n\r\n  return fetchPromise;\r\n}\r\n\r\n// ============================================================\r\n// STABLE API CLIENT\r\n// ============================================================\r\n\r\nexport const api = {\r\n  // DASHBOARD\r\n  getDashboardSummary: () => apiFetch<any>(\"/api/dashboard/summary\"),\r\n  getDashboardInsights: () => apiFetch<any[]>(\"/api/dashboard/insights\"),\r\n  getRecentActivity: (limit = 10) =>\r\n    apiFetch<any[]>(`/api/dashboard/activity?limit=${limit}`),\r\n\r\n  // PURCHASE ORDERS\r\n  listPOs: () => apiFetch<POListItem[]>(\"/api/po/\"),\r\n  getPOStats: () => apiFetch<POStats>(\"/api/po/stats\"),\r\n  getPO: (poNumber: string | number) => apiFetch<any>(`/api/po/${poNumber}`), // Alias for internal use\r\n  getPODetail: (poNumber: string | number) =>\r\n    apiFetch<any>(`/api/po/${poNumber}`), // Explicitly called by UI\r\n  checkPOHasDC: (poNumber: string | number) =>\r\n    apiFetch<any>(`/api/po/${poNumber}/dc`),\r\n  updatePO: (poNumber: string | number, data: any, items: any[]) =>\r\n    apiFetch(`/api/po/${poNumber}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ header: data, items }),\r\n    }),\r\n  createPO: (data: any) =>\r\n    apiFetch(\"/api/po/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  syncPO: (file: File) => {\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    return apiFetch<any>(\"/api/po/upload\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n    });\r\n  },\r\n  uploadPOBatch: (files: File[]) => {\r\n    const formData = new FormData();\r\n    files.forEach((file) => formData.append(\"files\", file));\r\n    return apiFetch<any>(\"/api/po/upload/batch\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n      timeout: 600000, // 10 minutes for large batch uploads\r\n    });\r\n  },\r\n\r\n  // DELIVERY CHALLANS\r\n  listDCs: () => apiFetch<DCListItem[]>(\"/api/dc/\"),\r\n  getDCStats: () => apiFetch<DCStats>(\"/api/dc/stats\"),\r\n  createDC: (data: any, items: any[]) =>\r\n    apiFetch(\"/api/dc/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ dc: data, items }),\r\n    }),\r\n  updateDC: (dcNumber: string, data: any, items: any[]) =>\r\n    apiFetch(`/api/dc/${dcNumber}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ dc: data, items }),\r\n    }),\r\n  getDC: (dcNumber: string) => apiFetch<any>(`/api/dc/${dcNumber}`),\r\n  getDCDetail: (dcNumber: string | null) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}`), // Alias for UI\r\n  checkDCHasInvoice: (dcNumber: string | null) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}/invoice`),\r\n  deleteDC: (dcNumber: string) =>\r\n    apiFetch<any>(`/api/dc/${dcNumber}`, { method: \"DELETE\" }),\r\n\r\n  // INVOICES\r\n  listInvoices: () => apiFetch<InvoiceListItem[]>(\"/api/invoice/\"),\r\n  getInvoiceStats: () => apiFetch<InvoiceStats>(\"/api/invoice/stats\"),\r\n  createInvoice: (data: any) =>\r\n    apiFetch(\"/api/invoice/\", { method: \"POST\", body: JSON.stringify(data) }),\r\n  getInvoiceDetail: (invoiceNumber: string) =>\r\n    apiFetch<any>(`/api/invoice/${encodeURIComponent(invoiceNumber)}`),\r\n\r\n  // COMMON\r\n  checkDuplicateNumber: (\r\n    type: \"DC\" | \"Invoice\",\r\n    number: string,\r\n    date: string,\r\n  ) =>\r\n    apiFetch<{ exists: boolean; financial_year: string; conflict_type?: string | null }>(\r\n      `/api/common/check-duplicate?type=${type}&number=${encodeURIComponent(number)}&date=${date}`,\r\n    ),\r\n\r\n  // SRVS\r\n  listSRVs: (poId?: string | number) =>\r\n    apiFetch<SRVListItem[]>(poId ? `/api/srv/po/${poId}/srvs` : \"/api/srv/\"),\r\n  getSRVStats: () => apiFetch<SRVStats>(\"/api/srv/stats\"),\r\n  uploadSRVBatch: (files: File[]) => {\r\n    const formData = new FormData();\r\n    files.forEach((file) => formData.append(\"files\", file));\r\n    return apiFetch<any>(\"/api/srv/upload/batch\", {\r\n      method: \"POST\",\r\n      body: formData,\r\n      headers: {},\r\n      timeout: 600000,\r\n    });\r\n  },\r\n  getSRV: (srvNumber: string) => apiFetch<any>(`/api/srv/${encodeURIComponent(srvNumber)}`),\r\n  deleteSRV: (srvNumber: string) =>\r\n    apiFetch<void>(`/api/srv/${srvNumber}`, { method: \"DELETE\" }),\r\n\r\n  // SETTINGS\r\n  getSettings: () => apiFetch<Settings>(\"/api/settings/\"),\r\n  updateSetting: (key: string, value: string) =>\r\n    apiFetch(\"/api/settings/\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ key, value }),\r\n    }),\r\n  updateSettingsBatch: (settings: { key: string; value: string }[]) =>\r\n    apiFetch(\"/api/settings/batch\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(settings),\r\n    }),\r\n\r\n  // PO NOTES\r\n  getPONotes: () => apiFetch<PONote[]>(\"/api/po-notes/\"),\r\n  getPONote: (id: string | number) => apiFetch<PONote>(`/api/po-notes/${id}`),\r\n  createPONote: (data: Partial<PONote>) =>\r\n    apiFetch<PONote>(\"/api/po-notes/\", { method: \"POST\", body: JSON.stringify(data) }),\r\n  updatePONote: (id: string | number, data: Partial<PONote>) =>\r\n    apiFetch<PONote>(`/api/po-notes/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  deletePONote: (id: string | number) =>\r\n    apiFetch<void>(`/api/po-notes/${id}`, { method: \"DELETE\" }),\r\n\r\n  // REPORTS (RECONCILIATION)\r\n  getReconciliation: (poNumber: string | number) =>\r\n    apiFetch<any[]>(`/api/reports/reconciliation?po=${poNumber}`), // Corrected to reports endpoint\r\n  getReconciliationLots: (poNumber: string | number) =>\r\n    apiFetch<any>(`/api/dc/po/${poNumber}/lots`),\r\n\r\n\r\n  // REPORTS\r\n  getReports: (\r\n    type: \"sales\" | \"reconciliation\" | \"dc_register\" | \"invoice_register\" | \"pending\",\r\n    params: string\r\n  ) => {\r\n    // Map internal types to API endpoints if they differ, or use common logic\r\n    // endpoints: /api/reports/sales, /api/reports/reconciliation, /api/reports/register/dc, etc.\r\n    let endpoint = \"\";\r\n    switch (type) {\r\n      case \"sales\": endpoint = \"/api/reports/sales\"; break;\r\n      case \"reconciliation\": endpoint = \"/api/reports/reconciliation\"; break;\r\n      case \"dc_register\": endpoint = \"/api/reports/register/dc\"; break; // Note: Frontend used /register/dc\r\n      case \"invoice_register\": endpoint = \"/api/reports/register/invoice\"; break;\r\n      case \"pending\": endpoint = \"/api/reports/pending\"; break;\r\n      default: throw new Error(`Unknown report type: ${type}`);\r\n    }\r\n    return apiFetch<any[]>(`${endpoint}?${params}`);\r\n  },\r\n  getReport: (type: string, dateParams: string) =>\r\n    apiFetch<any[]>(`/api/reports/${type}?${dateParams}`),\r\n  exportReport: (type: string, dateParams: string) => {\r\n    // Reports export usually calls the same endpoint with export=true\r\n    // But we need to handle the URL construction carefully\r\n    // Reusing the logic from getReports but with export flag\r\n    let endpoint = \"\";\r\n    switch (type) {\r\n      case \"sales\": endpoint = \"/api/reports/sales\"; break;\r\n      case \"reconciliation\": endpoint = \"/api/reports/reconciliation\"; break;\r\n      case \"dc_register\": endpoint = \"/api/reports/register/dc\"; break;\r\n      case \"invoice_register\": endpoint = \"/api/reports/register/invoice\"; break;\r\n      case \"pending\": endpoint = \"/api/reports/pending\"; break;\r\n      default: endpoint = `/api/reports/${type}`; // Fallback\r\n    }\r\n    const baseUrl = API_BASE_URL;\r\n    window.open(`${baseUrl}${endpoint}?export=true&${dateParams}`, \"_blank\");\r\n  },\r\n\r\n  // SEARCH\r\n  searchGlobal: (q: string) =>\r\n    apiFetch<{ results: SearchResult[] }>(\r\n      `/api/search/?q=${encodeURIComponent(q)}`,\r\n    ).then((res) => res.results),\r\n\r\n  // --- Buyers ---\r\n  getBuyers: () => apiFetch<Buyer[]>(\"/api/buyers\"),\r\n  createBuyer: (data: Partial<Buyer>) =>\r\n    apiFetch<Buyer>(\"/api/buyers\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  updateBuyer: (id: number, data: Partial<Buyer>) =>\r\n    apiFetch<Buyer>(`/api/buyers/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    }),\r\n  setBuyerDefault: (id: number) =>\r\n    apiFetch<Buyer>(`/api/buyers/${id}/default`, { method: \"PUT\" }),\r\n  deleteBuyer: (id: number) => apiFetch<{ success: boolean }>(`/api/buyers/${id}`, { method: \"DELETE\" }),\r\n\r\n  // ALERTS (Missing endpoints)\r\n  listAlerts: (acknowledged: boolean = false) =>\r\n    apiFetch<any[]>(`/api/alerts/?acknowledged=${acknowledged}`),\r\n  acknowledgeAlert: (id: string | number) =>\r\n    apiFetch<void>(`/api/alerts/${id}/acknowledge`, { method: \"PUT\" }),\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\apiMonitor.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":43,"column":13,"nodeType":"MemberExpression","messageId":"limited","endLine":43,"endColumn":24,"suggestions":[{"fix":{"range":[1147,1424],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * API Client with Monitoring\r\n * Tracks all API requests for debugging and performance monitoring\r\n */\r\ninterface RequestLog {\r\n    method: string;\r\n    url: string;\r\n    timestamp: string;\r\n    duration?: number;\r\n    status?: number;\r\n    error?: string;\r\n    requestId?: string;\r\n}\r\n\r\nclass APIMonitor {\r\n    private logs: RequestLog[] = [];\r\n    private maxLogs = 100;\r\n    private errorCount = 0;\r\n    private successCount = 0;\r\n\r\n    logRequest(log: RequestLog) {\r\n        this.logs.push(log);\r\n\r\n        // Track success/error counts\r\n        if (log.error || (log.status && log.status >= 400)) {\r\n            this.errorCount++;\r\n        } else if (log.status && log.status < 400) {\r\n            this.successCount++;\r\n        }\r\n\r\n        // Keep only recent logs\r\n        if (this.logs.length > this.maxLogs) {\r\n            this.logs.shift();\r\n        }\r\n\r\n        // Log to console in development\r\n        if (process.env.NODE_ENV === \"development\") {\r\n            const emoji = log.error\r\n                ? \"âŒ\"\r\n                : log.status && log.status >= 400\r\n                    ? \"âš ï¸\"\r\n                    : \"âœ…\";\r\n            console.log(\r\n                `[API ${emoji}]`,\r\n                log.method,\r\n                log.url,\r\n                log.duration ? `${log.duration.toFixed(0)}ms` : \"\",\r\n                log.status ? `HTTP ${log.status}` : \"\",\r\n                log.error || \"\"\r\n            );\r\n        }\r\n    }\r\n\r\n    getLogs(): RequestLog[] {\r\n        return [...this.logs];\r\n    }\r\n\r\n    getRecentErrors(count: number = 10): RequestLog[] {\r\n        return this.logs\r\n            .filter((log) => log.error || (log.status && log.status >= 400))\r\n            .slice(-count);\r\n    }\r\n\r\n    getErrorRate(): number {\r\n        const total = this.errorCount + this.successCount;\r\n        if (total === 0) return 0;\r\n        return this.errorCount / total;\r\n    }\r\n\r\n    getStats() {\r\n        const recentLogs = this.logs.slice(-20);\r\n        const avgDuration =\r\n            recentLogs.reduce((sum, log) => sum + (log.duration || 0), 0) /\r\n            recentLogs.length;\r\n\r\n        return {\r\n            totalRequests: this.logs.length,\r\n            successCount: this.successCount,\r\n            errorCount: this.errorCount,\r\n            errorRate: this.getErrorRate(),\r\n            avgDuration: Math.round(avgDuration),\r\n            recentErrors: this.getRecentErrors(5),\r\n        };\r\n    }\r\n\r\n    clear() {\r\n        this.logs = [];\r\n        this.errorCount = 0;\r\n        this.successCount = 0;\r\n    }\r\n}\r\n\r\nexport const apiMonitor = new APIMonitor();\r\n\r\n/**\r\n * Monitored fetch wrapper\r\n * Automatically logs all requests with timing and status\r\n */\r\nexport async function monitoredFetch(\r\n    url: string,\r\n    options?: RequestInit\r\n): Promise<Response> {\r\n    const startTime = performance.now();\r\n    const log: RequestLog = {\r\n        method: options?.method || \"GET\",\r\n        url,\r\n        timestamp: new Date().toISOString(),\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(url, options);\r\n        log.duration = performance.now() - startTime;\r\n        log.status = response.status;\r\n        log.requestId = response.headers.get(\"X-Request-ID\") || undefined;\r\n\r\n        if (!response.ok) {\r\n            log.error = `HTTP ${response.status}: ${response.statusText}`;\r\n        }\r\n\r\n        apiMonitor.logRequest(log);\r\n        return response;\r\n    } catch (error) {\r\n        log.duration = performance.now() - startTime;\r\n        log.error = error instanceof Error ? error.message : \"Unknown error\";\r\n        apiMonitor.logRequest(log);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Get API monitoring stats\r\n * Useful for debugging and performance analysis\r\n */\r\nexport function getAPIStats() {\r\n    return apiMonitor.getStats();\r\n}\r\n\r\n/**\r\n * Clear API monitoring logs\r\n */\r\nexport function clearAPILogs() {\r\n    apiMonitor.clear();\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\design-registry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\design-tokens.schema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\hooks\\useDebounce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\routes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\tts.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[920,923],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[920,923],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Text-to-Speech Utility using Web Speech API\r\n * Optimized for natural voice delivery and queue management\r\n */\r\nclass TTSManager {\r\n    private synthesis: SpeechSynthesis;\r\n    private voice: SpeechSynthesisVoice | null = null;\r\n    private queue: { text: string; onEnd?: () => void }[] = [];\r\n    private isSpeaking = false;\r\n    private enabled = true;\r\n\r\n    constructor() {\r\n        if (typeof window !== \"undefined\") {\r\n            this.synthesis = window.speechSynthesis;\r\n            // Load voices\r\n            this.loadVoice();\r\n            if (this.synthesis.onvoiceschanged !== undefined) {\r\n                this.synthesis.onvoiceschanged = () => this.loadVoice();\r\n            }\r\n        } else {\r\n            // Server-side fallback (noop)\r\n            this.synthesis = {\r\n                speak: () => { },\r\n                cancel: () => { },\r\n                getVoices: () => [],\r\n            } as any;\r\n        }\r\n    }\r\n\r\n    private loadVoice() {\r\n        const voices = this.synthesis.getVoices();\r\n        // Prefer Google US English or Microsoft Zira/David\r\n        this.voice =\r\n            voices.find((v) => v.name.includes(\"Google US English\")) ||\r\n            voices.find((v) => v.name.includes(\"Zira\")) ||\r\n            voices.find((v) => v.lang === \"en-US\") ||\r\n            voices[0] ||\r\n            null;\r\n    }\r\n\r\n    public speak(\r\n        text: string,\r\n        priority: \"normal\" | \"high\" = \"normal\",\r\n        onEnd?: () => void\r\n    ) {\r\n        if (!this.enabled || !text) {\r\n            if (onEnd) onEnd();\r\n            return;\r\n        }\r\n\r\n        if (priority === \"high\") {\r\n            this.stop();\r\n            this.queue = [{ text, onEnd }];\r\n            this.processQueue();\r\n        } else {\r\n            this.queue.push({ text, onEnd });\r\n            if (!this.isSpeaking) {\r\n                this.processQueue();\r\n            }\r\n        }\r\n    }\r\n\r\n    private processQueue() {\r\n        if (this.queue.length === 0) {\r\n            this.isSpeaking = false;\r\n            return;\r\n        }\r\n\r\n        this.isSpeaking = true;\r\n        const item = this.queue.shift()!;\r\n        const utterance = new SpeechSynthesisUtterance(item.text);\r\n        if (this.voice) utterance.voice = this.voice;\r\n\r\n        // Optimize rate/pitch\r\n        utterance.rate = 1.1; // Slightly faster\r\n        utterance.pitch = 1.0;\r\n\r\n        utterance.onend = () => {\r\n            if (item.onEnd) item.onEnd();\r\n            this.processQueue();\r\n        };\r\n\r\n        utterance.onerror = (e) => {\r\n            console.error(\"TTS Error:\", e);\r\n            this.isSpeaking = false;\r\n            if (item.onEnd) item.onEnd();\r\n        };\r\n\r\n        this.synthesis.speak(utterance);\r\n    }\r\n\r\n    public stop() {\r\n        this.synthesis.cancel();\r\n        this.queue = [];\r\n        this.isSpeaking = false;\r\n    }\r\n\r\n    public setEnabled(enabled: boolean) {\r\n        this.enabled = enabled;\r\n        if (!enabled) this.stop();\r\n    }\r\n}\r\n\r\nexport const tts = new TTSManager();\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\uiAdapters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\uiContext.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[197,200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[197,200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[235,238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[235,238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1214,1217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1214,1217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface UIContext {\r\n    current_page: string;\r\n    active_entity_id?: string;\r\n    active_entity_type?: \"po\" | \"dc\" | \"invoice\";\r\n    visible_ids: string[];\r\n    filters?: Record<string, any>;\r\n    form_data?: Record<string, any>;\r\n}\r\n\r\nclass UIContextManager {\r\n    private context: UIContext = {\r\n        current_page: \"dashboard\",\r\n        visible_ids: [],\r\n        filters: {},\r\n    };\r\n\r\n    // Update the current page identifier\r\n    setPage(page: string) {\r\n        this.context.current_page = page;\r\n        // Reset specific context when changing pages unless explicit preservation needed\r\n        this.context.active_entity_id = undefined;\r\n        this.context.active_entity_type = undefined;\r\n    }\r\n\r\n    // Set the active entity being viewed/edited\r\n    setActiveEntity(type: \"po\" | \"dc\" | \"invoice\", id: string) {\r\n        this.context.active_entity_type = type;\r\n        this.context.active_entity_id = id;\r\n    }\r\n\r\n    // Update list of currently visible record IDs (for \"that\" reference)\r\n    setVisibleIds(ids: string[]) {\r\n        this.context.visible_ids = ids;\r\n    }\r\n\r\n    // Update current filters to help agent understand what user sees\r\n    setFilters(filters: Record<string, any>) {\r\n        this.context.filters = filters;\r\n    }\r\n\r\n    // Get a snapshot of the context to send with voice request\r\n    getContext(): UIContext {\r\n        return { ...this.context };\r\n    }\r\n}\r\n\r\n// Global singleton instance\r\nexport const uiContext = new UIContextManager();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\lib\\utils.ts","messages":[{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":13,"column":37,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":13,"endColumn":38,"suggestions":[{"messageId":"removeEscape","fix":{"range":[438,439],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[438,438],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":13,"column":39,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":13,"endColumn":40,"suggestions":[{"messageId":"removeEscape","fix":{"range":[440,441],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[440,440],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":13,"column":50,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":13,"endColumn":51,"suggestions":[{"messageId":"removeEscape","fix":{"range":[451,452],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[451,451],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":13,"column":52,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":13,"endColumn":53,"suggestions":[{"messageId":"removeEscape","fix":{"range":[453,454],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[453,453],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\/.","line":14,"column":43,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":14,"endColumn":44,"suggestions":[{"messageId":"removeEscape","fix":{"range":[511,512],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[511,511],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\-.","line":14,"column":45,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":14,"endColumn":46,"suggestions":[{"messageId":"removeEscape","fix":{"range":[513,514],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[513,513],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n\r\nexport function formatDate(dateStr: string | null | undefined): string {\r\n    if (!dateStr || dateStr === \"-\") return \"-\";\r\n    try {\r\n        let date: Date;\r\n        // Try to parse dd/mm/yyyy or dd-mm-yyyy format first\r\n        if (dateStr.match(/^\\d{1,2}[\\/\\-]\\d{1,2}[\\/\\-]\\d{4}$/)) {\r\n            const parts = dateStr.split(/[\\/\\-]/);\r\n            // Assuming dd/mm/yyyy format\r\n            date = new Date(\r\n                parseInt(parts[2]),\r\n                parseInt(parts[1]) - 1,\r\n                parseInt(parts[0])\r\n            );\r\n        } else {\r\n            // Try standard ISO format or other formats\r\n            date = new Date(dateStr);\r\n        }\r\n\r\n        if (isNaN(date.getTime())) return \"-\";\r\n\r\n        const day = date.getDate().toString().padStart(2, \"0\");\r\n        const months = [\r\n            \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\r\n            \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\r\n        ];\r\n        const month = months[date.getMonth()];\r\n        const year = date.getFullYear();\r\n\r\n        return `${day}-${month}-${year}`;\r\n    } catch {\r\n        return \"-\";\r\n    }\r\n}\r\n\r\nexport function formatIndianCurrency(\r\n    amount: number | null | undefined\r\n): string {\r\n    if (amount === null || amount === undefined) return \"â‚¹0\";\r\n    const isNeg = amount < 0;\r\n    const absAmount = Math.abs(amount);\r\n    let formatted = \"\";\r\n\r\n    if (absAmount >= 10000000) {\r\n        formatted = `${(absAmount / 10000000).toFixed(2)} Cr`;\r\n    } else if (absAmount >= 100000) {\r\n        formatted = `${(absAmount / 100000).toFixed(2)} L`;\r\n    } else {\r\n        formatted = absAmount.toLocaleString(\"en-IN\");\r\n    }\r\n\r\n    return `${isNeg ? \"- \" : \"\"}â‚¹${formatted}`;\r\n}\r\n\r\nfunction numberToWords(num: number): string {\r\n    if (num === 0) return \"Zero\";\r\n    const ones = [\r\n        \"\", \"One\", \"Two\", \"Three\", \"Four\", \"Five\", \"Six\", \"Seven\", \"Eight\", \"Nine\",\r\n    ];\r\n    const tens = [\r\n        \"\", \"\", \"Twenty\", \"Thirty\", \"Forty\", \"Fifty\", \"Sixty\", \"Seventy\", \"Eighty\", \"Ninety\",\r\n    ];\r\n    const teens = [\r\n        \"Ten\", \"Eleven\", \"Twelve\", \"Thirteen\", \"Fourteen\", \"Fifteen\", \"Sixteen\", \"Seventeen\", \"Eighteen\", \"Nineteen\",\r\n    ];\r\n\r\n    function convertLessThanThousand(n: number): string {\r\n        if (n === 0) return \"\";\r\n        if (n < 10) return ones[n];\r\n        if (n < 20) return teens[n - 10];\r\n        if (n < 100) return tens[Math.floor(n / 10)] + (n % 10 !== 0 ? \" \" + ones[n % 10] : \"\");\r\n        return ones[Math.floor(n / 100)] + \" Hundred\" + (n % 100 !== 0 ? \" and \" + convertLessThanThousand(n % 100) : \"\");\r\n    }\r\n\r\n    const crore = Math.floor(num / 10000000);\r\n    const lakh = Math.floor((num % 10000000) / 100000);\r\n    const thousand = Math.floor((num % 100000) / 1000);\r\n    const remainder = num % 1000;\r\n\r\n    let result = \"\";\r\n    if (crore > 0) result += convertLessThanThousand(crore) + \" Crore \";\r\n    if (lakh > 0) result += convertLessThanThousand(lakh) + \" Lakh \";\r\n    if (thousand > 0) result += convertLessThanThousand(thousand) + \" Thousand \";\r\n    if (remainder > 0) result += convertLessThanThousand(remainder);\r\n\r\n    return result.trim();\r\n}\r\n\r\nexport function amountInWords(amount: number): string {\r\n    const rupees = Math.floor(amount);\r\n    const paise = Math.round((amount - rupees) * 100);\r\n    let words = \"Rupees \" + numberToWords(rupees);\r\n    if (paise > 0) words += \" and Paise \" + numberToWords(paise);\r\n    words += \" Only\";\r\n    return words;\r\n}\r\n\r\nexport function getFinancialYear(dateStr?: string): string {\r\n    const date = dateStr ? new Date(dateStr) : new Date();\r\n    if (isNaN(date.getTime())) return getFinancialYear();\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth() + 1; // 1-12\r\n    if (month >= 4) {\r\n        return `${year}-${(year + 1).toString().slice(-2)}`;\r\n    } else {\r\n        return `${year - 1}-${year.toString().slice(-2)}`;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\next-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\scripts\\validate-tokens.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TOKENS_PATH' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":42,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":63,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":63,"endColumn":16,"suggestions":[{"fix":{"range":[2141,2196],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement. Only these console methods are allowed: warn, error.","line":64,"column":5,"nodeType":"MemberExpression","messageId":"limited","endLine":64,"endColumn":16,"suggestions":[{"fix":{"range":[2202,2282],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fs from \"fs\";\r\nimport path from \"path\";\r\nimport { z } from \"zod\";\r\nimport { createHash } from \"crypto\";\r\n\r\n// Embedded Schema to ensure robustness in standalone script execution\r\nconst designTokensSchema = z.object({\r\n    theme: z.enum([\"dark\", \"light\"]),\r\n    brand: z.object({\r\n        primary: z.string(),\r\n        background: z.string(),\r\n    }),\r\n    effects: z.object({\r\n        surface: z.enum([\"claymorphic\", \"flat\", \"glass\"]),\r\n        depth: z.string(),\r\n        interaction: z.object({\r\n            hover: z.string(),\r\n            transition_ms: z.number(),\r\n        }),\r\n        glass: z.enum([\"optional\", \"required\", \"none\"]),\r\n    }),\r\n    motion: z.object({\r\n        library: z.string(),\r\n        reduce_on_low_power_devices: z.boolean(),\r\n    }),\r\n    layout: z.object({\r\n        radius_scale: z.array(z.string()),\r\n        layout_mode: z.string().optional(), // Added resiliency\r\n        shadow_style: z.string(),\r\n        padding_min: z.string(),\r\n        feedback_states: z.array(z.string()),\r\n    }),\r\n    performance: z.object({\r\n        lazy_load_heavy_components: z.boolean(),\r\n        avoid_re_render_chains: z.boolean(),\r\n        memoize_static_ui_parts: z.boolean(),\r\n        critical_css_in_bundle: z.boolean(),\r\n    }),\r\n}); // Removed .strict() for now to allow minor flexibility during dev, or keep if strict requirement. User said strict.\r\n// User said \"Use .strict() to prevent silent corruption\". I will keep strict but ensure JSON matches.\r\n\r\nconst TOKENS_PATH = path.join(process.cwd(), \"design-tokens.json\");\r\n\r\ntry {\r\n    const rootPath = path.resolve(process.cwd(), \"design-tokens.json\");\r\n\r\n    if (!fs.existsSync(rootPath)) {\r\n        console.error(\"âŒ design-tokens.json not found at project root!\");\r\n        process.exit(1);\r\n    }\r\n\r\n    const raw = fs.readFileSync(rootPath, \"utf-8\");\r\n    const json = JSON.parse(raw);\r\n\r\n    const result = designTokensSchema.strict().safeParse(json);\r\n\r\n    if (!result.success) {\r\n        console.error(\"âŒ Design Token Validation Failed:\");\r\n        console.error(JSON.stringify(result.error.format(), null, 2));\r\n        process.exit(1);\r\n    }\r\n\r\n    console.log(\"âœ… Design Tokens Validated Successfully.\");\r\n    console.log(`ðŸ”’ Token Hash: ${createHash('sha256').update(raw).digest('hex')}`);\r\n\r\n} catch (error) {\r\n    console.error(\"âŒ Fatal Error validating design tokens:\", error);\r\n    process.exit(1);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\store\\dcStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[420,423],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[420,423],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[476,479],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[476,479],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[545,548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[545,548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":76,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2537,2540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2537,2540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from \"zustand\";\r\nimport { DCDetail, DCItemRow, POHeader } from \"@/types\";\r\n\r\ninterface DCState {\r\n    data: DCDetail | null;\r\n    originalData: DCDetail | null;\r\n    isEditing: boolean;\r\n    poData: POHeader | null;\r\n    notes: string[];\r\n    isCheckingNumber: boolean;\r\n    isDuplicateNumber: boolean;\r\n    conflictType: string | null;\r\n\r\n    setDC: (data: DCDetail) => void;\r\n    setHeader: (header: any) => void;\r\n    updateHeader: (field: string, value: any) => void;\r\n    updateItem: (index: number, field: string, value: any) => void;\r\n    setEditing: (isEditing: boolean) => void;\r\n    reset: () => void;\r\n\r\n    setPOData: (data: POHeader | null) => void;\r\n    setItems: (items: DCItemRow[]) => void;\r\n    setNotes: (notes: string[]) => void;\r\n    addNote: () => void;\r\n    updateNote: (index: number, value: string) => void;\r\n    removeNote: (index: number) => void;\r\n    setNumberStatus: (isChecking: boolean, isDuplicate: boolean, conflictType: string | null) => void;\r\n}\r\n\r\nexport const useDCStore = create<DCState>((set) => ({\r\n    data: null,\r\n    originalData: null,\r\n    isEditing: false,\r\n    poData: null,\r\n    notes: [],\r\n    isCheckingNumber: false,\r\n    isDuplicateNumber: false,\r\n    conflictType: null,\r\n\r\n    setDC: (data) => set({\r\n        data,\r\n        originalData: data,\r\n        notes: data.header.remarks ? data.header.remarks.split(\"\\n\\n\") : []\r\n    }),\r\n    setHeader: (header) => set((state) => ({\r\n        data: state.data ? { ...state.data, header } : { header, items: [] }\r\n    })),\r\n    updateHeader: (field, value) => set((state) => {\r\n        if (!state.data) return state;\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                header: {\r\n                    ...state.data.header,\r\n                    [field]: value\r\n                }\r\n            }\r\n        };\r\n    }),\r\n    updateItem: (index, field, value) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        newItems[index] = { ...newItems[index], [field]: value };\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                items: newItems\r\n            }\r\n        };\r\n    }),\r\n    setEditing: (isEditing) => set({ isEditing }),\r\n    reset: () => set((state) => ({ data: state.originalData, isEditing: false })),\r\n\r\n    setPOData: (poData) => set({ poData }),\r\n    setItems: (items) => set((state) => ({\r\n        data: state.data ? { ...state.data, items } : { header: {} as any, items }\r\n    })),\r\n    setNotes: (notes) => set({ notes }),\r\n    addNote: () => set((state) => ({ notes: [...state.notes, \"\"] })),\r\n    updateNote: (index, value) => set((state) => {\r\n        const newNotes = [...state.notes];\r\n        newNotes[index] = value;\r\n        return { notes: newNotes };\r\n    }),\r\n    removeNote: (index) => set((state) => ({\r\n        notes: state.notes.filter((_, i) => i !== index)\r\n    })),\r\n    setNumberStatus: (isCheckingNumber, isDuplicateNumber, conflictType) =>\r\n        set({ isCheckingNumber, isDuplicateNumber, conflictType })\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\store\\invoiceStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[203,206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[203,206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[442,445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[442,445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[511,514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[511,514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[595,598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[595,598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1130,1133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1130,1133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2055,2058],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2055,2058],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from \"zustand\";\r\nimport { InvoiceDetail, InvoiceHeader, InvoiceItem } from \"@/types\";\r\n\r\ninterface InvoiceState {\r\n    data: InvoiceDetail | null;\r\n    isEditing: boolean;\r\n    dcData: any | null; // For creation flow\r\n    isCheckingNumber: boolean;\r\n    isDuplicateNumber: boolean;\r\n\r\n    setInvoice: (data: InvoiceDetail) => void;\r\n    setHeader: (header: InvoiceHeader) => void;\r\n    updateHeader: (field: string, value: any) => void;\r\n    updateItem: (index: number, field: string, value: any) => void;\r\n    setEditing: (isEditing: boolean) => void;\r\n    setDCData: (data: any) => void;\r\n    setItems: (items: InvoiceItem[]) => void;\r\n    setNumberStatus: (checking: boolean, duplicate: boolean) => void;\r\n    reset: () => void;\r\n}\r\n\r\nexport const useInvoiceStore = create<InvoiceState>((set) => ({\r\n    data: null,\r\n    isEditing: false,\r\n    dcData: null,\r\n    isCheckingNumber: false,\r\n    isDuplicateNumber: false,\r\n\r\n    setInvoice: (data) => set({ data, isEditing: false }),\r\n    setHeader: (header) => set((state) => ({\r\n        data: state.data ? { ...state.data, header } : { header, items: [] } as any\r\n    })),\r\n    updateHeader: (field, value) => set((state) => {\r\n        if (!state.data) return state;\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                header: {\r\n                    ...state.data.header,\r\n                    [field]: value\r\n                }\r\n            }\r\n        };\r\n    }),\r\n    updateItem: (index, field, value) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        newItems[index] = { ...newItems[index], [field]: value };\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                items: newItems\r\n            }\r\n        };\r\n    }),\r\n    setEditing: (isEditing) => set({ isEditing }),\r\n    setDCData: (dcData) => set({ dcData }),\r\n    setItems: (items) => set((state) => ({\r\n        data: state.data ? { ...state.data, items } : { items } as any\r\n    })),\r\n    setNumberStatus: (isCheckingNumber, isDuplicateNumber) => set({ isCheckingNumber, isDuplicateNumber }),\r\n    reset: () => set({ data: null, isEditing: false, dcData: null, isCheckingNumber: false, isDuplicateNumber: false })\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\store\\poStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[210,213],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[210,213],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[308,311],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[308,311],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[377,380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[377,380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[655,658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[655,658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1058,1061],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1058,1061],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { PODetail, POItem, PODelivery } from '@/types';\r\n\r\ninterface POState {\r\n    data: PODetail | null;\r\n    setPO: (po: PODetail | null) => void;\r\n    setHeader: (header: any) => void;\r\n    setItems: (items: POItem[]) => void;\r\n    updateHeader: (field: string, value: any) => void;\r\n    updateItem: (index: number, field: string, value: any) => void;\r\n    addItem: () => void;\r\n    removeItem: (index: number) => void;\r\n    addDelivery: (itemIdx: number) => void;\r\n    removeDelivery: (itemIdx: number, deliveryIdx: number) => void;\r\n    updateDelivery: (itemIdx: number, deliveryIdx: number, field: string, value: any) => void;\r\n    reset: () => void;\r\n}\r\n\r\nexport const usePOStore = create<POState>((set) => ({\r\n    data: null,\r\n    setPO: (po) => set({ data: po }),\r\n    setHeader: (header) => set((state) => ({\r\n        data: state.data ? { ...state.data, header } : { header, items: [] }\r\n    })),\r\n    setItems: (items) => set((state) => ({\r\n        data: state.data ? { ...state.data, items } : { header: {} as any, items }\r\n    })),\r\n    updateHeader: (field, value) => set((state) => {\r\n        if (!state.data) return state;\r\n        return {\r\n            data: {\r\n                ...state.data,\r\n                header: { ...state.data.header, [field]: value }\r\n            }\r\n        };\r\n    }),\r\n    updateItem: (index, field, value) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        newItems[index] = { ...newItems[index], [field]: value };\r\n\r\n        // Auto-calculate item value if rate or quantity changes\r\n        if (field === \"po_rate\" || field === \"ordered_quantity\") {\r\n            newItems[index].item_value =\r\n                (newItems[index].ordered_quantity || 0) * (newItems[index].po_rate || 0);\r\n        }\r\n\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    addItem: () => set((state) => {\r\n        if (!state.data) return state;\r\n        const items = state.data.items || [];\r\n        const maxItemNo = Math.max(...items.map((i) => i.po_item_no || 0), 0);\r\n        const newItem: POItem = {\r\n            po_item_no: maxItemNo + 1,\r\n            material_code: \"\",\r\n            material_description: \"NEW PROCUREMENT ITEM\",\r\n            drg_no: \"\",\r\n            unit: \"NOS\",\r\n            ordered_quantity: 0,\r\n            po_rate: 0,\r\n            item_value: 0,\r\n            delivered_quantity: 0,\r\n            deliveries: [{\r\n                lot_no: 1,\r\n                ordered_quantity: 0,\r\n                delivered_quantity: 0,\r\n                received_quantity: 0,\r\n                manual_override_qty: 0,\r\n                dely_date: new Date().toISOString().split(\"T\")[0],\r\n            }],\r\n        };\r\n        return { data: { ...state.data, items: [...items, newItem] } };\r\n    }),\r\n    removeItem: (index) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = state.data.items.filter((_, i) => i !== index);\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    addDelivery: (itemIdx) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        const item = newItems[itemIdx];\r\n        const deliveries = item.deliveries || [];\r\n        const maxLotNo = Math.max(...deliveries.map((d) => d.lot_no || 0), 0);\r\n        const newLot: PODelivery = {\r\n            lot_no: maxLotNo + 1,\r\n            ordered_quantity: 0,\r\n            delivered_quantity: 0,\r\n            received_quantity: 0,\r\n            manual_override_qty: 0,\r\n            dely_date: new Date().toISOString().split(\"T\")[0],\r\n        };\r\n        newItems[itemIdx].deliveries = [...deliveries, newLot];\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    removeDelivery: (itemIdx, deliveryIdx) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        newItems[itemIdx].deliveries = newItems[itemIdx].deliveries.filter((_, i) => i !== deliveryIdx);\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    updateDelivery: (itemIdx, deliveryIdx, field, value) => set((state) => {\r\n        if (!state.data || !state.data.items) return state;\r\n        const newItems = [...state.data.items];\r\n        const item = newItems[itemIdx];\r\n        const newDeliveries = [...item.deliveries];\r\n        newDeliveries[deliveryIdx] = { ...newDeliveries[deliveryIdx], [field]: value };\r\n\r\n        // Handle manual override flag\r\n        if (field === \"delivered_quantity\") {\r\n            newDeliveries[deliveryIdx].manual_override_qty = value;\r\n        }\r\n\r\n        newItems[itemIdx].deliveries = newDeliveries;\r\n        return { data: { ...state.data, items: newItems } };\r\n    }),\r\n    reset: () => set({ data: null }),\r\n}));\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\ui.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\ui\\dc.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":2,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":2,"endColumn":22,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[254,884],"text":"type DCUI = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[254,884],"text":"type DCUI = unknown"},"desc":"Replace empty interface with `unknown`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/** * UI-Specific Type Definitions for DC Components * * These types represent the VIEW MODEL layer for Delivery Challans. * Separate from API types to allow independent evolution. */ /** * DC UI Model * Optimized for form editing and display */\r\nexport interface DCUI { // Identity dcNumber: string; dcDate: string; // Reference poNumber?: number; // Supplier Information supplier: { phone: string; gstin: string; }; // Consignee Information consignee: { name: string; address: string; gstin?: string; }; // Department departmentNumber?: string; // Transport Details transport: { modeOfTransport?: string; vehicleNumber?: string; transporterName?: string; lrNumber?: string; ewayBillNumber?: string; }; // Inspection inspectionCompany?: string; // Items items: DCItemUIRow[]; // Notes remarks?: string; // Metadata createdAt?: string; hasInvoice?: boolean; invoiceNumber?: string;\r\n} /** * DC Item UI Row * Optimized for table editing */\r\nexport interface DCItemUIRow { id: string; // Local UI identifier lotNumber: string; description: string; orderedQuantity: number; remainingQuantity: number; dispatchQuantity: number; poItemId: string; hsnCode?: string; hsnRate?: number;\r\n} /** * DC Form Data * Used for form state management */\r\nexport interface DCFormData { dcNumber: string; dcDate: string; poNumber?: string; // Supplier supplierPhone: string; supplierGstin: string; // Consignee consigneeName: string; consigneeAddress: string; consigneeGstin?: string; // Department departmentNo?: string; // Transport modeOfTransport?: string; vehicleNumber?: string; transporterName?: string; lrNumber?: string; ewayBillNumber?: string; // Inspection inspectionCompany?: string; // Notes remarks?: string;\r\n} /** * DC List Item UI * Optimized for list/table display */\r\nexport interface DCListItemUI { dcNumber: string; dcDate: string; poNumber?: number; consigneeName: string; status: \"pending\" | \"delivered\"; totalValue: number; createdAt: string;\r\n} /** * DC Creation Request * What we send to the API */\r\nexport interface DCCreateRequest { dc_number: string; dc_date: string; po_number?: number; department_no?: string; consignee_name: string; consignee_gstin?: string; consignee_address: string; inspection_company?: string; eway_bill_no?: string; vehicle_no?: string; lr_no?: string; transporter?: string; mode_of_transport?: string; remarks?: string;\r\n} /** * DC Item for API */\r\nexport interface DCItemRequest { po_item_id: string; lot_no?: number; dispatch_qty: number; hsn_code?: string; hsn_rate?: number;\r\n} /** * DC Detail Response from API */\r\nexport interface DCDetailResponse { header: { dc_number: string; dc_date: string; po_number?: number; department_no?: string; consignee_name: string; consignee_gstin?: string; consignee_address: string; supplier_phone?: string; supplier_gstin?: string; inspection_company?: string; eway_bill_no?: string; vehicle_no?: string; lr_no?: string; transporter?: string; mode_of_transport?: string; remarks?: string; created_at?: string; }; items: Array<{ lot_no?: number; material_description?: string; lot_ordered_qty?: number; remaining_post_dc?: number; dispatch_qty?: number; po_item_id: string; hsn_code?: string; hsn_rate?: number; }>;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\ui\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\abhij\\.gemini\\antigravity\\scratch\\SenstoSales\\frontend\\types\\ui\\invoice.ts","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":2,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":2,"endColumn":27,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[373,1403],"text":"type InvoiceUI = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[373,1403],"text":"type InvoiceUI = unknown"},"desc":"Replace empty interface with `unknown`."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":4,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":4,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[1473,1936],"text":"type InvoiceItemUI = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[1473,1936],"text":"type InvoiceItemUI = unknown"},"desc":"Replace empty interface with `unknown`."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An empty interface declaration allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowInterfaces' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":6,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterface","endLine":6,"endColumn":33,"suggestions":[{"messageId":"replaceEmptyInterface","data":{"replacement":"object"},"fix":{"range":[2072,2967],"text":"type InvoiceFormData = object"},"desc":"Replace empty interface with `object`."},{"messageId":"replaceEmptyInterface","data":{"replacement":"unknown"},"fix":{"range":[2072,2967],"text":"type InvoiceFormData = unknown"},"desc":"Replace empty interface with `unknown`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":1043,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":1046,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5035,5038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5035,5038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/** * UI-Specific Type Definitions for Invoice Components * * These types represent the VIEW MODEL layer - what the UI needs to display and edit. * They are intentionally separate from API types to allow independent evolution. * * API Types (backend contract) â†’ Adapters â†’ UI Types (view model) */ /** * Invoice UI Model * Optimized for form editing and display */\r\nexport interface InvoiceUI { // Identity invoiceNumber: string; invoiceDate: string; // References dcNumber: string; poNumber?: string; // Buyer Information (editable in UI) buyer: { name: string; address: string; gstin: string; state: string; stateCode: string; placeOfSupply: string; }; // Order Details (read-only from DC/PO) order: { orderNumber?: string; orderDate?: string; }; // Transport Details (editable) transport: { vehicleNumber?: string; lrNumber?: string; transporterName?: string; destination?: string; termsOfDelivery?: string; }; // Payment & Financial payment: { gemcNumber?: string; modeOfPayment?: string; paymentTerms: string; // default: \"45 Days\" }; // Additional Documents documents: { despatchDocNumber?: string; srvNumber?: string; srvDate?: string; }; // Items (computed from DC) items: InvoiceItemUI[]; // Totals (computed by backend, read-only in UI) totals: { taxableValue: number; cgst: number; sgst: number; igst: number; totalInvoiceValue: number; }; // Metadata remarks?: string; createdAt?: string;\r\n} /** * Invoice Item UI Model * Optimized for table display */\r\nexport interface InvoiceItemUI { // Display fields lotNumber: string; description: string; hsnCode: string; // Quantity & Unit quantity: number; unit: string; // \"NO\", \"KG\", etc. // Pricing rate: number; taxableValue: number; // Tax breakdown (read-only, computed by backend) tax: { cgstRate: number; cgstAmount: number; sgstRate: number; sgstAmount: number; igstRate: number; igstAmount: number; }; // Total totalAmount: number; // Optional numberOfPackets?: number;\r\n} /** * Invoice Form Data * Used for form state management * NOTE: Uses snake_case to match existing component implementation */\r\nexport interface InvoiceFormData { // Auto-generated or provided invoice_number: string; invoice_date: string; // Required reference dc_number: string; challan_date?: string; // DC date for display // Buyer details (all editable) buyer_name: string; buyer_address?: string; buyer_gstin?: string; buyer_state?: string; buyer_state_code?: string; place_of_supply?: string; // Order details (from DC/PO) buyers_order_no?: string; buyers_order_date?: string; // Transport vehicle_no?: string; lr_no?: string; transporter?: string; destination?: string; terms_of_delivery?: string; // Payment gemc_number?: string; mode_of_payment?: string; payment_terms?: string; // Documents despatch_doc_no?: string; srv_no?: string; srv_date?: string; // Notes remarks?: string; // Computed totals (read-only, calculated by backend) taxable_value?: number; cgst?: number; sgst?: number; total_invoice_value?: number;\r\n} /** * Invoice List Item UI * Optimized for list/table display */\r\nexport interface InvoiceListItemUI { invoiceNumber: string; invoiceDate: string; buyerName: string; dcNumber: string; totalAmount: number; status: \"paid\" | \"pending\" | \"overdue\"; createdAt: string;\r\n} /** * Invoice Creation Request * What we send to the API */\r\nexport interface InvoiceCreateRequest { invoice_number?: string; // Optional, backend can generate invoice_date: string; dc_number: string; // Buyer buyer_name: string; buyer_address?: string; buyer_gstin?: string; buyer_state?: string; buyer_state_code?: string; place_of_supply?: string; // Order buyers_order_no?: string; buyers_order_date?: string; // Transport vehicle_no?: string; lr_no?: string; transporter?: string; destination?: string; terms_of_delivery?: string; // Payment gemc_number?: string; mode_of_payment?: string; payment_terms?: string; // Documents despatch_doc_no?: string; srv_no?: string; srv_date?: string; remarks?: string;\r\n} /** * Invoice Detail Response from API */\r\nexport interface InvoiceDetailResponse { header: { invoice_number: string; invoice_date: string; linked_dc_numbers: string; po_numbers?: string; buyer_name: string; buyer_address?: string; buyer_gstin?: string; buyer_state?: string; buyer_state_code?: string; place_of_supply?: string; buyers_order_no?: string; buyers_order_date?: string; vehicle_no?: string; lr_no?: string; transporter?: string; destination?: string; terms_of_delivery?: string; gemc_number?: string; mode_of_payment?: string; payment_terms?: string; despatch_doc_no?: string; srv_no?: string; srv_date?: string; taxable_value: number; cgst: number; sgst: number; igst: number; total_invoice_value: number; remarks?: string; created_at?: string; }; items: Array<{ po_sl_no: string; description: string; hsn_sac: string; quantity: number; unit: string; rate: number; taxable_value: number; cgst_rate: number; cgst_amount: number; sgst_rate: number; sgst_amount: number; igst_rate: number; igst_amount: number; total_amount: number; no_of_packets?: number; }>; linked_dcs?: any[];\r\n}\r\n","usedDeprecatedRules":[]}]