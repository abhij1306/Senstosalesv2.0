# ARCHITECTURE MANIFEST
# Authority: autonomous-steward.py
# Invariants for SenstoSales ERP

database:
  canonical_path: "db/business.db"
  max_db_files: 1
  engine: "sqlite"

frontend:
  allowed_dirs: 
    - "frontend/app/"
    - "frontend/components/"
    - "frontend/hooks/"
    - "frontend/lib/"
  forbidden_imports:
    - "sqlite3"
    - "sqlalchemy"
    - "fs" # No server-side FS in client components
  atomic_design: true
  max_rerenders_nav: 15
  skeleton_required: true
  fetch_mode: "parallel"

backend:
  allowed_dirs:
    - "backend/app/routers/"
    - "backend/app/services/"
    - "backend/app/repositories/"
    - "backend/scripts/"
  forbidden_folders:
    - "backend/app/utils" # Remediation required
  pattern: "Controller-Service-Repository"

scripts:
  allowed_dirs:
    - "scripts/"

constraints:
  no_llm_inside_db_tx: true
  documentation_budget: 120 # Tokens per doc snippet
  codegen_budget: 300 # Tokens per command env
  hardening_version: "v3.7.0"
