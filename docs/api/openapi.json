{
  "openapi": "3.0.0",
  "info": {
    "title": "SenstoSales API",
    "version": "1.0.0",
    "description": "Auto-generated API documentation",
    "contact": {
      "name": "SenstoSales Team"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8000",
      "description": "Development server"
    }
  ],
  "paths": {
    "/stats": {
      "get": {
        "summary": "",
        "operationId": "get_srv_stats",
        "tags": [
          "srv"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SRVStats"
                }
              }
            }
          }
        }
      }
    },
    "/{invoice_number:path}/download": {
      "get": {
        "summary": "Download Invoice as Excel",
        "operationId": "download_invoice_excel",
        "tags": [
          "invoice"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{invoice_number}": {
      "get": {
        "summary": "Get Invoice detail with items and linked DCs",
        "operationId": "get_invoice_detail",
        "tags": [
          "invoice"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/summary": {
      "get": {
        "summary": "Get dashboard summary statistics",
        "operationId": "get_dashboard_summary",
        "tags": [
          "dashboard"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DashboardSummary"
                }
              }
            }
          }
        }
      }
    },
    "/activity": {
      "get": {
        "summary": "No description",
        "operationId": "get_recent_activity",
        "tags": [
          "dashboard"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/insights": {
      "get": {
        "summary": "",
        "operationId": "get_dashboard_insights",
        "tags": [
          "dashboard"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Search across POs, DCs, and Invoices using deterministic logic",
        "operationId": "global_search",
        "tags": [
          "search"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/dict"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Manually create a Purchase Order from structured data",
        "operationId": "create_po_manual",
        "tags": [
          "po"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PODetail"
                }
              }
            }
          }
        }
      }
    },
    "/batch": {
      "post": {
        "summary": "Batch update settings",
        "operationId": "update_settings_batch",
        "tags": [
          "settings"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/reconciliation": {
      "get": {
        "summary": "No description",
        "operationId": "get_reconciliation_report",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/sales": {
      "get": {
        "summary": "No description",
        "operationId": "get_sales_report",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/register/dc": {
      "get": {
        "summary": "No description",
        "operationId": "get_dc_register",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/register/invoice": {
      "get": {
        "summary": "No description",
        "operationId": "get_invoice_register",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/register/po": {
      "get": {
        "summary": "No description",
        "operationId": "download_po_summary",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/pending": {
      "get": {
        "summary": "Pending PO Items",
        "operationId": "get_pending_items",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/kpis": {
      "get": {
        "summary": "Quick KPIs for dashboard (Legacy support)",
        "operationId": "get_dashboard_kpis",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/daily-dispatch": {
      "get": {
        "summary": "No description",
        "operationId": "get_daily_dispatch_report",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/guarantee-certificate": {
      "get": {
        "summary": "Generate Guarantee Certificate for a specific DC",
        "operationId": "get_guarantee_certificate",
        "tags": [
          "reports"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{id}": {
      "put": {
        "summary": "No description",
        "operationId": "update_buyer",
        "tags": [
          "buyers"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Buyer"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "No description",
        "operationId": "delete_buyer",
        "tags": [
          "buyers"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{id}/default": {
      "put": {
        "summary": "No description",
        "operationId": "set_buyer_default",
        "tags": [
          "buyers"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/check-duplicate": {
      "get": {
        "summary": "No description",
        "operationId": "check_duplicate_number",
        "tags": [
          "common"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/po/{po_number}/lots": {
      "get": {
        "summary": "",
        "operationId": "get_po_limit_lots",
        "tags": [
          "dc"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{dc_number}/invoice": {
      "get": {
        "summary": "Check if DC has an associated GST Invoice",
        "operationId": "check_dc_has_invoice_endpoint",
        "tags": [
          "dc"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{dc_number}/download": {
      "get": {
        "summary": "Download DC as Excel",
        "operationId": "download_dc_excel",
        "tags": [
          "dc"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{dc_number}": {
      "get": {
        "summary": "Get Delivery Challan detail with items",
        "operationId": "get_dc_detail",
        "tags": [
          "dc"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "No description",
        "operationId": "update_dc",
        "tags": [
          "dc"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete_dc",
        "tags": [
          "dc"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "",
        "operationId": "health_check",
        "tags": [
          "health"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/health/ready": {
      "get": {
        "summary": "",
        "operationId": "readiness_check",
        "tags": [
          "health"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/health/live": {
      "get": {
        "summary": "",
        "operationId": "liveness_check",
        "tags": [
          "health"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/health/metrics": {
      "get": {
        "summary": "",
        "operationId": "metrics",
        "tags": [
          "health"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{note_id}": {
      "get": {
        "summary": "Get a specific PO Note template",
        "operationId": "get_po_note",
        "tags": [
          "po_notes"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PONoteOut"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update a PO Note template",
        "operationId": "update_po_note",
        "tags": [
          "po_notes"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PONoteOut"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Soft delete a PO Note template",
        "operationId": "delete_po_note",
        "tags": [
          "po_notes"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{po_number}": {
      "get": {
        "summary": "Get Purchase Order detail with items and deliveries",
        "operationId": "get_po_detail",
        "tags": [
          "po"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PODetail"
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Update an existing Purchase Order",
        "operationId": "update_po",
        "tags": [
          "po"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PODetail"
                }
              }
            }
          }
        }
      }
    },
    "/{po_number}/context": {
      "get": {
        "summary": "Fetch PO context (Supplier/Buyer info) for DC/Invoice auto-fill",
        "operationId": "get_po_context",
        "tags": [
          "po"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{po_number}/dc": {
      "get": {
        "summary": "Check if PO has an associated Delivery Challan",
        "operationId": "check_po_has_dc",
        "tags": [
          "po"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/upload": {
      "post": {
        "summary": "Upload and parse PO HTML file",
        "operationId": "upload_po_html",
        "tags": [
          "po"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/upload/batch": {
      "post": {
        "summary": "No description",
        "operationId": "upload_batch_srvs",
        "tags": [
          "srv"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{po_number}/excel": {
      "get": {
        "summary": "Download PO as Excel",
        "operationId": "download_po_excel",
        "tags": [
          "po"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{po_number}/items/{item_no}/delivered_qty": {
      "patch": {
        "summary": "No description",
        "operationId": "update_delivered_qty",
        "tags": [
          "po"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/reset-db": {
      "post": {
        "summary": "",
        "operationId": "reset_database",
        "tags": [
          "system"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/{srv_number}": {
      "get": {
        "summary": "",
        "operationId": "get_srv_detail",
        "tags": [
          "srv"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SRVDetail"
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete_srv_endpoint",
        "tags": [
          "srv"
        ],
        "responses": {
          "200": {
            "description": "Successful response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {}
  }
}